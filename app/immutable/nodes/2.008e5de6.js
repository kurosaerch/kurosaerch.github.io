import{s as ne,e as E,a as D,t as X,c as S,b as R,f as v,g as L,d as x,o as g,C as pn,i as j,h as b,n as K,p as ce,x as Ie,q as Ze,ad as dn,I as We,y as Q,j as ve,U as he,V as Ne,k as ee,F as Fe,W as Oe,A as Ce,ac as xe,E as Qe,z as tt,B as nt,J as _n,K as gn,L as mn,M as hn,D as at,aa as $n,N as vn,l as Ae,$ as bn,Y as Re,ab as kn,m as wn}from"../chunks/scheduler.9ddb58b7.js";import{S as se,i as le,c as A,b as V,m as O,t as w,a as C,d as B,f as je,g as _e,e as ge}from"../chunks/index.ea5578de.js";import{g as yn}from"../chunks/globals.7f7f1b26.js";import{b as Wt}from"../chunks/paths.04592056.js";import{T as He}from"../chunks/TextButton.db0c5876.js";import{a as et,r as Ye}from"../chunks/results-store.db609e32.js";import{a as Je,B as En}from"../chunks/blocking-group-data.358160cd.js";import{b as Ve}from"../chunks/format-tag.9687384a.js";import{s as Xe,f as Ke,S as Sn}from"../chunks/search-builder.1f09dd7e.js";import{N as Cn,a as Yt,b as In,o as Tn}from"../chunks/tags-shortcut-store.b7ab74f6.js";import{e as be}from"../chunks/each.e59479a4.js";import{D as Jt,a as Zt,r as Qt}from"../chunks/result-columns-store.5bab8a28.js";import{R as Dn,I as Xt}from"../chunks/ModifierSelect.a9a7b68c.js";import{S as Ln}from"../chunks/Select.f65d8aa6.js";import{R as Pn}from"../chunks/RotatingTextSelect.6b90059c.js";import{R as Nn,S as xt,a as en,E as tn,b as jn,C as nn,P as sn,g as ln,f as pt,r as Rn,d as Fn,e as An,h as Vn,G as On,V as Bn,i as mt,c as Mn}from"../chunks/PreviewedImage.fb62704a.js";import{h as ht,u as zn}from"../chunks/await_block.bc50228e.js";import{L as _t}from"../chunks/LoadingAnimation.9c99af81.js";import{h as qn,i as Un,a as Hn}from"../chunks/always-loop-store.33c93ae3.js";import{p as Gn,S as Kn,b as Wn,c as Yn}from"../chunks/store-keys.22403613.js";import{i as Jn,g as Zn,a as Qn}from"../chunks/tags.49324235.js";import{b as rn}from"../chunks/blocked-content-store.5328bd93.js";import{S as Xn}from"../chunks/ScrollUpButton.ee38808d.js";import{b as xn}from"../chunks/analytics.e0f1cddf.js";import{L as es}from"../chunks/LynxMain.930294a4.js";import{S as ts}from"../chunks/Searchbar.9034b861.js";import{A as ns,K as ss}from"../chunks/KurosearchTitle.80f64cea.js";import{s as $t,n as ls}from"../chunks/supertags-store.a61cddbd.js";import{D as rs}from"../chunks/DetailedTag.dcaa45b8.js";function os(s){let e,n,t,l,o,r,a,i,c,u;return{c(){e=E("div"),n=E("div"),t=E("i"),l=D(),o=E("div"),r=E("h3"),a=X(s[0]),i=D(),c=E("span"),u=X(s[2]),this.h()},l(f){e=S(f,"DIV",{class:!0});var p=R(e);n=S(p,"DIV",{class:!0});var $=R(n);t=S($,"I",{class:!0}),R(t).forEach(v),$.forEach(v),l=L(p),o=S(p,"DIV",{});var d=R(o);r=S(d,"H3",{class:!0});var h=R(r);a=x(h,s[0]),h.forEach(v),i=L(d),c=S(d,"SPAN",{});var I=R(c);u=x(I,s[2]),I.forEach(v),d.forEach(v),p.forEach(v),this.h()},h(){g(t,"class",pn(s[1])+" svelte-1yohziu"),g(n,"class","icon svelte-1yohziu"),g(r,"class","svelte-1yohziu"),g(e,"class","error svelte-1yohziu")},m(f,p){j(f,e,p),b(e,n),b(n,t),b(e,l),b(e,o),b(o,r),b(r,a),b(o,i),b(o,c),b(c,u)},p:K,i:K,o:K,d(f){f&&v(e)}}}function is(s,e,n){let{error:t}=e,l=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return s.$$set=a=>{"error"in a&&n(3,t=a.error)},[l,o,r,t]}class as extends se{constructor(e){super(),le(this,e,is,os,ne,{error:3})}}function cs(s){let e;return{c(){e=X("Back to Top")},l(n){e=x(n,"Back to Top")},m(n,t){j(n,e,t)},d(n){n&&v(e)}}}function us(s){let e;return{c(){e=X("Reset Tags")},l(n){e=x(n,"Reset Tags")},m(n,t){j(n,e,t)},d(n){n&&v(e)}}}function fs(s){let e,n,t,l,o,r="You have seen everything there is to see...",a,i,c,u,f,p;return c=new He({props:{type:"secondary",title:"Scroll back up.",$$slots:{default:[cs]},$$scope:{ctx:s}}}),c.$on("click",s[0]),f=new He({props:{type:"secondary",title:"Reset tags.",$$slots:{default:[us]},$$scope:{ctx:s}}}),f.$on("click",s[1]),{c(){e=E("section"),n=E("img"),l=D(),o=E("p"),o.textContent=r,a=D(),i=E("div"),A(c.$$.fragment),u=D(),A(f.$$.fragment),this.h()},l($){e=S($,"SECTION",{class:!0});var d=R(e);n=S(d,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),l=L(d),o=S(d,"P",{"data-svelte-h":!0}),ce(o)!=="svelte-1i75mtf"&&(o.textContent=r),a=L(d),i=S(d,"DIV",{class:!0});var h=R(i);V(c.$$.fragment,h),u=L(h),V(f.$$.fragment,h),h.forEach(v),d.forEach(v),this.h()},h(){Ie(n.src,t=Wt+"/assets/lynxy-chibi-not-found.webp")||g(n,"src",t),g(n,"alt","No more results to load"),g(n,"width","1231"),g(n,"height","864"),g(n,"class","svelte-1b36daw"),g(i,"class","svelte-1b36daw"),g(e,"class","svelte-1b36daw")},m($,d){j($,e,d),b(e,n),b(e,l),b(e,o),b(e,a),b(e,i),O(c,i,null),b(i,u),O(f,i,null),p=!0},p($,[d]){const h={};d&4&&(h.$$scope={dirty:d,ctx:$}),c.$set(h);const I={};d&4&&(I.$$scope={dirty:d,ctx:$}),f.$set(I)},i($){p||(w(c.$$.fragment,$),w(f.$$.fragment,$),p=!0)},o($){C(c.$$.fragment,$),C(f.$$.fragment,$),p=!1},d($){$&&v(e),B(c),B(f)}}}function ps(s){return[()=>{window.scrollTo({top:0})},()=>{Je.reset(),et.reset()}]}class ds extends se{constructor(e){super(),le(this,e,ps,fs,ne,{})}}function vt(s,e,n){const t=s.slice();return t[5]=e[n][0],t[6]=e[n][1],t}function bt(s){let e,n,t,l=!1,o,r,a,i=s[6]+"",c,u,f,p,$;return f=dn(s[4][0]),{c(){e=E("input"),r=D(),a=E("label"),c=X(i),this.h()},l(d){e=S(d,"INPUT",{type:!0,name:!0,id:!0,class:!0}),r=L(d),a=S(d,"LABEL",{for:!0,class:!0});var h=R(a);c=x(h,i),h.forEach(v),this.h()},h(){g(e,"type","radio"),g(e,"name",n="group-"+s[1]),e.__value=t=s[5],We(e,e.__value),g(e,"id",o=s[1]+"-"+s[5]),g(e,"class","svelte-16oxivo"),g(a,"for",u=s[1]+"-"+s[5]),g(a,"class","svelte-16oxivo"),f.p(e)},m(d,h){j(d,e,h),e.checked=e.__value===s[0],j(d,r,h),j(d,a,h),b(a,c),p||($=Q(e,"change",s[3]),p=!0)},p(d,h){h&2&&n!==(n="group-"+d[1])&&g(e,"name",n),h&4&&t!==(t=d[5])&&(e.__value=t,We(e,e.__value),l=!0),h&6&&o!==(o=d[1]+"-"+d[5])&&g(e,"id",o),(l||h&5)&&(e.checked=e.__value===d[0]),h&4&&i!==(i=d[6]+"")&&ve(c,i),h&6&&u!==(u=d[1]+"-"+d[5])&&g(a,"for",u)},d(d){d&&(v(e),v(r),v(a)),f.r(),p=!1,$()}}}function _s(s){let e,n,t=be(Object.entries(s[2])),l=[];for(let o=0;o<t.length;o+=1)l[o]=bt(vt(s,t,o));return{c(){e=E("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=S(o,"DIV",{id:!0,role:!0,class:!0});var r=R(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(v),this.h()},h(){g(e,"id",n="group-"+s[1]),g(e,"role","radiogroup"),g(e,"class","svelte-16oxivo")},m(o,r){j(o,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(o,[r]){if(r&7){t=be(Object.entries(o[2]));let a;for(a=0;a<t.length;a+=1){const i=vt(o,t,a);l[a]?l[a].p(i,r):(l[a]=bt(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}r&2&&n!==(n="group-"+o[1])&&g(e,"id",n)},i:K,o:K,d(o){o&&v(e),Ze(l,o)}}}function gs(s,e,n){let{name:t}=e,{value:l}=e,{options:o}=e;const r=[[]];function a(){l=this.__value,n(0,l)}return s.$$set=i=>{"name"in i&&n(1,t=i.name),"value"in i&&n(0,l=i.value),"options"in i&&n(2,o=i.options)},[l,t,o,a,r]}class ms extends se{constructor(e){super(),le(this,e,gs,_s,ne,{name:1,value:0,options:2})}}const hs=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),on=Object.freeze({">=":"≥","<=":"≤"}),an=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),$s=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),vs=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),bs=(s,e)=>s===0&&e===">="?void 0:`Score ${on[e]} ${Ve(s)}`,ks=s=>s==="all"?void 0:an[s],ws=(s,e,n)=>{let t=ks(s),l=bs(e,n);return[t,l].filter(o=>o!==void 0).join(",")||"All"},ys=(s,e)=>hs[s][e];function Es(s){let e;return{c(){e=X("Done")},l(n){e=x(n,"Done")},m(n,t){j(n,e,t)},d(n){n&&v(e)}}}function Ss(s){let e;return{c(){e=X("Reset")},l(n){e=x(n,"Reset")},m(n,t){j(n,e,t)},d(n){n&&v(e)}}}function Cs(s){let e,n,t,l="Sorting and Filtering",o,r,a,i,c,u,f,p="Sorting",$,d,h,I,y,k,_,m,P,F,U="Filtering by Score",T,N,q,Y,fe,pe,ue,Z,te,H,W="Rating",oe,J,ke,we,$e,Ee,Le,Ge,Pe,st;function ct(M){s[5](M)}let Te={options:vs};s[1].direction!==void 0&&(Te.value=s[1].direction),h=new Dn({props:Te}),he.push(()=>je(h,"value",ct));function lt(M){s[6](M)}let Be={options:$s};s[1].property!==void 0&&(Be.value=s[1].property),k=new Ln({props:Be}),he.push(()=>je(k,"value",lt));function ft(M){s[7](M)}let rt={options:on};s[2].scoreComparator!==void 0&&(rt.value=s[2].scoreComparator),q=new Pn({props:rt}),he.push(()=>je(q,"value",ft));function Me(M){s[8](M)}let ze={min:0,max:1e4,step:1};s[2].scoreValue!==void 0&&(ze.value=s[2].scoreValue),pe=new Cn({props:ze}),he.push(()=>je(pe,"value",Me));function ae(M){s[9](M)}let qe={name:"rating",options:an};return s[2].rating!==void 0&&(qe.value=s[2].rating),J=new ms({props:qe}),he.push(()=>je(J,"value",ae)),$e=new He({props:{title:"Return to searching",$$slots:{default:[Es]},$$scope:{ctx:s}}}),$e.$on("click",s[3]),Le=new He({props:{title:"Reset sort and filter",type:"secondary",$$slots:{default:[Ss]},$$scope:{ctx:s}}}),Le.$on("click",s[4]),{c(){e=E("div"),n=E("div"),t=E("h3"),t.textContent=l,o=D(),r=E("div"),a=D(),i=E("button"),c=D(),u=E("div"),f=E("b"),f.textContent=p,$=D(),d=E("div"),A(h.$$.fragment),y=D(),A(k.$$.fragment),m=D(),P=E("div"),F=E("b"),F.textContent=U,T=D(),N=E("div"),A(q.$$.fragment),fe=D(),A(pe.$$.fragment),Z=D(),te=E("div"),H=E("b"),H.textContent=W,oe=D(),A(J.$$.fragment),we=D(),A($e.$$.fragment),Ee=D(),A(Le.$$.fragment),this.h()},l(M){e=S(M,"DIV",{class:!0});var re=R(e);n=S(re,"DIV",{class:!0});var z=R(n);t=S(z,"H3",{"data-svelte-h":!0}),ce(t)!=="svelte-15zouq3"&&(t.textContent=l),o=L(z),r=S(z,"DIV",{class:!0}),R(r).forEach(v),a=L(z),i=S(z,"BUTTON",{type:!0,class:!0}),R(i).forEach(v),z.forEach(v),c=L(re),u=S(re,"DIV",{});var G=R(u);f=S(G,"B",{class:!0,"data-svelte-h":!0}),ce(f)!=="svelte-ekzpgg"&&(f.textContent=p),$=L(G),d=S(G,"DIV",{class:!0});var de=R(d);V(h.$$.fragment,de),y=L(de),V(k.$$.fragment,de),de.forEach(v),G.forEach(v),m=L(re),P=S(re,"DIV",{});var Se=R(P);F=S(Se,"B",{class:!0,"data-svelte-h":!0}),ce(F)!=="svelte-1flca3"&&(F.textContent=U),T=L(Se),N=S(Se,"DIV",{class:!0});var ie=R(N);V(q.$$.fragment,ie),fe=L(ie),V(pe.$$.fragment,ie),ie.forEach(v),Se.forEach(v),Z=L(re),te=S(re,"DIV",{});var De=R(te);H=S(De,"B",{class:!0,"data-svelte-h":!0}),ce(H)!=="svelte-1lwyn2b"&&(H.textContent=W),oe=L(De),V(J.$$.fragment,De),De.forEach(v),we=L(re),V($e.$$.fragment,re),Ee=L(re),V(Le.$$.fragment,re),re.forEach(v),this.h()},h(){g(r,"class","spacer svelte-nizkv3"),g(i,"type","button"),g(i,"class","codicon codicon-close svelte-nizkv3"),g(n,"class","row svelte-nizkv3"),g(f,"class","svelte-nizkv3"),g(d,"class","row svelte-nizkv3"),g(F,"class","svelte-nizkv3"),g(N,"class","row svelte-nizkv3"),g(H,"class","svelte-nizkv3"),g(e,"class","container svelte-nizkv3")},m(M,re){j(M,e,re),b(e,n),b(n,t),b(n,o),b(n,r),b(n,a),b(n,i),b(e,c),b(e,u),b(u,f),b(u,$),b(u,d),O(h,d,null),b(d,y),O(k,d,null),b(e,m),b(e,P),b(P,F),b(P,T),b(P,N),O(q,N,null),b(N,fe),O(pe,N,null),b(e,Z),b(e,te),b(te,H),b(te,oe),O(J,te,null),b(e,we),O($e,e,null),b(e,Ee),O(Le,e,null),Ge=!0,Pe||(st=Q(i,"click",s[3]),Pe=!0)},p(M,re){const z={};!I&&re&2&&(I=!0,z.value=M[1].direction,Ne(()=>I=!1)),h.$set(z);const G={};!_&&re&2&&(_=!0,G.value=M[1].property,Ne(()=>_=!1)),k.$set(G);const de={};!Y&&re&4&&(Y=!0,de.value=M[2].scoreComparator,Ne(()=>Y=!1)),q.$set(de);const Se={};!ue&&re&4&&(ue=!0,Se.value=M[2].scoreValue,Ne(()=>ue=!1)),pe.$set(Se);const ie={};!ke&&re&4&&(ke=!0,ie.value=M[2].rating,Ne(()=>ke=!1)),J.$set(ie);const De={};re&4096&&(De.$$scope={dirty:re,ctx:M}),$e.$set(De);const me={};re&4096&&(me.$$scope={dirty:re,ctx:M}),Le.$set(me)},i(M){Ge||(w(h.$$.fragment,M),w(k.$$.fragment,M),w(q.$$.fragment,M),w(pe.$$.fragment,M),w(J.$$.fragment,M),w($e.$$.fragment,M),w(Le.$$.fragment,M),Ge=!0)},o(M){C(h.$$.fragment,M),C(k.$$.fragment,M),C(q.$$.fragment,M),C(pe.$$.fragment,M),C(J.$$.fragment,M),C($e.$$.fragment,M),C(Le.$$.fragment,M),Ge=!1},d(M){M&&v(e),B(h),B(k),B(q),B(pe),B(J),B($e),B(Le),Pe=!1,st()}}}function Is(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[Cs]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.dialog=s[0]),e=new Jt({props:o}),he.push(()=>je(e,"dialog",l)),e.$on("close",s[11]),{c(){A(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,a){O(e,r,a),t=!0},p(r,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],Ne(()=>n=!1)),e.$set(i)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Ts(s,e,n){let t,l;ee(s,Xe,h=>n(1,t=h)),ee(s,Ke,h=>n(2,l=h));let{dialog:o}=e;const r=()=>o.close(),a=()=>{Xe.reset(),Ke.reset()};function i(h){s.$$.not_equal(t.direction,h)&&(t.direction=h,Xe.set(t))}function c(h){s.$$.not_equal(t.property,h)&&(t.property=h,Xe.set(t))}function u(h){s.$$.not_equal(l.scoreComparator,h)&&(l.scoreComparator=h,Ke.set(l))}function f(h){s.$$.not_equal(l.scoreValue,h)&&(l.scoreValue=h,Ke.set(l))}function p(h){s.$$.not_equal(l.rating,h)&&(l.rating=h,Ke.set(l))}function $(h){o=h,n(0,o)}function d(h){Fe.call(this,s,h)}return s.$$set=h=>{"dialog"in h&&n(0,o=h.dialog)},[o,t,l,r,a,i,c,u,f,p,$,d]}class Ds extends se{constructor(e){super(),le(this,e,Ts,Is,ne,{dialog:0})}}function Ls(s){let e,n,t,l,o,r,a,i,c,u,f,p,$,d,h,I;function y(_){s[9](_)}let k={};return s[2]!==void 0&&(k.dialog=s[2]),p=new Ds({props:k}),he.push(()=>je(p,"dialog",y)),p.$on("close",s[10]),{c(){e=E("button"),n=E("i"),t=D(),l=E("span"),o=X(s[5]),r=D(),a=E("i"),i=D(),c=E("span"),u=X(s[4]),f=D(),A(p.$$.fragment),this.h()},l(_){e=S(_,"BUTTON",{type:!0,class:!0});var m=R(e);n=S(m,"I",{class:!0}),R(n).forEach(v),t=L(m),l=S(m,"SPAN",{class:!0});var P=R(l);o=x(P,s[5]),P.forEach(v),r=L(m),a=S(m,"I",{class:!0}),R(a).forEach(v),i=L(m),c=S(m,"SPAN",{class:!0});var F=R(c);u=x(F,s[4]),F.forEach(v),m.forEach(v),f=L(_),V(p.$$.fragment,_),this.h()},h(){g(n,"class","codicon codicon-filter svelte-3ooqm6"),g(l,"class","svelte-3ooqm6"),g(a,"class","codicon codicon-arrow-swap svelte-3ooqm6"),g(c,"class","svelte-3ooqm6"),g(e,"type","button"),g(e,"class","svelte-3ooqm6")},m(_,m){j(_,e,m),b(e,n),b(e,t),b(e,l),b(l,o),b(e,r),b(e,a),b(e,i),b(e,c),b(c,u),j(_,f,m),O(p,_,m),d=!0,h||(I=Q(e,"click",s[8]),h=!0)},p(_,[m]){(!d||m&32)&&ve(o,_[5]),(!d||m&16)&&ve(u,_[4]);const P={};!$&&m&4&&($=!0,P.dialog=_[2],Ne(()=>$=!1)),p.$set(P)},i(_){d||(w(p.$$.fragment,_),d=!0)},o(_){C(p.$$.fragment,_),d=!1},d(_){_&&(v(e),v(f)),B(p,_),h=!1,I()}}}function Ps(s,e,n){let t,l,o,r;ee(s,Xe,d=>n(0,o=d)),ee(s,Ke,d=>n(1,r=d));const a=Oe(),i=(d,h)=>JSON.stringify(Object.assign({},d,h));let c,u="";const f=()=>{n(3,u=i(o,r)),c.showModal(),Zt("dialog")};function p(d){c=d,n(2,c)}const $=()=>{i(o,r)!==u&&a("sortfilterupdate")};return s.$$.update=()=>{s.$$.dirty&2&&n(5,t=ws(r.rating,r.scoreValue,r.scoreComparator)),s.$$.dirty&1&&n(4,l=ys(o.property,o.direction))},[o,r,c,u,l,t,a,i,f,p,$]}class Ns extends se{constructor(e){super(),le(this,e,Ps,Ls,ne,{})}}function js(s){let e,n,t=Ve(s[1].postCount)+"",l,o,r,a,i;return a=new Ns({}),a.$on("sortfilterupdate",s[2]),{c(){e=E("div"),n=E("span"),l=X(t),o=X(" posts"),r=D(),A(a.$$.fragment),this.h()},l(c){e=S(c,"DIV",{class:!0});var u=R(e);n=S(u,"SPAN",{class:!0});var f=R(n);l=x(f,t),o=x(f," posts"),f.forEach(v),r=L(u),V(a.$$.fragment,u),u.forEach(v),this.h()},h(){g(n,"class","svelte-1f1ky2c"),Ce(n,"loading",s[0]),g(e,"class","svelte-1f1ky2c")},m(c,u){j(c,e,u),b(e,n),b(n,l),b(n,o),b(e,r),O(a,e,null),i=!0},p(c,[u]){(!i||u&2)&&t!==(t=Ve(c[1].postCount)+"")&&ve(l,t),(!i||u&1)&&Ce(n,"loading",c[0])},i(c){i||(w(a.$$.fragment,c),i=!0)},o(c){C(a.$$.fragment,c),i=!1},d(c){c&&v(e),B(a)}}}function Rs(s,e,n){let t;ee(s,Ye,r=>n(1,t=r));let{loading:l}=e;function o(r){Fe.call(this,s,r)}return s.$$set=r=>{"loading"in r&&n(0,l=r.loading)},[l,t,o]}class Fs extends se{constructor(e){super(),le(this,e,Rs,js,ne,{loading:0})}}const ut=s=>`post_${s}`;function kt(s){let e;const n=s[4].default,t=_n(n,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8)&&gn(t,n,l,l[3],e?hn(n,l[3],o,null):mn(l[3]),null)},i(l){e||(w(t,l),e=!0)},o(l){C(t,l),e=!1},d(l){t&&t.d(l)}}}function As(s){let e,n,t,l,o=s[1]&&kt(s);return{c(){e=E("div"),o&&o.c(),this.h()},l(r){e=S(r,"DIV",{role:!0,tabindex:!0,class:!0});var a=R(e);o&&o.l(a),a.forEach(v),this.h()},h(){g(e,"role","none"),g(e,"tabindex","-1"),g(e,"class","svelte-6sy8qz")},m(r,a){j(r,e,a),o&&o.m(e,null),s[5](e),n=!0,t||(l=[Q(e,"click",xe(Vs)),Q(e,"keydown",s[2])],t=!0)},p(r,[a]){r[1]?o?(o.p(r,a),a&2&&w(o,1)):(o=kt(r),o.c(),w(o,1),o.m(e,null)):o&&(_e(),C(o,1,1,()=>{o=null}),ge())},i(r){n||(w(o),n=!0)},o(r){C(o),n=!1},d(r){r&&v(e),o&&o.d(),s[5](null),t=!1,Qe(l)}}}const Vs=()=>{};function Os(s,e,n){let{$$slots:t={},$$scope:l}=e;const o=Oe(),r=()=>o("close"),a=p=>{p.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let c,u=!1;tt(async()=>{c.focus(),document.addEventListener("fullscreenchange",i);try{await c.requestFullscreen()}catch{}n(1,u=!0)}),nt(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function f(p){he[p?"unshift":"push"](()=>{c=p,n(0,c)})}return s.$$set=p=>{"$$scope"in p&&n(3,l=p.$$scope)},[c,u,a,l,t,f]}class Bs extends se{constructor(e){super(),le(this,e,Os,As,ne,{})}}function Ms(s){let e,n;return{c(){e=E("div"),this.h()},l(t){e=S(t,"DIV",{style:!0}),R(e).forEach(v),this.h()},h(){g(e,"style",n=s[0]?`position:absolute;top:${s[0]};`:void 0)},m(t,l){j(t,e,l),s[3](e)},p(t,[l]){l&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&g(e,"style",n)},i:K,o:K,d(t){t&&v(e),s[3](null)}}}function zs(s,e,n){let{rootMargin:t}=e,{absoluteTop:l}=e;const o=Oe(),r=new IntersectionObserver(c=>{c[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(c){he[c?"unshift":"push"](()=>{a=c,n(1,a)})}return s.$$set=c=>{"rootMargin"in c&&n(2,t=c.rootMargin),"absoluteTop"in c&&n(0,l=c.absoluteTop)},s.$$.update=()=>{s.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[l,a,t,i]}class cn extends se{constructor(e){super(),le(this,e,zs,Ms,ne,{rootMargin:2,absoluteTop:0})}}function qs(s){let e,n;return{c(){e=E("a"),n=X("Open"),this.h()},l(t){e=S(t,"A",{href:!0,target:!0,class:!0});var l=R(e);n=x(l,"Open"),l.forEach(v),this.h()},h(){g(e,"href",s[0]),g(e,"target","_newtab"),g(e,"class","codicon codicon-link-external svelte-10flxu9")},m(t,l){j(t,e,l),b(e,n)},p(t,[l]){l&1&&g(e,"href",t[0])},i:K,o:K,d(t){t&&v(e)}}}function Us(s,e,n){let{url:t}=e;return s.$$set=l=>{"url"in l&&n(0,t=l.url)},[t]}class Hs extends se{constructor(e){super(),le(this,e,Us,qs,ne,{url:0})}}function wt(s,e,n){const t=s.slice();return t[4]=e[n][0],t[5]=e[n][1],t}function yt(s){let e,n="•",t,l,o;return l=new tn({props:{source:s[0].source}}),{c(){e=E("span"),e.textContent=n,t=D(),A(l.$$.fragment)},l(r){e=S(r,"SPAN",{"data-svelte-h":!0}),ce(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=L(r),V(l.$$.fragment,r)},m(r,a){j(r,e,a),j(r,t,a),O(l,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),l.$set(i)},i(r){o||(w(l.$$.fragment,r),o=!0)},o(r){C(l.$$.fragment,r),o=!1},d(r){r&&(v(e),v(t)),B(l,r)}}}function Et(s){let e,n=s[4]+"",t,l,o,r;return o=new sn({props:{tags:s[5]}}),{c(){e=E("h3"),t=X(n),l=D(),A(o.$$.fragment),this.h()},l(a){e=S(a,"H3",{class:!0});var i=R(e);t=x(i,n),i.forEach(v),l=L(a),V(o.$$.fragment,a),this.h()},h(){g(e,"class","svelte-1tsjp7g")},m(a,i){j(a,e,i),b(e,t),j(a,l,i),O(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[4]+"")&&ve(t,n);const c={};i&2&&(c.tags=a[5]),o.$set(c)},i(a){r||(w(o.$$.fragment,a),r=!0)},o(a){C(o.$$.fragment,a),r=!1},d(a){a&&(v(e),v(l)),B(o,a)}}}function Gs(s){let e,n,t,l,o,r,a,i,c=s[0].id+"",u,f,p,$,d,h,I="•",y,k,_=s[0].type.toUpperCase()+"",m,P,F,U="•",T,N,q,Y,fe="•",pe,ue,Z,te,H,W,oe,J="•",ke,we,$e,Ee,Le="•",Ge,Pe,st,ct,Te,lt,Be,ft="Comments",rt,Me,ze;$=new Nn({props:{value:s[0].rating}}),N=new xt({props:{value:s[0].score}}),ue=new en({props:{value:s[0].change}}),H=new Hs({props:{url:"/post?id="+s[0].id+"&src="+encodeURIComponent(s[3])}}),we=new tn({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+s[0].id}}),Pe=new jn({props:{url:s[3]}});let ae=s[0].source&&yt(s),qe=be(Object.entries(s[1])),M=[];for(let z=0;z<qe.length;z+=1)M[z]=Et(wt(s,qe,z));const re=z=>C(M[z],1,1,()=>{M[z]=null});return Me=new nn({props:{post:s[0]}}),{c(){e=E("div"),n=E("img"),l=D(),o=E("h1"),r=X("Post "),a=E("b"),i=X("#"),u=X(c),f=D(),p=E("div"),A($.$$.fragment),d=D(),h=E("span"),h.textContent=I,y=D(),k=E("span"),m=X(_),P=D(),F=E("span"),F.textContent=U,T=D(),A(N.$$.fragment),q=D(),Y=E("span"),Y.textContent=fe,pe=D(),A(ue.$$.fragment),Z=D(),te=E("div"),A(H.$$.fragment),W=D(),oe=E("span"),oe.textContent=J,ke=D(),A(we.$$.fragment),$e=D(),Ee=E("span"),Ee.textContent=Le,Ge=D(),A(Pe.$$.fragment),st=D(),ae&&ae.c(),ct=D(),Te=E("div");for(let z=0;z<M.length;z+=1)M[z].c();lt=D(),Be=E("h3"),Be.textContent=ft,rt=D(),A(Me.$$.fragment),this.h()},l(z){e=S(z,"DIV",{class:!0});var G=R(e);n=S(G,"IMG",{class:!0,src:!0,alt:!0}),l=L(G),o=S(G,"H1",{class:!0});var de=R(o);r=x(de,"Post "),a=S(de,"B",{});var Se=R(a);i=x(Se,"#"),u=x(Se,c),Se.forEach(v),de.forEach(v),f=L(G),p=S(G,"DIV",{class:!0});var ie=R(p);V($.$$.fragment,ie),d=L(ie),h=S(ie,"SPAN",{"data-svelte-h":!0}),ce(h)!=="svelte-7hh8jk"&&(h.textContent=I),y=L(ie),k=S(ie,"SPAN",{});var De=R(k);m=x(De,_),De.forEach(v),P=L(ie),F=S(ie,"SPAN",{"data-svelte-h":!0}),ce(F)!=="svelte-7hh8jk"&&(F.textContent=U),T=L(ie),V(N.$$.fragment,ie),q=L(ie),Y=S(ie,"SPAN",{"data-svelte-h":!0}),ce(Y)!=="svelte-7hh8jk"&&(Y.textContent=fe),pe=L(ie),V(ue.$$.fragment,ie),ie.forEach(v),Z=L(G),te=S(G,"DIV",{class:!0});var me=R(te);V(H.$$.fragment,me),W=L(me),oe=S(me,"SPAN",{"data-svelte-h":!0}),ce(oe)!=="svelte-7hh8jk"&&(oe.textContent=J),ke=L(me),V(we.$$.fragment,me),$e=L(me),Ee=S(me,"SPAN",{"data-svelte-h":!0}),ce(Ee)!=="svelte-7hh8jk"&&(Ee.textContent=Le),Ge=L(me),V(Pe.$$.fragment,me),st=L(me),ae&&ae.l(me),me.forEach(v),ct=L(G),Te=S(G,"DIV",{});var Ue=R(Te);for(let ot=0;ot<M.length;ot+=1)M[ot].l(Ue);lt=L(Ue),Be=S(Ue,"H3",{class:!0,"data-svelte-h":!0}),ce(Be)!=="svelte-kc6sae"&&(Be.textContent=ft),rt=L(Ue),V(Me.$$.fragment,Ue),Ue.forEach(v),G.forEach(v),this.h()},h(){g(n,"class","preview svelte-1tsjp7g"),Ie(n.src,t=s[2])||g(n,"src",t),g(n,"alt","preview"),g(o,"class","svelte-1tsjp7g"),g(p,"class","flex-row svelte-1tsjp7g"),g(te,"class","flex-row svelte-1tsjp7g"),g(Be,"class","svelte-1tsjp7g"),g(e,"class","details svelte-1tsjp7g")},m(z,G){j(z,e,G),b(e,n),b(e,l),b(e,o),b(o,r),b(o,a),b(a,i),b(a,u),b(e,f),b(e,p),O($,p,null),b(p,d),b(p,h),b(p,y),b(p,k),b(k,m),b(p,P),b(p,F),b(p,T),O(N,p,null),b(p,q),b(p,Y),b(p,pe),O(ue,p,null),b(e,Z),b(e,te),O(H,te,null),b(te,W),b(te,oe),b(te,ke),O(we,te,null),b(te,$e),b(te,Ee),b(te,Ge),O(Pe,te,null),b(te,st),ae&&ae.m(te,null),b(e,ct),b(e,Te);for(let de=0;de<M.length;de+=1)M[de]&&M[de].m(Te,null);b(Te,lt),b(Te,Be),b(Te,rt),O(Me,Te,null),ze=!0},p(z,[G]){(!ze||G&4&&!Ie(n.src,t=z[2]))&&g(n,"src",t),(!ze||G&1)&&c!==(c=z[0].id+"")&&ve(u,c);const de={};G&1&&(de.value=z[0].rating),$.$set(de),(!ze||G&1)&&_!==(_=z[0].type.toUpperCase()+"")&&ve(m,_);const Se={};G&1&&(Se.value=z[0].score),N.$set(Se);const ie={};G&1&&(ie.value=z[0].change),ue.$set(ie);const De={};G&9&&(De.url="/post?id="+z[0].id+"&src="+encodeURIComponent(z[3])),H.$set(De);const me={};G&1&&(me.source="https://rule34.xxx/index.php?page=post&s=view&id="+z[0].id),we.$set(me);const Ue={};if(G&8&&(Ue.url=z[3]),Pe.$set(Ue),z[0].source?ae?(ae.p(z,G),G&1&&w(ae,1)):(ae=yt(z),ae.c(),w(ae,1),ae.m(te,null)):ae&&(_e(),C(ae,1,1,()=>{ae=null}),ge()),G&2){qe=be(Object.entries(z[1]));let ye;for(ye=0;ye<qe.length;ye+=1){const gt=wt(z,qe,ye);M[ye]?(M[ye].p(gt,G),w(M[ye],1)):(M[ye]=Et(gt),M[ye].c(),w(M[ye],1),M[ye].m(Te,lt))}for(_e(),ye=qe.length;ye<M.length;ye+=1)re(ye);ge()}const ot={};G&1&&(ot.post=z[0]),Me.$set(ot)},i(z){if(!ze){w($.$$.fragment,z),w(N.$$.fragment,z),w(ue.$$.fragment,z),w(H.$$.fragment,z),w(we.$$.fragment,z),w(Pe.$$.fragment,z),w(ae);for(let G=0;G<qe.length;G+=1)w(M[G]);w(Me.$$.fragment,z),ze=!0}},o(z){C($.$$.fragment,z),C(N.$$.fragment,z),C(ue.$$.fragment,z),C(H.$$.fragment,z),C(we.$$.fragment,z),C(Pe.$$.fragment,z),C(ae),M=M.filter(Boolean);for(let G=0;G<M.length;G+=1)C(M[G]);C(Me.$$.fragment,z),ze=!1},d(z){z&&v(e),B($),B(N),B(ue),B(H),B(we),B(Pe),ae&&ae.d(),Ze(M,z),B(Me)}}}function Ks(s,e,n){let t,l,o,{post:r}=e;return s.$$set=a=>{"post"in a&&n(0,r=a.post)},s.$$.update=()=>{s.$$.dirty&1&&n(3,t=r.file_url),s.$$.dirty&1&&n(2,l=r.sample_url),s.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,l,t]}class Ws extends se{constructor(e){super(),le(this,e,Ks,Gs,ne,{post:0})}}const it=new IntersectionObserver(s=>{for(const e of s)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function Ys(s){let e,n,t,l;return{c(){e=E("div"),n=E("input"),this.h()},l(o){e=S(o,"DIV",{class:!0});var r=R(e);n=S(r,"INPUT",{type:!0,step:!0,max:!0,class:!0}),r.forEach(v),this.h()},h(){g(n,"type","range"),g(n,"step","0.001"),g(n,"max",s[1]),g(n,"class","svelte-dfxj87"),g(e,"class","svelte-dfxj87")},m(o,r){j(o,e,r),b(e,n),We(n,s[0]),t||(l=[Q(n,"change",s[5]),Q(n,"input",s[5]),Q(n,"scroll",xe(at(s[4]))),Q(e,"click",xe(at(s[2]))),Q(e,"scroll",xe(at(s[3])))],t=!0)},p(o,[r]){r&2&&g(n,"max",o[1]),r&1&&We(n,o[0])},i:K,o:K,d(o){o&&v(e),t=!1,Qe(l)}}}function Js(s,e,n){let{value:t}=e,{max:l}=e;function o(c){Fe.call(this,s,c)}function r(c){Fe.call(this,s,c)}function a(c){Fe.call(this,s,c)}function i(){t=$n(this.value),n(0,t)}return s.$$set=c=>{"value"in c&&n(0,t=c.value),"max"in c&&n(1,l=c.max)},[t,l,o,r,a,i]}class un extends se{constructor(e){super(),le(this,e,Js,Ys,ne,{value:0,max:1})}}function St(s){let e,n=pt(s[2])+"",t,l,o=pt(s[4])+"",r;return{c(){e=E("span"),t=X(n),l=X(" / "),r=X(o),this.h()},l(a){e=S(a,"SPAN",{class:!0});var i=R(e);t=x(i,n),l=x(i," / "),r=x(i,o),i.forEach(v),this.h()},h(){g(e,"class","svelte-r1orid")},m(a,i){j(a,e,i),b(e,t),b(e,l),b(e,r)},p(a,i){i&4&&n!==(n=pt(a[2])+"")&&ve(t,n),i&16&&o!==(o=pt(a[4])+"")&&ve(r,o)},d(a){a&&v(e)}}}function Zs(s){let e,n,t,l=!1,o,r=!0,a,i,c,u,f,p,$;function d(){cancelAnimationFrame(o),e.paused||(o=Rn(d),l=!0),s[10].call(e)}let h=s[2]!==void 0&&s[4]!==void 0&&St(s);function I(k){s[13](k)}let y={max:s[4]};return s[2]!==void 0&&(y.value=s[2]),c=new un({props:y}),he.push(()=>je(c,"value",I)),{c(){e=E("video"),a=D(),h&&h.c(),i=D(),A(c.$$.fragment),this.h()},l(k){e=S(k,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),R(e).forEach(v),a=L(k),h&&h.l(k),i=L(k),V(c.$$.fragment,k),this.h()},h(){Ie(e.src,n=s[6])||g(e,"src",n),g(e,"poster",s[5]),g(e,"title",t="[VIDEO] post #"+s[0].id),g(e,"preload","metadata"),e.autoplay=!0,g(e,"class","svelte-r1orid"),s[4]===void 0&&vn(()=>s[12].call(e))},m(k,_){j(k,e,_),s[9](e),j(k,a,_),h&&h.m(k,_),j(k,i,_),O(c,k,_),f=!0,p||($=[Q(e,"timeupdate",d),Q(e,"play",s[11]),Q(e,"pause",s[11]),Q(e,"durationchange",s[12]),Q(e,"click",Qs),Q(e,"ended",s[8]),Q(e,"contextmenu",at(Xs))],p=!0)},p(k,[_]){(!f||_&64&&!Ie(e.src,n=k[6]))&&g(e,"src",n),(!f||_&32)&&g(e,"poster",k[5]),(!f||_&1&&t!==(t="[VIDEO] post #"+k[0].id))&&g(e,"title",t),!l&&_&4&&!isNaN(k[2])&&(e.currentTime=k[2]),l=!1,_&8&&r!==(r=k[3])&&e[r?"pause":"play"](),k[2]!==void 0&&k[4]!==void 0?h?h.p(k,_):(h=St(k),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null);const m={};_&16&&(m.max=k[4]),!u&&_&4&&(u=!0,m.value=k[2],Ne(()=>u=!1)),c.$set(m)},i(k){f||(w(c.$$.fragment,k),f=!0)},o(k){C(c.$$.fragment,k),f=!1},d(k){k&&(v(e),v(a),v(i)),s[9](null),h&&h.d(k),B(c,k),p=!1,Qe($)}}}const Qs=s=>s.target.paused?s.target.play():s.target.pause(),Xs=()=>{};function xs(s,e,n){let t,l,o,{post:r}=e,a,i=0,c=!1,u;const f=k=>{a&&(k.key==="ArrowLeft"&&(k.preventDefault(),k.stopPropagation(),n(1,a.currentTime=Math.max(0,a.currentTime-5),a)),k.key==="ArrowRight"&&(k.preventDefault(),k.stopPropagation(),n(1,a.currentTime=Math.min(a.duration,a.currentTime+5),a)),k.key==="Space"&&(k.preventDefault(),k.stopPropagation(),n(3,c=!c)))};tt(()=>{a&&(it==null||it.observe(a)),document.addEventListener("keydown",f)}),nt(()=>{a&&(it==null||it.unobserve(a)),document.removeEventListener("keydown",f)});function p(k){Fe.call(this,s,k)}function $(k){he[k?"unshift":"push"](()=>{a=k,n(1,a)})}function d(){i=this.currentTime,n(2,i)}function h(){c=this.paused,n(3,c)}function I(){u=this.duration,n(4,u)}function y(k){i=k,n(2,i)}return s.$$set=k=>{"post"in k&&n(0,r=k.post)},s.$$.update=()=>{s.$$.dirty&1&&n(7,t=ln(r.file_url,r.sample_url,r.preview_url)),s.$$.dirty&128&&n(6,l=t.animated),s.$$.dirty&128&&n(5,o=t.static)},[r,a,i,c,u,o,l,t,p,$,d,h,I,y]}class el extends se{constructor(e){super(),le(this,e,xs,Zs,ne,{post:0})}}function tl(s){return{c:K,l:K,m:K,p:K,i:K,o:K,d:K}}function nl(s){let e,n,t,l,o,r;return{c(){e=E("img"),this.h()},l(a){e=S(a,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){Ie(e.src,n=s[2])||g(e,"src",n),g(e,"alt",t="["+s[0].type+"] post #"+s[0].id),g(e,"title",l="["+s[0].type+"] post #"+s[0].id),g(e,"class","svelte-jlq3re")},m(a,i){j(a,e,i),o||(r=[Q(e,"contextmenu",at(ol)),Q(e,"click",s[6]),bn(s[7].call(null,e))],o=!0)},p(a,i){i&4&&!Ie(e.src,n=a[2])&&g(e,"src",n),i&1&&t!==(t="["+a[0].type+"] post #"+a[0].id)&&g(e,"alt",t),i&1&&l!==(l="["+a[0].type+"] post #"+a[0].id)&&g(e,"title",l)},i:K,o:K,d(a){a&&v(e),o=!1,Qe(r)}}}function sl(s){let e,n,t,l,o,r,a,i,c,u;return a=new _t({}),{c(){e=E("img"),o=D(),r=E("div"),A(a.$$.fragment),this.h()},l(f){e=S(f,"IMG",{src:!0,alt:!0,title:!0,class:!0}),o=L(f),r=S(f,"DIV",{class:!0});var p=R(r);V(a.$$.fragment,p),p.forEach(v),this.h()},h(){Ie(e.src,n=s[3])||g(e,"src",n),g(e,"alt",t="["+s[0].type+"] post #"+s[0].id),g(e,"title",l="["+s[0].type+"] post #"+s[0].id),g(e,"class","svelte-jlq3re"),g(r,"class","svelte-jlq3re")},m(f,p){j(f,e,p),j(f,o,p),j(f,r,p),O(a,r,null),i=!0,c||(u=[Q(e,"contextmenu",at(rl)),Q(e,"click",s[6])],c=!0)},p(f,p){(!i||p&8&&!Ie(e.src,n=f[3]))&&g(e,"src",n),(!i||p&1&&t!==(t="["+f[0].type+"] post #"+f[0].id))&&g(e,"alt",t),(!i||p&1&&l!==(l="["+f[0].type+"] post #"+f[0].id))&&g(e,"title",l)},i(f){i||(w(a.$$.fragment,f),i=!0)},o(f){C(a.$$.fragment,f),i=!1},d(f){f&&(v(e),v(o),v(r)),B(a),c=!1,Qe(u)}}}function Ct(s){let e,n,t;function l(r){s[10](r)}let o={max:s[5]};return s[1]!==void 0&&(o.value=s[1]),e=new un({props:o}),he.push(()=>je(e,"value",l)),{c(){A(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,a){O(e,r,a),t=!0},p(r,a){const i={};a&32&&(i.max=r[5]),!n&&a&2&&(n=!0,i.value=r[1],Ne(()=>n=!1)),e.$set(i)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function ll(s){let e,n,t,l,o={ctx:s,current:null,token:null,hasCatch:!1,pending:sl,then:nl,catch:tl,value:21,blocks:[,,,]};ht(e=s[8](s[2]),o);let r=s[4]&&Ct(s);return{c(){o.block.c(),n=D(),r&&r.c(),t=Ae()},l(a){o.block.l(a),n=L(a),r&&r.l(a),t=Ae()},m(a,i){o.block.m(a,o.anchor=i),o.mount=()=>n.parentNode,o.anchor=n,j(a,n,i),r&&r.m(a,i),j(a,t,i),l=!0},p(a,[i]){s=a,o.ctx=s,i&4&&e!==(e=s[8](s[2]))&&ht(e,o)||zn(o,s,i),s[4]?r?(r.p(s,i),i&16&&w(r,1)):(r=Ct(s),r.c(),w(r,1),r.m(t.parentNode,t)):r&&(_e(),C(r,1,1,()=>{r=null}),ge())},i(a){l||(w(o.block),w(r),l=!0)},o(a){for(let i=0;i<3;i+=1){const c=o.blocks[i];C(c)}C(r),l=!1},d(a){a&&(v(n),v(t)),o.block.d(a),o.token=null,o=null,r&&r.d(a)}}}const rl=()=>{},ol=()=>{};function il(s,e,n){let t,l,o,r;ee(s,Yt,T=>n(4,o=T)),ee(s,In,T=>n(5,r=T));const a=Oe();let{post:i}=e,{postId:c=-1}=e;const u=(T,N,q,Y)=>{if(T==="gif"){const fe=Fn(N,q,Y);return[fe.static,fe.animated]}return qn?[q,N]:[Y,q]};let f=0,p=Date.now(),$=Date.now(),d,h=!0,I;const y=()=>{$=Date.now(),d=$-p,p=$,h||n(1,f+=d/1e3),f>=r&&(a("ended"),n(1,f=0)),I=requestAnimationFrame(y)},k=()=>{h=!h},_=T=>{(T.code==="Space"||T.key==="k")&&(T.preventDefault(),T.stopPropagation(),h=!h)},m=new IntersectionObserver(T=>{for(const N of T)N.target&&(h=!N.isIntersecting)},{rootMargin:"0px",threshold:.5}),P=T=>(m==null||m.observe(T),{destroy(){m==null||m.unobserve(T)}});tt(()=>{o&&(I=requestAnimationFrame(y),document.addEventListener("keydown",_))}),nt(()=>{cancelAnimationFrame(I),document.removeEventListener("keydown",_)});const F=T=>new Promise(N=>{h=!0;let q=new Image;q.onload=Y=>{N(Y),h=!1},q.src=T});function U(T){f=T,n(1,f),n(0,i),n(9,c)}return s.$$set=T=>{"post"in T&&n(0,i=T.post),"postId"in T&&n(9,c=T.postId)},s.$$.update=()=>{s.$$.dirty&1&&n(3,[t,l]=u(i.type,i.file_url,i.sample_url,i.preview_url),t,(n(2,l),n(0,i))),s.$$.dirty&513&&i.id!==c&&(n(9,c=i.id),n(1,f=0))},[i,f,l,t,o,r,k,P,F,c,U]}class al extends se{constructor(e){super(),le(this,e,il,ll,ne,{post:0,postId:9})}}function cl(s){let e,n;return e=new al({props:{post:s[0]}}),e.$on("ended",s[2]),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function ul(s){let e,n;return e=new el({props:{post:s[0]}}),e.$on("ended",s[1]),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function fl(s){let e,n,t,l;const o=[ul,cl],r=[];function a(i,c){return i[0].type==="video"?0:1}return n=a(s),t=r[n]=o[n](s),{c(){e=E("div"),t.c(),this.h()},l(i){e=S(i,"DIV",{class:!0});var c=R(e);t.l(c),c.forEach(v),this.h()},h(){g(e,"class","svelte-acjk3s")},m(i,c){j(i,e,c),r[n].m(e,null),l=!0},p(i,[c]){let u=n;n=a(i),n===u?r[n].p(i,c):(_e(),C(r[u],1,1,()=>{r[u]=null}),ge(),t=r[n],t?t.p(i,c):(t=r[n]=o[n](i),t.c()),w(t,1),t.m(e,null))},i(i){l||(w(t),l=!0)},o(i){C(t),l=!1},d(i){i&&v(e),r[n].d()}}}function pl(s,e,n){let{post:t}=e;function l(r){Fe.call(this,s,r)}function o(r){Fe.call(this,s,r)}return s.$$set=r=>{"post"in r&&n(0,t=r.post)},[t,l,o]}class dl extends se{constructor(e){super(),le(this,e,pl,fl,ne,{post:0})}}function _l(s){let e,n,t;return{c(){e=E("img"),this.h()},l(l){e=S(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ie(e.src,n=s[2])||g(e,"src",n),g(e,"alt",t="post #"+s[0].id),g(e,"class","svelte-itxz72"),Re(e,"top",s[1])},m(l,o){j(l,e,o)},p(l,[o]){o&4&&!Ie(e.src,n=l[2])&&g(e,"src",n),o&1&&t!==(t="post #"+l[0].id)&&g(e,"alt",t),o&2&&Re(e,"top",l[1])},i:K,o:K,d(l){l&&v(e)}}}function gl(s,e,n){let t,{post:l}=e,{offset:o}=e;return s.$$set=r=>{"post"in r&&n(0,l=r.post),"offset"in r&&n(1,o=r.offset)},s.$$.update=()=>{s.$$.dirty&1&&n(2,t=An(l.sample_url)?l.preview_url:l.sample_url)},[l,o,t]}class fn extends se{constructor(e){super(),le(this,e,gl,_l,ne,{post:0,offset:1})}}const ml=()=>{const{subscribe:e,set:n}=Gn(Kn.FullscreenHintDone,!1,Yn,Wn);return{subscribe:e,set:n,reset:()=>n(!1)}},It=ml();function Tt(s,e,n){const t=s.slice();return t[22]=e[n],t[24]=n,t}function Dt(s){let e,n;return e=new fn({props:{post:s[7],offset:s[4]}}),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.post=t[7]),l&16&&(o.offset=t[4]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function hl(s){let e;return{c(){e=E("i"),this.h()},l(n){e=S(n,"I",{class:!0}),R(e).forEach(v),this.h()},h(){g(e,"class","codicon codicon-tag")},m(n,t){j(n,e,t)},p:K,d(n){n&&v(e)}}}function Lt(s){let e,n;return e=new fn({props:{post:s[6],offset:s[3]}}),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.post=t[6]),l&8&&(o.offset=t[3]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Pt(s){let e,n=`${s[24]*100}vh`;return{c(){e=E("div"),this.h()},l(t){e=S(t,"DIV",{class:!0}),R(e).forEach(v),this.h()},h(){g(e,"class","pseudo snap-item svelte-2epggd"),Re(e,"top",n)},m(t,l){j(t,e,l)},p:K,d(t){t&&v(e)}}}function $l(s){let e,n,t,l,o,r,a,i,c,u,f,p,$,d,h,I=s[7]&&Dt(s);l=new dl({props:{post:s[8]}}),l.$on("ended",s[11]),r=new Ws({props:{post:s[8]}}),i=new Xt({props:{class:"details-button",$$slots:{default:[hl]},$$scope:{ctx:s}}}),i.$on("click",s[14]);let y=s[6]&&Lt(s),k=be({length:s[0].posts.length}),_=[];for(let m=0;m<k.length;m+=1)_[m]=Pt(Tt(s,k,m));return p=new cn({props:{absoluteTop:s[0].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),p.$on("intersection",s[16]),{c(){e=E("div"),I&&I.c(),n=D(),t=E("div"),A(l.$$.fragment),o=D(),A(r.$$.fragment),a=D(),A(i.$$.fragment),c=D(),y&&y.c(),u=D();for(let m=0;m<_.length;m+=1)_[m].c();f=D(),A(p.$$.fragment),this.h()},l(m){e=S(m,"DIV",{class:!0});var P=R(e);I&&I.l(P),n=L(P),t=S(P,"DIV",{class:!0});var F=R(t);V(l.$$.fragment,F),o=L(F),V(r.$$.fragment,F),a=L(F),V(i.$$.fragment,F),F.forEach(v),c=L(P),y&&y.l(P),u=L(P);for(let U=0;U<_.length;U+=1)_[U].l(P);f=L(P),V(p.$$.fragment,P),P.forEach(v),this.h()},h(){g(t,"class","screen snap-container horizontal current svelte-2epggd"),Ce(t,"hint",!s[9]),Re(t,"top",s[5]),g(e,"class","root screen snap-container svelte-2epggd")},m(m,P){j(m,e,P),I&&I.m(e,null),b(e,n),b(e,t),O(l,t,null),b(t,o),O(r,t,null),b(t,a),O(i,t,null),s[15](t),b(e,c),y&&y.m(e,null),b(e,u);for(let F=0;F<_.length;F+=1)_[F]&&_[F].m(e,null);b(e,f),O(p,e,null),s[17](e),$=!0,d||(h=Q(e,"scroll",s[12]),d=!0)},p(m,[P]){m[7]?I?(I.p(m,P),P&128&&w(I,1)):(I=Dt(m),I.c(),w(I,1),I.m(e,n)):I&&(_e(),C(I,1,1,()=>{I=null}),ge());const F={};P&256&&(F.post=m[8]),l.$set(F);const U={};P&256&&(U.post=m[8]),r.$set(U);const T={};if(P&33554432&&(T.$$scope={dirty:P,ctx:m}),i.$set(T),(!$||P&512)&&Ce(t,"hint",!m[9]),P&32&&Re(t,"top",m[5]),m[6]?y?(y.p(m,P),P&64&&w(y,1)):(y=Lt(m),y.c(),w(y,1),y.m(e,u)):y&&(_e(),C(y,1,1,()=>{y=null}),ge()),P&1){k=be({length:m[0].posts.length});let q;for(q=0;q<k.length;q+=1){const Y=Tt(m,k,q);_[q]?_[q].p(Y,P):(_[q]=Pt(Y),_[q].c(),_[q].m(e,f))}for(;q<_.length;q+=1)_[q].d(1);_.length=k.length}const N={};P&1&&(N.absoluteTop=m[0].posts.length*100+"vh"),p.$set(N)},i(m){$||(w(I),w(l.$$.fragment,m),w(r.$$.fragment,m),w(i.$$.fragment,m),w(y),w(p.$$.fragment,m),$=!0)},o(m){C(I),C(l.$$.fragment,m),C(r.$$.fragment,m),C(i.$$.fragment,m),C(y),C(p.$$.fragment,m),$=!1},d(m){m&&v(e),I&&I.d(),B(l),B(r),B(i),s[15](null),y&&y.d(),Ze(_,m),B(p),s[17](null),d=!1,h()}}}function vl(s,e,n){let t,l,o,r,a,i,c,u,f;ee(s,It,N=>n(9,c=N)),ee(s,Yt,N=>n(18,u=N)),ee(s,Ye,N=>n(0,f=N));const p=Oe();let{index:$}=e,d,h;const I=()=>{d.scrollTo({left:0,top:d.clientHeight*($-1),behavior:"smooth"})},y=()=>{d.scrollTo({left:0,top:d.clientHeight*($+1),behavior:"smooth"})},k=()=>{u&&y()},_=N=>{requestAnimationFrame(()=>{const q=N.target,Y=q.getBoundingClientRect().height,fe=q.scrollTop/Y,pe=Math.round(fe);pe!=$&&(n(13,$=pe),h&&n(2,h.scrollLeft=0,h))})},m=N=>{N.key==="d"&&(N.preventDefault(),N.stopPropagation(),h.scrollLeft===0?h.scrollBy({left:d.clientWidth,top:0,behavior:"smooth"}):h.scrollBy({left:-d.clientWidth,top:0,behavior:"smooth"})),N.key==="ArrowUp"&&(N.preventDefault(),N.stopPropagation(),I()),N.key==="ArrowDown"&&(N.preventDefault(),N.stopPropagation(),y())};tt(()=>{h&&(h.scrollIntoView(!0),n(2,h.scrollLeft=0,h)),document.addEventListener("keydown",m)}),nt(()=>{kn(It,c=!0,c),document.removeEventListener("keydown",m)});const P=()=>h.scrollBy({left:d.clientWidth,top:0,behavior:"smooth"});function F(N){he[N?"unshift":"push"](()=>{h=N,n(2,h)})}const U=()=>p("endreached");function T(N){he[N?"unshift":"push"](()=>{d=N,n(1,d)})}return s.$$set=N=>{"index"in N&&n(13,$=N.index)},s.$$.update=()=>{s.$$.dirty&8193&&n(8,t=f.posts[$]),s.$$.dirty&8193&&n(7,l=$>0?f.posts[$-1]:void 0),s.$$.dirty&8193&&n(6,o=$<f.posts.length-1?f.posts[$+1]:void 0),s.$$.dirty&8192&&n(5,r=`${$*100}vh`),s.$$.dirty&8192&&n(4,a=`${($-1)*100}vh`),s.$$.dirty&8192&&n(3,i=`${($+1)*100}vh`)},[f,d,h,i,a,r,o,l,t,c,p,k,_,$,P,F,U,T]}class bl extends se{constructor(e){super(),le(this,e,vl,$l,ne,{index:13})}}function kl(s){let e;return{c(){e=E("i"),this.h()},l(n){e=S(n,"I",{class:!0}),R(e).forEach(v),this.h()},h(){g(e,"class","codicon codicon-close")},m(n,t){j(n,e,t)},p:K,d(n){n&&v(e)}}}function wl(s){let e,n,t,l,o;function r(i){s[2](i)}let a={};return s[0]!==void 0&&(a.index=s[0]),e=new bl({props:a}),he.push(()=>je(e,"index",r)),e.$on("endreached",s[3]),l=new Xt({props:{class:"button-close",$$slots:{default:[kl]},$$scope:{ctx:s}}}),l.$on("click",s[1]),{c(){A(e.$$.fragment),t=D(),A(l.$$.fragment)},l(i){V(e.$$.fragment,i),t=L(i),V(l.$$.fragment,i)},m(i,c){O(e,i,c),j(i,t,c),O(l,i,c),o=!0},p(i,c){const u={};!n&&c&1&&(n=!0,u.index=i[0],Ne(()=>n=!1)),e.$set(u);const f={};c&128&&(f.$$scope={dirty:c,ctx:i}),l.$set(f)},i(i){o||(w(e.$$.fragment,i),w(l.$$.fragment,i),o=!0)},o(i){C(e.$$.fragment,i),C(l.$$.fragment,i),o=!1},d(i){i&&v(t),B(e,i),B(l,i)}}}function yl(s){let e,n;return e=new Bs({props:{$$slots:{default:[wl]},$$scope:{ctx:s}}}),e.$on("close",s[1]),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,[l]){const o={};l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function El(s,e,n){let{index:t}=e;const l=Oe(),o=()=>{l("close",t)},r=u=>{u.key==="f"&&(u.preventDefault(),u.stopPropagation(),o())},a=()=>{var u,f;(((u=history.state)==null?void 0:u.fullscreen)===void 0||((f=history.state)==null?void 0:f.fullscreen)===!1)&&o()};tt(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),nt(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(u){t=u,n(0,t)}function c(u){Fe.call(this,s,u)}return s.$$set=u=>{"index"in u&&n(0,t=u.index)},[t,o,i,c]}class Sl extends se{constructor(e){super(),le(this,e,El,yl,ne,{index:0})}}function Nt(s){let e,n=s[0].type==="video"?"▶":"GIF",t;return{c(){e=E("span"),t=X(n),this.h()},l(l){e=S(l,"SPAN",{class:!0});var o=R(e);t=x(o,n),o.forEach(v),this.h()},h(){g(e,"class","type svelte-rfj0jo")},m(l,o){j(l,e,o),b(e,t)},p(l,o){o&1&&n!==(n=l[0].type==="video"?"▶":"GIF")&&ve(t,n)},d(l){l&&v(e)}}}function Cl(s){let e,n,t,l,o,r,a=Ve(s[0].score)+"",i,c,u,f,p=s[0].type!=="image"&&Nt(s);return{c(){e=E("div"),n=E("img"),l=D(),p&&p.c(),o=D(),r=E("span"),i=X(a),this.h()},l($){e=S($,"DIV",{id:!0,class:!0,style:!0});var d=R(e);n=S(d,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),l=L(d),p&&p.l(d),o=L(d),r=S(d,"SPAN",{class:!0});var h=R(r);i=x(h,a),h.forEach(v),d.forEach(v),this.h()},h(){Ie(n.src,t=s[1])||g(n,"src",t),g(n,"alt","post"),g(n,"class","post-media svelte-rfj0jo"),g(n,"tabindex","-1"),g(n,"loading","lazy"),g(r,"class","score svelte-rfj0jo"),g(e,"id",c=ut(s[0].id)),g(e,"class","post svelte-rfj0jo"),Re(e,"grid-row","span "+s[2]),Ce(e,"open",open)},m($,d){j($,e,d),b(e,n),b(e,l),p&&p.m(e,null),b(e,o),b(e,r),b(r,i),u||(f=[Q(e,"click",s[3]),Q(e,"keydown",s[4])],u=!0)},p($,[d]){d&2&&!Ie(n.src,t=$[1])&&g(n,"src",t),$[0].type!=="image"?p?p.p($,d):(p=Nt($),p.c(),p.m(e,o)):p&&(p.d(1),p=null),d&1&&a!==(a=Ve($[0].score)+"")&&ve(i,a),d&1&&c!==(c=ut($[0].id))&&g(e,"id",c),d&0&&Ce(e,"open",open)},i:K,o:K,d($){$&&v(e),p&&p.d(),u=!1,Qe(f)}}}let jt=5;function Il(s,e,n){let t,{post:l}=e,o=1/3,r=Vn(l.width,l.height),a=Math.max(Math.min(Math.round(jt/r),jt/o),2);const i=f=>f.endsWith(".jpg")||f.endsWith(".jpeg")||f.endsWith(".png")||f.endsWith(".webp");function c(f){Fe.call(this,s,f)}const u=f=>{var p;(Un(f)||f.key==="f")&&((p=f.target)==null||p.click())};return s.$$set=f=>{"post"in f&&n(0,l=f.post)},s.$$.update=()=>{s.$$.dirty&1&&n(1,t=i(l.sample_url)?l.sample_url:l.preview_url)},[l,t,a,c,u]}class Tl extends se{constructor(e){super(),le(this,e,Il,Cl,ne,{post:0})}}function Rt(s,e,n){const t=s.slice();t[2]=e[n];const l=t[2].host.replace("www.","");t[3]=l;const o=t[1][t[3]]??t[1].default;t[4]=o[0],t[5]=o[1];const r=t[3].includes("api-cdn")?"File":t[3];return t[6]=r,t}function Ft(s){let e,n,t=s[6]+"",l,o,r,a;return{c(){e=E("li"),n=E("a"),l=X(t),a=D(),this.h()},l(i){e=S(i,"LI",{});var c=R(e);n=S(c,"A",{href:!0,class:!0,style:!0});var u=R(n);l=x(u,t),u.forEach(v),a=L(c),c.forEach(v),this.h()},h(){g(n,"href",o=s[2].toString()),g(n,"class",r="codicon codicon-link-external "+s[5]+" svelte-f59j30"),Re(n,"background-color",s[4]),Re(n,"color",s[5])},m(i,c){j(i,e,c),b(e,n),b(n,l),b(e,a)},p(i,c){c&1&&t!==(t=i[6]+"")&&ve(l,t),c&1&&o!==(o=i[2].toString())&&g(n,"href",o),c&1&&r!==(r="codicon codicon-link-external "+i[5]+" svelte-f59j30")&&g(n,"class",r),c&1&&Re(n,"background-color",i[4]),c&1&&Re(n,"color",i[5])},d(i){i&&v(e)}}}function Dl(s){let e,n=be(s[0]),t=[];for(let l=0;l<n.length;l+=1)t[l]=Ft(Rt(s,n,l));return{c(){e=E("ol");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=S(l,"OL",{class:!0});var o=R(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(v),this.h()},h(){g(e,"class","svelte-f59j30")},m(l,o){j(l,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(l,[o]){if(o&3){n=be(l[0]);let r;for(r=0;r<n.length;r+=1){const a=Rt(l,n,r);t[r]?t[r].p(a,o):(t[r]=Ft(a),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:K,o:K,d(l){l&&v(e),Ze(t,l)}}}function Ll(s,e,n){let{links:t}=e;const l={"kurosearch.com":["crimson","white"],"rule34.xxx":["#aae5a4","black"],"newgrounds.com":["#fda238","black"],"twitter.com":["rgb(29, 155, 240)","white"],"x.com":["rgb(29, 155, 240)","white"],"pornhub.com":["#f90","black"],"zone-archive.com":["#59396A","white"],"subscribestar.adult":["#ff4081","white"],"redgifs.com":["#E5194D","white"],"deviantart.com":["#00c787","black"],default:["var(--background-2)","white"]};return s.$$set=o=>{"links"in o&&n(0,t=o.links)},[t,l]}class Pl extends se{constructor(e){super(),le(this,e,Ll,Dl,ne,{links:0})}}function At(s){let e,n=Ve(s[0].comment_count)+"",t,l,o;return{c(){e=E("button"),t=X(n),this.h()},l(r){e=S(r,"BUTTON",{type:!0,class:!0});var a=R(e);t=x(a,n),a.forEach(v),this.h()},h(){g(e,"type","button"),g(e,"class","codicon codicon-comment svelte-nhpj3u"),Ce(e,"active",s[1]==="comments")},m(r,a){j(r,e,a),b(e,t),l||(o=Q(e,"click",xe(s[5])),l=!0)},p(r,a){a&1&&n!==(n=Ve(r[0].comment_count)+"")&&ve(t,n),a&2&&Ce(e,"active",r[1]==="comments")},d(r){r&&v(e),l=!1,o()}}}function Nl(s){let e,n,t,l,o="•",r,a,i,c,u,f,p=Ve(s[2])+"",$,d,h,I,y=Ve(s[0].tags.length)+"",k,_,m,P;n=new en({props:{value:s[0].change}}),a=new xt({props:{value:s[0].score}});let F=s[0].comment_count&&At(s);return{c(){e=E("div"),A(n.$$.fragment),t=D(),l=E("span"),l.textContent=o,r=D(),A(a.$$.fragment),i=D(),c=E("span"),u=D(),f=E("button"),$=X(p),d=D(),F&&F.c(),h=D(),I=E("button"),k=X(y),this.h()},l(U){e=S(U,"DIV",{class:!0});var T=R(e);V(n.$$.fragment,T),t=L(T),l=S(T,"SPAN",{"data-svelte-h":!0}),ce(l)!=="svelte-7hh8jk"&&(l.textContent=o),r=L(T),V(a.$$.fragment,T),i=L(T),c=S(T,"SPAN",{class:!0}),R(c).forEach(v),u=L(T),f=S(T,"BUTTON",{type:!0,class:!0});var N=R(f);$=x(N,p),N.forEach(v),d=L(T),F&&F.l(T),h=L(T),I=S(T,"BUTTON",{type:!0,class:!0});var q=R(I);k=x(q,y),q.forEach(v),T.forEach(v),this.h()},h(){g(c,"class","divider svelte-nhpj3u"),g(f,"type","button"),g(f,"class","codicon codicon-link svelte-nhpj3u"),Ce(f,"active",s[1]==="links"),g(I,"type","button"),g(I,"class","codicon codicon-tag svelte-nhpj3u"),Ce(I,"active",s[1]==="tags"),g(e,"class","summary svelte-nhpj3u")},m(U,T){j(U,e,T),O(n,e,null),b(e,t),b(e,l),b(e,r),O(a,e,null),b(e,i),b(e,c),b(e,u),b(e,f),b(f,$),b(e,d),F&&F.m(e,null),b(e,h),b(e,I),b(I,k),_=!0,m||(P=[Q(f,"click",xe(s[4])),Q(I,"click",xe(s[6]))],m=!0)},p(U,[T]){const N={};T&1&&(N.value=U[0].change),n.$set(N);const q={};T&1&&(q.value=U[0].score),a.$set(q),(!_||T&4)&&p!==(p=Ve(U[2])+"")&&ve($,p),(!_||T&2)&&Ce(f,"active",U[1]==="links"),U[0].comment_count?F?F.p(U,T):(F=At(U),F.c(),F.m(e,h)):F&&(F.d(1),F=null),(!_||T&1)&&y!==(y=Ve(U[0].tags.length)+"")&&ve(k,y),(!_||T&2)&&Ce(I,"active",U[1]==="tags")},i(U){_||(w(n.$$.fragment,U),w(a.$$.fragment,U),_=!0)},o(U){C(n.$$.fragment,U),C(a.$$.fragment,U),_=!1},d(U){U&&v(e),B(n),B(a),F&&F.d(),m=!1,Qe(P)}}}function jl(s,e,n){const t=Oe();let{post:l}=e,{active:o}=e,{links:r}=e;const a=()=>t("links"),i=()=>t("comments"),c=()=>t("tags");return s.$$set=u=>{"post"in u&&n(0,l=u.post),"active"in u&&n(1,o=u.active),"links"in u&&n(2,r=u.links)},[l,o,r,t,a,i,c]}class Rl extends se{constructor(e){super(),le(this,e,jl,Nl,ne,{post:0,active:1,links:2})}}function Fl(s){let e,n='<i class="codicon codicon-screen-full"></i>',t,l;return{c(){e=E("button"),e.innerHTML=n,this.h()},l(o){e=S(o,"BUTTON",{type:!0,title:!0,class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-hnv5zq"&&(e.innerHTML=n),this.h()},h(){g(e,"type","button"),g(e,"title","Enter Fullscreen mode"),g(e,"class","svelte-txn4jo")},m(o,r){j(o,e,r),t||(l=Q(e,"click",s[0]),t=!0)},p:K,i:K,o:K,d(o){o&&v(e),t=!1,l()}}}function Al(s){function e(n){Fe.call(this,s,n)}return[e]}class Vl extends se{constructor(e){super(),le(this,e,Al,Fl,ne,{})}}function Ol(s){const e=s.slice(),n=ln(e[1].file_url,e[1].sample_url,e[1].preview_url);return e[13]=n,e}function Bl(s){let e,n;return e=new On({props:{post:s[1]}}),e.$on("click",s[5]),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Ml(s){let e,n;return e=new Bn({props:{src:s[13].animated,poster:s[13].static,width:s[1].width,height:s[1].height,loop:s[2]||mt(s[1].tags)}}),e.$on("click",s[5]),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.src=t[13].animated),l&2&&(o.poster=t[13].static),l&2&&(o.width=t[1].width),l&2&&(o.height=t[1].height),l&6&&(o.loop=t[2]||mt(t[1].tags)),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function zl(s){let e,n;return e=new Mn({props:{post:s[1]}}),e.$on("click",s[5]),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function ql(s){let e,n;return e=new Pl({props:{links:s[6]}}),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p:K,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Ul(s){let e,n;return e=new nn({props:{post:s[1]}}),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Hl(s){let e,n;return e=new sn({props:{tags:s[1].tags}}),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.tags=t[1].tags),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Gl(s){let e,n,t,l,o,r,a,i,c,u,f,p,$,d,h,I;const y=[zl,Ml,Bl],k=[];function _(T,N){return T[1].type==="image"?0:T[1].type==="video"?1:2}function m(T,N){return N===1?Ol(T):T}t=_(s),l=k[t]=y[t](m(s,t)),r=new Vl({}),r.$on("click",s[7]),c=new Rl({props:{active:s[0],post:s[1],links:s[6].length}}),c.$on("tags",s[8]),c.$on("comments",s[9]),c.$on("links",s[10]);const P=[Hl,Ul,ql],F=[];function U(T,N){return T[0]==="tags"?0:T[0]==="comments"?1:T[0]==="links"?2:-1}return~(f=U(s))&&(p=F[f]=P[f](s)),{c(){e=E("li"),n=E("div"),l.c(),o=D(),A(r.$$.fragment),a=D(),i=E("div"),A(c.$$.fragment),u=D(),p&&p.c(),this.h()},l(T){e=S(T,"LI",{id:!0,class:!0});var N=R(e);n=S(N,"DIV",{});var q=R(n);l.l(q),q.forEach(v),o=L(N),V(r.$$.fragment,N),a=L(N),i=S(N,"DIV",{class:!0});var Y=R(i);V(c.$$.fragment,Y),u=L(Y),p&&p.l(Y),Y.forEach(v),N.forEach(v),this.h()},h(){g(i,"class","details svelte-162qa8v"),g(e,"id",$=ut(s[1].id)),g(e,"class","post svelte-162qa8v"),Ce(e,"openTab",s[0])},m(T,N){j(T,e,N),b(e,n),k[t].m(n,null),b(e,o),O(r,e,null),b(e,a),b(e,i),O(c,i,null),b(i,u),~f&&F[f].m(i,null),d=!0,h||(I=Q(e,"keydown",s[11]),h=!0)},p(T,[N]){let q=t;t=_(T),t===q?k[t].p(m(T,t),N):(_e(),C(k[q],1,1,()=>{k[q]=null}),ge(),l=k[t],l?l.p(m(T,t),N):(l=k[t]=y[t](m(T,t)),l.c()),w(l,1),l.m(n,null));const Y={};N&1&&(Y.active=T[0]),N&2&&(Y.post=T[1]),c.$set(Y);let fe=f;f=U(T),f===fe?~f&&F[f].p(T,N):(p&&(_e(),C(F[fe],1,1,()=>{F[fe]=null}),ge()),~f?(p=F[f],p?p.p(T,N):(p=F[f]=P[f](T),p.c()),w(p,1),p.m(i,null)):p=null),(!d||N&2&&$!==($=ut(T[1].id)))&&g(e,"id",$),(!d||N&1)&&Ce(e,"openTab",T[0])},i(T){d||(w(l),w(r.$$.fragment,T),w(c.$$.fragment,T),w(p),d=!0)},o(T){C(l),C(r.$$.fragment,T),C(c.$$.fragment,T),C(p),d=!1},d(T){T&&v(e),k[t].d(),B(r),B(c),~f&&F[f].d(),h=!1,I()}}}function Kl(s,e,n){let t,l;ee(s,Tn,I=>n(12,t=I)),ee(s,Hn,I=>n(2,l=I));const o=Oe();let{post:r}=e,{openTab:a=void 0}=e;const i=I=>{n(0,a=a===I?void 0:I)},c=()=>{t&&i("tags")},u=[new URL(`https://kurosearch.com/post?id=${r.id}&src=${encodeURIComponent(r.file_url)}`),new URL(`https://rule34.xxx/index.php?page=post&s=view&id=${r.id}`),new URL(r.file_url),...r.source?r.source.split(" ").filter(I=>Jn(I)).map(I=>new URL(I)):[]],f=()=>o("fullscreen"),p=()=>i("tags"),$=()=>i("comments"),d=()=>i("links"),h=I=>{I.key==="f"&&o("fullscreen")};return s.$$set=I=>{"post"in I&&n(1,r=I.post),"openTab"in I&&n(0,a=I.openTab)},[a,r,l,o,i,c,u,f,p,$,d,h]}class Wl extends se{constructor(e){super(),le(this,e,Kl,Gl,ne,{post:1,openTab:0})}}function Vt(s,e,n){const t=s.slice();return t[7]=e[n],t[9]=n,t}function Ot(s,e,n){const t=s.slice();return t[7]=e[n],t[9]=n,t}function Yl(s){let e,n,t=be(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Bt(Vt(s,t,r));const o=r=>C(l[r],1,1,()=>{l[r]=null});return{c(){e=E("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=S(r,"OL",{class:!0,style:!0});var a=R(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(v),this.h()},h(){g(e,"class","multi-column svelte-1nfzeed"),Re(e,"--nr-columns",s[2])},m(r,a){j(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=be(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Vt(r,t,i);l[i]?(l[i].p(c,a),w(l[i],1)):(l[i]=Bt(c),l[i].c(),w(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);ge()}(!n||a&4)&&Re(e,"--nr-columns",r[2])},i(r){if(!n){for(let a=0;a<t.length;a+=1)w(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)C(l[a]);n=!1},d(r){r&&v(e),Ze(l,r)}}}function Jl(s){let e,n,t=be(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Mt(Ot(s,t,r));const o=r=>C(l[r],1,1,()=>{l[r]=null});return{c(){e=E("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=S(r,"OL",{class:!0});var a=R(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(v),this.h()},h(){g(e,"class","single-column svelte-1nfzeed")},m(r,a){j(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=be(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Ot(r,t,i);l[i]?(l[i].p(c,a),w(l[i],1)):(l[i]=Mt(c),l[i].c(),w(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);ge()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)w(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)C(l[a]);n=!1},d(r){r&&v(e),Ze(l,r)}}}function Bt(s){let e,n;function t(){return s[5](s[9])}return e=new Tl({props:{post:s[7]}}),e.$on("click",t),{c(){A(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,o){O(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[7]),e.$set(r)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){C(e.$$.fragment,l),n=!1},d(l){B(e,l)}}}function Mt(s){let e,n;function t(){return s[4](s[9])}return e=new Wl({props:{post:s[7]}}),e.$on("fullscreen",t),{c(){A(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,o){O(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[7]),e.$set(r)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){C(e.$$.fragment,l),n=!1},d(l){B(e,l)}}}function zt(s){let e,n;return e=new Sl({props:{index:s[0]}}),e.$on("close",s[3]),e.$on("endreached",s[6]),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.index=t[0]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Zl(s){let e,n,t,l,o;const r=[Jl,Yl],a=[];function i(u,f){return u[2]==="1"?0:1}e=i(s),n=a[e]=r[e](s);let c=s[0]!==void 0&&zt(s);return{c(){n.c(),t=D(),c&&c.c(),l=Ae()},l(u){n.l(u),t=L(u),c&&c.l(u),l=Ae()},m(u,f){a[e].m(u,f),j(u,t,f),c&&c.m(u,f),j(u,l,f),o=!0},p(u,[f]){let p=e;e=i(u),e===p?a[e].p(u,f):(_e(),C(a[p],1,1,()=>{a[p]=null}),ge(),n=a[e],n?n.p(u,f):(n=a[e]=r[e](u),n.c()),w(n,1),n.m(t.parentNode,t)),u[0]!==void 0?c?(c.p(u,f),f&1&&w(c,1)):(c=zt(u),c.c(),w(c,1),c.m(l.parentNode,l)):c&&(_e(),C(c,1,1,()=>{c=null}),ge())},i(u){o||(w(n),w(c),o=!0)},o(u){C(n),C(c),o=!1},d(u){u&&(v(t),v(l)),a[e].d(u),c&&c.d(u)}}}function Ql(s,e,n){let t,l;ee(s,Ye,u=>n(1,t=u)),ee(s,Qt,u=>n(2,l=u));let o;const r=u=>{var $;const f=t.posts[u.detail],p=ut(f.id);($=document.getElementById(p))==null||$.scrollIntoView(),n(0,o=void 0)},a=u=>{n(0,o=u)},i=u=>{n(0,o=u)};function c(u){Fe.call(this,s,u)}return s.$$.update=()=>{var u;s.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(u=history.state)!=null&&u.fullscreen&&history.back())},[o,t,l,r,a,i,c]}class Xl extends se{constructor(e){super(),le(this,e,Ql,Zl,ne,{})}}function qt(s,e,n){const t=s.slice();return t[8]=e[n],t}function xl(s){let e,n="We couldn't find any posts matching your tags. Sorry...";return{c(){e=E("p"),e.textContent=n},l(t){e=S(t,"P",{"data-svelte-h":!0}),ce(e)!=="svelte-1utxj3w"&&(e.textContent=n)},m(t,l){j(t,e,l)},p:K,d(t){t&&v(e)}}}function er(s){let e,n='<b class="svelte-zfjaug">⚠</b> <span>Conflicting tags detected</span> <b class="svelte-zfjaug">⚠</b>',t,l,o=be(s[0]),r=[];for(let a=0;a<o.length;a+=1)r[a]=Ut(qt(s,o,a));return{c(){e=E("h6"),e.innerHTML=n,t=D(),l=E("ul");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=S(a,"H6",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1e4zdfj"&&(e.innerHTML=n),t=L(a),l=S(a,"UL",{class:!0});var i=R(l);for(let c=0;c<r.length;c+=1)r[c].l(i);i.forEach(v),this.h()},h(){g(e,"class","svelte-zfjaug"),g(l,"class","svelte-zfjaug")},m(a,i){j(a,e,i),j(a,t,i),j(a,l,i);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(l,null)},p(a,i){if(i&1){o=be(a[0]);let c;for(c=0;c<o.length;c+=1){const u=qt(a,o,c);r[c]?r[c].p(u,i):(r[c]=Ut(u),r[c].c(),r[c].m(l,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}},d(a){a&&(v(e),v(t),v(l)),Ze(r,a)}}}function Ut(s){let e,n,t="⚠",l,o,r=s[8]+"",a,i;return{c(){e=E("li"),n=E("b"),n.textContent=t,l=D(),o=E("span"),a=X(r),i=D(),this.h()},l(c){e=S(c,"LI",{class:!0});var u=R(e);n=S(u,"B",{class:!0,"data-svelte-h":!0}),ce(n)!=="svelte-yluixs"&&(n.textContent=t),l=L(u),o=S(u,"SPAN",{});var f=R(o);a=x(f,r),f.forEach(v),i=L(u),u.forEach(v),this.h()},h(){g(n,"class","svelte-zfjaug"),g(e,"class","svelte-zfjaug")},m(c,u){j(c,e,u),b(e,n),b(e,l),b(e,o),b(o,a),b(e,i)},p(c,u){u&1&&r!==(r=c[8]+"")&&ve(a,r)},d(c){c&&v(e)}}}function tr(s){let e;return{c(){e=X("Reset Filter")},l(n){e=x(n,"Reset Filter")},m(n,t){j(n,e,t)},d(n){n&&v(e)}}}function nr(s){let e;return{c(){e=X("Reset Tags")},l(n){e=x(n,"Reset Tags")},m(n,t){j(n,e,t)},d(n){n&&v(e)}}}function sr(s){let e,n,t,l,o,r,a,i,c,u;function f(d,h){return d[0].length?er:xl}let p=f(s),$=p(s);return a=new He({props:{type:"secondary",title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[tr]},$$scope:{ctx:s}}}),a.$on("click",s[5]),c=new He({props:{type:"secondary",title:"Tag combinations that are too specific will not yield results.",$$slots:{default:[nr]},$$scope:{ctx:s}}}),c.$on("click",s[6]),{c(){e=E("section"),n=E("img"),l=D(),$.c(),o=D(),r=E("div"),A(a.$$.fragment),i=D(),A(c.$$.fragment),this.h()},l(d){e=S(d,"SECTION",{class:!0});var h=R(e);n=S(h,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),l=L(h),$.l(h),o=L(h),r=S(h,"DIV",{class:!0});var I=R(r);V(a.$$.fragment,I),i=L(I),V(c.$$.fragment,I),I.forEach(v),h.forEach(v),this.h()},h(){Ie(n.src,t=Wt+"/assets/lynxy-chibi-not-found.webp")||g(n,"src",t),g(n,"alt","Nothing here..."),g(n,"width","1231"),g(n,"height","864"),g(n,"class","svelte-zfjaug"),g(r,"class","svelte-zfjaug"),g(e,"class","svelte-zfjaug")},m(d,h){j(d,e,h),b(e,n),b(e,l),$.m(e,null),b(e,o),b(e,r),O(a,r,null),b(r,i),O(c,r,null),u=!0},p(d,[h]){p===(p=f(d))&&$?$.p(d,h):($.d(1),$=p(d),$&&($.c(),$.m(e,o)));const I={};h&2048&&(I.$$scope={dirty:h,ctx:d}),a.$set(I);const y={};h&2048&&(y.$$scope={dirty:h,ctx:d}),c.$set(y)},i(d){u||(w(a.$$.fragment,d),w(c.$$.fragment,d),u=!0)},o(d){C(a.$$.fragment,d),C(c.$$.fragment,d),u=!1},d(d){d&&v(e),$.d(),B(a),B(c)}}}function lr(s,e,n){let t,l,o,r;ee(s,et,f=>n(2,l=f)),ee(s,rn,f=>n(3,o=f)),ee(s,Je,f=>n(4,r=f));const a=Oe(),i=(f,p,$)=>{const d=$.flatMap(y=>y.tags.map(k=>({...k,supertag:y.name}))),h=Object.keys(p).filter(y=>p[y]).flatMap(y=>En[y].map(k=>({modifier:"-",name:k,group:y}))),I=[];for(const y of f){const k=h.find(m=>m.name===y.name);y.modifier!=="-"&&k&&I.push(`"${y.name}" is blocked by "${k.group}" in preferences.`);const _=d.find(m=>m.name===y.name);_&&(y.modifier==="-"&&_.modifier!=="-"&&I.push(`"${y.name}" is excluded but required by supertag "${_.supertag}".`),y.modifier!=="-"&&_.modifier==="-"&&I.push(`"${y.name}" is required but excluded by supertag "${_.supertag}".`))}for(const y of d){const k=h.find(m=>m.name===y.name);y.modifier!=="-"&&k&&I.push(`"${y.name}" (of supertag "${y.supertag}") is blocked by "${k.group}" in preferences.`);const _=d.find(m=>m.supertag!==y.supertag&&m.name===y.name);_&&(y.modifier==="-"&&_.modifier!=="-"&&I.push(`"${y.name}" is excluded by "${y.supertag}" but required by supertag "${_.supertag}".`),y.modifier!=="-"&&_.modifier==="-"&&I.push(`"${y.name}" is required by "${y.supertag}" but excluded by supertag "${_.supertag}".`))}return I},c=()=>{Xe.reset(),Ke.reset(),a("sortfilterupdate")},u=()=>{Je.reset(),et.reset()};return s.$$.update=()=>{s.$$.dirty&28&&n(0,t=i(r,o,l))},[t,a,l,o,r,c,u]}class rr extends se{constructor(e){super(),le(this,e,lr,sr,ne,{})}}function Ht(s,e,n){const t=s.slice();return t[11]=e[n],t}function Gt(s){let e,n;return e=new rs({props:{tag:s[11]}}),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.tag=t[11]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function or(s){let e;return{c(){e=X("Create supertag")},l(n){e=x(n,"Create supertag")},m(n,t){j(n,e,t)},d(n){n&&v(e)}}}function ir(s){let e,n,t="Create Supertag",l,o,r,a,i,c="Name",u,f,p,$,d,h="Description",I,y,k,_,m,P="Tags",F,U,T,N,q,Y,fe,pe,ue=be(s[3]),Z=[];for(let H=0;H<ue.length;H+=1)Z[H]=Gt(Ht(s,ue,H));const te=H=>C(Z[H],1,1,()=>{Z[H]=null});return q=new He({props:{title:s[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!s[4],$$slots:{default:[or]},$$scope:{ctx:s}}}),q.$on("click",s[9]),{c(){e=E("section"),n=E("h3"),n.textContent=t,l=D(),o=E("button"),r=D(),a=E("div"),i=E("label"),i.textContent=c,u=D(),f=E("input"),p=D(),$=E("div"),d=E("label"),d.textContent=h,I=D(),y=E("input"),k=D(),_=E("div"),m=E("span"),m.textContent=P,F=D(),U=E("ol");for(let H=0;H<Z.length;H+=1)Z[H].c();T=D(),N=E("div"),A(q.$$.fragment),this.h()},l(H){e=S(H,"SECTION",{class:!0});var W=R(e);n=S(W,"H3",{"data-svelte-h":!0}),ce(n)!=="svelte-ho1cwx"&&(n.textContent=t),l=L(W),o=S(W,"BUTTON",{type:!0,class:!0}),R(o).forEach(v),r=L(W),a=S(W,"DIV",{class:!0});var oe=R(a);i=S(oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ce(i)!=="svelte-10k8a68"&&(i.textContent=c),u=L(oe),f=S(oe,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),oe.forEach(v),p=L(W),$=S(W,"DIV",{class:!0});var J=R($);d=S(J,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ce(d)!=="svelte-14n9kp6"&&(d.textContent=h),I=L(J),y=S(J,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),J.forEach(v),k=L(W),_=S(W,"DIV",{class:!0});var ke=R(_);m=S(ke,"SPAN",{class:!0,"data-svelte-h":!0}),ce(m)!=="svelte-7hjyox"&&(m.textContent=P),F=L(ke),U=S(ke,"OL",{class:!0});var we=R(U);for(let Ee=0;Ee<Z.length;Ee+=1)Z[Ee].l(we);we.forEach(v),ke.forEach(v),T=L(W),N=S(W,"DIV",{class:!0});var $e=R(N);V(q.$$.fragment,$e),$e.forEach(v),W.forEach(v),this.h()},h(){g(o,"type","button"),g(o,"class","codicon codicon-close svelte-1x6vc81"),g(i,"for","supertag-name"),g(i,"class","svelte-1x6vc81"),g(f,"type","text"),g(f,"placeholder","Descriptive name"),g(f,"id","supertag-name"),g(f,"class","svelte-1x6vc81"),g(a,"class","svelte-1x6vc81"),g(d,"for","supertag-description"),g(d,"class","svelte-1x6vc81"),g(y,"type","text"),g(y,"placeholder","Short description"),g(y,"id","supertag-description"),g(y,"class","svelte-1x6vc81"),g($,"class","svelte-1x6vc81"),g(m,"class","svelte-1x6vc81"),g(U,"class","svelte-1x6vc81"),g(_,"class","svelte-1x6vc81"),g(N,"class","last svelte-1x6vc81"),g(e,"class","svelte-1x6vc81")},m(H,W){j(H,e,W),b(e,n),b(e,l),b(e,o),b(e,r),b(e,a),b(a,i),b(a,u),b(a,f),We(f,s[0]),b(e,p),b(e,$),b($,d),b($,I),b($,y),We(y,s[2]),b(e,k),b(e,_),b(_,m),b(_,F),b(_,U);for(let oe=0;oe<Z.length;oe+=1)Z[oe]&&Z[oe].m(U,null);b(e,T),b(e,N),O(q,N,null),Y=!0,fe||(pe=[Q(o,"click",s[6]),Q(f,"input",s[7]),Q(y,"input",s[8])],fe=!0)},p(H,W){if(W&1&&f.value!==H[0]&&We(f,H[0]),W&4&&y.value!==H[2]&&We(y,H[2]),W&8){ue=be(H[3]);let J;for(J=0;J<ue.length;J+=1){const ke=Ht(H,ue,J);Z[J]?(Z[J].p(ke,W),w(Z[J],1)):(Z[J]=Gt(ke),Z[J].c(),w(Z[J],1),Z[J].m(U,null))}for(_e(),J=ue.length;J<Z.length;J+=1)te(J);ge()}const oe={};W&16&&(oe.title=H[4]?"Click to create supertag":"Enter a valid name to continue"),W&16&&(oe.disabled=!H[4]),W&16384&&(oe.$$scope={dirty:W,ctx:H}),q.$set(oe)},i(H){if(!Y){for(let W=0;W<ue.length;W+=1)w(Z[W]);w(q.$$.fragment,H),Y=!0}},o(H){Z=Z.filter(Boolean);for(let W=0;W<Z.length;W+=1)C(Z[W]);C(q.$$.fragment,H),Y=!1},d(H){H&&v(e),Ze(Z,H),B(q),fe=!1,Qe(pe)}}}function ar(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[ir]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.dialog=s[1]),e=new Jt({props:o}),he.push(()=>je(e,"dialog",l)),e.$on("close",s[6]),{c(){A(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,a){O(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],Ne(()=>n=!1)),e.$set(i)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function cr(s,e,n){let t,{dialog:l}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=Oe(),c=()=>l.close();function u(){o=this.value,n(0,o)}function f(){r=this.value,n(2,r)}const p=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:d,name:h})=>({modifier:d,name:h}))}),c()};function $(d){l=d,n(1,l)}return s.$$set=d=>{"dialog"in d&&n(1,l=d.dialog),"name"in d&&n(0,o=d.name),"description"in d&&n(2,r=d.description),"tags"in d&&n(3,a=d.tags)},s.$$.update=()=>{s.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,l,r,a,t,i,c,u,f,p,$]}class ur extends se{constructor(e){super(),le(this,e,cr,ar,ne,{dialog:1,name:0,description:2,tags:3})}}function fr(s){let e;return{c(){e=X("Search")},l(n){e=x(n,"Search")},m(n,t){j(n,e,t)},i:K,o:K,d(n){n&&v(e)}}}function pr(s){let e,n;return e=new _t({}),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function dr(s){let e,n,t,l;const o=[pr,fr],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Ae()},l(i){n.l(i),t=Ae()},m(i,c){r[e].m(i,c),j(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(_e(),C(r[u],1,1,()=>{r[u]=null}),ge(),n=r[e],n||(n=r[e]=o[e](i),n.c()),w(n,1),n.m(t.parentNode,t))},i(i){l||(w(n),l=!0)},o(i){C(n),l=!1},d(i){i&&v(t),r[e].d(i)}}}function _r(s){let e,n,t,l,o,r,a,i,c,u;n=new ts({props:{placeholder:"Search for tags",fetchSuggestions:s[6]}}),n.$on("pick",s[7]),l=new He({props:{id:"btn-search",title:"Search with the tags above",$$slots:{default:[dr]},$$scope:{ctx:s}}}),l.$on("click",s[5]),r=new ns({props:{tags:[...s[3],...s[4]]}}),r.$on("contextmenu",s[8]),r.$on("click",s[9]),r.$on("createSupertag",s[10]);function f($){s[11]($)}let p={tags:s[3]};return s[1]!==void 0&&(p.dialog=s[1]),i=new ur({props:p}),he.push(()=>je(i,"dialog",f)),i.$on("submit",s[12]),{c(){e=E("section"),A(n.$$.fragment),t=D(),A(l.$$.fragment),o=D(),A(r.$$.fragment),a=D(),A(i.$$.fragment),this.h()},l($){e=S($,"SECTION",{id:!0,class:!0});var d=R(e);V(n.$$.fragment,d),t=L(d),V(l.$$.fragment,d),o=L(d),V(r.$$.fragment,d),d.forEach(v),a=L($),V(i.$$.fragment,$),this.h()},h(){g(e,"id","search"),g(e,"class","svelte-7vsaha")},m($,d){j($,e,d),O(n,e,null),b(e,t),O(l,e,null),b(e,o),O(r,e,null),j($,a,d),O(i,$,d),u=!0},p($,[d]){const h={};d&65537&&(h.$$scope={dirty:d,ctx:$}),l.$set(h);const I={};d&24&&(I.tags=[...$[3],...$[4]]),r.$set(I);const y={};d&8&&(y.tags=$[3]),!c&&d&2&&(c=!0,y.dialog=$[1],Ne(()=>c=!1)),i.$set(y)},i($){u||(w(n.$$.fragment,$),w(l.$$.fragment,$),w(r.$$.fragment,$),w(i.$$.fragment,$),u=!0)},o($){C(n.$$.fragment,$),C(l.$$.fragment,$),C(r.$$.fragment,$),C(i.$$.fragment,$),u=!1},d($){$&&(v(e),v(a)),B(n),B(l),B(r),B(i,$)}}}function gr(s,e,n){let t,l,o,r;ee(s,Ye,_=>n(13,t=_)),ee(s,$t,_=>n(2,l=_)),ee(s,Je,_=>n(3,o=_)),ee(s,et,_=>n(4,r=_));const a=Oe(),i=()=>a("submit");let{loading:c}=e,u;const f=async _=>{const m=await Zn(_);return[...l.items.filter(({name:F})=>F.toLowerCase().includes(_.toLowerCase())).map(F=>({label:F.name,count:F.tags.length,type:"supertag"})),...m]},p=_=>{var m,P;(_.key==="/"||_.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&(_.preventDefault(),_.stopPropagation(),(m=document.getElementById("searchbar"))==null||m.focus()),_.ctrlKey&&_.key==="Enter"&&(_.preventDefault(),_.stopPropagation(),i()),_.ctrlKey&&_.key==="m"&&(_.preventDefault(),_.stopPropagation(),(P=document.getElementById("select-modifier"))==null||P.click())};tt(async()=>{document.addEventListener("keydown",p),t.postCount===0&&i()}),nt(()=>{document.removeEventListener("keydown",p)});const $=async _=>{const m=_.detail;if(m.type==="supertag"){const P=l.items.find(F=>F.name===m.label);if(!P){console.warn("Supertag not present.");return}et.addOrReplace(P)}else{const P=await Qn(_.detail.label);Je.addOrReplace({name:_.detail.label,modifier:_.detail.modifier,count:_.detail.count,type:(P==null?void 0:P.type)??"tag"})}},d=_=>"description"in _.detail?et.removeByName(_.detail.name):Je.removeByName(_.detail.name),h=_=>{"description"in _.detail||(_.detail.modifier=ls(_.detail.modifier),Je.addOrReplace(_.detail))},I=()=>{u.showModal(),Zt("dialog")};function y(_){u=_,n(1,u)}const k=_=>$t.add(_.detail);return s.$$set=_=>{"loading"in _&&n(0,c=_.loading)},[c,u,l,o,r,i,f,$,d,h,I,y,k]}class mr extends se{constructor(e){super(),le(this,e,gr,_r,ne,{loading:0})}}const{document:dt}=yn;function hr(s){let e,n,t,l,o,r;const a=[br,vr],i=[];function c(u,f){return u[2].postCount===0?0:1}return n=c(s),t=i[n]=a[n](s),o=new Xn({}),{c(){e=E("section"),t.c(),l=D(),A(o.$$.fragment),this.h()},l(u){e=S(u,"SECTION",{class:!0});var f=R(e);t.l(f),f.forEach(v),l=L(u),V(o.$$.fragment,u),this.h()},h(){g(e,"class","svelte-1ezwrd1")},m(u,f){j(u,e,f),i[n].m(e,null),j(u,l,f),O(o,u,f),r=!0},p(u,f){let p=n;n=c(u),n===p?i[n].p(u,f):(_e(),C(i[p],1,1,()=>{i[p]=null}),ge(),t=i[n],t?t.p(u,f):(t=i[n]=a[n](u),t.c()),w(t,1),t.m(e,null))},i(u){r||(w(t),w(o.$$.fragment,u),r=!0)},o(u){C(t),C(o.$$.fragment,u),r=!1},d(u){u&&(v(e),v(l)),i[n].d(),B(o,u)}}}function $r(s){let e,n;return e=new as({props:{error:s[1]}}),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.error=t[1]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function vr(s){let e,n,t,l,o,r;e=new Xl({}),e.$on("sortfilterupdate",s[4]),e.$on("endreached",s[5]);const a=[wr,kr],i=[];function c(u,f){return u[2].posts.length===u[2].postCount?0:1}return t=c(s),l=i[t]=a[t](s),{c(){A(e.$$.fragment),n=D(),l.c(),o=Ae()},l(u){V(e.$$.fragment,u),n=L(u),l.l(u),o=Ae()},m(u,f){O(e,u,f),j(u,n,f),i[t].m(u,f),j(u,o,f),r=!0},p(u,f){let p=t;t=c(u),t===p?i[t].p(u,f):(_e(),C(i[p],1,1,()=>{i[p]=null}),ge(),l=i[t],l?l.p(u,f):(l=i[t]=a[t](u),l.c()),w(l,1),l.m(o.parentNode,o))},i(u){r||(w(e.$$.fragment,u),w(l),r=!0)},o(u){C(e.$$.fragment,u),C(l),r=!1},d(u){u&&(v(n),v(o)),B(e,u),i[t].d(u)}}}function br(s){let e,n;return e=new rr({}),e.$on("sortfilterupdate",s[4]),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p:K,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function kr(s){let e,n,t,l;return e=new cn({props:{absoluteTop:void 0,rootMargin:1e3/Number(s[3])+"px"}}),e.$on("intersection",s[5]),t=new He({props:{title:"Load more posts",$$slots:{default:[Sr]},$$scope:{ctx:s}}}),t.$on("click",s[5]),{c(){A(e.$$.fragment),n=D(),A(t.$$.fragment)},l(o){V(e.$$.fragment,o),n=L(o),V(t.$$.fragment,o)},m(o,r){O(e,o,r),j(o,n,r),O(t,o,r),l=!0},p(o,r){const a={};r&8&&(a.rootMargin=1e3/Number(o[3])+"px"),e.$set(a);const i={};r&32769&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){l||(w(e.$$.fragment,o),w(t.$$.fragment,o),l=!0)},o(o){C(e.$$.fragment,o),C(t.$$.fragment,o),l=!1},d(o){o&&v(n),B(e,o),B(t,o)}}}function wr(s){let e,n;return e=new ds({}),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},p:K,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function yr(s){let e;return{c(){e=X("Load more")},l(n){e=x(n,"Load more")},m(n,t){j(n,e,t)},i:K,o:K,d(n){n&&v(e)}}}function Er(s){let e,n;return e=new _t({}),{c(){A(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){O(e,t,l),n=!0},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Sr(s){let e,n,t,l;const o=[Er,yr],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Ae()},l(i){n.l(i),t=Ae()},m(i,c){r[e].m(i,c),j(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(_e(),C(r[u],1,1,()=>{r[u]=null}),ge(),n=r[e],n||(n=r[e]=o[e](i),n.c()),w(n,1),n.m(t.parentNode,t))},i(i){l||(w(n),l=!0)},o(i){C(n),l=!1},d(i){i&&v(t),r[e].d(i)}}}function Kt(s){let e;return{c(){e=E("div"),this.h()},l(n){e=S(n,"DIV",{class:!0}),R(e).forEach(v),this.h()},h(){g(e,"class","svelte-1ezwrd1")},m(n,t){j(n,e,t)},d(n){n&&v(e)}}}function Cr(s){let e,n,t,l,o,r,a,i,c,u,f,p,$,d,h;t=new es({}),o=new ss({}),a=new mr({props:{loading:s[0]}}),a.$on("submit",s[4]),c=new Fs({props:{loading:s[0]}}),c.$on("sortfilterupdate",s[4]);const I=[$r,hr],y=[];function k(m,P){return m[1]?0:m[2].requested?1:-1}~(f=k(s))&&(p=y[f]=I[f](s));let _=s[0]&&Kt();return{c(){e=E("meta"),n=D(),A(t.$$.fragment),l=D(),A(o.$$.fragment),r=D(),A(a.$$.fragment),i=D(),A(c.$$.fragment),u=D(),p&&p.c(),$=D(),_&&_.c(),d=Ae(),this.h()},l(m){const P=wn("svelte-7jdp3v",dt.head);e=S(P,"META",{name:!0,content:!0}),P.forEach(v),n=L(m),V(t.$$.fragment,m),l=L(m),V(o.$$.fragment,m),r=L(m),V(a.$$.fragment,m),i=L(m),V(c.$$.fragment,m),u=L(m),p&&p.l(m),$=L(m),_&&_.l(m),d=Ae(),this.h()},h(){dt.title="kurosearch - Rule34 Hentai",g(e,"name","description"),g(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience.")},m(m,P){b(dt.head,e),j(m,n,P),O(t,m,P),j(m,l,P),O(o,m,P),j(m,r,P),O(a,m,P),j(m,i,P),O(c,m,P),j(m,u,P),~f&&y[f].m(m,P),j(m,$,P),_&&_.m(m,P),j(m,d,P),h=!0},p(m,[P]){const F={};P&1&&(F.loading=m[0]),a.$set(F);const U={};P&1&&(U.loading=m[0]),c.$set(U);let T=f;f=k(m),f===T?~f&&y[f].p(m,P):(p&&(_e(),C(y[T],1,1,()=>{y[T]=null}),ge()),~f?(p=y[f],p?p.p(m,P):(p=y[f]=I[f](m),p.c()),w(p,1),p.m($.parentNode,$)):p=null),m[0]?_||(_=Kt(),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},i(m){h||(w(t.$$.fragment,m),w(o.$$.fragment,m),w(a.$$.fragment,m),w(c.$$.fragment,m),w(p),h=!0)},o(m){C(t.$$.fragment,m),C(o.$$.fragment,m),C(a.$$.fragment,m),C(c.$$.fragment,m),C(p),h=!1},d(m){m&&(v(n),v(l),v(r),v(i),v(u),v($),v(d)),v(e),B(t,m),B(o,m),B(a,m),B(c,m),~f&&y[f].d(m),_&&_.d(m)}}}function Ir(s,e,n){let t,l,o,r,a,i,c;ee(s,Ye,k=>n(2,t=k)),ee(s,et,k=>n(7,l=k)),ee(s,Ke,k=>n(8,o=k)),ee(s,Xe,k=>n(9,r=k)),ee(s,rn,k=>n(10,a=k)),ee(s,Je,k=>n(11,i=k)),ee(s,Qt,k=>n(3,c=k)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let u=!1,f,p=0;const $=()=>new Sn().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(l),d=async k=>{if(!u){n(1,f=void 0),n(0,u=!0);try{const _=t.pageCount;await k(),xn(_).catch(()=>{})}catch(_){n(1,f=_),console.warn(_)}finally{n(0,u=!1)}}},h=async()=>{Ye.reset(),p=0,d(async()=>{const[k,_]=await $().getPageAndCount();Ye.addPage(k,_)})},I=async()=>{d(async()=>{const k=await $().getPage();Ye.addPage(k)})},y=k=>{if(k.ctrlKey&&k.key==="ArrowDown"){const _=document.getElementsByClassName("post-media");_[p].focus(),p=Math.min(p+1,Math.max(0,_.length-1))}k.ctrlKey&&k.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[p].focus(),p=Math.max(p-1,0))};return tt(async()=>{document.addEventListener("keydown",y)}),nt(()=>{document.removeEventListener("keydown",y)}),[u,f,t,c,h,I]}class so extends se{constructor(e){super(),le(this,e,Ir,Cr,ne,{})}}export{so as component};
