import{s as fe,p as ke,E as Fe,F as je,f as E,a as N,g as S,h as M,y as ae,c as T,d as g,j as m,r as zt,i as A,u as d,G as Je,H as De,I as Ye,J as ct,l as oe,m as ie,v as J,K as we,w as nn,L as sn,A as ln,B as rn,C as on,o as rt,M as ot,n as Le,e as ye,k as Be,D as ge,N as nt,z as at,O as an,P as Gt,Q as _t,x as cn}from"../chunks/scheduler.1fe7733a.js";import{S as pe,i as _e,f as Re,b as O,d as F,m as R,a as $,t as w,e as V,g as ce,c as ue,h as un}from"../chunks/index.f7414ec0.js";import{g as fn}from"../chunks/globals.7f7f1b26.js";import{e as Pe}from"../chunks/each.e59479a4.js";import{D as Ut,a as qt,r as Ht}from"../chunks/result-columns-store.3cc83729.js";import{T as Ge}from"../chunks/TextButton.82eafe13.js";import{D as pn}from"../chunks/DetailedTag.f6531b9e.js";import{K as _n,A as dn}from"../chunks/ActiveTagList.a8c05e57.js";import{b as Kt}from"../chunks/paths.778153ba.js";import{f as st}from"../chunks/format-tag.7e313273.js";import{r as Qe,a as ut}from"../chunks/active-supertags-store.6695960a.js";import{I as Wt,R as gn}from"../chunks/ModifierSelect.9e9c1560.js";import{h as dt,u as mn}from"../chunks/await_block.2d81fefc.js";import{L as pt}from"../chunks/LoadingAnimation.e457af0b.js";import{R as hn,S as $n,a as vn,K as bn,E as Jt,b as kn,g as gt,P as wn,C as yn,c as Cn,d as Qt,i as En,e as Yt,D as Sn,G as In,V as Dn,f as mt,I as Pn}from"../chunks/Details.18060056.js";import{a as Nn}from"../chunks/always-loop-store.aab1c9ab.js";import{f as Me,s as ze,S as Tn}from"../chunks/search-builder.2a866387.js";import{S as ht}from"../chunks/Select.e916c42e.js";import{R as An}from"../chunks/RotatingTextSelect.37bd60a4.js";import{S as On}from"../chunks/Searchbar.ffd3c5dc.js";import{S as Fn}from"../chunks/ScrollUpButton.3befe2fc.js";import{g as Rn,a as Vn}from"../chunks/tags.49324235.js";import{l as Mn}from"../chunks/analytics.b280da65.js";import{n as Ln,s as $t}from"../chunks/supertags-store.7ba1df06.js";import{a as it}from"../chunks/active-tags-store.cd90ee28.js";import{b as Bn}from"../chunks/blocked-content-store.2ba3de95.js";import{c as Zt}from"../chunks/cookies-accepted-store.95bbfb0b.js";function vt(l,e,n){const t=l.slice();return t[11]=e[n],t}function bt(l){let e,n;return e=new pn({props:{tag:l[11]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&8&&(o.tag=t[11]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function jn(l){let e;return{c(){e=oe("Create supertag")},l(n){e=ie(n,"Create supertag")},m(n,t){A(n,e,t)},d(n){n&&g(e)}}}function zn(l){let e,n,t="Create Supertag",s,o,r,a,i,c="Name",u,_,f,y,h,v="Description",P,p,b,k,C,G="Tags",te,Q,Z,H,D,U,I,x,K=Pe(l[3]),L=[];for(let B=0;B<K.length;B+=1)L[B]=bt(vt(l,K,B));const le=B=>w(L[B],1,1,()=>{L[B]=null});return D=new Ge({props:{title:l[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!l[4],$$slots:{default:[jn]},$$scope:{ctx:l}}}),D.$on("click",l[9]),{c(){e=E("section"),n=E("h3"),n.textContent=t,s=N(),o=E("button"),r=N(),a=E("div"),i=E("label"),i.textContent=c,u=N(),_=E("input"),f=N(),y=E("div"),h=E("label"),h.textContent=v,P=N(),p=E("input"),b=N(),k=E("div"),C=E("span"),C.textContent=G,te=N(),Q=E("ol");for(let B=0;B<L.length;B+=1)L[B].c();Z=N(),H=E("div"),O(D.$$.fragment),this.h()},l(B){e=S(B,"SECTION",{class:!0});var j=M(e);n=S(j,"H3",{"data-svelte-h":!0}),ae(n)!=="svelte-ho1cwx"&&(n.textContent=t),s=T(j),o=S(j,"BUTTON",{class:!0}),M(o).forEach(g),r=T(j),a=S(j,"DIV",{class:!0});var ne=M(a);i=S(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ae(i)!=="svelte-10k8a68"&&(i.textContent=c),u=T(ne),_=S(ne,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),ne.forEach(g),f=T(j),y=S(j,"DIV",{class:!0});var Y=M(y);h=S(Y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ae(h)!=="svelte-14n9kp6"&&(h.textContent=v),P=T(Y),p=S(Y,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),Y.forEach(g),b=T(j),k=S(j,"DIV",{class:!0});var me=M(k);C=S(me,"SPAN",{class:!0,"data-svelte-h":!0}),ae(C)!=="svelte-7hjyox"&&(C.textContent=G),te=T(me),Q=S(me,"OL",{class:!0});var he=M(Q);for(let Se=0;Se<L.length;Se+=1)L[Se].l(he);he.forEach(g),me.forEach(g),Z=T(j),H=S(j,"DIV",{class:!0});var Oe=M(H);F(D.$$.fragment,Oe),Oe.forEach(g),j.forEach(g),this.h()},h(){m(o,"class",zt("codicon codicon-close")+" svelte-1x6vc81"),m(i,"for","supertag-name"),m(i,"class","svelte-1x6vc81"),m(_,"type","text"),m(_,"placeholder","Descriptive name"),m(_,"id","supertag-name"),m(_,"class","svelte-1x6vc81"),m(a,"class","svelte-1x6vc81"),m(h,"for","supertag-description"),m(h,"class","svelte-1x6vc81"),m(p,"type","text"),m(p,"placeholder","Short description"),m(p,"id","supertag-description"),m(p,"class","svelte-1x6vc81"),m(y,"class","svelte-1x6vc81"),m(C,"class","svelte-1x6vc81"),m(Q,"class","svelte-1x6vc81"),m(k,"class","svelte-1x6vc81"),m(H,"class","last svelte-1x6vc81"),m(e,"class","svelte-1x6vc81")},m(B,j){A(B,e,j),d(e,n),d(e,s),d(e,o),d(e,r),d(e,a),d(a,i),d(a,u),d(a,_),Je(_,l[0]),d(e,f),d(e,y),d(y,h),d(y,P),d(y,p),Je(p,l[2]),d(e,b),d(e,k),d(k,C),d(k,te),d(k,Q);for(let ne=0;ne<L.length;ne+=1)L[ne]&&L[ne].m(Q,null);d(e,Z),d(e,H),R(D,H,null),U=!0,I||(x=[De(o,"click",l[6]),De(_,"input",l[7]),De(p,"input",l[8])],I=!0)},p(B,j){if(j&1&&_.value!==B[0]&&Je(_,B[0]),j&4&&p.value!==B[2]&&Je(p,B[2]),j&8){K=Pe(B[3]);let Y;for(Y=0;Y<K.length;Y+=1){const me=vt(B,K,Y);L[Y]?(L[Y].p(me,j),$(L[Y],1)):(L[Y]=bt(me),L[Y].c(),$(L[Y],1),L[Y].m(Q,null))}for(ce(),Y=K.length;Y<L.length;Y+=1)le(Y);ue()}const ne={};j&16&&(ne.title=B[4]?"Click to create supertag":"Enter a valid name to continue"),j&16&&(ne.disabled=!B[4]),j&16384&&(ne.$$scope={dirty:j,ctx:B}),D.$set(ne)},i(B){if(!U){for(let j=0;j<K.length;j+=1)$(L[j]);$(D.$$.fragment,B),U=!0}},o(B){L=L.filter(Boolean);for(let j=0;j<L.length;j+=1)w(L[j]);w(D.$$.fragment,B),U=!1},d(B){B&&g(e),Ye(L,B),V(D),I=!1,ct(x)}}}function Gn(l){let e,n,t;function s(r){l[10](r)}let o={$$slots:{default:[zn]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.dialog=l[1]),e=new Ut({props:o}),ke.push(()=>Re(e,"dialog",s)),e.$on("close",l[6]),{c(){O(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){R(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],Fe(()=>n=!1)),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function Un(l,e,n){let t,{dialog:s}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=je(),c=()=>s.close();function u(){o=this.value,n(0,o)}function _(){r=this.value,n(2,r)}const f=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:h,name:v})=>({modifier:h,name:v}))}),c()};function y(h){s=h,n(1,s)}return l.$$set=h=>{"dialog"in h&&n(1,s=h.dialog),"name"in h&&n(0,o=h.name),"description"in h&&n(2,r=h.description),"tags"in h&&n(3,a=h.tags)},l.$$.update=()=>{l.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,s,r,a,t,i,c,u,_,f,y]}class qn extends pe{constructor(e){super(),_e(this,e,Un,Gn,fe,{dialog:1,name:0,description:2,tags:3})}}function Hn(l){let e,n,t,s,o,r,a,i,c,u;return{c(){e=E("div"),n=E("div"),t=E("i"),s=N(),o=E("div"),r=E("h3"),a=oe(l[0]),i=N(),c=E("span"),u=oe(l[2]),this.h()},l(_){e=S(_,"DIV",{class:!0});var f=M(e);n=S(f,"DIV",{class:!0});var y=M(n);t=S(y,"I",{class:!0}),M(t).forEach(g),y.forEach(g),s=T(f),o=S(f,"DIV",{});var h=M(o);r=S(h,"H3",{class:!0});var v=M(r);a=ie(v,l[0]),v.forEach(g),i=T(h),c=S(h,"SPAN",{});var P=M(c);u=ie(P,l[2]),P.forEach(g),h.forEach(g),f.forEach(g),this.h()},h(){m(t,"class",zt(l[1])+" svelte-1yohziu"),m(n,"class","icon svelte-1yohziu"),m(r,"class","svelte-1yohziu"),m(e,"class","error svelte-1yohziu")},m(_,f){A(_,e,f),d(e,n),d(n,t),d(e,s),d(e,o),d(o,r),d(r,a),d(o,i),d(o,c),d(c,u)},p:J,i:J,o:J,d(_){_&&g(e)}}}function Kn(l,e,n){let{error:t}=e,s=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return l.$$set=a=>{"error"in a&&n(3,t=a.error)},[s,o,r,t]}class Wn extends pe{constructor(e){super(),_e(this,e,Kn,Hn,fe,{error:3})}}function Jn(l){let e,n,t,s,o="You have seen everything there is to see...";return{c(){e=E("img"),t=N(),s=E("p"),s.textContent=o,this.h()},l(r){e=S(r,"IMG",{src:!0,alt:!0,class:!0}),t=T(r),s=S(r,"P",{"data-svelte-h":!0}),ae(s)!=="svelte-1i75mtf"&&(s.textContent=o),this.h()},h(){we(e.src,n=Kt+"/assets/shironeko-x.png")||m(e,"src",n),m(e,"alt","No more results to load"),m(e,"class","svelte-1pkma0d")},m(r,a){A(r,e,a),A(r,t,a),A(r,s,a)},p:J,i:J,o:J,d(r){r&&(g(e),g(t),g(s))}}}class Qn extends pe{constructor(e){super(),_e(this,e,null,Jn,fe,{})}}const lt=l=>`post_${l}`;function Yn(l){let e,n,t,s;const o=l[3].default,r=nn(o,l,l[2],null);return{c(){e=E("div"),r&&r.c(),this.h()},l(a){e=S(a,"DIV",{role:!0,tabindex:!0,class:!0});var i=M(e);r&&r.l(i),i.forEach(g),this.h()},h(){m(e,"role","none"),m(e,"tabindex","-1"),m(e,"class","svelte-6sy8qz")},m(a,i){A(a,e,i),r&&r.m(e,null),l[4](e),n=!0,t||(s=[De(e,"click",sn(Zn)),De(e,"keydown",l[1])],t=!0)},p(a,[i]){r&&r.p&&(!n||i&4)&&ln(r,o,a,a[2],n?on(o,a[2],i,null):rn(a[2]),null)},i(a){n||($(r,a),n=!0)},o(a){w(r,a),n=!1},d(a){a&&g(e),r&&r.d(a),l[4](null),t=!1,ct(s)}}}const Zn=()=>{};function Xn(l,e,n){let{$$slots:t={},$$scope:s}=e;const o=je(),r=()=>o("close"),a=_=>{_.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let c;rt(async()=>{c.focus(),document.addEventListener("fullscreenchange",i);try{await c.requestFullscreen()}catch{}}),ot(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function u(_){ke[_?"unshift":"push"](()=>{c=_,n(0,c)})}return l.$$set=_=>{"$$scope"in _&&n(2,s=_.$$scope)},[c,a,s,t,u]}class xn extends pe{constructor(e){super(),_e(this,e,Xn,Yn,fe,{})}}function es(l){let e,n;return{c(){e=E("div"),this.h()},l(t){e=S(t,"DIV",{style:!0}),M(e).forEach(g),this.h()},h(){m(e,"style",n=l[0]?`position:absolute;top:${l[0]};`:void 0)},m(t,s){A(t,e,s),l[3](e)},p(t,[s]){s&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&m(e,"style",n)},i:J,o:J,d(t){t&&g(e),l[3](null)}}}function ts(l,e,n){let{rootMargin:t}=e,{absoluteTop:s}=e;const o=je(),r=new IntersectionObserver(c=>{c[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(c){ke[c?"unshift":"push"](()=>{a=c,n(1,a)})}return l.$$set=c=>{"rootMargin"in c&&n(2,t=c.rootMargin),"absoluteTop"in c&&n(0,s=c.absoluteTop)},l.$$.update=()=>{l.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[s,a,t,i]}class Xt extends pe{constructor(e){super(),_e(this,e,ts,es,fe,{rootMargin:2,absoluteTop:0})}}function kt(l,e,n){const t=l.slice();return t[5]=e[n],t}function wt(l,e,n){const t=l.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function yt(l){let e,n="•",t,s,o;return s=new Jt({props:{source:l[0].source}}),{c(){e=E("span"),e.textContent=n,t=N(),O(s.$$.fragment)},l(r){e=S(r,"SPAN",{"data-svelte-h":!0}),ae(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=T(r),F(s.$$.fragment,r)},m(r,a){A(r,e,a),A(r,t,a),R(s,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),s.$set(i)},i(r){o||($(s.$$.fragment,r),o=!0)},o(r){w(s.$$.fragment,r),o=!1},d(r){r&&(g(e),g(t)),V(s,r)}}}function Ct(l){let e,n=l[8]+"",t,s,o,r;return o=new wn({props:{tags:l[9]}}),{c(){e=E("h3"),t=oe(n),s=N(),O(o.$$.fragment),this.h()},l(a){e=S(a,"H3",{class:!0});var i=M(e);t=ie(i,n),i.forEach(g),s=T(a),F(o.$$.fragment,a),this.h()},h(){m(e,"class","svelte-1kekodt")},m(a,i){A(a,e,i),d(e,t),A(a,s,i),R(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[8]+"")&&Le(t,n);const c={};i&2&&(c.tags=a[9]),o.$set(c)},i(a){r||($(o.$$.fragment,a),r=!0)},o(a){w(o.$$.fragment,a),r=!1},d(a){a&&(g(e),g(s)),V(o,a)}}}function ns(l){return{c:J,l:J,m:J,p:J,i:J,o:J,d:J}}function ss(l){let e,n,t,s;const o=[rs,ls],r=[];function a(i,c){return i[4].length>0?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=ye()},l(i){n.l(i),t=ye()},m(i,c){r[e].m(i,c),A(i,t,c),s=!0},p(i,c){let u=e;e=a(i),e===u?r[e].p(i,c):(ce(),w(r[u],1,1,()=>{r[u]=null}),ue(),n=r[e],n?n.p(i,c):(n=r[e]=o[e](i),n.c()),$(n,1),n.m(t.parentNode,t))},i(i){s||($(n),s=!0)},o(i){w(n),s=!1},d(i){i&&g(t),r[e].d(i)}}}function ls(l){let e,n="Comments for this post are not available";return{c(){e=E("span"),e.textContent=n,this.h()},l(t){e=S(t,"SPAN",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-4t2lxe"&&(e.textContent=n),this.h()},h(){m(e,"class","no-comments svelte-1kekodt")},m(t,s){A(t,e,s)},p:J,i:J,o:J,d(t){t&&g(e)}}}function rs(l){let e,n,t=Pe(l[4]),s=[];for(let r=0;r<t.length;r+=1)s[r]=Et(kt(l,t,r));const o=r=>w(s[r],1,1,()=>{s[r]=null});return{c(){e=E("ul");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"UL",{class:!0});var a=M(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(g),this.h()},h(){m(e,"class","comments svelte-1kekodt")},m(r,a){A(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&1){t=Pe(r[4]);let i;for(i=0;i<t.length;i+=1){const c=kt(r,t,i);s[i]?(s[i].p(c,a),$(s[i],1)):(s[i]=Et(c),s[i].c(),$(s[i],1),s[i].m(e,null))}for(ce(),i=t.length;i<s.length;i+=1)o(i);ue()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)$(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(r){r&&g(e),Ye(s,r)}}}function Et(l){let e,n;return e=new yn({props:{comment:l[5]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&1&&(o.comment=t[5]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function os(l){let e,n;return e=new pt({}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p:J,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function is(l){let e,n,t,s,o,r,a,i,c=l[0].id+"",u,_,f,y,h,v,P="•",p,b,k=l[0].type.toUpperCase()+"",C,G,te,Q="•",Z,H,D,U,I="•",x,K,L,le,B,j,ne,Y="•",me,he,Oe,Se,Ze="•",Xe,Ne,xe,Ue,Ve,qe,z,X,Ae="Comments",Te,Ie,$e;y=new hn({props:{value:l[0].rating}}),H=new $n({props:{value:l[0].score}}),K=new vn({props:{value:l[0].change}}),B=new bn({props:{url:"/post?id="+l[0].id+"&src="+encodeURIComponent(l[3])}}),he=new Jt({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id}}),Ne=new kn({props:{url:l[3]}});let ee=l[0].source&&yt(l),Ce=Pe(Object.entries(l[1])),se=[];for(let W=0;W<Ce.length;W+=1)se[W]=Ct(wt(l,Ce,W));const tn=W=>w(se[W],1,1,()=>{se[W]=null});let ve={ctx:l,current:null,token:null,hasCatch:!1,pending:os,then:ss,catch:ns,value:4,blocks:[,,,]};return dt(Ie=gt(l[0].id),ve),{c(){e=E("div"),n=E("img"),s=N(),o=E("h1"),r=oe("Post "),a=E("b"),i=oe("#"),u=oe(c),_=N(),f=E("div"),O(y.$$.fragment),h=N(),v=E("span"),v.textContent=P,p=N(),b=E("span"),C=oe(k),G=N(),te=E("span"),te.textContent=Q,Z=N(),O(H.$$.fragment),D=N(),U=E("span"),U.textContent=I,x=N(),O(K.$$.fragment),L=N(),le=E("div"),O(B.$$.fragment),j=N(),ne=E("span"),ne.textContent=Y,me=N(),O(he.$$.fragment),Oe=N(),Se=E("span"),Se.textContent=Ze,Xe=N(),O(Ne.$$.fragment),xe=N(),ee&&ee.c(),Ue=N(),Ve=E("div");for(let W=0;W<se.length;W+=1)se[W].c();qe=N(),z=E("div"),X=E("h3"),X.textContent=Ae,Te=N(),ve.block.c(),this.h()},l(W){e=S(W,"DIV",{class:!0});var q=M(e);n=S(q,"IMG",{class:!0,src:!0,alt:!0}),s=T(q),o=S(q,"H1",{class:!0});var Ee=M(o);r=ie(Ee,"Post "),a=S(Ee,"B",{});var He=M(a);i=ie(He,"#"),u=ie(He,c),He.forEach(g),Ee.forEach(g),_=T(q),f=S(q,"DIV",{class:!0});var de=M(f);F(y.$$.fragment,de),h=T(de),v=S(de,"SPAN",{"data-svelte-h":!0}),ae(v)!=="svelte-7hh8jk"&&(v.textContent=P),p=T(de),b=S(de,"SPAN",{});var et=M(b);C=ie(et,k),et.forEach(g),G=T(de),te=S(de,"SPAN",{"data-svelte-h":!0}),ae(te)!=="svelte-7hh8jk"&&(te.textContent=Q),Z=T(de),F(H.$$.fragment,de),D=T(de),U=S(de,"SPAN",{"data-svelte-h":!0}),ae(U)!=="svelte-7hh8jk"&&(U.textContent=I),x=T(de),F(K.$$.fragment,de),de.forEach(g),L=T(q),le=S(q,"DIV",{class:!0});var be=M(le);F(B.$$.fragment,be),j=T(be),ne=S(be,"SPAN",{"data-svelte-h":!0}),ae(ne)!=="svelte-7hh8jk"&&(ne.textContent=Y),me=T(be),F(he.$$.fragment,be),Oe=T(be),Se=S(be,"SPAN",{"data-svelte-h":!0}),ae(Se)!=="svelte-7hh8jk"&&(Se.textContent=Ze),Xe=T(be),F(Ne.$$.fragment,be),xe=T(be),ee&&ee.l(be),be.forEach(g),Ue=T(q),Ve=S(q,"DIV",{});var tt=M(Ve);for(let Ke=0;Ke<se.length;Ke+=1)se[Ke].l(tt);tt.forEach(g),qe=T(q),z=S(q,"DIV",{});var re=M(z);X=S(re,"H3",{class:!0,"data-svelte-h":!0}),ae(X)!=="svelte-kc6sae"&&(X.textContent=Ae),Te=T(re),ve.block.l(re),re.forEach(g),q.forEach(g),this.h()},h(){m(n,"class","preview svelte-1kekodt"),we(n.src,t=l[2])||m(n,"src",t),m(n,"alt","preview"),m(o,"class","svelte-1kekodt"),m(f,"class","flex-row svelte-1kekodt"),m(le,"class","flex-row svelte-1kekodt"),m(X,"class","svelte-1kekodt"),m(e,"class","details svelte-1kekodt")},m(W,q){A(W,e,q),d(e,n),d(e,s),d(e,o),d(o,r),d(o,a),d(a,i),d(a,u),d(e,_),d(e,f),R(y,f,null),d(f,h),d(f,v),d(f,p),d(f,b),d(b,C),d(f,G),d(f,te),d(f,Z),R(H,f,null),d(f,D),d(f,U),d(f,x),R(K,f,null),d(e,L),d(e,le),R(B,le,null),d(le,j),d(le,ne),d(le,me),R(he,le,null),d(le,Oe),d(le,Se),d(le,Xe),R(Ne,le,null),d(le,xe),ee&&ee.m(le,null),d(e,Ue),d(e,Ve);for(let Ee=0;Ee<se.length;Ee+=1)se[Ee]&&se[Ee].m(Ve,null);d(e,qe),d(e,z),d(z,X),d(z,Te),ve.block.m(z,ve.anchor=null),ve.mount=()=>z,ve.anchor=null,$e=!0},p(W,[q]){l=W,(!$e||q&4&&!we(n.src,t=l[2]))&&m(n,"src",t),(!$e||q&1)&&c!==(c=l[0].id+"")&&Le(u,c);const Ee={};q&1&&(Ee.value=l[0].rating),y.$set(Ee),(!$e||q&1)&&k!==(k=l[0].type.toUpperCase()+"")&&Le(C,k);const He={};q&1&&(He.value=l[0].score),H.$set(He);const de={};q&1&&(de.value=l[0].change),K.$set(de);const et={};q&9&&(et.url="/post?id="+l[0].id+"&src="+encodeURIComponent(l[3])),B.$set(et);const be={};q&1&&(be.source="https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id),he.$set(be);const tt={};if(q&8&&(tt.url=l[3]),Ne.$set(tt),l[0].source?ee?(ee.p(l,q),q&1&&$(ee,1)):(ee=yt(l),ee.c(),$(ee,1),ee.m(le,null)):ee&&(ce(),w(ee,1,1,()=>{ee=null}),ue()),q&2){Ce=Pe(Object.entries(l[1]));let re;for(re=0;re<Ce.length;re+=1){const Ke=wt(l,Ce,re);se[re]?(se[re].p(Ke,q),$(se[re],1)):(se[re]=Ct(Ke),se[re].c(),$(se[re],1),se[re].m(Ve,null))}for(ce(),re=Ce.length;re<se.length;re+=1)tn(re);ue()}ve.ctx=l,q&1&&Ie!==(Ie=gt(l[0].id))&&dt(Ie,ve)||mn(ve,l,q)},i(W){if(!$e){$(y.$$.fragment,W),$(H.$$.fragment,W),$(K.$$.fragment,W),$(B.$$.fragment,W),$(he.$$.fragment,W),$(Ne.$$.fragment,W),$(ee);for(let q=0;q<Ce.length;q+=1)$(se[q]);$(ve.block),$e=!0}},o(W){w(y.$$.fragment,W),w(H.$$.fragment,W),w(K.$$.fragment,W),w(B.$$.fragment,W),w(he.$$.fragment,W),w(Ne.$$.fragment,W),w(ee),se=se.filter(Boolean);for(let q=0;q<se.length;q+=1)w(se[q]);for(let q=0;q<3;q+=1){const Ee=ve.blocks[q];w(Ee)}$e=!1},d(W){W&&g(e),V(y),V(H),V(K),V(B),V(he),V(Ne),ee&&ee.d(),Ye(se,W),ve.block.d(),ve.token=null,ve=null}}}function as(l,e,n){let t,s,o,{post:r}=e;return l.$$set=a=>{"post"in a&&n(0,r=a.post)},l.$$.update=()=>{l.$$.dirty&1&&n(3,t=r.file_url),l.$$.dirty&1&&n(2,s=r.sample_url),l.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,s,t]}class cs extends pe{constructor(e){super(),_e(this,e,as,is,fe,{post:0})}}const We=new IntersectionObserver(l=>{for(const e of l)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function us(l){const e=l.slice(),n=Cn(e[0].file_url,e[0].sample_url,e[0].preview_url);e[5]=n;const t=e[5].animated;return e[6]=t,e}function fs(l){const e=l.slice(),n=Qt(e[0].file_url,e[0].sample_url,e[0].preview_url);e[5]=n;const t=e[5].animated;e[6]=t;const s=e[5].static;return e[7]=s,e}function ps(l){const e=l.slice(),n=e[0].sample_url;return e[4]=n,e}function _s(l){let e,n,t,s;return{c(){e=E("img"),this.h()},l(o){e=S(o,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){we(e.src,n=l[6])||m(e,"src",n),m(e,"alt",t="[GIF] post #"+l[0].id),m(e,"title",s="[GIF] post #"+l[0].id),m(e,"class","svelte-1cjgn2p")},m(o,r){A(o,e,r)},p(o,r){r&1&&!we(e.src,n=o[6])&&m(e,"src",n),r&1&&t!==(t="[GIF] post #"+o[0].id)&&m(e,"alt",t),r&1&&s!==(s="[GIF] post #"+o[0].id)&&m(e,"title",s)},d(o){o&&g(e)}}}function St(l){let e,n,t,s;return{c(){e=E("video"),this.h()},l(o){e=S(o,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),M(e).forEach(g),this.h()},h(){we(e.src,n=l[6])||m(e,"src",n),m(e,"poster",t=l[7]),e.loop=!0,m(e,"title",s="[VIDEO] post #"+l[0].id),e.controls=!0,m(e,"preload","metadata"),e.autoplay=!0,m(e,"class","svelte-1cjgn2p")},m(o,r){A(o,e,r),l[2](e)},p(o,r){r&1&&!we(e.src,n=o[6])&&m(e,"src",n),r&1&&t!==(t=o[7])&&m(e,"poster",t),r&1&&s!==(s="[VIDEO] post #"+o[0].id)&&m(e,"title",s)},d(o){o&&g(e),l[2](null)}}}function It(l){let e,n,t,s;return{c(){e=E("img"),this.h()},l(o){e=S(o,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){we(e.src,n=l[4])||m(e,"src",n),m(e,"alt",t="[IMAGE] post #"+l[0].id),m(e,"title",s="[IMAGE] post #"+l[0].id),m(e,"class","svelte-1cjgn2p")},m(o,r){A(o,e,r)},p(o,r){r&1&&!we(e.src,n=o[4])&&m(e,"src",n),r&1&&t!==(t="[IMAGE] post #"+o[0].id)&&m(e,"alt",t),r&1&&s!==(s="[IMAGE] post #"+o[0].id)&&m(e,"title",s)},d(o){o&&g(e)}}}function ds(l){let e;function n(r,a){return r[0].type==="image"?It:r[0].type==="video"?St:_s}function t(r,a){return a===It?ps(r):a===St?fs(r):us(r)}let s=n(l),o=s(t(l,s));return{c(){o.c(),e=ye()},l(r){o.l(r),e=ye()},m(r,a){o.m(r,a),A(r,e,a)},p(r,[a]){s===(s=n(r))&&o?o.p(t(r,s),a):(o.d(1),o=s(t(r,s)),o&&(o.c(),o.m(e.parentNode,e)))},i:J,o:J,d(r){r&&g(e),o.d(r)}}}function gs(l,e,n){let{post:t}=e,s;const o=a=>{t.type==="video"&&s&&(a.key==="ArrowLeft"&&(a.preventDefault(),a.stopPropagation(),n(1,s.currentTime=Math.max(0,s.currentTime-5),s)),a.key==="ArrowRight"&&(a.preventDefault(),a.stopPropagation(),n(1,s.currentTime=Math.min(s.duration,s.currentTime+5),s)))};rt(()=>{s&&(We==null||We.observe(s)),document.addEventListener("keydown",o)}),ot(()=>{s&&(We==null||We.unobserve(s)),document.removeEventListener("keydown",o)});function r(a){ke[a?"unshift":"push"](()=>{s=a,n(1,s)})}return l.$$set=a=>{"post"in a&&n(0,t=a.post)},[t,s,r]}class ms extends pe{constructor(e){super(),_e(this,e,gs,ds,fe,{post:0})}}function hs(l){let e,n,t;return{c(){e=E("img"),this.h()},l(s){e=S(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){we(e.src,n=l[2])||m(e,"src",n),m(e,"alt",t="post #"+l[0].id),m(e,"class","svelte-itxz72"),Be(e,"top",l[1])},m(s,o){A(s,e,o)},p(s,[o]){o&4&&!we(e.src,n=s[2])&&m(e,"src",n),o&1&&t!==(t="post #"+s[0].id)&&m(e,"alt",t),o&2&&Be(e,"top",s[1])},i:J,o:J,d(s){s&&g(e)}}}function $s(l,e,n){let t,{post:s}=e,{offset:o}=e;return l.$$set=r=>{"post"in r&&n(0,s=r.post),"offset"in r&&n(1,o=r.offset)},l.$$.update=()=>{l.$$.dirty&1&&n(2,t=En(s.sample_url)?s.preview_url:s.sample_url)},[s,o,t]}class xt extends pe{constructor(e){super(),_e(this,e,$s,hs,fe,{post:0,offset:1})}}function Dt(l,e,n){const t=l.slice();return t[17]=e[n],t[19]=n,t}function Pt(l){let e,n;return e=new xt({props:{post:l[3],offset:l[6]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&8&&(o.post=t[3]),s&64&&(o.offset=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Nt(l){let e,n;return e=new xt({props:{post:l[4],offset:l[7]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&16&&(o.post=t[4]),s&128&&(o.offset=t[7]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Tt(l){let e,n=`${l[19]*100}vh`;return{c(){e=E("div"),this.h()},l(t){e=S(t,"DIV",{class:!0}),M(e).forEach(g),this.h()},h(){m(e,"class","pseudo snap-item svelte-3khu3"),Be(e,"top",n)},m(t,s){A(t,e,s)},p:J,d(t){t&&g(e)}}}function vs(l){let e,n,t,s,o,r,a,i,c,u,_,f,y,h=l[3]&&Pt(l);s=new ms({props:{post:l[2]}}),r=new cs({props:{post:l[2]}});let v=l[4]&&Nt(l),P=Pe({length:l[8].posts.length}),p=[];for(let b=0;b<P.length;b+=1)p[b]=Tt(Dt(l,P,b));return u=new Xt({props:{absoluteTop:l[8].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),u.$on("intersection",l[13]),{c(){e=E("div"),h&&h.c(),n=N(),t=E("div"),O(s.$$.fragment),o=N(),O(r.$$.fragment),a=N(),v&&v.c(),i=N();for(let b=0;b<p.length;b+=1)p[b].c();c=N(),O(u.$$.fragment),this.h()},l(b){e=S(b,"DIV",{class:!0});var k=M(e);h&&h.l(k),n=T(k),t=S(k,"DIV",{class:!0});var C=M(t);F(s.$$.fragment,C),o=T(C),F(r.$$.fragment,C),C.forEach(g),a=T(k),v&&v.l(k),i=T(k);for(let G=0;G<p.length;G+=1)p[G].l(k);c=T(k),F(u.$$.fragment,k),k.forEach(g),this.h()},h(){m(t,"class","screen snap-container horizontal current svelte-3khu3"),Be(t,"top",l[5]),m(e,"class","root screen snap-container svelte-3khu3")},m(b,k){A(b,e,k),h&&h.m(e,null),d(e,n),d(e,t),R(s,t,null),d(t,o),R(r,t,null),l[12](t),d(e,a),v&&v.m(e,null),d(e,i);for(let C=0;C<p.length;C+=1)p[C]&&p[C].m(e,null);d(e,c),R(u,e,null),l[14](e),_=!0,f||(y=De(e,"scroll",l[10]),f=!0)},p(b,[k]){b[3]?h?(h.p(b,k),k&8&&$(h,1)):(h=Pt(b),h.c(),$(h,1),h.m(e,n)):h&&(ce(),w(h,1,1,()=>{h=null}),ue());const C={};k&4&&(C.post=b[2]),s.$set(C);const G={};if(k&4&&(G.post=b[2]),r.$set(G),k&32&&Be(t,"top",b[5]),b[4]?v?(v.p(b,k),k&16&&$(v,1)):(v=Nt(b),v.c(),$(v,1),v.m(e,i)):v&&(ce(),w(v,1,1,()=>{v=null}),ue()),k&256){P=Pe({length:b[8].posts.length});let Q;for(Q=0;Q<P.length;Q+=1){const Z=Dt(b,P,Q);p[Q]?p[Q].p(Z,k):(p[Q]=Tt(Z),p[Q].c(),p[Q].m(e,c))}for(;Q<p.length;Q+=1)p[Q].d(1);p.length=P.length}const te={};k&256&&(te.absoluteTop=b[8].posts.length*100+"vh"),u.$set(te)},i(b){_||($(h),$(s.$$.fragment,b),$(r.$$.fragment,b),$(v),$(u.$$.fragment,b),_=!0)},o(b){w(h),w(s.$$.fragment,b),w(r.$$.fragment,b),w(v),w(u.$$.fragment,b),_=!1},d(b){b&&g(e),h&&h.d(),V(s),V(r),l[12](null),v&&v.d(),Ye(p,b),V(u),l[14](null),f=!1,y()}}}function bs(l,e,n){let t;ge(l,Qe,C=>n(8,t=C));let{index:s}=e,o,r,a=t.posts[s],i=s>0?t.posts[s-1]:void 0,c=s<t.posts.length-1?t.posts[s+1]:void 0,u=`${s*100}vh`,_=`${(s-1)*100}vh`,f=`${(s+1)*100}vh`;const y=je(),h=()=>{r&&(r.scrollIntoView(),n(1,r.scrollLeft=0,r))},v=C=>{const G=C.target,te=G.getBoundingClientRect().height,Q=G.scrollTop/te,Z=Math.round(Q);Z!=s&&requestAnimationFrame(()=>{n(11,s=Z),n(2,a=t.posts[s]),n(3,i=s>0?t.posts[s-1]:void 0),n(4,c=s<t.posts.length-1?t.posts[s+1]:void 0),n(5,u=`${s*100}vh`),n(6,_=`${(s-1)*100}vh`),n(7,f=`${(s+1)*100}vh`),r&&n(1,r.scrollLeft=0,r)})},P=C=>{C.key==="d"&&(C.preventDefault(),C.stopPropagation(),r.scrollLeft===0?r.scrollBy({left:o.clientWidth,top:0,behavior:"smooth"}):r.scrollBy({left:-o.clientWidth,top:0,behavior:"smooth"})),C.key==="ArrowUp"&&(C.preventDefault(),C.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(s-1),behavior:"smooth"})),C.key==="ArrowDown"&&(C.preventDefault(),C.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(s+1),behavior:"smooth"}))};rt(()=>{document.addEventListener("keydown",P),h()}),ot(()=>{document.removeEventListener("keydown",P)});function p(C){ke[C?"unshift":"push"](()=>{r=C,n(1,r)})}const b=()=>{y("endreached")};function k(C){ke[C?"unshift":"push"](()=>{o=C,n(0,o)})}return l.$$set=C=>{"index"in C&&n(11,s=C.index)},[o,r,a,i,c,u,_,f,t,y,v,s,p,b,k]}class ks extends pe{constructor(e){super(),_e(this,e,bs,vs,fe,{index:11})}}function ws(l){let e;return{c(){e=E("i"),this.h()},l(n){e=S(n,"I",{class:!0}),M(e).forEach(g),this.h()},h(){m(e,"class","codicon codicon-close")},m(n,t){A(n,e,t)},p:J,d(n){n&&g(e)}}}function ys(l){let e,n,t,s,o;function r(i){l[2](i)}let a={};return l[0]!==void 0&&(a.index=l[0]),e=new ks({props:a}),ke.push(()=>Re(e,"index",r)),e.$on("endreached",l[3]),s=new Wt({props:{class:"button-close",$$slots:{default:[ws]},$$scope:{ctx:l}}}),s.$on("click",l[1]),{c(){O(e.$$.fragment),t=N(),O(s.$$.fragment)},l(i){F(e.$$.fragment,i),t=T(i),F(s.$$.fragment,i)},m(i,c){R(e,i,c),A(i,t,c),R(s,i,c),o=!0},p(i,c){const u={};!n&&c&1&&(n=!0,u.index=i[0],Fe(()=>n=!1)),e.$set(u);const _={};c&128&&(_.$$scope={dirty:c,ctx:i}),s.$set(_)},i(i){o||($(e.$$.fragment,i),$(s.$$.fragment,i),o=!0)},o(i){w(e.$$.fragment,i),w(s.$$.fragment,i),o=!1},d(i){i&&g(t),V(e,i),V(s,i)}}}function Cs(l){let e,n;return e=new xn({props:{$$slots:{default:[ys]},$$scope:{ctx:l}}}),e.$on("close",l[1]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,[s]){const o={};s&129&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Es(l,e,n){let{index:t}=e;const s=je(),o=()=>{s("close",t)},r=u=>{u.key==="f"&&(u.preventDefault(),u.stopPropagation(),o())},a=()=>{var u,_;(((u=history.state)==null?void 0:u.fullscreen)===void 0||((_=history.state)==null?void 0:_.fullscreen)===!1)&&o()};rt(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),ot(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(u){t=u,n(0,t)}function c(u){nt.call(this,l,u)}return l.$$set=u=>{"index"in u&&n(0,t=u.index)},[t,o,i,c]}class Ss extends pe{constructor(e){super(),_e(this,e,Es,Cs,fe,{index:0})}}function At(l){let e,n=l[0].type==="video"?"▶":"GIF",t;return{c(){e=E("span"),t=oe(n),this.h()},l(s){e=S(s,"SPAN",{class:!0});var o=M(e);t=ie(o,n),o.forEach(g),this.h()},h(){m(e,"class","type svelte-1213alg")},m(s,o){A(s,e,o),d(e,t)},p(s,o){o&1&&n!==(n=s[0].type==="video"?"▶":"GIF")&&Le(t,n)},d(s){s&&g(e)}}}function Is(l){let e,n,t,s,o,r=st(l[0].score)+"",a,i,c,u,_,f=l[0].type!=="image"&&At(l);return{c(){e=E("div"),n=E("img"),s=N(),o=E("span"),a=oe(r),i=N(),f&&f.c(),this.h()},l(y){e=S(y,"DIV",{id:!0,class:!0,style:!0});var h=M(e);n=S(h,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),s=T(h),o=S(h,"SPAN",{class:!0});var v=M(o);a=ie(v,r),v.forEach(g),i=T(h),f&&f.l(h),h.forEach(g),this.h()},h(){we(n.src,t=l[1])||m(n,"src",t),m(n,"alt","post"),m(n,"class","post-media svelte-1213alg"),m(n,"tabindex","-1"),m(n,"loading","lazy"),m(o,"class","score svelte-1213alg"),m(e,"id",c=lt(l[0].id)),m(e,"class","post svelte-1213alg"),Be(e,"grid-row","span "+l[2]),at(e,"open",open)},m(y,h){A(y,e,h),d(e,n),d(e,s),d(e,o),d(o,a),d(e,i),f&&f.m(e,null),u||(_=[De(e,"click",l[3]),De(e,"keydown",l[4])],u=!0)},p(y,[h]){h&2&&!we(n.src,t=y[1])&&m(n,"src",t),h&1&&r!==(r=st(y[0].score)+"")&&Le(a,r),y[0].type!=="image"?f?f.p(y,h):(f=At(y),f.c(),f.m(e,null)):f&&(f.d(1),f=null),h&1&&c!==(c=lt(y[0].id))&&m(e,"id",c),h&0&&at(e,"open",open)},i:J,o:J,d(y){y&&g(e),f&&f.d(),u=!1,ct(_)}}}let Ot=3;function Ds(l,e,n){let t,{post:s}=e,o=Math.min(Math.round(s.height/s.width)*Ot,Ot*3);const r=c=>c.endsWith(".jpg")||c.endsWith(".jpeg")||c.endsWith(".png")||c.endsWith(".webp");function a(c){nt.call(this,l,c)}const i=c=>{var u;(Yt(c)||c.key==="f")&&((u=c.target)==null||u.click())};return l.$$set=c=>{"post"in c&&n(0,s=c.post)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=r(s.sample_url)?s.sample_url:s.preview_url)},[s,t,o,a,i]}class Ps extends pe{constructor(e){super(),_e(this,e,Ds,Is,fe,{post:0})}}function Ns(l){const e=l.slice(),n=Qt(e[1].file_url,e[1].sample_url,e[1].preview_url);e[7]=n;const t=e[7].animated;e[8]=t;const s=e[7].static;return e[9]=s,e}function Ts(l){let e,n;return e=new In({props:{post:l[1]}}),e.$on("click",l[4]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function As(l){let e,n;return e=new Dn({props:{src:l[8],poster:l[9],width:l[1].width,height:l[1].height,loop:l[2]||mt(l[1].tags)}}),e.$on("click",l[4]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.src=t[8]),s&2&&(o.poster=t[9]),s&2&&(o.width=t[1].width),s&2&&(o.height=t[1].height),s&6&&(o.loop=t[2]||mt(t[1].tags)),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Os(l){let e,n;return e=new Pn({props:{post:l[1],open:l[0]}}),e.$on("click",l[4]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),s&1&&(o.open=t[0]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Fs(l){let e;return{c(){e=E("i"),this.h()},l(n){e=S(n,"I",{class:!0}),M(e).forEach(g),this.h()},h(){m(e,"class","codicon codicon-screen-full")},m(n,t){A(n,e,t)},p:J,d(n){n&&g(e)}}}function Ft(l){let e,n;return e=new Sn({props:{post:l[1]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Rs(l){let e,n,t,s,o,r,a,i,c,u;const _=[Os,As,Ts],f=[];function y(P,p){return P[1].type==="image"?0:P[1].type==="video"?1:2}function h(P,p){return p===1?Ns(P):P}n=y(l),t=f[n]=_[n](h(l,n)),o=new Wt({props:{class:"button-fullscreen","aria-label":"Enter Fullscreen mode",$$slots:{default:[Fs]},$$scope:{ctx:l}}}),o.$on("click",l[5]);let v=l[0]&&Ft(l);return{c(){e=E("div"),t.c(),s=N(),O(o.$$.fragment),r=N(),v&&v.c(),this.h()},l(P){e=S(P,"DIV",{id:!0,class:!0});var p=M(e);t.l(p),s=T(p),F(o.$$.fragment,p),r=T(p),v&&v.l(p),p.forEach(g),this.h()},h(){m(e,"id",a=lt(l[1].id)),m(e,"class","post svelte-pwgq1f"),at(e,"open",l[0])},m(P,p){A(P,e,p),f[n].m(e,null),d(e,s),R(o,e,null),d(e,r),v&&v.m(e,null),i=!0,c||(u=De(e,"keydown",l[6]),c=!0)},p(P,[p]){let b=n;n=y(P),n===b?f[n].p(h(P,n),p):(ce(),w(f[b],1,1,()=>{f[b]=null}),ue(),t=f[n],t?t.p(h(P,n),p):(t=f[n]=_[n](h(P,n)),t.c()),$(t,1),t.m(e,s));const k={};p&1024&&(k.$$scope={dirty:p,ctx:P}),o.$set(k),P[0]?v?(v.p(P,p),p&1&&$(v,1)):(v=Ft(P),v.c(),$(v,1),v.m(e,null)):v&&(ce(),w(v,1,1,()=>{v=null}),ue()),(!i||p&2&&a!==(a=lt(P[1].id)))&&m(e,"id",a),(!i||p&1)&&at(e,"open",P[0])},i(P){i||($(t),$(o.$$.fragment,P),$(v),i=!0)},o(P){w(t),w(o.$$.fragment,P),w(v),i=!1},d(P){P&&g(e),f[n].d(),V(o),v&&v.d(),c=!1,u()}}}function Vs(l,e,n){let t;ge(l,Nn,u=>n(2,t=u));const s=je(),o=()=>n(0,a=!a);let{post:r}=e,{open:a=!1}=e;const i=()=>s("fullscreen"),c=u=>{u.key==="f"&&s("fullscreen")};return l.$$set=u=>{"post"in u&&n(1,r=u.post),"open"in u&&n(0,a=u.open)},[a,r,t,s,o,i,c]}class Ms extends pe{constructor(e){super(),_e(this,e,Vs,Rs,fe,{post:1,open:0})}}function Ls(l){let e;return{c(){e=oe("Done")},l(n){e=ie(n,"Done")},m(n,t){A(n,e,t)},d(n){n&&g(e)}}}function Bs(l){let e;return{c(){e=oe("Reset")},l(n){e=ie(n,"Reset")},m(n,t){A(n,e,t)},d(n){n&&g(e)}}}function js(l){let e,n,t="Sorting and Filtering",s,o,r,a="Sorting",i,c,u,_,f,y,h,v,P,p,b="Filtering by Score",k,C,G,te,Q,Z,H,D,U,I="Filtering by Rating",x,K,L,le,B,j,ne,Y,me,he,Oe;function Se(z){l[6](z)}let Ze={options:Us};l[3].direction!==void 0&&(Ze.value=l[3].direction),u=new gn({props:Ze}),ke.push(()=>Re(u,"value",Se));function Xe(z){l[7](z)}let Ne={options:Gs};l[3].property!==void 0&&(Ne.value=l[3].property),y=new ht({props:Ne}),ke.push(()=>Re(y,"value",Xe));function xe(z){l[8](z)}let Ue={options:qs};l[2].scoreComparator!==void 0&&(Ue.value=l[2].scoreComparator),G=new An({props:Ue}),ke.push(()=>Re(G,"value",xe));function Ve(z){l[10](z)}let qe={options:en};return l[2].rating!==void 0&&(qe.value=l[2].rating),L=new ht({props:qe}),ke.push(()=>Re(L,"value",Ve)),j=new Ge({props:{title:"Return to searching.",$$slots:{default:[Ls]},$$scope:{ctx:l}}}),j.$on("click",l[11]),Y=new Ge({props:{title:"Reset sort and filter.",type:"secondary",$$slots:{default:[Bs]},$$scope:{ctx:l}}}),Y.$on("click",l[5]),{c(){e=E("div"),n=E("h3"),n.textContent=t,s=N(),o=E("div"),r=E("b"),r.textContent=a,i=N(),c=E("div"),O(u.$$.fragment),f=N(),O(y.$$.fragment),v=N(),P=E("div"),p=E("b"),p.textContent=b,k=N(),C=E("div"),O(G.$$.fragment),Q=N(),Z=E("input"),H=N(),D=E("div"),U=E("b"),U.textContent=I,x=N(),K=E("div"),O(L.$$.fragment),B=N(),O(j.$$.fragment),ne=N(),O(Y.$$.fragment),this.h()},l(z){e=S(z,"DIV",{class:!0});var X=M(e);n=S(X,"H3",{"data-svelte-h":!0}),ae(n)!=="svelte-15zouq3"&&(n.textContent=t),s=T(X),o=S(X,"DIV",{});var Ae=M(o);r=S(Ae,"B",{class:!0,"data-svelte-h":!0}),ae(r)!=="svelte-ekzpgg"&&(r.textContent=a),i=T(Ae),c=S(Ae,"DIV",{class:!0});var Te=M(c);F(u.$$.fragment,Te),f=T(Te),F(y.$$.fragment,Te),Te.forEach(g),Ae.forEach(g),v=T(X),P=S(X,"DIV",{});var Ie=M(P);p=S(Ie,"B",{class:!0,"data-svelte-h":!0}),ae(p)!=="svelte-1flca3"&&(p.textContent=b),k=T(Ie),C=S(Ie,"DIV",{class:!0});var $e=M(C);F(G.$$.fragment,$e),Q=T($e),Z=S($e,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),$e.forEach(g),Ie.forEach(g),H=T(X),D=S(X,"DIV",{});var ee=M(D);U=S(ee,"B",{class:!0,"data-svelte-h":!0}),ae(U)!=="svelte-1evbw58"&&(U.textContent=I),x=T(ee),K=S(ee,"DIV",{class:!0});var Ce=M(K);F(L.$$.fragment,Ce),Ce.forEach(g),ee.forEach(g),B=T(X),F(j.$$.fragment,X),ne=T(X),F(Y.$$.fragment,X),X.forEach(g),this.h()},h(){m(r,"class","svelte-kdg2ou"),m(c,"class","row svelte-kdg2ou"),m(p,"class","svelte-kdg2ou"),m(Z,"type","number"),m(Z,"min",0),m(Z,"max",1e5),m(Z,"step",1),m(Z,"class","svelte-kdg2ou"),m(C,"class","row svelte-kdg2ou"),m(U,"class","svelte-kdg2ou"),m(K,"class","row svelte-kdg2ou"),m(e,"class","container svelte-kdg2ou")},m(z,X){A(z,e,X),d(e,n),d(e,s),d(e,o),d(o,r),d(o,i),d(o,c),R(u,c,null),d(c,f),R(y,c,null),d(e,v),d(e,P),d(P,p),d(P,k),d(P,C),R(G,C,null),d(C,Q),d(C,Z),Je(Z,l[1]),d(e,H),d(e,D),d(D,U),d(D,x),d(D,K),R(L,K,null),d(e,B),R(j,e,null),d(e,ne),R(Y,e,null),me=!0,he||(Oe=[De(Z,"input",l[9]),De(Z,"keyup",l[4])],he=!0)},p(z,X){const Ae={};!_&&X&8&&(_=!0,Ae.value=z[3].direction,Fe(()=>_=!1)),u.$set(Ae);const Te={};!h&&X&8&&(h=!0,Te.value=z[3].property,Fe(()=>h=!1)),y.$set(Te);const Ie={};!te&&X&4&&(te=!0,Ie.value=z[2].scoreComparator,Fe(()=>te=!1)),G.$set(Ie),X&2&&Gt(Z.value)!==z[1]&&Je(Z,z[1]);const $e={};!le&&X&4&&(le=!0,$e.value=z[2].rating,Fe(()=>le=!1)),L.$set($e);const ee={};X&16384&&(ee.$$scope={dirty:X,ctx:z}),j.$set(ee);const Ce={};X&16384&&(Ce.$$scope={dirty:X,ctx:z}),Y.$set(Ce)},i(z){me||($(u.$$.fragment,z),$(y.$$.fragment,z),$(G.$$.fragment,z),$(L.$$.fragment,z),$(j.$$.fragment,z),$(Y.$$.fragment,z),me=!0)},o(z){w(u.$$.fragment,z),w(y.$$.fragment,z),w(G.$$.fragment,z),w(L.$$.fragment,z),w(j.$$.fragment,z),w(Y.$$.fragment,z),me=!1},d(z){z&&g(e),V(u),V(y),V(G),V(L),V(j),V(Y),he=!1,ct(Oe)}}}function zs(l){let e,n,t;function s(r){l[12](r)}let o={$$slots:{default:[js]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.dialog=l[0]),e=new Ut({props:o}),ke.push(()=>Re(e,"dialog",s)),e.$on("close",l[13]),{c(){O(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){R(e,r,a),t=!0},p(r,[a]){const i={};a&16399&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],Fe(()=>n=!1)),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}const en=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),Gs=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),Us=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),qs=Object.freeze({">=":"≥","<=":"≤"});function Hs(l,e,n){let t,s;ge(l,Me,p=>n(2,t=p)),ge(l,ze,p=>n(3,s=p));let{dialog:o}=e,r;const a=p=>{var b;return Yt(p)&&((b=p.target)==null?void 0:b.blur())},i=()=>{ze.reset(),Me.reset(),n(1,r=t.scoreValue)};function c(p){l.$$.not_equal(s.direction,p)&&(s.direction=p,ze.set(s))}function u(p){l.$$.not_equal(s.property,p)&&(s.property=p,ze.set(s))}function _(p){l.$$.not_equal(t.scoreComparator,p)&&(t.scoreComparator=p,Me.set(t))}function f(){r=Gt(this.value),n(1,r),n(2,t)}function y(p){l.$$.not_equal(t.rating,p)&&(t.rating=p,Me.set(t))}const h=()=>o.close();function v(p){o=p,n(0,o)}function P(p){nt.call(this,l,p)}return l.$$set=p=>{"dialog"in p&&n(0,o=p.dialog)},l.$$.update=()=>{if(l.$$.dirty&6){r===void 0&&n(1,r=t.scoreValue);let p=Number(r);isNaN(p)||an(Me,t.scoreValue=p,t)}},[o,r,t,s,a,i,c,u,_,f,y,h,v,P]}class Ks extends pe{constructor(e){super(),_e(this,e,Hs,zs,fe,{dialog:0})}}function Ws(l){let e,n,t,s,o,r,a,i,c,u,_,f,y,h,v,P;function p(k){l[9](k)}let b={};return l[2]!==void 0&&(b.dialog=l[2]),f=new Ks({props:b}),ke.push(()=>Re(f,"dialog",p)),f.$on("close",l[10]),{c(){e=E("button"),n=E("i"),t=N(),s=E("span"),o=oe(l[5]),r=N(),a=E("i"),i=N(),c=E("span"),u=oe(l[4]),_=N(),O(f.$$.fragment),this.h()},l(k){e=S(k,"BUTTON",{class:!0});var C=M(e);n=S(C,"I",{class:!0}),M(n).forEach(g),t=T(C),s=S(C,"SPAN",{});var G=M(s);o=ie(G,l[5]),G.forEach(g),r=T(C),a=S(C,"I",{class:!0}),M(a).forEach(g),i=T(C),c=S(C,"SPAN",{});var te=M(c);u=ie(te,l[4]),te.forEach(g),C.forEach(g),_=T(k),F(f.$$.fragment,k),this.h()},h(){m(n,"class","codicon codicon-filter svelte-a4zz3f"),m(a,"class","codicon codicon-arrow-swap svelte-a4zz3f"),m(e,"class","svelte-a4zz3f")},m(k,C){A(k,e,C),d(e,n),d(e,t),d(e,s),d(s,o),d(e,r),d(e,a),d(e,i),d(e,c),d(c,u),A(k,_,C),R(f,k,C),h=!0,v||(P=De(e,"click",l[8]),v=!0)},p(k,[C]){(!h||C&32)&&Le(o,k[5]),(!h||C&16)&&Le(u,k[4]);const G={};!y&&C&4&&(y=!0,G.dialog=k[2],Fe(()=>y=!1)),f.$set(G)},i(k){h||($(f.$$.fragment,k),h=!0)},o(k){w(f.$$.fragment,k),h=!1},d(k){k&&(g(e),g(_)),V(f,k),v=!1,P()}}}const Js=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),Qs=(l,e,n)=>{let t=l==="all"?void 0:en[l],s=e===0&&n===">="?void 0:`Score${n}${st(e)}`;return[t,s].filter(o=>o!==void 0).join(",")||"All"};function Ys(l,e,n){let t,s,o,r;ge(l,ze,h=>n(0,o=h)),ge(l,Me,h=>n(1,r=h));const a=je(),i=(h,v)=>JSON.stringify(Object.assign({},h,v));let c,u="";const _=()=>{n(3,u=i(o,r)),c.showModal(),qt("dialog")};function f(h){c=h,n(2,c)}const y=()=>{i(o,r)!==u&&a("sortfilterupdate")};return l.$$.update=()=>{l.$$.dirty&2&&n(5,t=Qs(r.rating,r.scoreValue,r.scoreComparator)),l.$$.dirty&1&&n(4,s=Js[o.property][o.direction])},[o,r,c,u,s,t,a,i,_,f,y]}class Zs extends pe{constructor(e){super(),_e(this,e,Ys,Ws,fe,{})}}function Rt(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function Vt(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function Xs(l){let e,n,t=Pe(l[1].posts),s=[];for(let r=0;r<t.length;r+=1)s[r]=Mt(Rt(l,t,r));const o=r=>w(s[r],1,1,()=>{s[r]=null});return{c(){e=E("section");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"SECTION",{class:!0,style:!0});var a=M(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(g),this.h()},h(){m(e,"class","multi-column svelte-wypqh"),Be(e,"grid-template-columns","repeat("+l[2]+", 1fr)")},m(r,a){A(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&3){t=Pe(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Rt(r,t,i);s[i]?(s[i].p(c,a),$(s[i],1)):(s[i]=Mt(c),s[i].c(),$(s[i],1),s[i].m(e,null))}for(ce(),i=t.length;i<s.length;i+=1)o(i);ue()}(!n||a&4)&&Be(e,"grid-template-columns","repeat("+r[2]+", 1fr)")},i(r){if(!n){for(let a=0;a<t.length;a+=1)$(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(r){r&&g(e),Ye(s,r)}}}function xs(l){let e,n,t=Pe(l[1].posts),s=[];for(let r=0;r<t.length;r+=1)s[r]=Lt(Vt(l,t,r));const o=r=>w(s[r],1,1,()=>{s[r]=null});return{c(){e=E("section");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"SECTION",{class:!0});var a=M(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(g),this.h()},h(){m(e,"class","single-column svelte-wypqh")},m(r,a){A(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&3){t=Pe(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Vt(r,t,i);s[i]?(s[i].p(c,a),$(s[i],1)):(s[i]=Lt(c),s[i].c(),$(s[i],1),s[i].m(e,null))}for(ce(),i=t.length;i<s.length;i+=1)o(i);ue()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)$(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(r){r&&g(e),Ye(s,r)}}}function Mt(l){let e,n;function t(){return l[6](l[10])}return e=new Ps({props:{post:l[8]}}),e.$on("click",t),{c(){O(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){R(e,s,o),n=!0},p(s,o){l=s;const r={};o&2&&(r.post=l[8]),e.$set(r)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function Lt(l){let e,n;function t(){return l[5](l[10])}return e=new Ms({props:{post:l[8]}}),e.$on("fullscreen",t),{c(){O(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){R(e,s,o),n=!0},p(s,o){l=s;const r={};o&2&&(r.post=l[8]),e.$set(r)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function Bt(l){let e,n;return e=new Ss({props:{index:l[0]}}),e.$on("close",l[3]),e.$on("endreached",l[7]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&1&&(o.index=t[0]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function el(l){let e,n,t=st(l[1].postCount)+"",s,o,r,a,i,c,u,_,f,y;a=new Zs({}),a.$on("sortfilterupdate",l[4]);const h=[xs,Xs],v=[];function P(b,k){return b[2]==="1"?0:1}c=P(l),u=v[c]=h[c](l);let p=l[0]!==void 0&&Bt(l);return{c(){e=E("div"),n=E("span"),s=oe(t),o=oe(" posts"),r=N(),O(a.$$.fragment),i=N(),u.c(),_=N(),p&&p.c(),f=ye(),this.h()},l(b){e=S(b,"DIV",{class:!0});var k=M(e);n=S(k,"SPAN",{});var C=M(n);s=ie(C,t),o=ie(C," posts"),C.forEach(g),r=T(k),F(a.$$.fragment,k),k.forEach(g),i=T(b),u.l(b),_=T(b),p&&p.l(b),f=ye(),this.h()},h(){m(e,"class","svelte-wypqh")},m(b,k){A(b,e,k),d(e,n),d(n,s),d(n,o),d(e,r),R(a,e,null),A(b,i,k),v[c].m(b,k),A(b,_,k),p&&p.m(b,k),A(b,f,k),y=!0},p(b,[k]){(!y||k&2)&&t!==(t=st(b[1].postCount)+"")&&Le(s,t);let C=c;c=P(b),c===C?v[c].p(b,k):(ce(),w(v[C],1,1,()=>{v[C]=null}),ue(),u=v[c],u?u.p(b,k):(u=v[c]=h[c](b),u.c()),$(u,1),u.m(_.parentNode,_)),b[0]!==void 0?p?(p.p(b,k),k&1&&$(p,1)):(p=Bt(b),p.c(),$(p,1),p.m(f.parentNode,f)):p&&(ce(),w(p,1,1,()=>{p=null}),ue())},i(b){y||($(a.$$.fragment,b),$(u),$(p),y=!0)},o(b){w(a.$$.fragment,b),w(u),w(p),y=!1},d(b){b&&(g(e),g(i),g(_),g(f)),V(a),v[c].d(b),p&&p.d(b)}}}function tl(l,e,n){let t,s;ge(l,Qe,_=>n(1,t=_)),ge(l,Ht,_=>n(2,s=_));let o;const r=_=>{var h;const f=t.posts[_.detail],y=lt(f.id);(h=document.getElementById(y))==null||h.scrollIntoView(),n(0,o=void 0)};function a(_){nt.call(this,l,_)}const i=_=>{n(0,o=_)},c=_=>{n(0,o=_)};function u(_){nt.call(this,l,_)}return l.$$.update=()=>{var _;l.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(_=history.state)!=null&&_.fullscreen&&history.back())},[o,t,s,r,a,i,c,u]}class nl extends pe{constructor(e){super(),_e(this,e,tl,el,fe,{})}}function sl(l){let e;return{c(){e=oe("Reset Filter")},l(n){e=ie(n,"Reset Filter")},m(n,t){A(n,e,t)},d(n){n&&g(e)}}}function ll(l){let e,n,t,s,o="We couldn't find any posts matching your tags. Sorry...",r,a,i;return a=new Ge({props:{title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[sl]},$$scope:{ctx:l}}}),a.$on("click",l[1]),{c(){e=E("img"),t=N(),s=E("p"),s.textContent=o,r=N(),O(a.$$.fragment),this.h()},l(c){e=S(c,"IMG",{src:!0,alt:!0,class:!0}),t=T(c),s=S(c,"P",{"data-svelte-h":!0}),ae(s)!=="svelte-1utxj3w"&&(s.textContent=o),r=T(c),F(a.$$.fragment,c),this.h()},h(){we(e.src,n=Kt+"/assets/shironeko-confused.png")||m(e,"src",n),m(e,"alt","Nothing here..."),m(e,"class","svelte-1bb5e7g")},m(c,u){A(c,e,u),A(c,t,u),A(c,s,u),A(c,r,u),R(a,c,u),i=!0},p(c,[u]){const _={};u&4&&(_.$$scope={dirty:u,ctx:c}),a.$set(_)},i(c){i||($(a.$$.fragment,c),i=!0)},o(c){w(a.$$.fragment,c),i=!1},d(c){c&&(g(e),g(t),g(s),g(r)),V(a,c)}}}function rl(l){const e=je();return[e,()=>{ze.reset(),Me.reset(),e("sortfilterupdate")}]}class ol extends pe{constructor(e){super(),_e(this,e,rl,ll,fe,{})}}function il(l){const e=l-1;return e*e*e+1}function al(l,{delay:e=0,duration:n=400,easing:t=il,x:s=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(l),i=+a.opacity,c=a.transform==="none"?"":a.transform,u=i*(1-r),[_,f]=_t(s),[y,h]=_t(o);return{delay:e,duration:n,easing:t,css:(v,P)=>`
			transform: ${c} translate(${(1-v)*_}${f}, ${(1-v)*y}${h});
			opacity: ${i-u*P}`}}function cl(l){let e;return{c(){e=oe("Ok")},l(n){e=ie(n,"Ok")},m(n,t){A(n,e,t)},d(n){n&&g(e)}}}function ul(l){let e,n,t="This site uses cookies",s,o,r,a;return o=new Ge({props:{title:"Accept cookies",$$slots:{default:[cl]},$$scope:{ctx:l}}}),o.$on("click",l[0]),{c(){e=E("div"),n=E("span"),n.textContent=t,s=N(),O(o.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var c=M(e);n=S(c,"SPAN",{"data-svelte-h":!0}),ae(n)!=="svelte-17tpe0c"&&(n.textContent=t),s=T(c),F(o.$$.fragment,c),c.forEach(g),this.h()},h(){m(e,"class","svelte-20j44m")},m(i,c){A(i,e,c),d(e,n),d(e,s),R(o,e,null),a=!0},p(i,[c]){const u={};c&2&&(u.$$scope={dirty:c,ctx:i}),o.$set(u)},i(i){a||($(o.$$.fragment,i),r&&r.end(1),a=!0)},o(i){w(o.$$.fragment,i),i&&(r=un(e,al,{y:200,duration:200})),a=!1},d(i){i&&g(e),V(o),i&&r&&r.end()}}}function fl(l){return[()=>Zt.set(!0)]}class pl extends pe{constructor(e){super(),_e(this,e,fl,ul,fe,{})}}const{document:ft}=fn;function _l(l){let e;return{c(){e=oe("Search")},l(n){e=ie(n,"Search")},m(n,t){A(n,e,t)},i:J,o:J,d(n){n&&g(e)}}}function dl(l){let e,n;return e=new pt({}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function gl(l){let e,n,t,s;const o=[dl,_l],r=[];function a(i,c){return i[0]?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=ye()},l(i){n.l(i),t=ye()},m(i,c){r[e].m(i,c),A(i,t,c),s=!0},p(i,c){let u=e;e=a(i),e!==u&&(ce(),w(r[u],1,1,()=>{r[u]=null}),ue(),n=r[e],n||(n=r[e]=o[e](i),n.c()),$(n,1),n.m(t.parentNode,t))},i(i){s||($(n),s=!0)},o(i){w(n),s=!1},d(i){i&&g(t),r[e].d(i)}}}function ml(l){let e,n,t,s,o,r;const a=[vl,$l],i=[];function c(u,_){return u[3].postCount===0?0:1}return n=c(l),t=i[n]=a[n](l),o=new Fn({}),{c(){e=E("section"),t.c(),s=N(),O(o.$$.fragment),this.h()},l(u){e=S(u,"SECTION",{class:!0});var _=M(e);t.l(_),_.forEach(g),s=T(u),F(o.$$.fragment,u),this.h()},h(){m(e,"class","svelte-nujk24")},m(u,_){A(u,e,_),i[n].m(e,null),A(u,s,_),R(o,u,_),r=!0},p(u,_){let f=n;n=c(u),n===f?i[n].p(u,_):(ce(),w(i[f],1,1,()=>{i[f]=null}),ue(),t=i[n],t?t.p(u,_):(t=i[n]=a[n](u),t.c()),$(t,1),t.m(e,null))},i(u){r||($(t),$(o.$$.fragment,u),r=!0)},o(u){w(t),w(o.$$.fragment,u),r=!1},d(u){u&&(g(e),g(s)),i[n].d(),V(o,u)}}}function hl(l){let e,n;return e=new Wn({props:{error:l[1]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.error=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function $l(l){let e,n,t,s,o,r;e=new nl({}),e.$on("sortfilterupdate",l[10]),e.$on("endreached",l[11]);const a=[kl,bl],i=[];function c(u,_){return u[3].posts.length===u[3].postCount?0:1}return t=c(l),s=i[t]=a[t](l),{c(){O(e.$$.fragment),n=N(),s.c(),o=ye()},l(u){F(e.$$.fragment,u),n=T(u),s.l(u),o=ye()},m(u,_){R(e,u,_),A(u,n,_),i[t].m(u,_),A(u,o,_),r=!0},p(u,_){let f=t;t=c(u),t===f?i[t].p(u,_):(ce(),w(i[f],1,1,()=>{i[f]=null}),ue(),s=i[t],s?s.p(u,_):(s=i[t]=a[t](u),s.c()),$(s,1),s.m(o.parentNode,o))},i(u){r||($(e.$$.fragment,u),$(s),r=!0)},o(u){w(e.$$.fragment,u),w(s),r=!1},d(u){u&&(g(n),g(o)),V(e,u),i[t].d(u)}}}function vl(l){let e,n;return e=new ol({}),e.$on("sortfilterupdate",l[10]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p:J,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function bl(l){let e,n,t,s;return e=new Xt({props:{absoluteTop:void 0,rootMargin:1e3/Number(l[7])+"px"}}),e.$on("intersection",l[11]),t=new Ge({props:{title:"Load more posts",$$slots:{default:[Cl]},$$scope:{ctx:l}}}),t.$on("click",l[11]),{c(){O(e.$$.fragment),n=N(),O(t.$$.fragment)},l(o){F(e.$$.fragment,o),n=T(o),F(t.$$.fragment,o)},m(o,r){R(e,o,r),A(o,n,r),R(t,o,r),s=!0},p(o,r){const a={};r&128&&(a.rootMargin=1e3/Number(o[7])+"px"),e.$set(a);const i={};r&33554433&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){s||($(e.$$.fragment,o),$(t.$$.fragment,o),s=!0)},o(o){w(e.$$.fragment,o),w(t.$$.fragment,o),s=!1},d(o){o&&g(n),V(e,o),V(t,o)}}}function kl(l){let e,n;return e=new Qn({}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p:J,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function wl(l){let e;return{c(){e=oe("Load more")},l(n){e=ie(n,"Load more")},m(n,t){A(n,e,t)},i:J,o:J,d(n){n&&g(e)}}}function yl(l){let e,n;return e=new pt({}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Cl(l){let e,n,t,s;const o=[yl,wl],r=[];function a(i,c){return i[0]?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=ye()},l(i){n.l(i),t=ye()},m(i,c){r[e].m(i,c),A(i,t,c),s=!0},p(i,c){let u=e;e=a(i),e!==u&&(ce(),w(r[u],1,1,()=>{r[u]=null}),ue(),n=r[e],n||(n=r[e]=o[e](i),n.c()),$(n,1),n.m(t.parentNode,t))},i(i){s||($(n),s=!0)},o(i){w(n),s=!1},d(i){i&&g(t),r[e].d(i)}}}function jt(l){let e,n;return e=new pl({}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function El(l){let e,n,t,s,o,r,a,i,c,u,_,f,y,h,v,P,p,b,k;s=new _n({}),r=new On({props:{placeholder:"Search for tags",fetchSuggestions:l[9]}}),r.$on("pick",l[12]),i=new Ge({props:{title:"Search with the tags above",$$slots:{default:[gl]},$$scope:{ctx:l}}}),i.$on("click",l[10]),u=new dn({props:{tags:[...l[5],...l[4]]}}),u.$on("click",l[13]),u.$on("contextmenu",l[14]),u.$on("createSupertag",l[15]);const C=[hl,ml],G=[];function te(D,U){return D[1]?0:D[3].requested?1:-1}~(f=te(l))&&(y=G[f]=C[f](l));function Q(D){l[16](D)}let Z={tags:l[5]};l[2]!==void 0&&(Z.dialog=l[2]),v=new qn({props:Z}),ke.push(()=>Re(v,"dialog",Q)),v.$on("submit",l[17]);let H=!l[8]&&jt();return{c(){e=E("meta"),n=N(),t=E("section"),O(s.$$.fragment),o=N(),O(r.$$.fragment),a=N(),O(i.$$.fragment),c=N(),O(u.$$.fragment),_=N(),y&&y.c(),h=N(),O(v.$$.fragment),p=N(),H&&H.c(),b=ye(),this.h()},l(D){const U=cn("svelte-7jdp3v",ft.head);e=S(U,"META",{name:!0,content:!0}),U.forEach(g),n=T(D),t=S(D,"SECTION",{id:!0,class:!0});var I=M(t);F(s.$$.fragment,I),o=T(I),F(r.$$.fragment,I),a=T(I),F(i.$$.fragment,I),c=T(I),F(u.$$.fragment,I),I.forEach(g),_=T(D),y&&y.l(D),h=T(D),F(v.$$.fragment,D),p=T(D),H&&H.l(D),b=ye(),this.h()},h(){ft.title="kurosearch - Rule34 Hentai",m(e,"name","description"),m(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience."),m(t,"id","search"),m(t,"class","svelte-nujk24")},m(D,U){d(ft.head,e),A(D,n,U),A(D,t,U),R(s,t,null),d(t,o),R(r,t,null),d(t,a),R(i,t,null),d(t,c),R(u,t,null),A(D,_,U),~f&&G[f].m(D,U),A(D,h,U),R(v,D,U),A(D,p,U),H&&H.m(D,U),A(D,b,U),k=!0},p(D,[U]){const I={};U&33554433&&(I.$$scope={dirty:U,ctx:D}),i.$set(I);const x={};U&48&&(x.tags=[...D[5],...D[4]]),u.$set(x);let K=f;f=te(D),f===K?~f&&G[f].p(D,U):(y&&(ce(),w(G[K],1,1,()=>{G[K]=null}),ue()),~f?(y=G[f],y?y.p(D,U):(y=G[f]=C[f](D),y.c()),$(y,1),y.m(h.parentNode,h)):y=null);const L={};U&32&&(L.tags=D[5]),!P&&U&4&&(P=!0,L.dialog=D[2],Fe(()=>P=!1)),v.$set(L),D[8]?H&&(ce(),w(H,1,1,()=>{H=null}),ue()):H?U&256&&$(H,1):(H=jt(),H.c(),$(H,1),H.m(b.parentNode,b))},i(D){k||($(s.$$.fragment,D),$(r.$$.fragment,D),$(i.$$.fragment,D),$(u.$$.fragment,D),$(y),$(v.$$.fragment,D),$(H),k=!0)},o(D){w(s.$$.fragment,D),w(r.$$.fragment,D),w(i.$$.fragment,D),w(u.$$.fragment,D),w(y),w(v.$$.fragment,D),w(H),k=!1},d(D){D&&(g(n),g(t),g(_),g(h),g(p),g(b)),g(e),V(s),V(r),V(i),V(u),~f&&G[f].d(D),V(v,D),H&&H.d(D)}}}function Sl(l,e,n){let t,s,o,r,a,i,c,u,_;ge(l,Qe,I=>n(3,t=I)),ge(l,ut,I=>n(4,s=I)),ge(l,Me,I=>n(19,o=I)),ge(l,ze,I=>n(20,r=I)),ge(l,Bn,I=>n(21,a=I)),ge(l,it,I=>n(5,i=I)),ge(l,$t,I=>n(6,c=I)),ge(l,Ht,I=>n(7,u=I)),ge(l,Zt,I=>n(8,_=I)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let f=!1,y,h,v=0;const P=async I=>{const x=await Rn(I);return[...c.items.filter(({name:L})=>L.toLowerCase().includes(I.toLowerCase())).map(L=>({label:L.name,count:L.tags.length,type:"supertag"})),...x]},p=()=>new Tn().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(s),b=async I=>{if(!f){n(1,y=void 0),n(0,f=!0);try{const x=t.pageCount;await I(),Mn(x).catch(()=>{})}catch(x){n(1,y=x),console.warn(x)}finally{n(0,f=!1)}}},k=async()=>{Qe.reset(),v=0,b(async()=>{const[I,x]=await p().getPageAndCount();Qe.addPage(I,x)})},C=async()=>{b(async()=>{const I=await p().getPage();Qe.addPage(I)})},G=I=>{var x,K;if((I.key==="/"||I.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&((x=document.getElementById("searchbar"))==null||x.focus(),I.preventDefault(),I.stopPropagation()),I.ctrlKey&&I.key==="Enter"&&(I.preventDefault(),I.stopPropagation(),k()),I.ctrlKey&&I.key==="m"&&((K=document.getElementById("select-modifier"))==null||K.click()),I.ctrlKey&&I.key==="ArrowDown"){const L=document.getElementsByClassName("post-media");L[v].focus(),v=Math.min(v+1,Math.max(0,L.length-1))}I.ctrlKey&&I.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[v].focus(),v=Math.max(v-1,0))};rt(async()=>{document.addEventListener("keydown",G),t.postCount===0&&k()}),ot(()=>{document.removeEventListener("keydown",G)});const te=async I=>{const x=I.detail;if(x.type==="supertag"){const K=c.items.find(L=>L.name===x.label);if(!K){console.warn("Supertag not present.");return}ut.addOrReplace(K)}else{const K=await Vn(I.detail.label);it.addOrReplace({name:I.detail.label,modifier:I.detail.modifier,count:I.detail.count,type:(K==null?void 0:K.type)??"tag"})}},Q=I=>"description"in I.detail?ut.removeByName(I.detail.name):it.removeByName(I.detail.name),Z=I=>{"description"in I.detail||(I.detail.modifier=Ln(I.detail.modifier),it.addOrReplace(I.detail))},H=()=>{h.showModal(),qt("dialog")};function D(I){h=I,n(2,h)}return[f,y,h,t,s,i,c,u,_,P,k,C,te,Q,Z,H,D,I=>$t.add(I.detail)]}class er extends pe{constructor(e){super(),_e(this,e,Sl,El,fe,{})}}export{er as component};
