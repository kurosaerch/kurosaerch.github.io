import{s as oe,p as ge,E as Te,F as Be,f as T,a as L,g as P,h as j,y as pe,c as F,d as m,j as _,i as A,u as g,G as qe,H as x,I as Je,J as He,l as le,m as re,r as un,v as Q,K as ye,L as ut,o as tt,M as nt,w as fn,A as pn,B as _n,C as dn,n as Ce,N as et,O as Fe,P as mn,Q as gn,e as Ae,D as fe,R as hn,k as Ne,z as Le,S as Ht,T as $n,U as mt,x as vn}from"../chunks/scheduler.a5f94e90.js";import{S as ie,i as ae,f as Pe,b as O,d as B,m as M,a as v,t as y,e as z,g as _e,c as de,r as bn,h as kn}from"../chunks/index.364b58a4.js";import{g as wn}from"../chunks/globals.7f7f1b26.js";import{e as Ee}from"../chunks/each.e59479a4.js";import{D as Gt,a as Wt,r as Kt}from"../chunks/result-columns-store.fad1c3a4.js";import{T as Ke}from"../chunks/TextButton.1d2b8d22.js";import{D as yn}from"../chunks/DetailedTag.a7a88375.js";import{K as En,A as Sn}from"../chunks/ActiveTagList.77ca2554.js";import{b as Jt}from"../chunks/paths.0cd4367f.js";import{f as Oe}from"../chunks/format-tag.7e313273.js";import{r as xe,a as ft}from"../chunks/active-supertags-store.3658e20d.js";import{I as Qt,R as Cn}from"../chunks/ModifierSelect.d70c729c.js";import{R as In,S as Yt,a as Zt,E as Xt,b as Dn,C as xt,P as en,g as tn,c as Tn,i as Pn,G as Nn,V as Ln,d as gt,I as Fn}from"../chunks/Gif.842bccd1.js";import{h as ht,u as An}from"../chunks/await_block.d62949c0.js";import{a as nn,b as Vn,N as jn,c as sn}from"../chunks/cookies-accepted-store.cf59314c.js";import{L as _t}from"../chunks/LoadingAnimation.72f13765.js";import{h as Rn,i as On,a as Bn}from"../chunks/always-loop-store.7fb651a6.js";import{p as Mn,S as zn,b as Un,a as qn}from"../chunks/store-keys.06be84c6.js";import{i as Hn,g as Gn,a as Wn}from"../chunks/tags.49324235.js";import{f as Ue,s as We,S as Kn}from"../chunks/search-builder.63088259.js";import{S as Jn}from"../chunks/Select.0cfdbdd5.js";import{R as Qn}from"../chunks/RotatingTextSelect.ee8f4f5f.js";import{S as Yn}from"../chunks/Searchbar.f419773f.js";import{S as Zn}from"../chunks/ScrollUpButton.8458700b.js";import{l as Xn}from"../chunks/analytics.b280da65.js";import{n as xn,s as $t}from"../chunks/supertags-store.a467cfb7.js";import{a as ct}from"../chunks/active-tags-store.b83fefc6.js";import{b as es}from"../chunks/blocked-content-store.d59a4f6d.js";function vt(s,e,n){const t=s.slice();return t[11]=e[n],t}function bt(s){let e,n;return e=new yn({props:{tag:s[11]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.tag=t[11]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function ts(s){let e;return{c(){e=le("Create supertag")},l(n){e=re(n,"Create supertag")},m(n,t){A(n,e,t)},d(n){n&&m(e)}}}function ns(s){let e,n,t="Create Supertag",l,o,r,a,i,c="Name",u,f,p,h,d,b="Description",$,I,C,D,w,V="Tags",R,q,k,E,S,U,N,ee,Y=Ee(s[3]),H=[];for(let K=0;K<Y.length;K+=1)H[K]=bt(vt(s,Y,K));const ue=K=>y(H[K],1,1,()=>{H[K]=null});return S=new Ke({props:{title:s[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!s[4],$$slots:{default:[ts]},$$scope:{ctx:s}}}),S.$on("click",s[9]),{c(){e=T("section"),n=T("h3"),n.textContent=t,l=L(),o=T("button"),r=L(),a=T("div"),i=T("label"),i.textContent=c,u=L(),f=T("input"),p=L(),h=T("div"),d=T("label"),d.textContent=b,$=L(),I=T("input"),C=L(),D=T("div"),w=T("span"),w.textContent=V,R=L(),q=T("ol");for(let K=0;K<H.length;K+=1)H[K].c();k=L(),E=T("div"),O(S.$$.fragment),this.h()},l(K){e=P(K,"SECTION",{class:!0});var J=j(e);n=P(J,"H3",{"data-svelte-h":!0}),pe(n)!=="svelte-ho1cwx"&&(n.textContent=t),l=F(J),o=P(J,"BUTTON",{type:!0,class:!0}),j(o).forEach(m),r=F(J),a=P(J,"DIV",{class:!0});var ce=j(a);i=P(ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),pe(i)!=="svelte-10k8a68"&&(i.textContent=c),u=F(ce),f=P(ce,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),ce.forEach(m),p=F(J),h=P(J,"DIV",{class:!0});var X=j(h);d=P(X,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),pe(d)!=="svelte-14n9kp6"&&(d.textContent=b),$=F(X),I=P(X,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),X.forEach(m),C=F(J),D=P(J,"DIV",{class:!0});var he=j(D);w=P(he,"SPAN",{class:!0,"data-svelte-h":!0}),pe(w)!=="svelte-7hjyox"&&(w.textContent=V),R=F(he),q=P(he,"OL",{class:!0});var Se=j(q);for(let Ie=0;Ie<H.length;Ie+=1)H[Ie].l(Se);Se.forEach(m),he.forEach(m),k=F(J),E=P(J,"DIV",{class:!0});var Me=j(E);B(S.$$.fragment,Me),Me.forEach(m),J.forEach(m),this.h()},h(){_(o,"type","button"),_(o,"class","codicon codicon-close svelte-1x6vc81"),_(i,"for","supertag-name"),_(i,"class","svelte-1x6vc81"),_(f,"type","text"),_(f,"placeholder","Descriptive name"),_(f,"id","supertag-name"),_(f,"class","svelte-1x6vc81"),_(a,"class","svelte-1x6vc81"),_(d,"for","supertag-description"),_(d,"class","svelte-1x6vc81"),_(I,"type","text"),_(I,"placeholder","Short description"),_(I,"id","supertag-description"),_(I,"class","svelte-1x6vc81"),_(h,"class","svelte-1x6vc81"),_(w,"class","svelte-1x6vc81"),_(q,"class","svelte-1x6vc81"),_(D,"class","svelte-1x6vc81"),_(E,"class","last svelte-1x6vc81"),_(e,"class","svelte-1x6vc81")},m(K,J){A(K,e,J),g(e,n),g(e,l),g(e,o),g(e,r),g(e,a),g(a,i),g(a,u),g(a,f),qe(f,s[0]),g(e,p),g(e,h),g(h,d),g(h,$),g(h,I),qe(I,s[2]),g(e,C),g(e,D),g(D,w),g(D,R),g(D,q);for(let ce=0;ce<H.length;ce+=1)H[ce]&&H[ce].m(q,null);g(e,k),g(e,E),M(S,E,null),U=!0,N||(ee=[x(o,"click",s[6]),x(f,"input",s[7]),x(I,"input",s[8])],N=!0)},p(K,J){if(J&1&&f.value!==K[0]&&qe(f,K[0]),J&4&&I.value!==K[2]&&qe(I,K[2]),J&8){Y=Ee(K[3]);let X;for(X=0;X<Y.length;X+=1){const he=vt(K,Y,X);H[X]?(H[X].p(he,J),v(H[X],1)):(H[X]=bt(he),H[X].c(),v(H[X],1),H[X].m(q,null))}for(_e(),X=Y.length;X<H.length;X+=1)ue(X);de()}const ce={};J&16&&(ce.title=K[4]?"Click to create supertag":"Enter a valid name to continue"),J&16&&(ce.disabled=!K[4]),J&16384&&(ce.$$scope={dirty:J,ctx:K}),S.$set(ce)},i(K){if(!U){for(let J=0;J<Y.length;J+=1)v(H[J]);v(S.$$.fragment,K),U=!0}},o(K){H=H.filter(Boolean);for(let J=0;J<H.length;J+=1)y(H[J]);y(S.$$.fragment,K),U=!1},d(K){K&&m(e),Je(H,K),z(S),N=!1,He(ee)}}}function ss(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[ns]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.dialog=s[1]),e=new Gt({props:o}),ge.push(()=>Pe(e,"dialog",l)),e.$on("close",s[6]),{c(){O(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],Te(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){z(e,r)}}}function ls(s,e,n){let t,{dialog:l}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=Be(),c=()=>l.close();function u(){o=this.value,n(0,o)}function f(){r=this.value,n(2,r)}const p=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:d,name:b})=>({modifier:d,name:b}))}),c()};function h(d){l=d,n(1,l)}return s.$$set=d=>{"dialog"in d&&n(1,l=d.dialog),"name"in d&&n(0,o=d.name),"description"in d&&n(2,r=d.description),"tags"in d&&n(3,a=d.tags)},s.$$.update=()=>{s.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,l,r,a,t,i,c,u,f,p,h]}class rs extends ie{constructor(e){super(),ae(this,e,ls,ss,oe,{dialog:1,name:0,description:2,tags:3})}}function os(s){let e,n,t,l,o,r,a,i,c,u;return{c(){e=T("div"),n=T("div"),t=T("i"),l=L(),o=T("div"),r=T("h3"),a=le(s[0]),i=L(),c=T("span"),u=le(s[2]),this.h()},l(f){e=P(f,"DIV",{class:!0});var p=j(e);n=P(p,"DIV",{class:!0});var h=j(n);t=P(h,"I",{class:!0}),j(t).forEach(m),h.forEach(m),l=F(p),o=P(p,"DIV",{});var d=j(o);r=P(d,"H3",{class:!0});var b=j(r);a=re(b,s[0]),b.forEach(m),i=F(d),c=P(d,"SPAN",{});var $=j(c);u=re($,s[2]),$.forEach(m),d.forEach(m),p.forEach(m),this.h()},h(){_(t,"class",un(s[1])+" svelte-1yohziu"),_(n,"class","icon svelte-1yohziu"),_(r,"class","svelte-1yohziu"),_(e,"class","error svelte-1yohziu")},m(f,p){A(f,e,p),g(e,n),g(n,t),g(e,l),g(e,o),g(o,r),g(r,a),g(o,i),g(o,c),g(c,u)},p:Q,i:Q,o:Q,d(f){f&&m(e)}}}function is(s,e,n){let{error:t}=e,l=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return s.$$set=a=>{"error"in a&&n(3,t=a.error)},[l,o,r,t]}class as extends ie{constructor(e){super(),ae(this,e,is,os,oe,{error:3})}}function cs(s){let e,n,t,l,o="You have seen everything there is to see...";return{c(){e=T("img"),t=L(),l=T("p"),l.textContent=o,this.h()},l(r){e=P(r,"IMG",{src:!0,alt:!0,class:!0}),t=F(r),l=P(r,"P",{"data-svelte-h":!0}),pe(l)!=="svelte-1i75mtf"&&(l.textContent=o),this.h()},h(){ye(e.src,n=Jt+"/assets/shironeko-x.png")||_(e,"src",n),_(e,"alt","No more results to load"),_(e,"class","svelte-1pkma0d")},m(r,a){A(r,e,a),A(r,t,a),A(r,l,a)},p:Q,i:Q,o:Q,d(r){r&&(m(e),m(t),m(l))}}}class us extends ie{constructor(e){super(),ae(this,e,null,cs,oe,{})}}const it=s=>`post_${s}`;function kt(s){let e;const n=s[4].default,t=fn(n,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8)&&pn(t,n,l,l[3],e?dn(n,l[3],o,null):_n(l[3]),null)},i(l){e||(v(t,l),e=!0)},o(l){y(t,l),e=!1},d(l){t&&t.d(l)}}}function fs(s){let e,n,t,l,o=s[1]&&kt(s);return{c(){e=T("div"),o&&o.c(),this.h()},l(r){e=P(r,"DIV",{role:!0,tabindex:!0,class:!0});var a=j(e);o&&o.l(a),a.forEach(m),this.h()},h(){_(e,"role","none"),_(e,"tabindex","-1"),_(e,"class","svelte-6sy8qz")},m(r,a){A(r,e,a),o&&o.m(e,null),s[5](e),n=!0,t||(l=[x(e,"click",ut(ps)),x(e,"keydown",s[2])],t=!0)},p(r,[a]){r[1]?o?(o.p(r,a),a&2&&v(o,1)):(o=kt(r),o.c(),v(o,1),o.m(e,null)):o&&(_e(),y(o,1,1,()=>{o=null}),de())},i(r){n||(v(o),n=!0)},o(r){y(o),n=!1},d(r){r&&m(e),o&&o.d(),s[5](null),t=!1,He(l)}}}const ps=()=>{};function _s(s,e,n){let{$$slots:t={},$$scope:l}=e;const o=Be(),r=()=>o("close"),a=p=>{p.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let c,u=!1;tt(async()=>{c.focus(),document.addEventListener("fullscreenchange",i);try{await c.requestFullscreen()}catch{}n(1,u=!0)}),nt(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function f(p){ge[p?"unshift":"push"](()=>{c=p,n(0,c)})}return s.$$set=p=>{"$$scope"in p&&n(3,l=p.$$scope)},[c,u,a,l,t,f]}class ds extends ie{constructor(e){super(),ae(this,e,_s,fs,oe,{})}}function ms(s){let e,n;return{c(){e=T("div"),this.h()},l(t){e=P(t,"DIV",{style:!0}),j(e).forEach(m),this.h()},h(){_(e,"style",n=s[0]?`position:absolute;top:${s[0]};`:void 0)},m(t,l){A(t,e,l),s[3](e)},p(t,[l]){l&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&_(e,"style",n)},i:Q,o:Q,d(t){t&&m(e),s[3](null)}}}function gs(s,e,n){let{rootMargin:t}=e,{absoluteTop:l}=e;const o=Be(),r=new IntersectionObserver(c=>{c[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(c){ge[c?"unshift":"push"](()=>{a=c,n(1,a)})}return s.$$set=c=>{"rootMargin"in c&&n(2,t=c.rootMargin),"absoluteTop"in c&&n(0,l=c.absoluteTop)},s.$$.update=()=>{s.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[l,a,t,i]}class ln extends ie{constructor(e){super(),ae(this,e,gs,ms,oe,{rootMargin:2,absoluteTop:0})}}function hs(s){let e,n;return{c(){e=T("a"),n=le("Open"),this.h()},l(t){e=P(t,"A",{href:!0,target:!0,class:!0});var l=j(e);n=re(l,"Open"),l.forEach(m),this.h()},h(){_(e,"href",s[0]),_(e,"target","_newtab"),_(e,"class","codicon codicon-link-external svelte-10flxu9")},m(t,l){A(t,e,l),g(e,n)},p(t,[l]){l&1&&_(e,"href",t[0])},i:Q,o:Q,d(t){t&&m(e)}}}function $s(s,e,n){let{url:t}=e;return s.$$set=l=>{"url"in l&&n(0,t=l.url)},[t]}class vs extends ie{constructor(e){super(),ae(this,e,$s,hs,oe,{url:0})}}function wt(s,e,n){const t=s.slice();return t[4]=e[n][0],t[5]=e[n][1],t}function yt(s){let e,n="•",t,l,o;return l=new Xt({props:{source:s[0].source}}),{c(){e=T("span"),e.textContent=n,t=L(),O(l.$$.fragment)},l(r){e=P(r,"SPAN",{"data-svelte-h":!0}),pe(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=F(r),B(l.$$.fragment,r)},m(r,a){A(r,e,a),A(r,t,a),M(l,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),l.$set(i)},i(r){o||(v(l.$$.fragment,r),o=!0)},o(r){y(l.$$.fragment,r),o=!1},d(r){r&&(m(e),m(t)),z(l,r)}}}function Et(s){let e,n=s[4]+"",t,l,o,r;return o=new en({props:{tags:s[5]}}),{c(){e=T("h3"),t=le(n),l=L(),O(o.$$.fragment),this.h()},l(a){e=P(a,"H3",{class:!0});var i=j(e);t=re(i,n),i.forEach(m),l=F(a),B(o.$$.fragment,a),this.h()},h(){_(e,"class","svelte-1tsjp7g")},m(a,i){A(a,e,i),g(e,t),A(a,l,i),M(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[4]+"")&&Ce(t,n);const c={};i&2&&(c.tags=a[5]),o.$set(c)},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){y(o.$$.fragment,a),r=!1},d(a){a&&(m(e),m(l)),z(o,a)}}}function bs(s){let e,n,t,l,o,r,a,i,c=s[0].id+"",u,f,p,h,d,b,$="•",I,C,D=s[0].type.toUpperCase()+"",w,V,R,q="•",k,E,S,U,N="•",ee,Y,H,ue,K,J,ce,X="•",he,Se,Me,Ie,st="•",lt,Ve,rt,Qe,De,Ge,W,ne="Comments",je,$e,ve;h=new In({props:{value:s[0].rating}}),E=new Yt({props:{value:s[0].score}}),Y=new Zt({props:{value:s[0].change}}),K=new vs({props:{url:"/post?id="+s[0].id+"&src="+encodeURIComponent(s[3])}}),Se=new Xt({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+s[0].id}}),Ve=new Dn({props:{url:s[3]}});let te=s[0].source&&yt(s),be=Ee(Object.entries(s[1])),se=[];for(let G=0;G<be.length;G+=1)se[G]=Et(wt(s,be,G));const at=G=>y(se[G],1,1,()=>{se[G]=null});return $e=new xt({props:{post:s[0]}}),{c(){e=T("div"),n=T("img"),l=L(),o=T("h1"),r=le("Post "),a=T("b"),i=le("#"),u=le(c),f=L(),p=T("div"),O(h.$$.fragment),d=L(),b=T("span"),b.textContent=$,I=L(),C=T("span"),w=le(D),V=L(),R=T("span"),R.textContent=q,k=L(),O(E.$$.fragment),S=L(),U=T("span"),U.textContent=N,ee=L(),O(Y.$$.fragment),H=L(),ue=T("div"),O(K.$$.fragment),J=L(),ce=T("span"),ce.textContent=X,he=L(),O(Se.$$.fragment),Me=L(),Ie=T("span"),Ie.textContent=st,lt=L(),O(Ve.$$.fragment),rt=L(),te&&te.c(),Qe=L(),De=T("div");for(let G=0;G<se.length;G+=1)se[G].c();Ge=L(),W=T("h3"),W.textContent=ne,je=L(),O($e.$$.fragment),this.h()},l(G){e=P(G,"DIV",{class:!0});var Z=j(e);n=P(Z,"IMG",{class:!0,src:!0,alt:!0}),l=F(Z),o=P(Z,"H1",{class:!0});var Re=j(o);r=re(Re,"Post "),a=P(Re,"B",{});var Ye=j(a);i=re(Ye,"#"),u=re(Ye,c),Ye.forEach(m),Re.forEach(m),f=F(Z),p=P(Z,"DIV",{class:!0});var me=j(p);B(h.$$.fragment,me),d=F(me),b=P(me,"SPAN",{"data-svelte-h":!0}),pe(b)!=="svelte-7hh8jk"&&(b.textContent=$),I=F(me),C=P(me,"SPAN",{});var ot=j(C);w=re(ot,D),ot.forEach(m),V=F(me),R=P(me,"SPAN",{"data-svelte-h":!0}),pe(R)!=="svelte-7hh8jk"&&(R.textContent=q),k=F(me),B(E.$$.fragment,me),S=F(me),U=P(me,"SPAN",{"data-svelte-h":!0}),pe(U)!=="svelte-7hh8jk"&&(U.textContent=N),ee=F(me),B(Y.$$.fragment,me),me.forEach(m),H=F(Z),ue=P(Z,"DIV",{class:!0});var ke=j(ue);B(K.$$.fragment,ke),J=F(ke),ce=P(ke,"SPAN",{"data-svelte-h":!0}),pe(ce)!=="svelte-7hh8jk"&&(ce.textContent=X),he=F(ke),B(Se.$$.fragment,ke),Me=F(ke),Ie=P(ke,"SPAN",{"data-svelte-h":!0}),pe(Ie)!=="svelte-7hh8jk"&&(Ie.textContent=st),lt=F(ke),B(Ve.$$.fragment,ke),rt=F(ke),te&&te.l(ke),ke.forEach(m),Qe=F(Z),De=P(Z,"DIV",{});var ze=j(De);for(let Ze=0;Ze<se.length;Ze+=1)se[Ze].l(ze);Ge=F(ze),W=P(ze,"H3",{class:!0,"data-svelte-h":!0}),pe(W)!=="svelte-kc6sae"&&(W.textContent=ne),je=F(ze),B($e.$$.fragment,ze),ze.forEach(m),Z.forEach(m),this.h()},h(){_(n,"class","preview svelte-1tsjp7g"),ye(n.src,t=s[2])||_(n,"src",t),_(n,"alt","preview"),_(o,"class","svelte-1tsjp7g"),_(p,"class","flex-row svelte-1tsjp7g"),_(ue,"class","flex-row svelte-1tsjp7g"),_(W,"class","svelte-1tsjp7g"),_(e,"class","details svelte-1tsjp7g")},m(G,Z){A(G,e,Z),g(e,n),g(e,l),g(e,o),g(o,r),g(o,a),g(a,i),g(a,u),g(e,f),g(e,p),M(h,p,null),g(p,d),g(p,b),g(p,I),g(p,C),g(C,w),g(p,V),g(p,R),g(p,k),M(E,p,null),g(p,S),g(p,U),g(p,ee),M(Y,p,null),g(e,H),g(e,ue),M(K,ue,null),g(ue,J),g(ue,ce),g(ue,he),M(Se,ue,null),g(ue,Me),g(ue,Ie),g(ue,lt),M(Ve,ue,null),g(ue,rt),te&&te.m(ue,null),g(e,Qe),g(e,De);for(let Re=0;Re<se.length;Re+=1)se[Re]&&se[Re].m(De,null);g(De,Ge),g(De,W),g(De,je),M($e,De,null),ve=!0},p(G,[Z]){(!ve||Z&4&&!ye(n.src,t=G[2]))&&_(n,"src",t),(!ve||Z&1)&&c!==(c=G[0].id+"")&&Ce(u,c);const Re={};Z&1&&(Re.value=G[0].rating),h.$set(Re),(!ve||Z&1)&&D!==(D=G[0].type.toUpperCase()+"")&&Ce(w,D);const Ye={};Z&1&&(Ye.value=G[0].score),E.$set(Ye);const me={};Z&1&&(me.value=G[0].change),Y.$set(me);const ot={};Z&9&&(ot.url="/post?id="+G[0].id+"&src="+encodeURIComponent(G[3])),K.$set(ot);const ke={};Z&1&&(ke.source="https://rule34.xxx/index.php?page=post&s=view&id="+G[0].id),Se.$set(ke);const ze={};if(Z&8&&(ze.url=G[3]),Ve.$set(ze),G[0].source?te?(te.p(G,Z),Z&1&&v(te,1)):(te=yt(G),te.c(),v(te,1),te.m(ue,null)):te&&(_e(),y(te,1,1,()=>{te=null}),de()),Z&2){be=Ee(Object.entries(G[1]));let we;for(we=0;we<be.length;we+=1){const dt=wt(G,be,we);se[we]?(se[we].p(dt,Z),v(se[we],1)):(se[we]=Et(dt),se[we].c(),v(se[we],1),se[we].m(De,Ge))}for(_e(),we=be.length;we<se.length;we+=1)at(we);de()}const Ze={};Z&1&&(Ze.post=G[0]),$e.$set(Ze)},i(G){if(!ve){v(h.$$.fragment,G),v(E.$$.fragment,G),v(Y.$$.fragment,G),v(K.$$.fragment,G),v(Se.$$.fragment,G),v(Ve.$$.fragment,G),v(te);for(let Z=0;Z<be.length;Z+=1)v(se[Z]);v($e.$$.fragment,G),ve=!0}},o(G){y(h.$$.fragment,G),y(E.$$.fragment,G),y(Y.$$.fragment,G),y(K.$$.fragment,G),y(Se.$$.fragment,G),y(Ve.$$.fragment,G),y(te),se=se.filter(Boolean);for(let Z=0;Z<se.length;Z+=1)y(se[Z]);y($e.$$.fragment,G),ve=!1},d(G){G&&m(e),z(h),z(E),z(Y),z(K),z(Se),z(Ve),te&&te.d(),Je(se,G),z($e)}}}function ks(s,e,n){let t,l,o,{post:r}=e;return s.$$set=a=>{"post"in a&&n(0,r=a.post)},s.$$.update=()=>{s.$$.dirty&1&&n(3,t=r.file_url),s.$$.dirty&1&&n(2,l=r.sample_url),s.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,l,t]}class ws extends ie{constructor(e){super(),ae(this,e,ks,bs,oe,{post:0})}}const Xe=new IntersectionObserver(s=>{for(const e of s)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function ys(s){let e,n,t,l;return{c(){e=T("div"),n=T("input"),this.h()},l(o){e=P(o,"DIV",{class:!0});var r=j(e);n=P(r,"INPUT",{type:!0,step:!0,max:!0,class:!0}),r.forEach(m),this.h()},h(){_(n,"type","range"),_(n,"step","0.001"),_(n,"max",s[1]),_(n,"class","svelte-dfxj87"),_(e,"class","svelte-dfxj87")},m(o,r){A(o,e,r),g(e,n),qe(n,s[0]),t||(l=[x(n,"change",s[5]),x(n,"input",s[5]),x(n,"scroll",ut(et(s[4]))),x(e,"click",ut(et(s[2]))),x(e,"scroll",ut(et(s[3])))],t=!0)},p(o,[r]){r&2&&_(n,"max",o[1]),r&1&&qe(n,o[0])},i:Q,o:Q,d(o){o&&m(e),t=!1,He(l)}}}function Es(s,e,n){let{value:t}=e,{max:l}=e;function o(c){Fe.call(this,s,c)}function r(c){Fe.call(this,s,c)}function a(c){Fe.call(this,s,c)}function i(){t=mn(this.value),n(0,t)}return s.$$set=c=>{"value"in c&&n(0,t=c.value),"max"in c&&n(1,l=c.max)},[t,l,o,r,a,i]}class rn extends ie{constructor(e){super(),ae(this,e,Es,ys,oe,{value:0,max:1})}}function Ss(s){let e,n,t,l=!1,o,r=!0,a,i,c,u,f,p;function h(){cancelAnimationFrame(o),e.paused||(o=bn(h),l=!0),s[10].call(e)}function d($){s[13]($)}let b={max:s[4]};return s[2]!==void 0&&(b.value=s[2]),i=new rn({props:b}),ge.push(()=>Pe(i,"value",d)),{c(){e=T("video"),a=L(),O(i.$$.fragment),this.h()},l($){e=P($,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),j(e).forEach(m),a=F($),B(i.$$.fragment,$),this.h()},h(){ye(e.src,n=s[6])||_(e,"src",n),_(e,"poster",s[5]),_(e,"title",t="[VIDEO] post #"+s[0].id),_(e,"preload","metadata"),e.autoplay=!0,_(e,"class","svelte-uwd1jt"),s[4]===void 0&&gn(()=>s[12].call(e))},m($,I){A($,e,I),s[9](e),A($,a,I),M(i,$,I),u=!0,f||(p=[x(e,"timeupdate",h),x(e,"play",s[11]),x(e,"pause",s[11]),x(e,"durationchange",s[12]),x(e,"click",Cs),x(e,"ended",s[8]),x(e,"contextmenu",et(Is))],f=!0)},p($,[I]){(!u||I&64&&!ye(e.src,n=$[6]))&&_(e,"src",n),(!u||I&32)&&_(e,"poster",$[5]),(!u||I&1&&t!==(t="[VIDEO] post #"+$[0].id))&&_(e,"title",t),!l&&I&4&&!isNaN($[2])&&(e.currentTime=$[2]),l=!1,I&8&&r!==(r=$[3])&&e[r?"pause":"play"]();const C={};I&16&&(C.max=$[4]),!c&&I&4&&(c=!0,C.value=$[2],Te(()=>c=!1)),i.$set(C)},i($){u||(v(i.$$.fragment,$),u=!0)},o($){y(i.$$.fragment,$),u=!1},d($){$&&(m(e),m(a)),s[9](null),z(i,$),f=!1,He(p)}}}const Cs=s=>s.target.paused?s.target.play():s.target.pause(),Is=()=>{};function Ds(s,e,n){let t,l,o,{post:r}=e,a,i=0,c=!1,u;const f=C=>{a&&(C.key==="ArrowLeft"&&(C.preventDefault(),C.stopPropagation(),n(1,a.currentTime=Math.max(0,a.currentTime-5),a)),C.key==="ArrowRight"&&(C.preventDefault(),C.stopPropagation(),n(1,a.currentTime=Math.min(a.duration,a.currentTime+5),a)),C.key==="Space"&&(C.preventDefault(),C.stopPropagation(),n(3,c=!c)))};tt(()=>{a&&(Xe==null||Xe.observe(a)),document.addEventListener("keydown",f)}),nt(()=>{a&&(Xe==null||Xe.unobserve(a)),document.removeEventListener("keydown",f)});function p(C){Fe.call(this,s,C)}function h(C){ge[C?"unshift":"push"](()=>{a=C,n(1,a)})}function d(){i=this.currentTime,n(2,i)}function b(){c=this.paused,n(3,c)}function $(){u=this.duration,n(4,u)}function I(C){i=C,n(2,i)}return s.$$set=C=>{"post"in C&&n(0,r=C.post)},s.$$.update=()=>{s.$$.dirty&1&&n(7,t=tn(r.file_url,r.sample_url,r.preview_url)),s.$$.dirty&128&&n(6,l=t.animated),s.$$.dirty&128&&n(5,o=t.static)},[r,a,i,c,u,o,l,t,p,h,d,b,$,I]}class Ts extends ie{constructor(e){super(),ae(this,e,Ds,Ss,oe,{post:0})}}function Ps(s){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function Ns(s){let e,n,t,l,o,r;return{c(){e=T("img"),this.h()},l(a){e=P(a,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){ye(e.src,n=s[2])||_(e,"src",n),_(e,"alt",t="["+s[0].type+"] post #"+s[0].id),_(e,"title",l="["+s[0].type+"] post #"+s[0].id),_(e,"class","svelte-jlq3re")},m(a,i){A(a,e,i),o||(r=[x(e,"contextmenu",et(Vs)),x(e,"click",s[6]),hn(s[7].call(null,e))],o=!0)},p(a,i){i&4&&!ye(e.src,n=a[2])&&_(e,"src",n),i&1&&t!==(t="["+a[0].type+"] post #"+a[0].id)&&_(e,"alt",t),i&1&&l!==(l="["+a[0].type+"] post #"+a[0].id)&&_(e,"title",l)},i:Q,o:Q,d(a){a&&m(e),o=!1,He(r)}}}function Ls(s){let e,n,t,l,o,r,a,i,c,u;return a=new _t({}),{c(){e=T("img"),o=L(),r=T("div"),O(a.$$.fragment),this.h()},l(f){e=P(f,"IMG",{src:!0,alt:!0,title:!0,class:!0}),o=F(f),r=P(f,"DIV",{class:!0});var p=j(r);B(a.$$.fragment,p),p.forEach(m),this.h()},h(){ye(e.src,n=s[3])||_(e,"src",n),_(e,"alt",t="["+s[0].type+"] post #"+s[0].id),_(e,"title",l="["+s[0].type+"] post #"+s[0].id),_(e,"class","svelte-jlq3re"),_(r,"class","svelte-jlq3re")},m(f,p){A(f,e,p),A(f,o,p),A(f,r,p),M(a,r,null),i=!0,c||(u=[x(e,"contextmenu",et(As)),x(e,"click",s[6])],c=!0)},p(f,p){(!i||p&8&&!ye(e.src,n=f[3]))&&_(e,"src",n),(!i||p&1&&t!==(t="["+f[0].type+"] post #"+f[0].id))&&_(e,"alt",t),(!i||p&1&&l!==(l="["+f[0].type+"] post #"+f[0].id))&&_(e,"title",l)},i(f){i||(v(a.$$.fragment,f),i=!0)},o(f){y(a.$$.fragment,f),i=!1},d(f){f&&(m(e),m(o),m(r)),z(a),c=!1,He(u)}}}function St(s){let e,n,t;function l(r){s[10](r)}let o={max:s[5]};return s[1]!==void 0&&(o.value=s[1]),e=new rn({props:o}),ge.push(()=>Pe(e,"value",l)),{c(){O(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,a){const i={};a&32&&(i.max=r[5]),!n&&a&2&&(n=!0,i.value=r[1],Te(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){z(e,r)}}}function Fs(s){let e,n,t,l,o={ctx:s,current:null,token:null,hasCatch:!1,pending:Ls,then:Ns,catch:Ps,value:21,blocks:[,,,]};ht(e=s[8](s[2]),o);let r=s[4]&&St(s);return{c(){o.block.c(),n=L(),r&&r.c(),t=Ae()},l(a){o.block.l(a),n=F(a),r&&r.l(a),t=Ae()},m(a,i){o.block.m(a,o.anchor=i),o.mount=()=>n.parentNode,o.anchor=n,A(a,n,i),r&&r.m(a,i),A(a,t,i),l=!0},p(a,[i]){s=a,o.ctx=s,i&4&&e!==(e=s[8](s[2]))&&ht(e,o)||An(o,s,i),s[4]?r?(r.p(s,i),i&16&&v(r,1)):(r=St(s),r.c(),v(r,1),r.m(t.parentNode,t)):r&&(_e(),y(r,1,1,()=>{r=null}),de())},i(a){l||(v(o.block),v(r),l=!0)},o(a){for(let i=0;i<3;i+=1){const c=o.blocks[i];y(c)}y(r),l=!1},d(a){a&&(m(n),m(t)),o.block.d(a),o.token=null,o=null,r&&r.d(a)}}}const As=()=>{},Vs=()=>{};function js(s,e,n){let t,l,o,r;fe(s,nn,k=>n(4,o=k)),fe(s,Vn,k=>n(5,r=k));const a=Be();let{post:i}=e,{postId:c=-1}=e;const u=(k,E,S,U)=>{if(k==="gif"){const N=Tn(E,S,U);return[N.static,N.animated]}return Rn?[S,E]:[U,S]};let f=0,p=Date.now(),h=Date.now(),d,b=!0,$;const I=()=>{h=Date.now(),d=h-p,p=h,b||n(1,f+=d/1e3),f>=r&&(a("ended"),n(1,f=0)),$=requestAnimationFrame(I)},C=()=>{b=!b},D=k=>{(k.code==="Space"||k.key==="k")&&(k.preventDefault(),k.stopPropagation(),b=!b)},w=new IntersectionObserver(k=>{for(const E of k)E.target&&(b=!E.isIntersecting)},{rootMargin:"0px",threshold:.5}),V=k=>(w==null||w.observe(k),{destroy(){w==null||w.unobserve(k)}});tt(()=>{o&&($=requestAnimationFrame(I),document.addEventListener("keydown",D))}),nt(()=>{cancelAnimationFrame($),document.removeEventListener("keydown",D)});const R=k=>new Promise(E=>{b=!0;let S=new Image;S.onload=U=>{E(U),b=!1},S.src=k});function q(k){f=k,n(1,f),n(0,i),n(9,c)}return s.$$set=k=>{"post"in k&&n(0,i=k.post),"postId"in k&&n(9,c=k.postId)},s.$$.update=()=>{s.$$.dirty&1&&n(3,[t,l]=u(i.type,i.file_url,i.sample_url,i.preview_url),t,(n(2,l),n(0,i))),s.$$.dirty&513&&i.id!==c&&(n(9,c=i.id),n(1,f=0))},[i,f,l,t,o,r,C,V,R,c,q]}class Rs extends ie{constructor(e){super(),ae(this,e,js,Fs,oe,{post:0,postId:9})}}function Os(s){let e,n;return e=new Rs({props:{post:s[0]}}),e.$on("ended",s[2]),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Bs(s){let e,n;return e=new Ts({props:{post:s[0]}}),e.$on("ended",s[1]),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Ms(s){let e,n,t,l;const o=[Bs,Os],r=[];function a(i,c){return i[0].type==="video"?0:1}return n=a(s),t=r[n]=o[n](s),{c(){e=T("div"),t.c(),this.h()},l(i){e=P(i,"DIV",{class:!0});var c=j(e);t.l(c),c.forEach(m),this.h()},h(){_(e,"class","svelte-acjk3s")},m(i,c){A(i,e,c),r[n].m(e,null),l=!0},p(i,[c]){let u=n;n=a(i),n===u?r[n].p(i,c):(_e(),y(r[u],1,1,()=>{r[u]=null}),de(),t=r[n],t?t.p(i,c):(t=r[n]=o[n](i),t.c()),v(t,1),t.m(e,null))},i(i){l||(v(t),l=!0)},o(i){y(t),l=!1},d(i){i&&m(e),r[n].d()}}}function zs(s,e,n){let{post:t}=e;function l(r){Fe.call(this,s,r)}function o(r){Fe.call(this,s,r)}return s.$$set=r=>{"post"in r&&n(0,t=r.post)},[t,l,o]}class Us extends ie{constructor(e){super(),ae(this,e,zs,Ms,oe,{post:0})}}function qs(s){let e,n,t;return{c(){e=T("img"),this.h()},l(l){e=P(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ye(e.src,n=s[2])||_(e,"src",n),_(e,"alt",t="post #"+s[0].id),_(e,"class","svelte-itxz72"),Ne(e,"top",s[1])},m(l,o){A(l,e,o)},p(l,[o]){o&4&&!ye(e.src,n=l[2])&&_(e,"src",n),o&1&&t!==(t="post #"+l[0].id)&&_(e,"alt",t),o&2&&Ne(e,"top",l[1])},i:Q,o:Q,d(l){l&&m(e)}}}function Hs(s,e,n){let t,{post:l}=e,{offset:o}=e;return s.$$set=r=>{"post"in r&&n(0,l=r.post),"offset"in r&&n(1,o=r.offset)},s.$$.update=()=>{s.$$.dirty&1&&n(2,t=Pn(l.sample_url)?l.preview_url:l.sample_url)},[l,o,t]}class on extends ie{constructor(e){super(),ae(this,e,Hs,qs,oe,{post:0,offset:1})}}const Gs=()=>{const{subscribe:e,set:n}=Mn(zn.FullscreenHintDone,!1,qn,Un);return{subscribe:e,set:n,reset:()=>n(!1)}},Ct=Gs();function It(s,e,n){const t=s.slice();return t[22]=e[n],t[24]=n,t}function Dt(s){let e,n;return e=new on({props:{post:s[7],offset:s[4]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.post=t[7]),l&16&&(o.offset=t[4]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Ws(s){let e;return{c(){e=T("i"),this.h()},l(n){e=P(n,"I",{class:!0}),j(e).forEach(m),this.h()},h(){_(e,"class","codicon codicon-tag")},m(n,t){A(n,e,t)},p:Q,d(n){n&&m(e)}}}function Tt(s){let e,n;return e=new on({props:{post:s[6],offset:s[3]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.post=t[6]),l&8&&(o.offset=t[3]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Pt(s){let e,n=`${s[24]*100}vh`;return{c(){e=T("div"),this.h()},l(t){e=P(t,"DIV",{class:!0}),j(e).forEach(m),this.h()},h(){_(e,"class","pseudo snap-item svelte-2epggd"),Ne(e,"top",n)},m(t,l){A(t,e,l)},p:Q,d(t){t&&m(e)}}}function Ks(s){let e,n,t,l,o,r,a,i,c,u,f,p,h,d,b,$=s[7]&&Dt(s);l=new Us({props:{post:s[8]}}),l.$on("ended",s[11]),r=new ws({props:{post:s[8]}}),i=new Qt({props:{class:"details-button",$$slots:{default:[Ws]},$$scope:{ctx:s}}}),i.$on("click",s[14]);let I=s[6]&&Tt(s),C=Ee({length:s[0].posts.length}),D=[];for(let w=0;w<C.length;w+=1)D[w]=Pt(It(s,C,w));return p=new ln({props:{absoluteTop:s[0].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),p.$on("intersection",s[16]),{c(){e=T("div"),$&&$.c(),n=L(),t=T("div"),O(l.$$.fragment),o=L(),O(r.$$.fragment),a=L(),O(i.$$.fragment),c=L(),I&&I.c(),u=L();for(let w=0;w<D.length;w+=1)D[w].c();f=L(),O(p.$$.fragment),this.h()},l(w){e=P(w,"DIV",{class:!0});var V=j(e);$&&$.l(V),n=F(V),t=P(V,"DIV",{class:!0});var R=j(t);B(l.$$.fragment,R),o=F(R),B(r.$$.fragment,R),a=F(R),B(i.$$.fragment,R),R.forEach(m),c=F(V),I&&I.l(V),u=F(V);for(let q=0;q<D.length;q+=1)D[q].l(V);f=F(V),B(p.$$.fragment,V),V.forEach(m),this.h()},h(){_(t,"class","screen snap-container horizontal current svelte-2epggd"),Le(t,"hint",!s[9]),Ne(t,"top",s[5]),_(e,"class","root screen snap-container svelte-2epggd")},m(w,V){A(w,e,V),$&&$.m(e,null),g(e,n),g(e,t),M(l,t,null),g(t,o),M(r,t,null),g(t,a),M(i,t,null),s[15](t),g(e,c),I&&I.m(e,null),g(e,u);for(let R=0;R<D.length;R+=1)D[R]&&D[R].m(e,null);g(e,f),M(p,e,null),s[17](e),h=!0,d||(b=x(e,"scroll",s[12]),d=!0)},p(w,[V]){w[7]?$?($.p(w,V),V&128&&v($,1)):($=Dt(w),$.c(),v($,1),$.m(e,n)):$&&(_e(),y($,1,1,()=>{$=null}),de());const R={};V&256&&(R.post=w[8]),l.$set(R);const q={};V&256&&(q.post=w[8]),r.$set(q);const k={};if(V&33554432&&(k.$$scope={dirty:V,ctx:w}),i.$set(k),(!h||V&512)&&Le(t,"hint",!w[9]),V&32&&Ne(t,"top",w[5]),w[6]?I?(I.p(w,V),V&64&&v(I,1)):(I=Tt(w),I.c(),v(I,1),I.m(e,u)):I&&(_e(),y(I,1,1,()=>{I=null}),de()),V&1){C=Ee({length:w[0].posts.length});let S;for(S=0;S<C.length;S+=1){const U=It(w,C,S);D[S]?D[S].p(U,V):(D[S]=Pt(U),D[S].c(),D[S].m(e,f))}for(;S<D.length;S+=1)D[S].d(1);D.length=C.length}const E={};V&1&&(E.absoluteTop=w[0].posts.length*100+"vh"),p.$set(E)},i(w){h||(v($),v(l.$$.fragment,w),v(r.$$.fragment,w),v(i.$$.fragment,w),v(I),v(p.$$.fragment,w),h=!0)},o(w){y($),y(l.$$.fragment,w),y(r.$$.fragment,w),y(i.$$.fragment,w),y(I),y(p.$$.fragment,w),h=!1},d(w){w&&m(e),$&&$.d(),z(l),z(r),z(i),s[15](null),I&&I.d(),Je(D,w),z(p),s[17](null),d=!1,b()}}}function Js(s,e,n){let t,l,o,r,a,i,c,u,f;fe(s,Ct,E=>n(9,c=E)),fe(s,nn,E=>n(18,u=E)),fe(s,xe,E=>n(0,f=E));const p=Be();let{index:h}=e,d,b;const $=()=>{d.scrollTo({left:0,top:d.clientHeight*(h-1),behavior:"smooth"})},I=()=>{d.scrollTo({left:0,top:d.clientHeight*(h+1),behavior:"smooth"})},C=()=>{u&&I()},D=E=>{requestAnimationFrame(()=>{const S=E.target,U=S.getBoundingClientRect().height,N=S.scrollTop/U,ee=Math.round(N);ee!=h&&(n(13,h=ee),b&&n(2,b.scrollLeft=0,b))})},w=E=>{E.key==="d"&&(E.preventDefault(),E.stopPropagation(),b.scrollLeft===0?b.scrollBy({left:d.clientWidth,top:0,behavior:"smooth"}):b.scrollBy({left:-d.clientWidth,top:0,behavior:"smooth"})),E.key==="ArrowUp"&&(E.preventDefault(),E.stopPropagation(),$()),E.key==="ArrowDown"&&(E.preventDefault(),E.stopPropagation(),I())};tt(()=>{b&&(b.scrollIntoView(!0),n(2,b.scrollLeft=0,b)),document.addEventListener("keydown",w)}),nt(()=>{Ht(Ct,c=!0,c),document.removeEventListener("keydown",w)});const V=()=>b.scrollBy({left:d.clientWidth,top:0,behavior:"smooth"});function R(E){ge[E?"unshift":"push"](()=>{b=E,n(2,b)})}const q=()=>p("endreached");function k(E){ge[E?"unshift":"push"](()=>{d=E,n(1,d)})}return s.$$set=E=>{"index"in E&&n(13,h=E.index)},s.$$.update=()=>{s.$$.dirty&8193&&n(8,t=f.posts[h]),s.$$.dirty&8193&&n(7,l=h>0?f.posts[h-1]:void 0),s.$$.dirty&8193&&n(6,o=h<f.posts.length-1?f.posts[h+1]:void 0),s.$$.dirty&8192&&n(5,r=`${h*100}vh`),s.$$.dirty&8192&&n(4,a=`${(h-1)*100}vh`),s.$$.dirty&8192&&n(3,i=`${(h+1)*100}vh`)},[f,d,b,i,a,r,o,l,t,c,p,C,D,h,V,R,q,k]}class Qs extends ie{constructor(e){super(),ae(this,e,Js,Ks,oe,{index:13})}}function Ys(s){let e;return{c(){e=T("i"),this.h()},l(n){e=P(n,"I",{class:!0}),j(e).forEach(m),this.h()},h(){_(e,"class","codicon codicon-close")},m(n,t){A(n,e,t)},p:Q,d(n){n&&m(e)}}}function Zs(s){let e,n,t,l,o;function r(i){s[2](i)}let a={};return s[0]!==void 0&&(a.index=s[0]),e=new Qs({props:a}),ge.push(()=>Pe(e,"index",r)),e.$on("endreached",s[3]),l=new Qt({props:{class:"button-close",$$slots:{default:[Ys]},$$scope:{ctx:s}}}),l.$on("click",s[1]),{c(){O(e.$$.fragment),t=L(),O(l.$$.fragment)},l(i){B(e.$$.fragment,i),t=F(i),B(l.$$.fragment,i)},m(i,c){M(e,i,c),A(i,t,c),M(l,i,c),o=!0},p(i,c){const u={};!n&&c&1&&(n=!0,u.index=i[0],Te(()=>n=!1)),e.$set(u);const f={};c&128&&(f.$$scope={dirty:c,ctx:i}),l.$set(f)},i(i){o||(v(e.$$.fragment,i),v(l.$$.fragment,i),o=!0)},o(i){y(e.$$.fragment,i),y(l.$$.fragment,i),o=!1},d(i){i&&m(t),z(e,i),z(l,i)}}}function Xs(s){let e,n;return e=new ds({props:{$$slots:{default:[Zs]},$$scope:{ctx:s}}}),e.$on("close",s[1]),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,[l]){const o={};l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function xs(s,e,n){let{index:t}=e;const l=Be(),o=()=>{l("close",t)},r=u=>{u.key==="f"&&(u.preventDefault(),u.stopPropagation(),o())},a=()=>{var u,f;(((u=history.state)==null?void 0:u.fullscreen)===void 0||((f=history.state)==null?void 0:f.fullscreen)===!1)&&o()};tt(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),nt(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(u){t=u,n(0,t)}function c(u){Fe.call(this,s,u)}return s.$$set=u=>{"index"in u&&n(0,t=u.index)},[t,o,i,c]}class el extends ie{constructor(e){super(),ae(this,e,xs,Xs,oe,{index:0})}}function Nt(s){let e,n=s[0].type==="video"?"▶":"GIF",t;return{c(){e=T("span"),t=le(n),this.h()},l(l){e=P(l,"SPAN",{class:!0});var o=j(e);t=re(o,n),o.forEach(m),this.h()},h(){_(e,"class","type svelte-rfj0jo")},m(l,o){A(l,e,o),g(e,t)},p(l,o){o&1&&n!==(n=l[0].type==="video"?"▶":"GIF")&&Ce(t,n)},d(l){l&&m(e)}}}function tl(s){let e,n,t,l,o,r,a=Oe(s[0].score)+"",i,c,u,f,p=s[0].type!=="image"&&Nt(s);return{c(){e=T("div"),n=T("img"),l=L(),p&&p.c(),o=L(),r=T("span"),i=le(a),this.h()},l(h){e=P(h,"DIV",{id:!0,class:!0,style:!0});var d=j(e);n=P(d,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),l=F(d),p&&p.l(d),o=F(d),r=P(d,"SPAN",{class:!0});var b=j(r);i=re(b,a),b.forEach(m),d.forEach(m),this.h()},h(){ye(n.src,t=s[1])||_(n,"src",t),_(n,"alt","post"),_(n,"class","post-media svelte-rfj0jo"),_(n,"tabindex","-1"),_(n,"loading","lazy"),_(r,"class","score svelte-rfj0jo"),_(e,"id",c=it(s[0].id)),_(e,"class","post svelte-rfj0jo"),Ne(e,"grid-row","span "+s[2]),Le(e,"open",open)},m(h,d){A(h,e,d),g(e,n),g(e,l),p&&p.m(e,null),g(e,o),g(e,r),g(r,i),u||(f=[x(e,"click",s[3]),x(e,"keydown",s[4])],u=!0)},p(h,[d]){d&2&&!ye(n.src,t=h[1])&&_(n,"src",t),h[0].type!=="image"?p?p.p(h,d):(p=Nt(h),p.c(),p.m(e,o)):p&&(p.d(1),p=null),d&1&&a!==(a=Oe(h[0].score)+"")&&Ce(i,a),d&1&&c!==(c=it(h[0].id))&&_(e,"id",c),d&0&&Le(e,"open",open)},i:Q,o:Q,d(h){h&&m(e),p&&p.d(),u=!1,He(f)}}}let Lt=5;function nl(s,e,n){let t,{post:l}=e,o=1/3,r=l.width/l.height,a=Math.max(Math.min(Math.round(Lt/r),Lt/o),2);const i=f=>f.endsWith(".jpg")||f.endsWith(".jpeg")||f.endsWith(".png")||f.endsWith(".webp");function c(f){Fe.call(this,s,f)}const u=f=>{var p;(On(f)||f.key==="f")&&((p=f.target)==null||p.click())};return s.$$set=f=>{"post"in f&&n(0,l=f.post)},s.$$.update=()=>{s.$$.dirty&1&&n(1,t=i(l.sample_url)?l.sample_url:l.preview_url)},[l,t,a,c,u]}class sl extends ie{constructor(e){super(),ae(this,e,nl,tl,oe,{post:0})}}function Ft(s,e,n){const t=s.slice();t[2]=e[n];const l=t[2].host.replace("www.","");t[3]=l;const o=t[1][t[3]]??t[1].default;t[4]=o[0],t[5]=o[1];const r=t[3].includes("api-cdn")?"File":t[3];return t[6]=r,t}function At(s){let e,n,t=s[6]+"",l,o,r,a;return{c(){e=T("li"),n=T("a"),l=le(t),a=L(),this.h()},l(i){e=P(i,"LI",{});var c=j(e);n=P(c,"A",{href:!0,class:!0,style:!0});var u=j(n);l=re(u,t),u.forEach(m),a=F(c),c.forEach(m),this.h()},h(){_(n,"href",o=s[2].toString()),_(n,"class",r="codicon codicon-link-external "+s[5]+" svelte-f59j30"),Ne(n,"background-color",s[4]),Ne(n,"color",s[5])},m(i,c){A(i,e,c),g(e,n),g(n,l),g(e,a)},p(i,c){c&1&&t!==(t=i[6]+"")&&Ce(l,t),c&1&&o!==(o=i[2].toString())&&_(n,"href",o),c&1&&r!==(r="codicon codicon-link-external "+i[5]+" svelte-f59j30")&&_(n,"class",r),c&1&&Ne(n,"background-color",i[4]),c&1&&Ne(n,"color",i[5])},d(i){i&&m(e)}}}function ll(s){let e,n=Ee(s[0]),t=[];for(let l=0;l<n.length;l+=1)t[l]=At(Ft(s,n,l));return{c(){e=T("ol");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=P(l,"OL",{class:!0});var o=j(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){_(e,"class","svelte-f59j30")},m(l,o){A(l,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(l,[o]){if(o&3){n=Ee(l[0]);let r;for(r=0;r<n.length;r+=1){const a=Ft(l,n,r);t[r]?t[r].p(a,o):(t[r]=At(a),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:Q,o:Q,d(l){l&&m(e),Je(t,l)}}}function rl(s,e,n){let{links:t}=e;const l={"kurosearch.com":["crimson","white"],"rule34.xxx":["#aae5a4","black"],"newgrounds.com":["#fda238","black"],"twitter.com":["rgb(29, 155, 240)","white"],"x.com":["rgb(29, 155, 240)","white"],"pornhub.com":["#f90","black"],"zone-archive.com":["#59396A","white"],"subscribestar.adult":["#ff4081","white"],"redgifs.com":["#E5194D","white"],"deviantart.com":["#00c787","black"],default:["var(--background-2)","white"]};return s.$$set=o=>{"links"in o&&n(0,t=o.links)},[t,l]}class ol extends ie{constructor(e){super(),ae(this,e,rl,ll,oe,{links:0})}}function Vt(s){let e,n=Oe(s[0].comment_count)+"",t,l,o;return{c(){e=T("button"),t=le(n),this.h()},l(r){e=P(r,"BUTTON",{type:!0,class:!0});var a=j(e);t=re(a,n),a.forEach(m),this.h()},h(){_(e,"type","button"),_(e,"class","codicon codicon-comment svelte-nhpj3u"),Le(e,"active",s[1]==="comments")},m(r,a){A(r,e,a),g(e,t),l||(o=x(e,"click",s[5]),l=!0)},p(r,a){a&1&&n!==(n=Oe(r[0].comment_count)+"")&&Ce(t,n),a&2&&Le(e,"active",r[1]==="comments")},d(r){r&&m(e),l=!1,o()}}}function il(s){let e,n,t,l,o="•",r,a,i,c,u,f,p=Oe(s[2])+"",h,d,b,$,I=Oe(s[0].tags.length)+"",C,D,w,V;n=new Zt({props:{value:s[0].change}}),a=new Yt({props:{value:s[0].score}});let R=s[0].comment_count&&Vt(s);return{c(){e=T("div"),O(n.$$.fragment),t=L(),l=T("span"),l.textContent=o,r=L(),O(a.$$.fragment),i=L(),c=T("span"),u=L(),f=T("button"),h=le(p),d=L(),R&&R.c(),b=L(),$=T("button"),C=le(I),this.h()},l(q){e=P(q,"DIV",{class:!0});var k=j(e);B(n.$$.fragment,k),t=F(k),l=P(k,"SPAN",{"data-svelte-h":!0}),pe(l)!=="svelte-7hh8jk"&&(l.textContent=o),r=F(k),B(a.$$.fragment,k),i=F(k),c=P(k,"SPAN",{class:!0}),j(c).forEach(m),u=F(k),f=P(k,"BUTTON",{type:!0,class:!0});var E=j(f);h=re(E,p),E.forEach(m),d=F(k),R&&R.l(k),b=F(k),$=P(k,"BUTTON",{type:!0,class:!0});var S=j($);C=re(S,I),S.forEach(m),k.forEach(m),this.h()},h(){_(c,"class","divider svelte-nhpj3u"),_(f,"type","button"),_(f,"class","codicon codicon-link svelte-nhpj3u"),Le(f,"active",s[1]==="links"),_($,"type","button"),_($,"class","codicon codicon-tag svelte-nhpj3u"),Le($,"active",s[1]==="tags"),_(e,"class","summary svelte-nhpj3u")},m(q,k){A(q,e,k),M(n,e,null),g(e,t),g(e,l),g(e,r),M(a,e,null),g(e,i),g(e,c),g(e,u),g(e,f),g(f,h),g(e,d),R&&R.m(e,null),g(e,b),g(e,$),g($,C),D=!0,w||(V=[x(f,"click",s[4]),x($,"click",s[6])],w=!0)},p(q,[k]){const E={};k&1&&(E.value=q[0].change),n.$set(E);const S={};k&1&&(S.value=q[0].score),a.$set(S),(!D||k&4)&&p!==(p=Oe(q[2])+"")&&Ce(h,p),(!D||k&2)&&Le(f,"active",q[1]==="links"),q[0].comment_count?R?R.p(q,k):(R=Vt(q),R.c(),R.m(e,b)):R&&(R.d(1),R=null),(!D||k&1)&&I!==(I=Oe(q[0].tags.length)+"")&&Ce(C,I),(!D||k&2)&&Le($,"active",q[1]==="tags")},i(q){D||(v(n.$$.fragment,q),v(a.$$.fragment,q),D=!0)},o(q){y(n.$$.fragment,q),y(a.$$.fragment,q),D=!1},d(q){q&&m(e),z(n),z(a),R&&R.d(),w=!1,He(V)}}}function al(s,e,n){const t=Be();let{post:l}=e,{active:o}=e,{links:r}=e;const a=()=>t("links"),i=()=>t("comments"),c=()=>t("tags");return s.$$set=u=>{"post"in u&&n(0,l=u.post),"active"in u&&n(1,o=u.active),"links"in u&&n(2,r=u.links)},[l,o,r,t,a,i,c]}class cl extends ie{constructor(e){super(),ae(this,e,al,il,oe,{post:0,active:1,links:2})}}function ul(s){let e,n='<i class="codicon codicon-screen-full"></i>',t,l;return{c(){e=T("button"),e.innerHTML=n,this.h()},l(o){e=P(o,"BUTTON",{type:!0,title:!0,class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-hnv5zq"&&(e.innerHTML=n),this.h()},h(){_(e,"type","button"),_(e,"title","Enter Fullscreen mode"),_(e,"class","svelte-txn4jo")},m(o,r){A(o,e,r),t||(l=x(e,"click",s[0]),t=!0)},p:Q,i:Q,o:Q,d(o){o&&m(e),t=!1,l()}}}function fl(s){function e(n){Fe.call(this,s,n)}return[e]}class pl extends ie{constructor(e){super(),ae(this,e,fl,ul,oe,{})}}function _l(s){const e=s.slice(),n=tn(e[1].file_url,e[1].sample_url,e[1].preview_url);return e[11]=n,e}function dl(s){let e,n;return e=new Nn({props:{post:s[1]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function ml(s){let e,n;return e=new Ln({props:{src:s[11].animated,poster:s[11].static,width:s[1].width,height:s[1].height,loop:s[2]||gt(s[1].tags)}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.src=t[11].animated),l&2&&(o.poster=t[11].static),l&2&&(o.width=t[1].width),l&2&&(o.height=t[1].height),l&6&&(o.loop=t[2]||gt(t[1].tags)),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function gl(s){let e,n;return e=new Fn({props:{post:s[1]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function hl(s){let e,n;return e=new ol({props:{links:s[5]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p:Q,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function $l(s){let e,n;return e=new xt({props:{post:s[1]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function vl(s){let e,n;return e=new en({props:{tags:s[1].tags}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.tags=t[1].tags),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function bl(s){let e,n,t,l,o,r,a,i,c,u,f,p,h,d,b,$;const I=[gl,ml,dl],C=[];function D(k,E){return k[1].type==="image"?0:k[1].type==="video"?1:2}function w(k,E){return E===1?_l(k):k}t=D(s),l=C[t]=I[t](w(s,t)),r=new pl({}),r.$on("click",s[6]),c=new cl({props:{active:s[0],post:s[1],links:s[5].length}}),c.$on("tags",s[7]),c.$on("comments",s[8]),c.$on("links",s[9]);const V=[vl,$l,hl],R=[];function q(k,E){return k[0]==="tags"?0:k[0]==="comments"?1:k[0]==="links"?2:-1}return~(f=q(s))&&(p=R[f]=V[f](s)),{c(){e=T("div"),n=T("div"),l.c(),o=L(),O(r.$$.fragment),a=L(),i=T("div"),O(c.$$.fragment),u=L(),p&&p.c(),this.h()},l(k){e=P(k,"DIV",{id:!0,class:!0});var E=j(e);n=P(E,"DIV",{});var S=j(n);l.l(S),S.forEach(m),o=F(E),B(r.$$.fragment,E),a=F(E),i=P(E,"DIV",{class:!0});var U=j(i);B(c.$$.fragment,U),u=F(U),p&&p.l(U),U.forEach(m),E.forEach(m),this.h()},h(){_(i,"class","details svelte-iu0mgu"),_(e,"id",h=it(s[1].id)),_(e,"class","post svelte-iu0mgu"),Le(e,"openTab",s[0])},m(k,E){A(k,e,E),g(e,n),C[t].m(n,null),g(e,o),M(r,e,null),g(e,a),g(e,i),M(c,i,null),g(i,u),~f&&R[f].m(i,null),d=!0,b||($=x(e,"keydown",s[10]),b=!0)},p(k,[E]){let S=t;t=D(k),t===S?C[t].p(w(k,t),E):(_e(),y(C[S],1,1,()=>{C[S]=null}),de(),l=C[t],l?l.p(w(k,t),E):(l=C[t]=I[t](w(k,t)),l.c()),v(l,1),l.m(n,null));const U={};E&1&&(U.active=k[0]),E&2&&(U.post=k[1]),c.$set(U);let N=f;f=q(k),f===N?~f&&R[f].p(k,E):(p&&(_e(),y(R[N],1,1,()=>{R[N]=null}),de()),~f?(p=R[f],p?p.p(k,E):(p=R[f]=V[f](k),p.c()),v(p,1),p.m(i,null)):p=null),(!d||E&2&&h!==(h=it(k[1].id)))&&_(e,"id",h),(!d||E&1)&&Le(e,"openTab",k[0])},i(k){d||(v(l),v(r.$$.fragment,k),v(c.$$.fragment,k),v(p),d=!0)},o(k){y(l),y(r.$$.fragment,k),y(c.$$.fragment,k),y(p),d=!1},d(k){k&&m(e),C[t].d(),z(r),z(c),~f&&R[f].d(),b=!1,$()}}}function kl(s,e,n){let t;fe(s,Bn,d=>n(2,t=d));const l=Be();let{post:o}=e,{openTab:r=void 0}=e;const a=d=>{n(0,r=r===d?void 0:d)},i=[new URL(`https://kurosearch.com/post?id=${o.id}&src=${encodeURIComponent(o.file_url)}`),new URL(`https://rule34.xxx/index.php?page=post&s=view&id=${o.id}`),new URL(o.file_url),...o.source.split(" ").filter(d=>Hn(d)).map(d=>new URL(d))],c=()=>l("fullscreen"),u=()=>a("tags"),f=()=>a("comments"),p=()=>a("links"),h=d=>{d.key==="f"&&l("fullscreen")};return s.$$set=d=>{"post"in d&&n(1,o=d.post),"openTab"in d&&n(0,r=d.openTab)},[r,o,t,l,a,i,c,u,f,p,h]}class wl extends ie{constructor(e){super(),ae(this,e,kl,bl,oe,{post:1,openTab:0})}}function jt(s,e,n){const t=s.slice();return t[5]=e[n][0],t[6]=e[n][1],t}function Rt(s){let e,n,t,l=!1,o,r,a,i=s[6]+"",c,u,f,p,h;return f=$n(s[4][0]),{c(){e=T("input"),r=L(),a=T("label"),c=le(i),this.h()},l(d){e=P(d,"INPUT",{type:!0,name:!0,id:!0,class:!0}),r=F(d),a=P(d,"LABEL",{for:!0,class:!0});var b=j(a);c=re(b,i),b.forEach(m),this.h()},h(){_(e,"type","radio"),_(e,"name",n="group-"+s[1]),e.__value=t=s[5],qe(e,e.__value),_(e,"id",o=s[1]+"-"+s[5]),_(e,"class","svelte-16oxivo"),_(a,"for",u=s[1]+"-"+s[5]),_(a,"class","svelte-16oxivo"),f.p(e)},m(d,b){A(d,e,b),e.checked=e.__value===s[0],A(d,r,b),A(d,a,b),g(a,c),p||(h=x(e,"change",s[3]),p=!0)},p(d,b){b&2&&n!==(n="group-"+d[1])&&_(e,"name",n),b&4&&t!==(t=d[5])&&(e.__value=t,qe(e,e.__value),l=!0),b&6&&o!==(o=d[1]+"-"+d[5])&&_(e,"id",o),(l||b&5)&&(e.checked=e.__value===d[0]),b&4&&i!==(i=d[6]+"")&&Ce(c,i),b&6&&u!==(u=d[1]+"-"+d[5])&&_(a,"for",u)},d(d){d&&(m(e),m(r),m(a)),f.r(),p=!1,h()}}}function yl(s){let e,n,t=Ee(Object.entries(s[2])),l=[];for(let o=0;o<t.length;o+=1)l[o]=Rt(jt(s,t,o));return{c(){e=T("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=P(o,"DIV",{id:!0,role:!0,class:!0});var r=j(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){_(e,"id",n="group-"+s[1]),_(e,"role","radiogroup"),_(e,"class","svelte-16oxivo")},m(o,r){A(o,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(o,[r]){if(r&7){t=Ee(Object.entries(o[2]));let a;for(a=0;a<t.length;a+=1){const i=jt(o,t,a);l[a]?l[a].p(i,r):(l[a]=Rt(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}r&2&&n!==(n="group-"+o[1])&&_(e,"id",n)},i:Q,o:Q,d(o){o&&m(e),Je(l,o)}}}function El(s,e,n){let{name:t}=e,{value:l}=e,{options:o}=e;const r=[[]];function a(){l=this.__value,n(0,l)}return s.$$set=i=>{"name"in i&&n(1,t=i.name),"value"in i&&n(0,l=i.value),"options"in i&&n(2,o=i.options)},[l,t,o,a,r]}class Sl extends ie{constructor(e){super(),ae(this,e,El,yl,oe,{name:1,value:0,options:2})}}const Cl=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),an=Object.freeze({">=":"≥","<=":"≤"}),cn=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),Il=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),Dl=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),Tl=(s,e)=>s===0&&e===">="?void 0:`Score ${an[e]} ${Oe(s)}`,Pl=s=>s==="all"?void 0:cn[s],Nl=(s,e,n)=>{let t=Pl(s),l=Tl(e,n);return[t,l].filter(o=>o!==void 0).join(",")||"All"},Ll=(s,e)=>Cl[s][e];function Fl(s){let e;return{c(){e=le("Done")},l(n){e=re(n,"Done")},m(n,t){A(n,e,t)},d(n){n&&m(e)}}}function Al(s){let e;return{c(){e=le("Reset")},l(n){e=re(n,"Reset")},m(n,t){A(n,e,t)},d(n){n&&m(e)}}}function Vl(s){let e,n,t="Sorting and Filtering",l,o,r,a="Sorting",i,c,u,f,p,h,d,b,$,I,C="Filtering by Score",D,w,V,R,q,k,E,S,U,N,ee="Rating",Y,H,ue,K,J,ce,X,he;function Se(W){s[5](W)}let Me={options:Dl};s[2].direction!==void 0&&(Me.value=s[2].direction),u=new Cn({props:Me}),ge.push(()=>Pe(u,"value",Se));function Ie(W){s[6](W)}let st={options:Il};s[2].property!==void 0&&(st.value=s[2].property),h=new Jn({props:st}),ge.push(()=>Pe(h,"value",Ie));function lt(W){s[7](W)}let Ve={options:an};s[1].scoreComparator!==void 0&&(Ve.value=s[1].scoreComparator),V=new Qn({props:Ve}),ge.push(()=>Pe(V,"value",lt));function rt(W){s[8](W)}let Qe={min:0,max:1e4,step:1};s[1].scoreValue!==void 0&&(Qe.value=s[1].scoreValue),k=new jn({props:Qe}),ge.push(()=>Pe(k,"value",rt));function De(W){s[9](W)}let Ge={name:"rating",options:cn};return s[1].rating!==void 0&&(Ge.value=s[1].rating),H=new Sl({props:Ge}),ge.push(()=>Pe(H,"value",De)),J=new Ke({props:{title:"Return to searching",$$slots:{default:[Fl]},$$scope:{ctx:s}}}),J.$on("click",s[10]),X=new Ke({props:{title:"Reset sort and filter",type:"secondary",$$slots:{default:[Al]},$$scope:{ctx:s}}}),X.$on("click",s[3]),{c(){e=T("div"),n=T("h3"),n.textContent=t,l=L(),o=T("div"),r=T("b"),r.textContent=a,i=L(),c=T("div"),O(u.$$.fragment),p=L(),O(h.$$.fragment),b=L(),$=T("div"),I=T("b"),I.textContent=C,D=L(),w=T("div"),O(V.$$.fragment),q=L(),O(k.$$.fragment),S=L(),U=T("div"),N=T("b"),N.textContent=ee,Y=L(),O(H.$$.fragment),K=L(),O(J.$$.fragment),ce=L(),O(X.$$.fragment),this.h()},l(W){e=P(W,"DIV",{class:!0});var ne=j(e);n=P(ne,"H3",{"data-svelte-h":!0}),pe(n)!=="svelte-15zouq3"&&(n.textContent=t),l=F(ne),o=P(ne,"DIV",{});var je=j(o);r=P(je,"B",{class:!0,"data-svelte-h":!0}),pe(r)!=="svelte-ekzpgg"&&(r.textContent=a),i=F(je),c=P(je,"DIV",{class:!0});var $e=j(c);B(u.$$.fragment,$e),p=F($e),B(h.$$.fragment,$e),$e.forEach(m),je.forEach(m),b=F(ne),$=P(ne,"DIV",{});var ve=j($);I=P(ve,"B",{class:!0,"data-svelte-h":!0}),pe(I)!=="svelte-1flca3"&&(I.textContent=C),D=F(ve),w=P(ve,"DIV",{class:!0});var te=j(w);B(V.$$.fragment,te),q=F(te),B(k.$$.fragment,te),te.forEach(m),ve.forEach(m),S=F(ne),U=P(ne,"DIV",{});var be=j(U);N=P(be,"B",{class:!0,"data-svelte-h":!0}),pe(N)!=="svelte-1lwyn2b"&&(N.textContent=ee),Y=F(be),B(H.$$.fragment,be),be.forEach(m),K=F(ne),B(J.$$.fragment,ne),ce=F(ne),B(X.$$.fragment,ne),ne.forEach(m),this.h()},h(){_(r,"class","svelte-seh1z8"),_(c,"class","row svelte-seh1z8"),_(I,"class","svelte-seh1z8"),_(w,"class","row svelte-seh1z8"),_(N,"class","svelte-seh1z8"),_(e,"class","container svelte-seh1z8")},m(W,ne){A(W,e,ne),g(e,n),g(e,l),g(e,o),g(o,r),g(o,i),g(o,c),M(u,c,null),g(c,p),M(h,c,null),g(e,b),g(e,$),g($,I),g($,D),g($,w),M(V,w,null),g(w,q),M(k,w,null),g(e,S),g(e,U),g(U,N),g(U,Y),M(H,U,null),g(e,K),M(J,e,null),g(e,ce),M(X,e,null),he=!0},p(W,ne){const je={};!f&&ne&4&&(f=!0,je.value=W[2].direction,Te(()=>f=!1)),u.$set(je);const $e={};!d&&ne&4&&(d=!0,$e.value=W[2].property,Te(()=>d=!1)),h.$set($e);const ve={};!R&&ne&2&&(R=!0,ve.value=W[1].scoreComparator,Te(()=>R=!1)),V.$set(ve);const te={};!E&&ne&2&&(E=!0,te.value=W[1].scoreValue,Te(()=>E=!1)),k.$set(te);const be={};!ue&&ne&2&&(ue=!0,be.value=W[1].rating,Te(()=>ue=!1)),H.$set(be);const se={};ne&16384&&(se.$$scope={dirty:ne,ctx:W}),J.$set(se);const at={};ne&16384&&(at.$$scope={dirty:ne,ctx:W}),X.$set(at)},i(W){he||(v(u.$$.fragment,W),v(h.$$.fragment,W),v(V.$$.fragment,W),v(k.$$.fragment,W),v(H.$$.fragment,W),v(J.$$.fragment,W),v(X.$$.fragment,W),he=!0)},o(W){y(u.$$.fragment,W),y(h.$$.fragment,W),y(V.$$.fragment,W),y(k.$$.fragment,W),y(H.$$.fragment,W),y(J.$$.fragment,W),y(X.$$.fragment,W),he=!1},d(W){W&&m(e),z(u),z(h),z(V),z(k),z(H),z(J),z(X)}}}function jl(s){let e,n,t;function l(r){s[11](r)}let o={$$slots:{default:[Vl]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.dialog=s[0]),e=new Gt({props:o}),ge.push(()=>Pe(e,"dialog",l)),e.$on("close",s[12]),{c(){O(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,[a]){const i={};a&16391&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],Te(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){z(e,r)}}}function Rl(s,e,n){let t,l;fe(s,Ue,$=>n(1,t=$)),fe(s,We,$=>n(2,l=$));let{dialog:o}=e,r;const a=()=>{We.reset(),Ue.reset(),n(4,r=t.scoreValue)};function i($){s.$$.not_equal(l.direction,$)&&(l.direction=$,We.set(l))}function c($){s.$$.not_equal(l.property,$)&&(l.property=$,We.set(l))}function u($){s.$$.not_equal(t.scoreComparator,$)&&(t.scoreComparator=$,Ue.set(t))}function f($){s.$$.not_equal(t.scoreValue,$)&&(t.scoreValue=$,Ue.set(t))}function p($){s.$$.not_equal(t.rating,$)&&(t.rating=$,Ue.set(t))}const h=()=>o.close();function d($){o=$,n(0,o)}function b($){Fe.call(this,s,$)}return s.$$set=$=>{"dialog"in $&&n(0,o=$.dialog)},s.$$.update=()=>{if(s.$$.dirty&18){r===void 0&&n(4,r=t.scoreValue);let $=Number(r);isNaN($)||Ht(Ue,t.scoreValue=$,t)}},[o,t,l,a,r,i,c,u,f,p,h,d,b]}class Ol extends ie{constructor(e){super(),ae(this,e,Rl,jl,oe,{dialog:0})}}function Bl(s){let e,n,t,l,o,r,a,i,c,u,f,p,h,d,b,$;function I(D){s[9](D)}let C={};return s[2]!==void 0&&(C.dialog=s[2]),p=new Ol({props:C}),ge.push(()=>Pe(p,"dialog",I)),p.$on("close",s[10]),{c(){e=T("button"),n=T("i"),t=L(),l=T("span"),o=le(s[5]),r=L(),a=T("i"),i=L(),c=T("span"),u=le(s[4]),f=L(),O(p.$$.fragment),this.h()},l(D){e=P(D,"BUTTON",{type:!0,class:!0});var w=j(e);n=P(w,"I",{class:!0}),j(n).forEach(m),t=F(w),l=P(w,"SPAN",{class:!0});var V=j(l);o=re(V,s[5]),V.forEach(m),r=F(w),a=P(w,"I",{class:!0}),j(a).forEach(m),i=F(w),c=P(w,"SPAN",{class:!0});var R=j(c);u=re(R,s[4]),R.forEach(m),w.forEach(m),f=F(D),B(p.$$.fragment,D),this.h()},h(){_(n,"class","codicon codicon-filter svelte-3ooqm6"),_(l,"class","svelte-3ooqm6"),_(a,"class","codicon codicon-arrow-swap svelte-3ooqm6"),_(c,"class","svelte-3ooqm6"),_(e,"type","button"),_(e,"class","svelte-3ooqm6")},m(D,w){A(D,e,w),g(e,n),g(e,t),g(e,l),g(l,o),g(e,r),g(e,a),g(e,i),g(e,c),g(c,u),A(D,f,w),M(p,D,w),d=!0,b||($=x(e,"click",s[8]),b=!0)},p(D,[w]){(!d||w&32)&&Ce(o,D[5]),(!d||w&16)&&Ce(u,D[4]);const V={};!h&&w&4&&(h=!0,V.dialog=D[2],Te(()=>h=!1)),p.$set(V)},i(D){d||(v(p.$$.fragment,D),d=!0)},o(D){y(p.$$.fragment,D),d=!1},d(D){D&&(m(e),m(f)),z(p,D),b=!1,$()}}}function Ml(s,e,n){let t,l,o,r;fe(s,We,d=>n(0,o=d)),fe(s,Ue,d=>n(1,r=d));const a=Be(),i=(d,b)=>JSON.stringify(Object.assign({},d,b));let c,u="";const f=()=>{n(3,u=i(o,r)),c.showModal(),Wt("dialog")};function p(d){c=d,n(2,c)}const h=()=>{i(o,r)!==u&&a("sortfilterupdate")};return s.$$.update=()=>{s.$$.dirty&2&&n(5,t=Nl(r.rating,r.scoreValue,r.scoreComparator)),s.$$.dirty&1&&n(4,l=Ll(o.property,o.direction))},[o,r,c,u,l,t,a,i,f,p,h]}class zl extends ie{constructor(e){super(),ae(this,e,Ml,Bl,oe,{})}}function Ot(s,e,n){const t=s.slice();return t[8]=e[n],t[10]=n,t}function Bt(s,e,n){const t=s.slice();return t[8]=e[n],t[10]=n,t}function Ul(s){let e,n,t=Ee(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Mt(Ot(s,t,r));const o=r=>y(l[r],1,1,()=>{l[r]=null});return{c(){e=T("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=P(r,"OL",{class:!0,style:!0});var a=j(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(m),this.h()},h(){_(e,"class","multi-column svelte-1mohvmt"),Ne(e,"--nr-columns",s[2])},m(r,a){A(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=Ee(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Ot(r,t,i);l[i]?(l[i].p(c,a),v(l[i],1)):(l[i]=Mt(c),l[i].c(),v(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);de()}(!n||a&4)&&Ne(e,"--nr-columns",r[2])},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)y(l[a]);n=!1},d(r){r&&m(e),Je(l,r)}}}function ql(s){let e,n,t=Ee(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=zt(Bt(s,t,r));const o=r=>y(l[r],1,1,()=>{l[r]=null});return{c(){e=T("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=P(r,"OL",{class:!0});var a=j(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(m),this.h()},h(){_(e,"class","single-column svelte-1mohvmt")},m(r,a){A(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=Ee(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Bt(r,t,i);l[i]?(l[i].p(c,a),v(l[i],1)):(l[i]=zt(c),l[i].c(),v(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);de()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)y(l[a]);n=!1},d(r){r&&m(e),Je(l,r)}}}function Mt(s){let e,n;function t(){return s[6](s[10])}return e=new sl({props:{post:s[8]}}),e.$on("click",t),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,o){M(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[8]),e.$set(r)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){z(e,l)}}}function zt(s){let e,n;function t(){return s[5](s[10])}return e=new wl({props:{post:s[8]}}),e.$on("fullscreen",t),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,o){M(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[8]),e.$set(r)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){z(e,l)}}}function Ut(s){let e,n;return e=new el({props:{index:s[0]}}),e.$on("close",s[3]),e.$on("endreached",s[7]),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.index=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Hl(s){let e,n,t=Oe(s[1].postCount)+"",l,o,r,a,i,c,u,f,p,h;a=new zl({}),a.$on("sortfilterupdate",s[4]);const d=[ql,Ul],b=[];function $(C,D){return C[2]==="1"?0:1}c=$(s),u=b[c]=d[c](s);let I=s[0]!==void 0&&Ut(s);return{c(){e=T("div"),n=T("span"),l=le(t),o=le(" posts"),r=L(),O(a.$$.fragment),i=L(),u.c(),f=L(),I&&I.c(),p=Ae(),this.h()},l(C){e=P(C,"DIV",{class:!0});var D=j(e);n=P(D,"SPAN",{});var w=j(n);l=re(w,t),o=re(w," posts"),w.forEach(m),r=F(D),B(a.$$.fragment,D),D.forEach(m),i=F(C),u.l(C),f=F(C),I&&I.l(C),p=Ae(),this.h()},h(){_(e,"class","svelte-1mohvmt")},m(C,D){A(C,e,D),g(e,n),g(n,l),g(n,o),g(e,r),M(a,e,null),A(C,i,D),b[c].m(C,D),A(C,f,D),I&&I.m(C,D),A(C,p,D),h=!0},p(C,[D]){(!h||D&2)&&t!==(t=Oe(C[1].postCount)+"")&&Ce(l,t);let w=c;c=$(C),c===w?b[c].p(C,D):(_e(),y(b[w],1,1,()=>{b[w]=null}),de(),u=b[c],u?u.p(C,D):(u=b[c]=d[c](C),u.c()),v(u,1),u.m(f.parentNode,f)),C[0]!==void 0?I?(I.p(C,D),D&1&&v(I,1)):(I=Ut(C),I.c(),v(I,1),I.m(p.parentNode,p)):I&&(_e(),y(I,1,1,()=>{I=null}),de())},i(C){h||(v(a.$$.fragment,C),v(u),v(I),h=!0)},o(C){y(a.$$.fragment,C),y(u),y(I),h=!1},d(C){C&&(m(e),m(i),m(f),m(p)),z(a),b[c].d(C),I&&I.d(C)}}}function Gl(s,e,n){let t,l;fe(s,xe,f=>n(1,t=f)),fe(s,Kt,f=>n(2,l=f));let o;const r=f=>{var d;const p=t.posts[f.detail],h=it(p.id);(d=document.getElementById(h))==null||d.scrollIntoView(),n(0,o=void 0)};function a(f){Fe.call(this,s,f)}const i=f=>{n(0,o=f)},c=f=>{n(0,o=f)};function u(f){Fe.call(this,s,f)}return s.$$.update=()=>{var f;s.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(f=history.state)!=null&&f.fullscreen&&history.back())},[o,t,l,r,a,i,c,u]}class Wl extends ie{constructor(e){super(),ae(this,e,Gl,Hl,oe,{})}}function Kl(s){let e;return{c(){e=le("Reset Filter")},l(n){e=re(n,"Reset Filter")},m(n,t){A(n,e,t)},d(n){n&&m(e)}}}function Jl(s){let e,n,t,l,o="We couldn't find any posts matching your tags. Sorry...",r,a,i;return a=new Ke({props:{title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[Kl]},$$scope:{ctx:s}}}),a.$on("click",s[1]),{c(){e=T("img"),t=L(),l=T("p"),l.textContent=o,r=L(),O(a.$$.fragment),this.h()},l(c){e=P(c,"IMG",{src:!0,alt:!0,class:!0}),t=F(c),l=P(c,"P",{"data-svelte-h":!0}),pe(l)!=="svelte-1utxj3w"&&(l.textContent=o),r=F(c),B(a.$$.fragment,c),this.h()},h(){ye(e.src,n=Jt+"/assets/shironeko-confused.png")||_(e,"src",n),_(e,"alt","Nothing here..."),_(e,"class","svelte-1bb5e7g")},m(c,u){A(c,e,u),A(c,t,u),A(c,l,u),A(c,r,u),M(a,c,u),i=!0},p(c,[u]){const f={};u&4&&(f.$$scope={dirty:u,ctx:c}),a.$set(f)},i(c){i||(v(a.$$.fragment,c),i=!0)},o(c){y(a.$$.fragment,c),i=!1},d(c){c&&(m(e),m(t),m(l),m(r)),z(a,c)}}}function Ql(s){const e=Be();return[e,()=>{We.reset(),Ue.reset(),e("sortfilterupdate")}]}class Yl extends ie{constructor(e){super(),ae(this,e,Ql,Jl,oe,{})}}function Zl(s){const e=s-1;return e*e*e+1}function Xl(s,{delay:e=0,duration:n=400,easing:t=Zl,x:l=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(s),i=+a.opacity,c=a.transform==="none"?"":a.transform,u=i*(1-r),[f,p]=mt(l),[h,d]=mt(o);return{delay:e,duration:n,easing:t,css:(b,$)=>`
			transform: ${c} translate(${(1-b)*f}${p}, ${(1-b)*h}${d});
			opacity: ${i-u*$}`}}function xl(s){let e;return{c(){e=le("Ok")},l(n){e=re(n,"Ok")},m(n,t){A(n,e,t)},d(n){n&&m(e)}}}function er(s){let e,n,t,l="This website uses cookies.",o,r,a,i;return r=new Ke({props:{title:"Accept cookies",$$slots:{default:[xl]},$$scope:{ctx:s}}}),r.$on("click",s[0]),{c(){e=T("section"),n=T("div"),t=T("span"),t.textContent=l,o=L(),O(r.$$.fragment),this.h()},l(c){e=P(c,"SECTION",{class:!0});var u=j(e);n=P(u,"DIV",{class:!0});var f=j(n);t=P(f,"SPAN",{"data-svelte-h":!0}),pe(t)!=="svelte-2018sg"&&(t.textContent=l),o=F(f),B(r.$$.fragment,f),f.forEach(m),u.forEach(m),this.h()},h(){_(n,"class","svelte-76nt2a"),_(e,"class","svelte-76nt2a")},m(c,u){A(c,e,u),g(e,n),g(n,t),g(n,o),M(r,n,null),i=!0},p(c,[u]){const f={};u&2&&(f.$$scope={dirty:u,ctx:c}),r.$set(f)},i(c){i||(v(r.$$.fragment,c),a&&a.end(1),i=!0)},o(c){y(r.$$.fragment,c),c&&(a=kn(e,Xl,{y:200,duration:200})),i=!1},d(c){c&&m(e),z(r),c&&a&&a.end()}}}function tr(s){return[()=>sn.set(!0)]}class nr extends ie{constructor(e){super(),ae(this,e,tr,er,oe,{})}}const{document:pt}=wn;function sr(s){let e;return{c(){e=le("Search")},l(n){e=re(n,"Search")},m(n,t){A(n,e,t)},i:Q,o:Q,d(n){n&&m(e)}}}function lr(s){let e,n;return e=new _t({}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function rr(s){let e,n,t,l;const o=[lr,sr],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Ae()},l(i){n.l(i),t=Ae()},m(i,c){r[e].m(i,c),A(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(_e(),y(r[u],1,1,()=>{r[u]=null}),de(),n=r[e],n||(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){l||(v(n),l=!0)},o(i){y(n),l=!1},d(i){i&&m(t),r[e].d(i)}}}function or(s){let e,n,t,l,o,r;const a=[cr,ar],i=[];function c(u,f){return u[3].postCount===0?0:1}return n=c(s),t=i[n]=a[n](s),o=new Zn({}),{c(){e=T("section"),t.c(),l=L(),O(o.$$.fragment),this.h()},l(u){e=P(u,"SECTION",{class:!0});var f=j(e);t.l(f),f.forEach(m),l=F(u),B(o.$$.fragment,u),this.h()},h(){_(e,"class","svelte-1ok81nv")},m(u,f){A(u,e,f),i[n].m(e,null),A(u,l,f),M(o,u,f),r=!0},p(u,f){let p=n;n=c(u),n===p?i[n].p(u,f):(_e(),y(i[p],1,1,()=>{i[p]=null}),de(),t=i[n],t?t.p(u,f):(t=i[n]=a[n](u),t.c()),v(t,1),t.m(e,null))},i(u){r||(v(t),v(o.$$.fragment,u),r=!0)},o(u){y(t),y(o.$$.fragment,u),r=!1},d(u){u&&(m(e),m(l)),i[n].d(),z(o,u)}}}function ir(s){let e,n;return e=new as({props:{error:s[1]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.error=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function ar(s){let e,n,t,l,o,r;e=new Wl({}),e.$on("sortfilterupdate",s[10]),e.$on("endreached",s[11]);const a=[fr,ur],i=[];function c(u,f){return u[3].posts.length===u[3].postCount?0:1}return t=c(s),l=i[t]=a[t](s),{c(){O(e.$$.fragment),n=L(),l.c(),o=Ae()},l(u){B(e.$$.fragment,u),n=F(u),l.l(u),o=Ae()},m(u,f){M(e,u,f),A(u,n,f),i[t].m(u,f),A(u,o,f),r=!0},p(u,f){let p=t;t=c(u),t===p?i[t].p(u,f):(_e(),y(i[p],1,1,()=>{i[p]=null}),de(),l=i[t],l?l.p(u,f):(l=i[t]=a[t](u),l.c()),v(l,1),l.m(o.parentNode,o))},i(u){r||(v(e.$$.fragment,u),v(l),r=!0)},o(u){y(e.$$.fragment,u),y(l),r=!1},d(u){u&&(m(n),m(o)),z(e,u),i[t].d(u)}}}function cr(s){let e,n;return e=new Yl({}),e.$on("sortfilterupdate",s[10]),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p:Q,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function ur(s){let e,n,t,l;return e=new ln({props:{absoluteTop:void 0,rootMargin:1e3/Number(s[7])+"px"}}),e.$on("intersection",s[11]),t=new Ke({props:{title:"Load more posts",$$slots:{default:[dr]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){O(e.$$.fragment),n=L(),O(t.$$.fragment)},l(o){B(e.$$.fragment,o),n=F(o),B(t.$$.fragment,o)},m(o,r){M(e,o,r),A(o,n,r),M(t,o,r),l=!0},p(o,r){const a={};r&128&&(a.rootMargin=1e3/Number(o[7])+"px"),e.$set(a);const i={};r&33554433&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){l||(v(e.$$.fragment,o),v(t.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),y(t.$$.fragment,o),l=!1},d(o){o&&m(n),z(e,o),z(t,o)}}}function fr(s){let e,n;return e=new us({}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p:Q,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function pr(s){let e;return{c(){e=le("Load more")},l(n){e=re(n,"Load more")},m(n,t){A(n,e,t)},i:Q,o:Q,d(n){n&&m(e)}}}function _r(s){let e,n;return e=new _t({}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function dr(s){let e,n,t,l;const o=[_r,pr],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Ae()},l(i){n.l(i),t=Ae()},m(i,c){r[e].m(i,c),A(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(_e(),y(r[u],1,1,()=>{r[u]=null}),de(),n=r[e],n||(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){l||(v(n),l=!0)},o(i){y(n),l=!1},d(i){i&&m(t),r[e].d(i)}}}function qt(s){let e,n;return e=new nr({}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function mr(s){let e,n,t,l,o,r,a,i,c,u,f,p,h,d,b,$,I,C,D;l=new En({}),r=new Yn({props:{placeholder:"Search for tags",fetchSuggestions:s[9]}}),r.$on("pick",s[12]),i=new Ke({props:{id:"btn-search",title:"Search with the tags above",$$slots:{default:[rr]},$$scope:{ctx:s}}}),i.$on("click",s[10]),u=new Sn({props:{tags:[...s[5],...s[4]]}}),u.$on("click",s[13]),u.$on("contextmenu",s[14]),u.$on("createSupertag",s[15]);const w=[ir,or],V=[];function R(S,U){return S[1]?0:S[3].requested?1:-1}~(p=R(s))&&(h=V[p]=w[p](s));function q(S){s[16](S)}let k={tags:s[5]};s[2]!==void 0&&(k.dialog=s[2]),b=new rs({props:k}),ge.push(()=>Pe(b,"dialog",q)),b.$on("submit",s[17]);let E=!s[8]&&qt();return{c(){e=T("meta"),n=L(),t=T("section"),O(l.$$.fragment),o=L(),O(r.$$.fragment),a=L(),O(i.$$.fragment),c=L(),O(u.$$.fragment),f=L(),h&&h.c(),d=L(),O(b.$$.fragment),I=L(),E&&E.c(),C=Ae(),this.h()},l(S){const U=vn("svelte-7jdp3v",pt.head);e=P(U,"META",{name:!0,content:!0}),U.forEach(m),n=F(S),t=P(S,"SECTION",{id:!0,class:!0});var N=j(t);B(l.$$.fragment,N),o=F(N),B(r.$$.fragment,N),a=F(N),B(i.$$.fragment,N),c=F(N),B(u.$$.fragment,N),N.forEach(m),f=F(S),h&&h.l(S),d=F(S),B(b.$$.fragment,S),I=F(S),E&&E.l(S),C=Ae(),this.h()},h(){pt.title="kurosearch - Rule34 Hentai",_(e,"name","description"),_(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience."),_(t,"id","search"),_(t,"class","svelte-1ok81nv")},m(S,U){g(pt.head,e),A(S,n,U),A(S,t,U),M(l,t,null),g(t,o),M(r,t,null),g(t,a),M(i,t,null),g(t,c),M(u,t,null),A(S,f,U),~p&&V[p].m(S,U),A(S,d,U),M(b,S,U),A(S,I,U),E&&E.m(S,U),A(S,C,U),D=!0},p(S,[U]){const N={};U&33554433&&(N.$$scope={dirty:U,ctx:S}),i.$set(N);const ee={};U&48&&(ee.tags=[...S[5],...S[4]]),u.$set(ee);let Y=p;p=R(S),p===Y?~p&&V[p].p(S,U):(h&&(_e(),y(V[Y],1,1,()=>{V[Y]=null}),de()),~p?(h=V[p],h?h.p(S,U):(h=V[p]=w[p](S),h.c()),v(h,1),h.m(d.parentNode,d)):h=null);const H={};U&32&&(H.tags=S[5]),!$&&U&4&&($=!0,H.dialog=S[2],Te(()=>$=!1)),b.$set(H),S[8]?E&&(_e(),y(E,1,1,()=>{E=null}),de()):E?U&256&&v(E,1):(E=qt(),E.c(),v(E,1),E.m(C.parentNode,C))},i(S){D||(v(l.$$.fragment,S),v(r.$$.fragment,S),v(i.$$.fragment,S),v(u.$$.fragment,S),v(h),v(b.$$.fragment,S),v(E),D=!0)},o(S){y(l.$$.fragment,S),y(r.$$.fragment,S),y(i.$$.fragment,S),y(u.$$.fragment,S),y(h),y(b.$$.fragment,S),y(E),D=!1},d(S){S&&(m(n),m(t),m(f),m(d),m(I),m(C)),m(e),z(l),z(r),z(i),z(u),~p&&V[p].d(S),z(b,S),E&&E.d(S)}}}function gr(s,e,n){let t,l,o,r,a,i,c,u,f;fe(s,xe,N=>n(3,t=N)),fe(s,ft,N=>n(4,l=N)),fe(s,Ue,N=>n(19,o=N)),fe(s,We,N=>n(20,r=N)),fe(s,es,N=>n(21,a=N)),fe(s,ct,N=>n(5,i=N)),fe(s,$t,N=>n(6,c=N)),fe(s,Kt,N=>n(7,u=N)),fe(s,sn,N=>n(8,f=N)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let p=!1,h,d,b=0;const $=async N=>{const ee=await Gn(N);return[...c.items.filter(({name:H})=>H.toLowerCase().includes(N.toLowerCase())).map(H=>({label:H.name,count:H.tags.length,type:"supertag"})),...ee]},I=()=>new Kn().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(l),C=async N=>{if(!p){n(1,h=void 0),n(0,p=!0);try{const ee=t.pageCount;await N(),Xn(ee).catch(()=>{})}catch(ee){n(1,h=ee),console.warn(ee)}finally{n(0,p=!1)}}},D=async()=>{xe.reset(),b=0,C(async()=>{const[N,ee]=await I().getPageAndCount();xe.addPage(N,ee)})},w=async()=>{C(async()=>{const N=await I().getPage();xe.addPage(N)})},V=N=>{var ee,Y;if((N.key==="/"||N.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&((ee=document.getElementById("searchbar"))==null||ee.focus(),N.preventDefault(),N.stopPropagation()),N.ctrlKey&&N.key==="Enter"&&(N.preventDefault(),N.stopPropagation(),D()),N.ctrlKey&&N.key==="m"&&((Y=document.getElementById("select-modifier"))==null||Y.click()),N.ctrlKey&&N.key==="ArrowDown"){const H=document.getElementsByClassName("post-media");H[b].focus(),b=Math.min(b+1,Math.max(0,H.length-1))}N.ctrlKey&&N.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[b].focus(),b=Math.max(b-1,0))};tt(async()=>{document.addEventListener("keydown",V),t.postCount===0&&D()}),nt(()=>{document.removeEventListener("keydown",V)});const R=async N=>{const ee=N.detail;if(ee.type==="supertag"){const Y=c.items.find(H=>H.name===ee.label);if(!Y){console.warn("Supertag not present.");return}ft.addOrReplace(Y)}else{const Y=await Wn(N.detail.label);ct.addOrReplace({name:N.detail.label,modifier:N.detail.modifier,count:N.detail.count,type:(Y==null?void 0:Y.type)??"tag"})}},q=N=>"description"in N.detail?ft.removeByName(N.detail.name):ct.removeByName(N.detail.name),k=N=>{"description"in N.detail||(N.detail.modifier=xn(N.detail.modifier),ct.addOrReplace(N.detail))},E=()=>{d.showModal(),Wt("dialog")};function S(N){d=N,n(2,d)}return[p,h,d,t,l,i,c,u,f,$,D,w,R,q,k,E,S,N=>$t.add(N.detail)]}class Gr extends ie{constructor(e){super(),ae(this,e,gr,mr,oe,{})}}export{Gr as component};
