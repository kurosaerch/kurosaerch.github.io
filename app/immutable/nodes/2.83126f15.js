import{s as fe,p as ke,D as Fe,E as je,f as E,a as N,g as S,h as A,y as oe,c as T,d as h,j as d,r as Bt,i as O,u as _,F as We,G as Ie,H as Ye,I as ct,l as ie,m as ae,v as Y,J as we,w as en,K as tn,z as nn,A as sn,B as ln,o as rt,L as ot,n as Le,e as De,k as Be,C as ge,M as nt,N as at,O as rn,P as jt,Q as ft}from"../chunks/scheduler.19d3c358.js";import{S as pe,i as _e,f as Ve,b as F,d as V,m as M,a as $,t as w,e as R,g as ce,c as ue,h as on}from"../chunks/index.2b8f9697.js";import{e as Pe}from"../chunks/each.e59479a4.js";import{D as zt,r as Gt}from"../chunks/result-columns-store.9e2a8a54.js";import{T as Qe}from"../chunks/TextButton.789ba0e4.js";import{D as an}from"../chunks/DetailedTag.af294f99.js";import{K as cn,A as un}from"../chunks/ActiveTagList.cca65c7d.js";import{b as Ut}from"../chunks/paths.79634e8c.js";import{f as st}from"../chunks/format-tag.7e313273.js";import{r as Je,a as ut}from"../chunks/active-supertags-store.1f2d7477.js";import{I as qt,R as fn}from"../chunks/ModifierSelect.1c655e2c.js";import{h as pt,u as pn}from"../chunks/await_block.6b55c79b.js";import{L as Ht}from"../chunks/LoadingAnimation.54d99227.js";import{R as _n,S as dn,a as gn,K as mn,E as Kt,b as hn,g as _t,P as $n,C as vn,c as bn,d as Wt,i as kn,e as Jt,D as wn,G as yn,V as Cn,f as dt,I as En}from"../chunks/Details.03031588.js";import{a as Sn}from"../chunks/always-loop-store.b24079c8.js";import{f as Re,s as ze,S as In}from"../chunks/search-builder.bb8840aa.js";import{S as gt}from"../chunks/Select.b276bd9e.js";import{R as Dn}from"../chunks/RotatingTextSelect.11b9001f.js";import{S as Pn}from"../chunks/Searchbar.fe06fd75.js";import{S as Nn}from"../chunks/ScrollUpButton.74dfd914.js";import{g as Tn,a as On}from"../chunks/tags.49324235.js";import{l as An}from"../chunks/analytics.b280da65.js";import{n as Fn,s as mt}from"../chunks/supertags-store.6b070b5e.js";import{a as it}from"../chunks/active-tags-store.c78264f4.js";import{b as Vn}from"../chunks/blocked-content-store.510169cf.js";import{c as Qt}from"../chunks/cookies-accepted-store.069f6bf8.js";function ht(l,e,n){const t=l.slice();return t[11]=e[n],t}function $t(l){let e,n;return e=new an({props:{tag:l[11]}}),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&8&&(o.tag=t[11]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Mn(l){let e;return{c(){e=ie("Create supertag")},l(n){e=ae(n,"Create supertag")},m(n,t){O(n,e,t)},d(n){n&&h(e)}}}function Rn(l){let e,n,t="Create Supertag",s,o,r,a,i,u="Name",c,f,g,y,m,k="Description",P,p,b,v,C,H="Tags",x,L,I,B,ee,se,D,Z,K=Pe(l[3]),j=[];for(let z=0;z<K.length;z+=1)j[z]=$t(ht(l,K,z));const le=z=>w(j[z],1,1,()=>{j[z]=null});return ee=new Qe({props:{title:l[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!l[4],$$slots:{default:[Mn]},$$scope:{ctx:l}}}),ee.$on("click",l[9]),{c(){e=E("section"),n=E("h3"),n.textContent=t,s=N(),o=E("button"),r=N(),a=E("div"),i=E("label"),i.textContent=u,c=N(),f=E("input"),g=N(),y=E("div"),m=E("label"),m.textContent=k,P=N(),p=E("input"),b=N(),v=E("div"),C=E("span"),C.textContent=H,x=N(),L=E("ol");for(let z=0;z<j.length;z+=1)j[z].c();I=N(),B=E("div"),F(ee.$$.fragment),this.h()},l(z){e=S(z,"SECTION",{class:!0});var G=A(e);n=S(G,"H3",{"data-svelte-h":!0}),oe(n)!=="svelte-ho1cwx"&&(n.textContent=t),s=T(G),o=S(G,"BUTTON",{class:!0}),A(o).forEach(h),r=T(G),a=S(G,"DIV",{class:!0});var te=A(a);i=S(te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),oe(i)!=="svelte-10k8a68"&&(i.textContent=u),c=T(te),f=S(te,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),te.forEach(h),g=T(G),y=S(G,"DIV",{class:!0});var J=A(y);m=S(J,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),oe(m)!=="svelte-14n9kp6"&&(m.textContent=k),P=T(J),p=S(J,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),J.forEach(h),b=T(G),v=S(G,"DIV",{class:!0});var me=A(v);C=S(me,"SPAN",{class:!0,"data-svelte-h":!0}),oe(C)!=="svelte-7hjyox"&&(C.textContent=H),x=T(me),L=S(me,"OL",{class:!0});var he=A(L);for(let Ee=0;Ee<j.length;Ee+=1)j[Ee].l(he);he.forEach(h),me.forEach(h),I=T(G),B=S(G,"DIV",{class:!0});var Ae=A(B);V(ee.$$.fragment,Ae),Ae.forEach(h),G.forEach(h),this.h()},h(){d(o,"class",Bt("codicon codicon-close")+" svelte-1x6vc81"),d(i,"for","supertag-name"),d(i,"class","svelte-1x6vc81"),d(f,"type","text"),d(f,"placeholder","Descriptive name"),d(f,"id","supertag-name"),d(f,"class","svelte-1x6vc81"),d(a,"class","svelte-1x6vc81"),d(m,"for","supertag-description"),d(m,"class","svelte-1x6vc81"),d(p,"type","text"),d(p,"placeholder","Short description"),d(p,"id","supertag-description"),d(p,"class","svelte-1x6vc81"),d(y,"class","svelte-1x6vc81"),d(C,"class","svelte-1x6vc81"),d(L,"class","svelte-1x6vc81"),d(v,"class","svelte-1x6vc81"),d(B,"class","last svelte-1x6vc81"),d(e,"class","svelte-1x6vc81")},m(z,G){O(z,e,G),_(e,n),_(e,s),_(e,o),_(e,r),_(e,a),_(a,i),_(a,c),_(a,f),We(f,l[0]),_(e,g),_(e,y),_(y,m),_(y,P),_(y,p),We(p,l[2]),_(e,b),_(e,v),_(v,C),_(v,x),_(v,L);for(let te=0;te<j.length;te+=1)j[te]&&j[te].m(L,null);_(e,I),_(e,B),M(ee,B,null),se=!0,D||(Z=[Ie(o,"click",l[6]),Ie(f,"input",l[7]),Ie(p,"input",l[8])],D=!0)},p(z,G){if(G&1&&f.value!==z[0]&&We(f,z[0]),G&4&&p.value!==z[2]&&We(p,z[2]),G&8){K=Pe(z[3]);let J;for(J=0;J<K.length;J+=1){const me=ht(z,K,J);j[J]?(j[J].p(me,G),$(j[J],1)):(j[J]=$t(me),j[J].c(),$(j[J],1),j[J].m(L,null))}for(ce(),J=K.length;J<j.length;J+=1)le(J);ue()}const te={};G&16&&(te.title=z[4]?"Click to create supertag":"Enter a valid name to continue"),G&16&&(te.disabled=!z[4]),G&16384&&(te.$$scope={dirty:G,ctx:z}),ee.$set(te)},i(z){if(!se){for(let G=0;G<K.length;G+=1)$(j[G]);$(ee.$$.fragment,z),se=!0}},o(z){j=j.filter(Boolean);for(let G=0;G<j.length;G+=1)w(j[G]);w(ee.$$.fragment,z),se=!1},d(z){z&&h(e),Ye(j,z),R(ee),D=!1,ct(Z)}}}function Ln(l){let e,n,t;function s(r){l[10](r)}let o={$$slots:{default:[Rn]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.dialog=l[1]),e=new zt({props:o}),ke.push(()=>Ve(e,"dialog",s)),e.$on("close",l[6]),{c(){F(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],Fe(()=>n=!1)),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function Bn(l,e,n){let t,{dialog:s}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=je(),u=()=>s.close();function c(){o=this.value,n(0,o)}function f(){r=this.value,n(2,r)}const g=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:m,name:k})=>({modifier:m,name:k}))}),u()};function y(m){s=m,n(1,s)}return l.$$set=m=>{"dialog"in m&&n(1,s=m.dialog),"name"in m&&n(0,o=m.name),"description"in m&&n(2,r=m.description),"tags"in m&&n(3,a=m.tags)},l.$$.update=()=>{l.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,s,r,a,t,i,u,c,f,g,y]}class jn extends pe{constructor(e){super(),_e(this,e,Bn,Ln,fe,{dialog:1,name:0,description:2,tags:3})}}function zn(l){let e,n,t,s,o,r,a,i,u,c;return{c(){e=E("div"),n=E("div"),t=E("i"),s=N(),o=E("div"),r=E("h3"),a=ie(l[0]),i=N(),u=E("span"),c=ie(l[2]),this.h()},l(f){e=S(f,"DIV",{class:!0});var g=A(e);n=S(g,"DIV",{class:!0});var y=A(n);t=S(y,"I",{class:!0}),A(t).forEach(h),y.forEach(h),s=T(g),o=S(g,"DIV",{});var m=A(o);r=S(m,"H3",{class:!0});var k=A(r);a=ae(k,l[0]),k.forEach(h),i=T(m),u=S(m,"SPAN",{});var P=A(u);c=ae(P,l[2]),P.forEach(h),m.forEach(h),g.forEach(h),this.h()},h(){d(t,"class",Bt(l[1])+" svelte-1yohziu"),d(n,"class","icon svelte-1yohziu"),d(r,"class","svelte-1yohziu"),d(e,"class","error svelte-1yohziu")},m(f,g){O(f,e,g),_(e,n),_(n,t),_(e,s),_(e,o),_(o,r),_(r,a),_(o,i),_(o,u),_(u,c)},p:Y,i:Y,o:Y,d(f){f&&h(e)}}}function Gn(l,e,n){let{error:t}=e,s=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return l.$$set=a=>{"error"in a&&n(3,t=a.error)},[s,o,r,t]}class Un extends pe{constructor(e){super(),_e(this,e,Gn,zn,fe,{error:3})}}function qn(l){let e,n,t,s,o="You have seen everything there is to see...";return{c(){e=E("img"),t=N(),s=E("p"),s.textContent=o,this.h()},l(r){e=S(r,"IMG",{src:!0,alt:!0,class:!0}),t=T(r),s=S(r,"P",{"data-svelte-h":!0}),oe(s)!=="svelte-1i75mtf"&&(s.textContent=o),this.h()},h(){we(e.src,n=Ut+"/assets/shironeko-x.png")||d(e,"src",n),d(e,"alt","No more results to load"),d(e,"class","svelte-1pkma0d")},m(r,a){O(r,e,a),O(r,t,a),O(r,s,a)},p:Y,i:Y,o:Y,d(r){r&&(h(e),h(t),h(s))}}}class Hn extends pe{constructor(e){super(),_e(this,e,null,qn,fe,{})}}const lt=l=>`post_${l}`;function Kn(l){let e,n,t,s;const o=l[3].default,r=en(o,l,l[2],null);return{c(){e=E("div"),r&&r.c(),this.h()},l(a){e=S(a,"DIV",{role:!0,tabindex:!0,class:!0});var i=A(e);r&&r.l(i),i.forEach(h),this.h()},h(){d(e,"role","none"),d(e,"tabindex","-1"),d(e,"class","svelte-6sy8qz")},m(a,i){O(a,e,i),r&&r.m(e,null),l[4](e),n=!0,t||(s=[Ie(e,"click",tn(Wn)),Ie(e,"keydown",l[1])],t=!0)},p(a,[i]){r&&r.p&&(!n||i&4)&&nn(r,o,a,a[2],n?ln(o,a[2],i,null):sn(a[2]),null)},i(a){n||($(r,a),n=!0)},o(a){w(r,a),n=!1},d(a){a&&h(e),r&&r.d(a),l[4](null),t=!1,ct(s)}}}const Wn=()=>{};function Jn(l,e,n){let{$$slots:t={},$$scope:s}=e;const o=je(),r=()=>o("close"),a=f=>{f.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let u;rt(async()=>{u.focus(),document.addEventListener("fullscreenchange",i);try{await u.requestFullscreen()}catch{}}),ot(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function c(f){ke[f?"unshift":"push"](()=>{u=f,n(0,u)})}return l.$$set=f=>{"$$scope"in f&&n(2,s=f.$$scope)},[u,a,s,t,c]}class Qn extends pe{constructor(e){super(),_e(this,e,Jn,Kn,fe,{})}}function Yn(l){let e,n;return{c(){e=E("div"),this.h()},l(t){e=S(t,"DIV",{style:!0}),A(e).forEach(h),this.h()},h(){d(e,"style",n=l[0]?`position:absolute;top:${l[0]};`:void 0)},m(t,s){O(t,e,s),l[3](e)},p(t,[s]){s&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&d(e,"style",n)},i:Y,o:Y,d(t){t&&h(e),l[3](null)}}}function Zn(l,e,n){let{rootMargin:t}=e,{absoluteTop:s}=e;const o=je(),r=new IntersectionObserver(u=>{u[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(u){ke[u?"unshift":"push"](()=>{a=u,n(1,a)})}return l.$$set=u=>{"rootMargin"in u&&n(2,t=u.rootMargin),"absoluteTop"in u&&n(0,s=u.absoluteTop)},l.$$.update=()=>{l.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[s,a,t,i]}class Yt extends pe{constructor(e){super(),_e(this,e,Zn,Yn,fe,{rootMargin:2,absoluteTop:0})}}function vt(l,e,n){const t=l.slice();return t[5]=e[n],t}function bt(l,e,n){const t=l.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function kt(l){let e,n="•",t,s,o;return s=new Kt({props:{source:l[0].source}}),{c(){e=E("span"),e.textContent=n,t=N(),F(s.$$.fragment)},l(r){e=S(r,"SPAN",{"data-svelte-h":!0}),oe(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=T(r),V(s.$$.fragment,r)},m(r,a){O(r,e,a),O(r,t,a),M(s,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),s.$set(i)},i(r){o||($(s.$$.fragment,r),o=!0)},o(r){w(s.$$.fragment,r),o=!1},d(r){r&&(h(e),h(t)),R(s,r)}}}function wt(l){let e,n=l[8]+"",t,s,o,r;return o=new $n({props:{tags:l[9]}}),{c(){e=E("h3"),t=ie(n),s=N(),F(o.$$.fragment),this.h()},l(a){e=S(a,"H3",{class:!0});var i=A(e);t=ae(i,n),i.forEach(h),s=T(a),V(o.$$.fragment,a),this.h()},h(){d(e,"class","svelte-1kekodt")},m(a,i){O(a,e,i),_(e,t),O(a,s,i),M(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[8]+"")&&Le(t,n);const u={};i&2&&(u.tags=a[9]),o.$set(u)},i(a){r||($(o.$$.fragment,a),r=!0)},o(a){w(o.$$.fragment,a),r=!1},d(a){a&&(h(e),h(s)),R(o,a)}}}function Xn(l){return{c:Y,l:Y,m:Y,p:Y,i:Y,o:Y,d:Y}}function xn(l){let e,n,t,s;const o=[ts,es],r=[];function a(i,u){return i[4].length>0?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=De()},l(i){n.l(i),t=De()},m(i,u){r[e].m(i,u),O(i,t,u),s=!0},p(i,u){let c=e;e=a(i),e===c?r[e].p(i,u):(ce(),w(r[c],1,1,()=>{r[c]=null}),ue(),n=r[e],n?n.p(i,u):(n=r[e]=o[e](i),n.c()),$(n,1),n.m(t.parentNode,t))},i(i){s||($(n),s=!0)},o(i){w(n),s=!1},d(i){i&&h(t),r[e].d(i)}}}function es(l){let e,n="Comments for this post are not available";return{c(){e=E("span"),e.textContent=n,this.h()},l(t){e=S(t,"SPAN",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-4t2lxe"&&(e.textContent=n),this.h()},h(){d(e,"class","no-comments svelte-1kekodt")},m(t,s){O(t,e,s)},p:Y,i:Y,o:Y,d(t){t&&h(e)}}}function ts(l){let e,n,t=Pe(l[4]),s=[];for(let r=0;r<t.length;r+=1)s[r]=yt(vt(l,t,r));const o=r=>w(s[r],1,1,()=>{s[r]=null});return{c(){e=E("ul");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"UL",{class:!0});var a=A(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(h),this.h()},h(){d(e,"class","comments svelte-1kekodt")},m(r,a){O(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&1){t=Pe(r[4]);let i;for(i=0;i<t.length;i+=1){const u=vt(r,t,i);s[i]?(s[i].p(u,a),$(s[i],1)):(s[i]=yt(u),s[i].c(),$(s[i],1),s[i].m(e,null))}for(ce(),i=t.length;i<s.length;i+=1)o(i);ue()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)$(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(r){r&&h(e),Ye(s,r)}}}function yt(l){let e,n;return e=new vn({props:{comment:l[5]}}),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&1&&(o.comment=t[5]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ns(l){let e,n;return e=new Ht({}),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p:Y,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ss(l){let e,n,t,s,o,r,a,i,u=l[0].id+"",c,f,g,y,m,k,P="•",p,b,v=l[0].type.toUpperCase()+"",C,H,x,L="•",I,B,ee,se,D="•",Z,K,j,le,z,G,te,J="•",me,he,Ae,Ee,Ze="•",Xe,Ne,xe,Ge,Me,Ue,U,Q,Oe="Comments",Te,Se,$e;y=new _n({props:{value:l[0].rating}}),B=new dn({props:{value:l[0].score}}),K=new gn({props:{value:l[0].change}}),z=new mn({props:{url:"/post?id="+l[0].id+"&src="+encodeURIComponent(l[3])}}),he=new Kt({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id}}),Ne=new hn({props:{url:l[3]}});let X=l[0].source&&kt(l),ye=Pe(Object.entries(l[1])),ne=[];for(let W=0;W<ye.length;W+=1)ne[W]=wt(bt(l,ye,W));const xt=W=>w(ne[W],1,1,()=>{ne[W]=null});let ve={ctx:l,current:null,token:null,hasCatch:!1,pending:ns,then:xn,catch:Xn,value:4,blocks:[,,,]};return pt(Se=_t(l[0].id),ve),{c(){e=E("div"),n=E("img"),s=N(),o=E("h1"),r=ie("Post "),a=E("b"),i=ie("#"),c=ie(u),f=N(),g=E("div"),F(y.$$.fragment),m=N(),k=E("span"),k.textContent=P,p=N(),b=E("span"),C=ie(v),H=N(),x=E("span"),x.textContent=L,I=N(),F(B.$$.fragment),ee=N(),se=E("span"),se.textContent=D,Z=N(),F(K.$$.fragment),j=N(),le=E("div"),F(z.$$.fragment),G=N(),te=E("span"),te.textContent=J,me=N(),F(he.$$.fragment),Ae=N(),Ee=E("span"),Ee.textContent=Ze,Xe=N(),F(Ne.$$.fragment),xe=N(),X&&X.c(),Ge=N(),Me=E("div");for(let W=0;W<ne.length;W+=1)ne[W].c();Ue=N(),U=E("div"),Q=E("h3"),Q.textContent=Oe,Te=N(),ve.block.c(),this.h()},l(W){e=S(W,"DIV",{class:!0});var q=A(e);n=S(q,"IMG",{class:!0,src:!0,alt:!0}),s=T(q),o=S(q,"H1",{class:!0});var Ce=A(o);r=ae(Ce,"Post "),a=S(Ce,"B",{});var qe=A(a);i=ae(qe,"#"),c=ae(qe,u),qe.forEach(h),Ce.forEach(h),f=T(q),g=S(q,"DIV",{class:!0});var de=A(g);V(y.$$.fragment,de),m=T(de),k=S(de,"SPAN",{"data-svelte-h":!0}),oe(k)!=="svelte-7hh8jk"&&(k.textContent=P),p=T(de),b=S(de,"SPAN",{});var et=A(b);C=ae(et,v),et.forEach(h),H=T(de),x=S(de,"SPAN",{"data-svelte-h":!0}),oe(x)!=="svelte-7hh8jk"&&(x.textContent=L),I=T(de),V(B.$$.fragment,de),ee=T(de),se=S(de,"SPAN",{"data-svelte-h":!0}),oe(se)!=="svelte-7hh8jk"&&(se.textContent=D),Z=T(de),V(K.$$.fragment,de),de.forEach(h),j=T(q),le=S(q,"DIV",{class:!0});var be=A(le);V(z.$$.fragment,be),G=T(be),te=S(be,"SPAN",{"data-svelte-h":!0}),oe(te)!=="svelte-7hh8jk"&&(te.textContent=J),me=T(be),V(he.$$.fragment,be),Ae=T(be),Ee=S(be,"SPAN",{"data-svelte-h":!0}),oe(Ee)!=="svelte-7hh8jk"&&(Ee.textContent=Ze),Xe=T(be),V(Ne.$$.fragment,be),xe=T(be),X&&X.l(be),be.forEach(h),Ge=T(q),Me=S(q,"DIV",{});var tt=A(Me);for(let He=0;He<ne.length;He+=1)ne[He].l(tt);tt.forEach(h),Ue=T(q),U=S(q,"DIV",{});var re=A(U);Q=S(re,"H3",{class:!0,"data-svelte-h":!0}),oe(Q)!=="svelte-kc6sae"&&(Q.textContent=Oe),Te=T(re),ve.block.l(re),re.forEach(h),q.forEach(h),this.h()},h(){d(n,"class","preview svelte-1kekodt"),we(n.src,t=l[2])||d(n,"src",t),d(n,"alt","preview"),d(o,"class","svelte-1kekodt"),d(g,"class","flex-row svelte-1kekodt"),d(le,"class","flex-row svelte-1kekodt"),d(Q,"class","svelte-1kekodt"),d(e,"class","details svelte-1kekodt")},m(W,q){O(W,e,q),_(e,n),_(e,s),_(e,o),_(o,r),_(o,a),_(a,i),_(a,c),_(e,f),_(e,g),M(y,g,null),_(g,m),_(g,k),_(g,p),_(g,b),_(b,C),_(g,H),_(g,x),_(g,I),M(B,g,null),_(g,ee),_(g,se),_(g,Z),M(K,g,null),_(e,j),_(e,le),M(z,le,null),_(le,G),_(le,te),_(le,me),M(he,le,null),_(le,Ae),_(le,Ee),_(le,Xe),M(Ne,le,null),_(le,xe),X&&X.m(le,null),_(e,Ge),_(e,Me);for(let Ce=0;Ce<ne.length;Ce+=1)ne[Ce]&&ne[Ce].m(Me,null);_(e,Ue),_(e,U),_(U,Q),_(U,Te),ve.block.m(U,ve.anchor=null),ve.mount=()=>U,ve.anchor=null,$e=!0},p(W,[q]){l=W,(!$e||q&4&&!we(n.src,t=l[2]))&&d(n,"src",t),(!$e||q&1)&&u!==(u=l[0].id+"")&&Le(c,u);const Ce={};q&1&&(Ce.value=l[0].rating),y.$set(Ce),(!$e||q&1)&&v!==(v=l[0].type.toUpperCase()+"")&&Le(C,v);const qe={};q&1&&(qe.value=l[0].score),B.$set(qe);const de={};q&1&&(de.value=l[0].change),K.$set(de);const et={};q&9&&(et.url="/post?id="+l[0].id+"&src="+encodeURIComponent(l[3])),z.$set(et);const be={};q&1&&(be.source="https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id),he.$set(be);const tt={};if(q&8&&(tt.url=l[3]),Ne.$set(tt),l[0].source?X?(X.p(l,q),q&1&&$(X,1)):(X=kt(l),X.c(),$(X,1),X.m(le,null)):X&&(ce(),w(X,1,1,()=>{X=null}),ue()),q&2){ye=Pe(Object.entries(l[1]));let re;for(re=0;re<ye.length;re+=1){const He=bt(l,ye,re);ne[re]?(ne[re].p(He,q),$(ne[re],1)):(ne[re]=wt(He),ne[re].c(),$(ne[re],1),ne[re].m(Me,null))}for(ce(),re=ye.length;re<ne.length;re+=1)xt(re);ue()}ve.ctx=l,q&1&&Se!==(Se=_t(l[0].id))&&pt(Se,ve)||pn(ve,l,q)},i(W){if(!$e){$(y.$$.fragment,W),$(B.$$.fragment,W),$(K.$$.fragment,W),$(z.$$.fragment,W),$(he.$$.fragment,W),$(Ne.$$.fragment,W),$(X);for(let q=0;q<ye.length;q+=1)$(ne[q]);$(ve.block),$e=!0}},o(W){w(y.$$.fragment,W),w(B.$$.fragment,W),w(K.$$.fragment,W),w(z.$$.fragment,W),w(he.$$.fragment,W),w(Ne.$$.fragment,W),w(X),ne=ne.filter(Boolean);for(let q=0;q<ne.length;q+=1)w(ne[q]);for(let q=0;q<3;q+=1){const Ce=ve.blocks[q];w(Ce)}$e=!1},d(W){W&&h(e),R(y),R(B),R(K),R(z),R(he),R(Ne),X&&X.d(),Ye(ne,W),ve.block.d(),ve.token=null,ve=null}}}function ls(l,e,n){let t,s,o,{post:r}=e;return l.$$set=a=>{"post"in a&&n(0,r=a.post)},l.$$.update=()=>{l.$$.dirty&1&&n(3,t=r.file_url),l.$$.dirty&1&&n(2,s=r.sample_url),l.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,s,t]}class rs extends pe{constructor(e){super(),_e(this,e,ls,ss,fe,{post:0})}}const Ke=new IntersectionObserver(l=>{for(const e of l)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function os(l){const e=l.slice(),n=bn(e[0].file_url,e[0].sample_url,e[0].preview_url);e[5]=n;const t=e[5].animated;return e[6]=t,e}function is(l){const e=l.slice(),n=Wt(e[0].file_url,e[0].sample_url,e[0].preview_url);e[5]=n;const t=e[5].animated;e[6]=t;const s=e[5].static;return e[7]=s,e}function as(l){const e=l.slice(),n=e[0].sample_url;return e[4]=n,e}function cs(l){let e,n,t,s;return{c(){e=E("img"),this.h()},l(o){e=S(o,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){we(e.src,n=l[6])||d(e,"src",n),d(e,"alt",t="[GIF] post #"+l[0].id),d(e,"title",s="[GIF] post #"+l[0].id),d(e,"class","svelte-1cjgn2p")},m(o,r){O(o,e,r)},p(o,r){r&1&&!we(e.src,n=o[6])&&d(e,"src",n),r&1&&t!==(t="[GIF] post #"+o[0].id)&&d(e,"alt",t),r&1&&s!==(s="[GIF] post #"+o[0].id)&&d(e,"title",s)},d(o){o&&h(e)}}}function Ct(l){let e,n,t,s;return{c(){e=E("video"),this.h()},l(o){e=S(o,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),A(e).forEach(h),this.h()},h(){we(e.src,n=l[6])||d(e,"src",n),d(e,"poster",t=l[7]),e.loop=!0,d(e,"title",s="[VIDEO] post #"+l[0].id),e.controls=!0,d(e,"preload","metadata"),e.autoplay=!0,d(e,"class","svelte-1cjgn2p")},m(o,r){O(o,e,r),l[2](e)},p(o,r){r&1&&!we(e.src,n=o[6])&&d(e,"src",n),r&1&&t!==(t=o[7])&&d(e,"poster",t),r&1&&s!==(s="[VIDEO] post #"+o[0].id)&&d(e,"title",s)},d(o){o&&h(e),l[2](null)}}}function Et(l){let e,n,t,s;return{c(){e=E("img"),this.h()},l(o){e=S(o,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){we(e.src,n=l[4])||d(e,"src",n),d(e,"alt",t="[IMAGE] post #"+l[0].id),d(e,"title",s="[IMAGE] post #"+l[0].id),d(e,"class","svelte-1cjgn2p")},m(o,r){O(o,e,r)},p(o,r){r&1&&!we(e.src,n=o[4])&&d(e,"src",n),r&1&&t!==(t="[IMAGE] post #"+o[0].id)&&d(e,"alt",t),r&1&&s!==(s="[IMAGE] post #"+o[0].id)&&d(e,"title",s)},d(o){o&&h(e)}}}function us(l){let e;function n(r,a){return r[0].type==="image"?Et:r[0].type==="video"?Ct:cs}function t(r,a){return a===Et?as(r):a===Ct?is(r):os(r)}let s=n(l),o=s(t(l,s));return{c(){o.c(),e=De()},l(r){o.l(r),e=De()},m(r,a){o.m(r,a),O(r,e,a)},p(r,[a]){s===(s=n(r))&&o?o.p(t(r,s),a):(o.d(1),o=s(t(r,s)),o&&(o.c(),o.m(e.parentNode,e)))},i:Y,o:Y,d(r){r&&h(e),o.d(r)}}}function fs(l,e,n){let{post:t}=e,s;const o=a=>{t.type==="video"&&s&&(a.key==="ArrowLeft"&&(a.preventDefault(),a.stopPropagation(),n(1,s.currentTime=Math.max(0,s.currentTime-5),s)),a.key==="ArrowRight"&&(a.preventDefault(),a.stopPropagation(),n(1,s.currentTime=Math.min(s.duration,s.currentTime+5),s)))};rt(()=>{s&&(Ke==null||Ke.observe(s)),document.addEventListener("keydown",o)}),ot(()=>{s&&(Ke==null||Ke.unobserve(s)),document.removeEventListener("keydown",o)});function r(a){ke[a?"unshift":"push"](()=>{s=a,n(1,s)})}return l.$$set=a=>{"post"in a&&n(0,t=a.post)},[t,s,r]}class ps extends pe{constructor(e){super(),_e(this,e,fs,us,fe,{post:0})}}function _s(l){let e,n,t;return{c(){e=E("img"),this.h()},l(s){e=S(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){we(e.src,n=l[2])||d(e,"src",n),d(e,"alt",t="post #"+l[0].id),d(e,"class","svelte-itxz72"),Be(e,"top",l[1])},m(s,o){O(s,e,o)},p(s,[o]){o&4&&!we(e.src,n=s[2])&&d(e,"src",n),o&1&&t!==(t="post #"+s[0].id)&&d(e,"alt",t),o&2&&Be(e,"top",s[1])},i:Y,o:Y,d(s){s&&h(e)}}}function ds(l,e,n){let t,{post:s}=e,{offset:o}=e;return l.$$set=r=>{"post"in r&&n(0,s=r.post),"offset"in r&&n(1,o=r.offset)},l.$$.update=()=>{l.$$.dirty&1&&n(2,t=kn(s.sample_url)?s.preview_url:s.sample_url)},[s,o,t]}class Zt extends pe{constructor(e){super(),_e(this,e,ds,_s,fe,{post:0,offset:1})}}function St(l,e,n){const t=l.slice();return t[17]=e[n],t[19]=n,t}function It(l){let e,n;return e=new Zt({props:{post:l[3],offset:l[6]}}),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&8&&(o.post=t[3]),s&64&&(o.offset=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Dt(l){let e,n;return e=new Zt({props:{post:l[4],offset:l[7]}}),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&16&&(o.post=t[4]),s&128&&(o.offset=t[7]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Pt(l){let e,n=`${l[19]*100}vh`;return{c(){e=E("div"),this.h()},l(t){e=S(t,"DIV",{class:!0}),A(e).forEach(h),this.h()},h(){d(e,"class","pseudo snap-item svelte-3khu3"),Be(e,"top",n)},m(t,s){O(t,e,s)},p:Y,d(t){t&&h(e)}}}function gs(l){let e,n,t,s,o,r,a,i,u,c,f,g,y,m=l[3]&&It(l);s=new ps({props:{post:l[2]}}),r=new rs({props:{post:l[2]}});let k=l[4]&&Dt(l),P=Pe({length:l[8].posts.length}),p=[];for(let b=0;b<P.length;b+=1)p[b]=Pt(St(l,P,b));return c=new Yt({props:{absoluteTop:l[8].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),c.$on("intersection",l[13]),{c(){e=E("div"),m&&m.c(),n=N(),t=E("div"),F(s.$$.fragment),o=N(),F(r.$$.fragment),a=N(),k&&k.c(),i=N();for(let b=0;b<p.length;b+=1)p[b].c();u=N(),F(c.$$.fragment),this.h()},l(b){e=S(b,"DIV",{class:!0});var v=A(e);m&&m.l(v),n=T(v),t=S(v,"DIV",{class:!0});var C=A(t);V(s.$$.fragment,C),o=T(C),V(r.$$.fragment,C),C.forEach(h),a=T(v),k&&k.l(v),i=T(v);for(let H=0;H<p.length;H+=1)p[H].l(v);u=T(v),V(c.$$.fragment,v),v.forEach(h),this.h()},h(){d(t,"class","screen snap-container horizontal current svelte-3khu3"),Be(t,"top",l[5]),d(e,"class","root screen snap-container svelte-3khu3")},m(b,v){O(b,e,v),m&&m.m(e,null),_(e,n),_(e,t),M(s,t,null),_(t,o),M(r,t,null),l[12](t),_(e,a),k&&k.m(e,null),_(e,i);for(let C=0;C<p.length;C+=1)p[C]&&p[C].m(e,null);_(e,u),M(c,e,null),l[14](e),f=!0,g||(y=Ie(e,"scroll",l[10]),g=!0)},p(b,[v]){b[3]?m?(m.p(b,v),v&8&&$(m,1)):(m=It(b),m.c(),$(m,1),m.m(e,n)):m&&(ce(),w(m,1,1,()=>{m=null}),ue());const C={};v&4&&(C.post=b[2]),s.$set(C);const H={};if(v&4&&(H.post=b[2]),r.$set(H),v&32&&Be(t,"top",b[5]),b[4]?k?(k.p(b,v),v&16&&$(k,1)):(k=Dt(b),k.c(),$(k,1),k.m(e,i)):k&&(ce(),w(k,1,1,()=>{k=null}),ue()),v&256){P=Pe({length:b[8].posts.length});let L;for(L=0;L<P.length;L+=1){const I=St(b,P,L);p[L]?p[L].p(I,v):(p[L]=Pt(I),p[L].c(),p[L].m(e,u))}for(;L<p.length;L+=1)p[L].d(1);p.length=P.length}const x={};v&256&&(x.absoluteTop=b[8].posts.length*100+"vh"),c.$set(x)},i(b){f||($(m),$(s.$$.fragment,b),$(r.$$.fragment,b),$(k),$(c.$$.fragment,b),f=!0)},o(b){w(m),w(s.$$.fragment,b),w(r.$$.fragment,b),w(k),w(c.$$.fragment,b),f=!1},d(b){b&&h(e),m&&m.d(),R(s),R(r),l[12](null),k&&k.d(),Ye(p,b),R(c),l[14](null),g=!1,y()}}}function ms(l,e,n){let t;ge(l,Je,C=>n(8,t=C));let{index:s}=e,o,r,a=t.posts[s],i=s>0?t.posts[s-1]:void 0,u=s<t.posts.length-1?t.posts[s+1]:void 0,c=`${s*100}vh`,f=`${(s-1)*100}vh`,g=`${(s+1)*100}vh`;const y=je(),m=()=>{r&&(r.scrollIntoView(),n(1,r.scrollLeft=0,r))},k=C=>{const H=C.target,x=H.getBoundingClientRect().height,L=H.scrollTop/x,I=Math.round(L);I!=s&&requestAnimationFrame(()=>{n(11,s=I),n(2,a=t.posts[s]),n(3,i=s>0?t.posts[s-1]:void 0),n(4,u=s<t.posts.length-1?t.posts[s+1]:void 0),n(5,c=`${s*100}vh`),n(6,f=`${(s-1)*100}vh`),n(7,g=`${(s+1)*100}vh`),r&&n(1,r.scrollLeft=0,r)})},P=C=>{C.key==="d"&&(C.preventDefault(),C.stopPropagation(),r.scrollLeft===0?r.scrollBy({left:o.clientWidth,top:0,behavior:"smooth"}):r.scrollBy({left:-o.clientWidth,top:0,behavior:"smooth"})),C.key==="ArrowUp"&&(C.preventDefault(),C.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(s-1),behavior:"smooth"})),C.key==="ArrowDown"&&(C.preventDefault(),C.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(s+1),behavior:"smooth"}))};rt(()=>{document.addEventListener("keydown",P),m()}),ot(()=>{document.removeEventListener("keydown",P)});function p(C){ke[C?"unshift":"push"](()=>{r=C,n(1,r)})}const b=()=>{y("endreached")};function v(C){ke[C?"unshift":"push"](()=>{o=C,n(0,o)})}return l.$$set=C=>{"index"in C&&n(11,s=C.index)},[o,r,a,i,u,c,f,g,t,y,k,s,p,b,v]}class hs extends pe{constructor(e){super(),_e(this,e,ms,gs,fe,{index:11})}}function $s(l){let e;return{c(){e=E("i"),this.h()},l(n){e=S(n,"I",{class:!0}),A(e).forEach(h),this.h()},h(){d(e,"class","codicon codicon-close")},m(n,t){O(n,e,t)},p:Y,d(n){n&&h(e)}}}function vs(l){let e,n,t,s,o;function r(i){l[2](i)}let a={};return l[0]!==void 0&&(a.index=l[0]),e=new hs({props:a}),ke.push(()=>Ve(e,"index",r)),e.$on("endreached",l[3]),s=new qt({props:{class:"button-close",$$slots:{default:[$s]},$$scope:{ctx:l}}}),s.$on("click",l[1]),{c(){F(e.$$.fragment),t=N(),F(s.$$.fragment)},l(i){V(e.$$.fragment,i),t=T(i),V(s.$$.fragment,i)},m(i,u){M(e,i,u),O(i,t,u),M(s,i,u),o=!0},p(i,u){const c={};!n&&u&1&&(n=!0,c.index=i[0],Fe(()=>n=!1)),e.$set(c);const f={};u&128&&(f.$$scope={dirty:u,ctx:i}),s.$set(f)},i(i){o||($(e.$$.fragment,i),$(s.$$.fragment,i),o=!0)},o(i){w(e.$$.fragment,i),w(s.$$.fragment,i),o=!1},d(i){i&&h(t),R(e,i),R(s,i)}}}function bs(l){let e,n;return e=new Qn({props:{$$slots:{default:[vs]},$$scope:{ctx:l}}}),e.$on("close",l[1]),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,[s]){const o={};s&129&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ks(l,e,n){let{index:t}=e;const s=je(),o=()=>{s("close",t)},r=c=>{c.key==="f"&&(c.preventDefault(),c.stopPropagation(),o())},a=()=>{var c,f;(((c=history.state)==null?void 0:c.fullscreen)===void 0||((f=history.state)==null?void 0:f.fullscreen)===!1)&&o()};rt(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),ot(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(c){t=c,n(0,t)}function u(c){nt.call(this,l,c)}return l.$$set=c=>{"index"in c&&n(0,t=c.index)},[t,o,i,u]}class ws extends pe{constructor(e){super(),_e(this,e,ks,bs,fe,{index:0})}}function Nt(l){let e,n=l[0].type==="video"?"▶":"GIF",t;return{c(){e=E("span"),t=ie(n),this.h()},l(s){e=S(s,"SPAN",{class:!0});var o=A(e);t=ae(o,n),o.forEach(h),this.h()},h(){d(e,"class","type svelte-1213alg")},m(s,o){O(s,e,o),_(e,t)},p(s,o){o&1&&n!==(n=s[0].type==="video"?"▶":"GIF")&&Le(t,n)},d(s){s&&h(e)}}}function ys(l){let e,n,t,s,o,r=st(l[0].score)+"",a,i,u,c,f,g=l[0].type!=="image"&&Nt(l);return{c(){e=E("div"),n=E("img"),s=N(),o=E("span"),a=ie(r),i=N(),g&&g.c(),this.h()},l(y){e=S(y,"DIV",{id:!0,class:!0,style:!0});var m=A(e);n=S(m,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),s=T(m),o=S(m,"SPAN",{class:!0});var k=A(o);a=ae(k,r),k.forEach(h),i=T(m),g&&g.l(m),m.forEach(h),this.h()},h(){we(n.src,t=l[1])||d(n,"src",t),d(n,"alt","post"),d(n,"class","post-media svelte-1213alg"),d(n,"tabindex","-1"),d(n,"loading","lazy"),d(o,"class","score svelte-1213alg"),d(e,"id",u=lt(l[0].id)),d(e,"class","post svelte-1213alg"),Be(e,"grid-row","span "+l[2]),at(e,"open",open)},m(y,m){O(y,e,m),_(e,n),_(e,s),_(e,o),_(o,a),_(e,i),g&&g.m(e,null),c||(f=[Ie(e,"click",l[3]),Ie(e,"keydown",l[4])],c=!0)},p(y,[m]){m&2&&!we(n.src,t=y[1])&&d(n,"src",t),m&1&&r!==(r=st(y[0].score)+"")&&Le(a,r),y[0].type!=="image"?g?g.p(y,m):(g=Nt(y),g.c(),g.m(e,null)):g&&(g.d(1),g=null),m&1&&u!==(u=lt(y[0].id))&&d(e,"id",u),m&0&&at(e,"open",open)},i:Y,o:Y,d(y){y&&h(e),g&&g.d(),c=!1,ct(f)}}}let Tt=3;function Cs(l,e,n){let t,{post:s}=e,o=Math.min(Math.round(s.height/s.width)*Tt,Tt*3);const r=u=>u.endsWith(".jpg")||u.endsWith(".jpeg")||u.endsWith(".png")||u.endsWith(".webp");function a(u){nt.call(this,l,u)}const i=u=>{var c;(Jt(u)||u.key==="f")&&((c=u.target)==null||c.click())};return l.$$set=u=>{"post"in u&&n(0,s=u.post)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=r(s.sample_url)?s.sample_url:s.preview_url)},[s,t,o,a,i]}class Es extends pe{constructor(e){super(),_e(this,e,Cs,ys,fe,{post:0})}}function Ss(l){const e=l.slice(),n=Wt(e[1].file_url,e[1].sample_url,e[1].preview_url);e[7]=n;const t=e[7].animated;e[8]=t;const s=e[7].static;return e[9]=s,e}function Is(l){let e,n;return e=new yn({props:{post:l[1]}}),e.$on("click",l[4]),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Ds(l){let e,n;return e=new Cn({props:{src:l[8],poster:l[9],width:l[1].width,height:l[1].height,loop:l[2]||dt(l[1].tags)}}),e.$on("click",l[4]),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.src=t[8]),s&2&&(o.poster=t[9]),s&2&&(o.width=t[1].width),s&2&&(o.height=t[1].height),s&6&&(o.loop=t[2]||dt(t[1].tags)),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Ps(l){let e,n;return e=new En({props:{post:l[1],open:l[0]}}),e.$on("click",l[4]),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),s&1&&(o.open=t[0]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Ns(l){let e;return{c(){e=E("i"),this.h()},l(n){e=S(n,"I",{class:!0}),A(e).forEach(h),this.h()},h(){d(e,"class","codicon codicon-screen-full")},m(n,t){O(n,e,t)},p:Y,d(n){n&&h(e)}}}function Ot(l){let e,n;return e=new wn({props:{post:l[1]}}),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Ts(l){let e,n,t,s,o,r,a,i,u,c;const f=[Ps,Ds,Is],g=[];function y(P,p){return P[1].type==="image"?0:P[1].type==="video"?1:2}function m(P,p){return p===1?Ss(P):P}n=y(l),t=g[n]=f[n](m(l,n)),o=new qt({props:{class:"button-fullscreen","aria-label":"Enter Fullscreen mode",$$slots:{default:[Ns]},$$scope:{ctx:l}}}),o.$on("click",l[5]);let k=l[0]&&Ot(l);return{c(){e=E("div"),t.c(),s=N(),F(o.$$.fragment),r=N(),k&&k.c(),this.h()},l(P){e=S(P,"DIV",{id:!0,class:!0});var p=A(e);t.l(p),s=T(p),V(o.$$.fragment,p),r=T(p),k&&k.l(p),p.forEach(h),this.h()},h(){d(e,"id",a=lt(l[1].id)),d(e,"class","post svelte-pwgq1f"),at(e,"open",l[0])},m(P,p){O(P,e,p),g[n].m(e,null),_(e,s),M(o,e,null),_(e,r),k&&k.m(e,null),i=!0,u||(c=Ie(e,"keydown",l[6]),u=!0)},p(P,[p]){let b=n;n=y(P),n===b?g[n].p(m(P,n),p):(ce(),w(g[b],1,1,()=>{g[b]=null}),ue(),t=g[n],t?t.p(m(P,n),p):(t=g[n]=f[n](m(P,n)),t.c()),$(t,1),t.m(e,s));const v={};p&1024&&(v.$$scope={dirty:p,ctx:P}),o.$set(v),P[0]?k?(k.p(P,p),p&1&&$(k,1)):(k=Ot(P),k.c(),$(k,1),k.m(e,null)):k&&(ce(),w(k,1,1,()=>{k=null}),ue()),(!i||p&2&&a!==(a=lt(P[1].id)))&&d(e,"id",a),(!i||p&1)&&at(e,"open",P[0])},i(P){i||($(t),$(o.$$.fragment,P),$(k),i=!0)},o(P){w(t),w(o.$$.fragment,P),w(k),i=!1},d(P){P&&h(e),g[n].d(),R(o),k&&k.d(),u=!1,c()}}}function Os(l,e,n){let t;ge(l,Sn,c=>n(2,t=c));const s=je(),o=()=>n(0,a=!a);let{post:r}=e,{open:a=!1}=e;const i=()=>s("fullscreen"),u=c=>{c.key==="f"&&s("fullscreen")};return l.$$set=c=>{"post"in c&&n(1,r=c.post),"open"in c&&n(0,a=c.open)},[a,r,t,s,o,i,u]}class As extends pe{constructor(e){super(),_e(this,e,Os,Ts,fe,{post:1,open:0})}}function Fs(l){let e;return{c(){e=ie("Done")},l(n){e=ae(n,"Done")},m(n,t){O(n,e,t)},d(n){n&&h(e)}}}function Vs(l){let e;return{c(){e=ie("Reset")},l(n){e=ae(n,"Reset")},m(n,t){O(n,e,t)},d(n){n&&h(e)}}}function Ms(l){let e,n,t="Sorting and Filtering",s,o,r,a="Sorting",i,u,c,f,g,y,m,k,P,p,b="Filtering by Score",v,C,H,x,L,I,B,ee,se,D="Filtering by Rating",Z,K,j,le,z,G,te,J,me,he,Ae;function Ee(U){l[6](U)}let Ze={options:Bs};l[3].direction!==void 0&&(Ze.value=l[3].direction),c=new fn({props:Ze}),ke.push(()=>Ve(c,"value",Ee));function Xe(U){l[7](U)}let Ne={options:Ls};l[3].property!==void 0&&(Ne.value=l[3].property),y=new gt({props:Ne}),ke.push(()=>Ve(y,"value",Xe));function xe(U){l[8](U)}let Ge={options:js};l[2].scoreComparator!==void 0&&(Ge.value=l[2].scoreComparator),H=new Dn({props:Ge}),ke.push(()=>Ve(H,"value",xe));function Me(U){l[10](U)}let Ue={options:Xt};return l[2].rating!==void 0&&(Ue.value=l[2].rating),j=new gt({props:Ue}),ke.push(()=>Ve(j,"value",Me)),G=new Qe({props:{title:"Return to searching.",$$slots:{default:[Fs]},$$scope:{ctx:l}}}),G.$on("click",l[11]),J=new Qe({props:{title:"Reset sort and filter.",type:"secondary",$$slots:{default:[Vs]},$$scope:{ctx:l}}}),J.$on("click",l[5]),{c(){e=E("div"),n=E("h3"),n.textContent=t,s=N(),o=E("div"),r=E("b"),r.textContent=a,i=N(),u=E("div"),F(c.$$.fragment),g=N(),F(y.$$.fragment),k=N(),P=E("div"),p=E("b"),p.textContent=b,v=N(),C=E("div"),F(H.$$.fragment),L=N(),I=E("input"),B=N(),ee=E("div"),se=E("b"),se.textContent=D,Z=N(),K=E("div"),F(j.$$.fragment),z=N(),F(G.$$.fragment),te=N(),F(J.$$.fragment),this.h()},l(U){e=S(U,"DIV",{class:!0});var Q=A(e);n=S(Q,"H3",{"data-svelte-h":!0}),oe(n)!=="svelte-15zouq3"&&(n.textContent=t),s=T(Q),o=S(Q,"DIV",{});var Oe=A(o);r=S(Oe,"B",{class:!0,"data-svelte-h":!0}),oe(r)!=="svelte-ekzpgg"&&(r.textContent=a),i=T(Oe),u=S(Oe,"DIV",{class:!0});var Te=A(u);V(c.$$.fragment,Te),g=T(Te),V(y.$$.fragment,Te),Te.forEach(h),Oe.forEach(h),k=T(Q),P=S(Q,"DIV",{});var Se=A(P);p=S(Se,"B",{class:!0,"data-svelte-h":!0}),oe(p)!=="svelte-1flca3"&&(p.textContent=b),v=T(Se),C=S(Se,"DIV",{class:!0});var $e=A(C);V(H.$$.fragment,$e),L=T($e),I=S($e,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),$e.forEach(h),Se.forEach(h),B=T(Q),ee=S(Q,"DIV",{});var X=A(ee);se=S(X,"B",{class:!0,"data-svelte-h":!0}),oe(se)!=="svelte-1evbw58"&&(se.textContent=D),Z=T(X),K=S(X,"DIV",{class:!0});var ye=A(K);V(j.$$.fragment,ye),ye.forEach(h),X.forEach(h),z=T(Q),V(G.$$.fragment,Q),te=T(Q),V(J.$$.fragment,Q),Q.forEach(h),this.h()},h(){d(r,"class","svelte-kdg2ou"),d(u,"class","row svelte-kdg2ou"),d(p,"class","svelte-kdg2ou"),d(I,"type","number"),d(I,"min",0),d(I,"max",1e5),d(I,"step",1),d(I,"class","svelte-kdg2ou"),d(C,"class","row svelte-kdg2ou"),d(se,"class","svelte-kdg2ou"),d(K,"class","row svelte-kdg2ou"),d(e,"class","container svelte-kdg2ou")},m(U,Q){O(U,e,Q),_(e,n),_(e,s),_(e,o),_(o,r),_(o,i),_(o,u),M(c,u,null),_(u,g),M(y,u,null),_(e,k),_(e,P),_(P,p),_(P,v),_(P,C),M(H,C,null),_(C,L),_(C,I),We(I,l[1]),_(e,B),_(e,ee),_(ee,se),_(ee,Z),_(ee,K),M(j,K,null),_(e,z),M(G,e,null),_(e,te),M(J,e,null),me=!0,he||(Ae=[Ie(I,"input",l[9]),Ie(I,"keyup",l[4])],he=!0)},p(U,Q){const Oe={};!f&&Q&8&&(f=!0,Oe.value=U[3].direction,Fe(()=>f=!1)),c.$set(Oe);const Te={};!m&&Q&8&&(m=!0,Te.value=U[3].property,Fe(()=>m=!1)),y.$set(Te);const Se={};!x&&Q&4&&(x=!0,Se.value=U[2].scoreComparator,Fe(()=>x=!1)),H.$set(Se),Q&2&&jt(I.value)!==U[1]&&We(I,U[1]);const $e={};!le&&Q&4&&(le=!0,$e.value=U[2].rating,Fe(()=>le=!1)),j.$set($e);const X={};Q&16384&&(X.$$scope={dirty:Q,ctx:U}),G.$set(X);const ye={};Q&16384&&(ye.$$scope={dirty:Q,ctx:U}),J.$set(ye)},i(U){me||($(c.$$.fragment,U),$(y.$$.fragment,U),$(H.$$.fragment,U),$(j.$$.fragment,U),$(G.$$.fragment,U),$(J.$$.fragment,U),me=!0)},o(U){w(c.$$.fragment,U),w(y.$$.fragment,U),w(H.$$.fragment,U),w(j.$$.fragment,U),w(G.$$.fragment,U),w(J.$$.fragment,U),me=!1},d(U){U&&h(e),R(c),R(y),R(H),R(j),R(G),R(J),he=!1,ct(Ae)}}}function Rs(l){let e,n,t;function s(r){l[12](r)}let o={$$slots:{default:[Ms]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.dialog=l[0]),e=new zt({props:o}),ke.push(()=>Ve(e,"dialog",s)),e.$on("close",l[13]),{c(){F(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,[a]){const i={};a&16399&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],Fe(()=>n=!1)),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}const Xt=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),Ls=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),Bs=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),js=Object.freeze({">=":"≥","<=":"≤"});function zs(l,e,n){let t,s;ge(l,Re,p=>n(2,t=p)),ge(l,ze,p=>n(3,s=p));let{dialog:o}=e,r;const a=p=>{var b;return Jt(p)&&((b=p.target)==null?void 0:b.blur())},i=()=>{ze.reset(),Re.reset(),n(1,r=t.scoreValue)};function u(p){l.$$.not_equal(s.direction,p)&&(s.direction=p,ze.set(s))}function c(p){l.$$.not_equal(s.property,p)&&(s.property=p,ze.set(s))}function f(p){l.$$.not_equal(t.scoreComparator,p)&&(t.scoreComparator=p,Re.set(t))}function g(){r=jt(this.value),n(1,r),n(2,t)}function y(p){l.$$.not_equal(t.rating,p)&&(t.rating=p,Re.set(t))}const m=()=>o.close();function k(p){o=p,n(0,o)}function P(p){nt.call(this,l,p)}return l.$$set=p=>{"dialog"in p&&n(0,o=p.dialog)},l.$$.update=()=>{if(l.$$.dirty&6){r===void 0&&n(1,r=t.scoreValue);let p=Number(r);isNaN(p)||rn(Re,t.scoreValue=p,t)}},[o,r,t,s,a,i,u,c,f,g,y,m,k,P]}class Gs extends pe{constructor(e){super(),_e(this,e,zs,Rs,fe,{dialog:0})}}function Us(l){let e,n,t,s,o,r,a,i,u,c,f,g,y,m,k,P;function p(v){l[9](v)}let b={};return l[2]!==void 0&&(b.dialog=l[2]),g=new Gs({props:b}),ke.push(()=>Ve(g,"dialog",p)),g.$on("close",l[10]),{c(){e=E("button"),n=E("i"),t=N(),s=E("span"),o=ie(l[5]),r=N(),a=E("i"),i=N(),u=E("span"),c=ie(l[4]),f=N(),F(g.$$.fragment),this.h()},l(v){e=S(v,"BUTTON",{class:!0});var C=A(e);n=S(C,"I",{class:!0}),A(n).forEach(h),t=T(C),s=S(C,"SPAN",{});var H=A(s);o=ae(H,l[5]),H.forEach(h),r=T(C),a=S(C,"I",{class:!0}),A(a).forEach(h),i=T(C),u=S(C,"SPAN",{});var x=A(u);c=ae(x,l[4]),x.forEach(h),C.forEach(h),f=T(v),V(g.$$.fragment,v),this.h()},h(){d(n,"class","codicon codicon-filter svelte-a4zz3f"),d(a,"class","codicon codicon-arrow-swap svelte-a4zz3f"),d(e,"class","svelte-a4zz3f")},m(v,C){O(v,e,C),_(e,n),_(e,t),_(e,s),_(s,o),_(e,r),_(e,a),_(e,i),_(e,u),_(u,c),O(v,f,C),M(g,v,C),m=!0,k||(P=Ie(e,"click",l[8]),k=!0)},p(v,[C]){(!m||C&32)&&Le(o,v[5]),(!m||C&16)&&Le(c,v[4]);const H={};!y&&C&4&&(y=!0,H.dialog=v[2],Fe(()=>y=!1)),g.$set(H)},i(v){m||($(g.$$.fragment,v),m=!0)},o(v){w(g.$$.fragment,v),m=!1},d(v){v&&(h(e),h(f)),R(g,v),k=!1,P()}}}const qs=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),Hs=(l,e,n)=>{let t=l==="all"?void 0:Xt[l],s=e===0&&n===">="?void 0:`Score${n}${st(e)}`;return[t,s].filter(o=>o!==void 0).join(",")||"All"};function Ks(l,e,n){let t,s,o,r;ge(l,ze,m=>n(0,o=m)),ge(l,Re,m=>n(1,r=m));const a=je(),i=(m,k)=>JSON.stringify(Object.assign({},m,k));let u,c="";const f=()=>{n(3,c=i(o,r)),u.showModal()};function g(m){u=m,n(2,u)}const y=()=>{i(o,r)!==c&&a("sortfilterupdate")};return l.$$.update=()=>{l.$$.dirty&2&&n(5,t=Hs(r.rating,r.scoreValue,r.scoreComparator)),l.$$.dirty&1&&n(4,s=qs[o.property][o.direction])},[o,r,u,c,s,t,a,i,f,g,y]}class Ws extends pe{constructor(e){super(),_e(this,e,Ks,Us,fe,{})}}function At(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function Ft(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function Js(l){let e,n,t=Pe(l[1].posts),s=[];for(let r=0;r<t.length;r+=1)s[r]=Vt(At(l,t,r));const o=r=>w(s[r],1,1,()=>{s[r]=null});return{c(){e=E("section");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"SECTION",{class:!0,style:!0});var a=A(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(h),this.h()},h(){d(e,"class","multi-column svelte-wypqh"),Be(e,"grid-template-columns","repeat("+l[2]+", 1fr)")},m(r,a){O(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&3){t=Pe(r[1].posts);let i;for(i=0;i<t.length;i+=1){const u=At(r,t,i);s[i]?(s[i].p(u,a),$(s[i],1)):(s[i]=Vt(u),s[i].c(),$(s[i],1),s[i].m(e,null))}for(ce(),i=t.length;i<s.length;i+=1)o(i);ue()}(!n||a&4)&&Be(e,"grid-template-columns","repeat("+r[2]+", 1fr)")},i(r){if(!n){for(let a=0;a<t.length;a+=1)$(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(r){r&&h(e),Ye(s,r)}}}function Qs(l){let e,n,t=Pe(l[1].posts),s=[];for(let r=0;r<t.length;r+=1)s[r]=Mt(Ft(l,t,r));const o=r=>w(s[r],1,1,()=>{s[r]=null});return{c(){e=E("section");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"SECTION",{class:!0});var a=A(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(h),this.h()},h(){d(e,"class","single-column svelte-wypqh")},m(r,a){O(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&3){t=Pe(r[1].posts);let i;for(i=0;i<t.length;i+=1){const u=Ft(r,t,i);s[i]?(s[i].p(u,a),$(s[i],1)):(s[i]=Mt(u),s[i].c(),$(s[i],1),s[i].m(e,null))}for(ce(),i=t.length;i<s.length;i+=1)o(i);ue()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)$(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(r){r&&h(e),Ye(s,r)}}}function Vt(l){let e,n;function t(){return l[6](l[10])}return e=new Es({props:{post:l[8]}}),e.$on("click",t),{c(){F(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,o){M(e,s,o),n=!0},p(s,o){l=s;const r={};o&2&&(r.post=l[8]),e.$set(r)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){R(e,s)}}}function Mt(l){let e,n;function t(){return l[5](l[10])}return e=new As({props:{post:l[8]}}),e.$on("fullscreen",t),{c(){F(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,o){M(e,s,o),n=!0},p(s,o){l=s;const r={};o&2&&(r.post=l[8]),e.$set(r)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){R(e,s)}}}function Rt(l){let e,n;return e=new ws({props:{index:l[0]}}),e.$on("close",l[3]),e.$on("endreached",l[7]),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&1&&(o.index=t[0]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Ys(l){let e,n,t=st(l[1].postCount)+"",s,o,r,a,i,u,c,f,g,y;a=new Ws({}),a.$on("sortfilterupdate",l[4]);const m=[Qs,Js],k=[];function P(b,v){return b[2]==="1"?0:1}u=P(l),c=k[u]=m[u](l);let p=l[0]!==void 0&&Rt(l);return{c(){e=E("div"),n=E("span"),s=ie(t),o=ie(" posts"),r=N(),F(a.$$.fragment),i=N(),c.c(),f=N(),p&&p.c(),g=De(),this.h()},l(b){e=S(b,"DIV",{class:!0});var v=A(e);n=S(v,"SPAN",{});var C=A(n);s=ae(C,t),o=ae(C," posts"),C.forEach(h),r=T(v),V(a.$$.fragment,v),v.forEach(h),i=T(b),c.l(b),f=T(b),p&&p.l(b),g=De(),this.h()},h(){d(e,"class","svelte-wypqh")},m(b,v){O(b,e,v),_(e,n),_(n,s),_(n,o),_(e,r),M(a,e,null),O(b,i,v),k[u].m(b,v),O(b,f,v),p&&p.m(b,v),O(b,g,v),y=!0},p(b,[v]){(!y||v&2)&&t!==(t=st(b[1].postCount)+"")&&Le(s,t);let C=u;u=P(b),u===C?k[u].p(b,v):(ce(),w(k[C],1,1,()=>{k[C]=null}),ue(),c=k[u],c?c.p(b,v):(c=k[u]=m[u](b),c.c()),$(c,1),c.m(f.parentNode,f)),b[0]!==void 0?p?(p.p(b,v),v&1&&$(p,1)):(p=Rt(b),p.c(),$(p,1),p.m(g.parentNode,g)):p&&(ce(),w(p,1,1,()=>{p=null}),ue())},i(b){y||($(a.$$.fragment,b),$(c),$(p),y=!0)},o(b){w(a.$$.fragment,b),w(c),w(p),y=!1},d(b){b&&(h(e),h(i),h(f),h(g)),R(a),k[u].d(b),p&&p.d(b)}}}function Zs(l,e,n){let t,s;ge(l,Je,f=>n(1,t=f)),ge(l,Gt,f=>n(2,s=f));let o;const r=f=>{var m;const g=t.posts[f.detail],y=lt(g.id);(m=document.getElementById(y))==null||m.scrollIntoView(),n(0,o=void 0)};function a(f){nt.call(this,l,f)}const i=f=>{n(0,o=f)},u=f=>{n(0,o=f)};function c(f){nt.call(this,l,f)}return l.$$.update=()=>{var f;l.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(f=history.state)!=null&&f.fullscreen&&history.back())},[o,t,s,r,a,i,u,c]}class Xs extends pe{constructor(e){super(),_e(this,e,Zs,Ys,fe,{})}}function xs(l){let e;return{c(){e=ie("Reset Filter")},l(n){e=ae(n,"Reset Filter")},m(n,t){O(n,e,t)},d(n){n&&h(e)}}}function el(l){let e,n,t,s,o="We couldn't find any posts matching your tags. Sorry...",r,a,i;return a=new Qe({props:{title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[xs]},$$scope:{ctx:l}}}),a.$on("click",l[1]),{c(){e=E("img"),t=N(),s=E("p"),s.textContent=o,r=N(),F(a.$$.fragment),this.h()},l(u){e=S(u,"IMG",{src:!0,alt:!0,class:!0}),t=T(u),s=S(u,"P",{"data-svelte-h":!0}),oe(s)!=="svelte-1utxj3w"&&(s.textContent=o),r=T(u),V(a.$$.fragment,u),this.h()},h(){we(e.src,n=Ut+"/assets/shironeko-confused.png")||d(e,"src",n),d(e,"alt","Nothing here..."),d(e,"class","svelte-1bb5e7g")},m(u,c){O(u,e,c),O(u,t,c),O(u,s,c),O(u,r,c),M(a,u,c),i=!0},p(u,[c]){const f={};c&4&&(f.$$scope={dirty:c,ctx:u}),a.$set(f)},i(u){i||($(a.$$.fragment,u),i=!0)},o(u){w(a.$$.fragment,u),i=!1},d(u){u&&(h(e),h(t),h(s),h(r)),R(a,u)}}}function tl(l){const e=je();return[e,()=>{ze.reset(),Re.reset(),e("sortfilterupdate")}]}class nl extends pe{constructor(e){super(),_e(this,e,tl,el,fe,{})}}function sl(l){const e=l-1;return e*e*e+1}function ll(l,{delay:e=0,duration:n=400,easing:t=sl,x:s=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(l),i=+a.opacity,u=a.transform==="none"?"":a.transform,c=i*(1-r),[f,g]=ft(s),[y,m]=ft(o);return{delay:e,duration:n,easing:t,css:(k,P)=>`
			transform: ${u} translate(${(1-k)*f}${g}, ${(1-k)*y}${m});
			opacity: ${i-c*P}`}}function rl(l){let e;return{c(){e=ie("Ok")},l(n){e=ae(n,"Ok")},m(n,t){O(n,e,t)},d(n){n&&h(e)}}}function ol(l){let e,n,t="This site uses cookies",s,o,r,a;return o=new Qe({props:{title:"Accept cookies",$$slots:{default:[rl]},$$scope:{ctx:l}}}),o.$on("click",l[0]),{c(){e=E("div"),n=E("span"),n.textContent=t,s=N(),F(o.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var u=A(e);n=S(u,"SPAN",{"data-svelte-h":!0}),oe(n)!=="svelte-17tpe0c"&&(n.textContent=t),s=T(u),V(o.$$.fragment,u),u.forEach(h),this.h()},h(){d(e,"class","svelte-20j44m")},m(i,u){O(i,e,u),_(e,n),_(e,s),M(o,e,null),a=!0},p(i,[u]){const c={};u&2&&(c.$$scope={dirty:u,ctx:i}),o.$set(c)},i(i){a||($(o.$$.fragment,i),r&&r.end(1),a=!0)},o(i){w(o.$$.fragment,i),i&&(r=on(e,ll,{y:200,duration:200})),a=!1},d(i){i&&h(e),R(o),i&&r&&r.end()}}}function il(l){return[()=>Qt.set(!0)]}class al extends pe{constructor(e){super(),_e(this,e,il,ol,fe,{})}}function cl(l){let e;return{c(){e=ie("Search")},l(n){e=ae(n,"Search")},m(n,t){O(n,e,t)},i:Y,o:Y,d(n){n&&h(e)}}}function ul(l){let e,n;return e=new Ht({}),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function fl(l){let e,n,t,s;const o=[ul,cl],r=[];function a(i,u){return i[0]?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=De()},l(i){n.l(i),t=De()},m(i,u){r[e].m(i,u),O(i,t,u),s=!0},p(i,u){let c=e;e=a(i),e!==c&&(ce(),w(r[c],1,1,()=>{r[c]=null}),ue(),n=r[e],n||(n=r[e]=o[e](i),n.c()),$(n,1),n.m(t.parentNode,t))},i(i){s||($(n),s=!0)},o(i){w(n),s=!1},d(i){i&&h(t),r[e].d(i)}}}function pl(l){let e,n,t,s,o,r;const a=[gl,dl],i=[];function u(c,f){return c[3].postCount===0?0:1}return n=u(l),t=i[n]=a[n](l),o=new Nn({}),{c(){e=E("section"),t.c(),s=N(),F(o.$$.fragment),this.h()},l(c){e=S(c,"SECTION",{class:!0});var f=A(e);t.l(f),f.forEach(h),s=T(c),V(o.$$.fragment,c),this.h()},h(){d(e,"class","svelte-nujk24")},m(c,f){O(c,e,f),i[n].m(e,null),O(c,s,f),M(o,c,f),r=!0},p(c,f){let g=n;n=u(c),n===g?i[n].p(c,f):(ce(),w(i[g],1,1,()=>{i[g]=null}),ue(),t=i[n],t?t.p(c,f):(t=i[n]=a[n](c),t.c()),$(t,1),t.m(e,null))},i(c){r||($(t),$(o.$$.fragment,c),r=!0)},o(c){w(t),w(o.$$.fragment,c),r=!1},d(c){c&&(h(e),h(s)),i[n].d(),R(o,c)}}}function _l(l){let e,n;return e=new Un({props:{error:l[1]}}),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.error=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function dl(l){let e,n,t,s,o,r;e=new Xs({}),e.$on("sortfilterupdate",l[10]),e.$on("endreached",l[11]);const a=[hl,ml],i=[];function u(c,f){return c[3].posts.length===c[3].postCount?0:1}return t=u(l),s=i[t]=a[t](l),{c(){F(e.$$.fragment),n=N(),s.c(),o=De()},l(c){V(e.$$.fragment,c),n=T(c),s.l(c),o=De()},m(c,f){M(e,c,f),O(c,n,f),i[t].m(c,f),O(c,o,f),r=!0},p(c,f){let g=t;t=u(c),t===g?i[t].p(c,f):(ce(),w(i[g],1,1,()=>{i[g]=null}),ue(),s=i[t],s?s.p(c,f):(s=i[t]=a[t](c),s.c()),$(s,1),s.m(o.parentNode,o))},i(c){r||($(e.$$.fragment,c),$(s),r=!0)},o(c){w(e.$$.fragment,c),w(s),r=!1},d(c){c&&(h(n),h(o)),R(e,c),i[t].d(c)}}}function gl(l){let e,n;return e=new nl({}),e.$on("sortfilterupdate",l[10]),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p:Y,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ml(l){let e,n;return e=new Yt({props:{absoluteTop:void 0,rootMargin:1e3/Number(l[7])+"px"}}),e.$on("intersection",l[11]),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&128&&(o.rootMargin=1e3/Number(t[7])+"px"),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function hl(l){let e,n;return e=new Hn({}),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p:Y,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Lt(l){let e,n;return e=new al({}),{c(){F(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function $l(l){let e,n,t,s,o,r,a,i,u,c,f,g,y,m,k,P,p;n=new cn({}),s=new Pn({props:{placeholder:"Search for tags",fetchSuggestions:l[9]}}),s.$on("pick",l[12]),r=new Qe({props:{title:"Search with the tags above",$$slots:{default:[fl]},$$scope:{ctx:l}}}),r.$on("click",l[10]),i=new un({props:{tags:[...l[5],...l[4]]}}),i.$on("click",l[13]),i.$on("contextmenu",l[14]),i.$on("createSupertag",l[15]);const b=[_l,pl],v=[];function C(I,B){return I[1]?0:I[3].requested?1:-1}~(c=C(l))&&(f=v[c]=b[c](l));function H(I){l[16](I)}let x={tags:l[5]};l[2]!==void 0&&(x.dialog=l[2]),y=new jn({props:x}),ke.push(()=>Ve(y,"dialog",H)),y.$on("submit",l[17]);let L=!l[8]&&Lt();return{c(){e=E("section"),F(n.$$.fragment),t=N(),F(s.$$.fragment),o=N(),F(r.$$.fragment),a=N(),F(i.$$.fragment),u=N(),f&&f.c(),g=N(),F(y.$$.fragment),k=N(),L&&L.c(),P=De(),this.h()},l(I){e=S(I,"SECTION",{id:!0,class:!0});var B=A(e);V(n.$$.fragment,B),t=T(B),V(s.$$.fragment,B),o=T(B),V(r.$$.fragment,B),a=T(B),V(i.$$.fragment,B),B.forEach(h),u=T(I),f&&f.l(I),g=T(I),V(y.$$.fragment,I),k=T(I),L&&L.l(I),P=De(),this.h()},h(){d(e,"id","search"),d(e,"class","svelte-nujk24")},m(I,B){O(I,e,B),M(n,e,null),_(e,t),M(s,e,null),_(e,o),M(r,e,null),_(e,a),M(i,e,null),O(I,u,B),~c&&v[c].m(I,B),O(I,g,B),M(y,I,B),O(I,k,B),L&&L.m(I,B),O(I,P,B),p=!0},p(I,[B]){const ee={};B&33554433&&(ee.$$scope={dirty:B,ctx:I}),r.$set(ee);const se={};B&48&&(se.tags=[...I[5],...I[4]]),i.$set(se);let D=c;c=C(I),c===D?~c&&v[c].p(I,B):(f&&(ce(),w(v[D],1,1,()=>{v[D]=null}),ue()),~c?(f=v[c],f?f.p(I,B):(f=v[c]=b[c](I),f.c()),$(f,1),f.m(g.parentNode,g)):f=null);const Z={};B&32&&(Z.tags=I[5]),!m&&B&4&&(m=!0,Z.dialog=I[2],Fe(()=>m=!1)),y.$set(Z),I[8]?L&&(ce(),w(L,1,1,()=>{L=null}),ue()):L?B&256&&$(L,1):(L=Lt(),L.c(),$(L,1),L.m(P.parentNode,P))},i(I){p||($(n.$$.fragment,I),$(s.$$.fragment,I),$(r.$$.fragment,I),$(i.$$.fragment,I),$(f),$(y.$$.fragment,I),$(L),p=!0)},o(I){w(n.$$.fragment,I),w(s.$$.fragment,I),w(r.$$.fragment,I),w(i.$$.fragment,I),w(f),w(y.$$.fragment,I),w(L),p=!1},d(I){I&&(h(e),h(u),h(g),h(k),h(P)),R(n),R(s),R(r),R(i),~c&&v[c].d(I),R(y,I),L&&L.d(I)}}}function vl(l,e,n){let t,s,o,r,a,i,u,c,f;ge(l,Je,D=>n(3,t=D)),ge(l,ut,D=>n(4,s=D)),ge(l,Re,D=>n(19,o=D)),ge(l,ze,D=>n(20,r=D)),ge(l,Vn,D=>n(21,a=D)),ge(l,it,D=>n(5,i=D)),ge(l,mt,D=>n(6,u=D)),ge(l,Gt,D=>n(7,c=D)),ge(l,Qt,D=>n(8,f=D)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let g=!1,y,m,k=0;const P=async D=>{const Z=await Tn(D);return[...u.items.filter(({name:j})=>j.toLowerCase().includes(D.toLowerCase())).map(j=>({label:j.name,count:j.tags.length,type:"supertag"})),...Z]},p=()=>new In().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(s),b=async D=>{if(!g){n(1,y=void 0),n(0,g=!0);try{const Z=t.pageCount;await D(),An(Z).catch(()=>{})}catch(Z){n(1,y=Z),console.warn(Z)}finally{n(0,g=!1)}}},v=async()=>{Je.reset(),k=0,b(async()=>{const[D,Z]=await p().getPageAndCount();Je.addPage(D,Z)})},C=async()=>{b(async()=>{const D=await p().getPage();Je.addPage(D)})},H=D=>{var Z,K;if((D.key==="/"||D.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&((Z=document.getElementById("searchbar"))==null||Z.focus(),D.preventDefault(),D.stopPropagation()),D.ctrlKey&&D.key==="Enter"&&(D.preventDefault(),D.stopPropagation(),v()),D.ctrlKey&&D.key==="m"&&((K=document.getElementById("select-modifier"))==null||K.click()),D.ctrlKey&&D.key==="ArrowDown"){const j=document.getElementsByClassName("post-media");j[k].focus(),k=Math.min(k+1,Math.max(0,j.length-1))}D.ctrlKey&&D.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[k].focus(),k=Math.max(k-1,0))};rt(async()=>{document.addEventListener("keydown",H),t.postCount===0&&v()}),ot(()=>{document.removeEventListener("keydown",H)});const x=async D=>{const Z=D.detail;if(Z.type==="supertag"){const K=u.items.find(j=>j.name===Z.label);if(!K){console.warn("Supertag not present.");return}ut.addOrReplace(K)}else{const K=await On(D.detail.label);it.addOrReplace({name:D.detail.label,modifier:D.detail.modifier,count:D.detail.count,type:(K==null?void 0:K.type)??"tag"})}},L=D=>"description"in D.detail?ut.removeByName(D.detail.name):it.removeByName(D.detail.name),I=D=>{"description"in D.detail||(D.detail.modifier=Fn(D.detail.modifier),it.addOrReplace(D.detail))},B=()=>m.showModal();function ee(D){m=D,n(2,m)}return[g,y,m,t,s,i,u,c,f,P,v,C,x,L,I,B,ee,D=>mt.add(D.detail)]}class Kl extends pe{constructor(e){super(),_e(this,e,vl,$l,fe,{})}}export{Kl as component};
