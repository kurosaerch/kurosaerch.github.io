import{s as ae,p as me,F as Pe,G as Be,f as S,a as L,g as C,h as A,x as pe,c as N,d as m,j as d,i as F,u as g,H as Ge,I as ee,J as Qe,K as Ue,l as te,m as ne,r as cn,v as Z,L as Se,M as pt,o as nt,N as st,A as un,C as fn,D as pn,E as _n,n as ye,O as tt,P as Re,Q as dn,R as gn,e as Oe,y as fe,S as mn,k as Ne,B as Ee,z as hn,T as $n,w as vn}from"../chunks/scheduler.1035f4ff.js";import{S as ce,i as ue,f as Le,b as O,d as B,m as M,a as v,t as y,e as q,g as _e,c as de}from"../chunks/index.3951bfda.js";import{g as bn}from"../chunks/globals.7f7f1b26.js";import{L as kn}from"../chunks/LynxMain.7bce46c1.js";import{e as Ce}from"../chunks/each.e59479a4.js";import{D as Gt,r as Wt,a as Kt}from"../chunks/result-columns-store.028c9b31.js";import{T as ze}from"../chunks/TextButton.e25370de.js";import{D as wn}from"../chunks/DetailedTag.7b8b5301.js";import{K as yn,A as En}from"../chunks/ActiveTagList.f5233c67.js";import{b as Jt}from"../chunks/paths.c05afbc0.js";import{a as at,r as Ke}from"../chunks/results-store.e9ed0904.js";import{a as et}from"../chunks/active-tags-store.2960ef0a.js";import{I as Qt,R as Sn}from"../chunks/ModifierSelect.d69460e6.js";import{R as Cn,S as Yt,a as Zt,E as Xt,b as In,C as xt,P as en,g as tn,f as ft,r as Tn,c as Dn,i as Pn,d as Ln,G as Nn,V as Rn,e as mt,I as Fn}from"../chunks/Gif.c3bc0b01.js";import{h as ht,u as An}from"../chunks/await_block.6f145430.js";import{a as nn,b as jn,o as Vn,N as On}from"../chunks/NumberInput.d8b7cfc4.js";import{L as dt}from"../chunks/LoadingAnimation.b232475b.js";import{h as Bn,i as Mn,a as qn}from"../chunks/always-loop-store.e8e34688.js";import{p as zn,S as Un,b as Hn,a as Gn}from"../chunks/store-keys.11aeb373.js";import{f as Ve}from"../chunks/format-tag.7e313273.js";import{i as Wn,g as Kn,a as Jn}from"../chunks/tags.49324235.js";import{s as Je,f as He,S as Qn}from"../chunks/search-builder.f8de6a08.js";import{S as Yn}from"../chunks/Searchbar.c39d7574.js";import{S as Zn}from"../chunks/ScrollUpButton.932fa20e.js";import{l as Xn}from"../chunks/analytics.b280da65.js";import{n as xn,s as $t}from"../chunks/supertags-store.07ff45b9.js";import{b as es}from"../chunks/blocked-content-store.a612fab3.js";import{S as ts}from"../chunks/Select.9dc7031d.js";import{R as ns}from"../chunks/RotatingTextSelect.60ab88d1.js";function vt(s,e,n){const t=s.slice();return t[11]=e[n],t}function bt(s){let e,n;return e=new wn({props:{tag:s[11]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.tag=t[11]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ss(s){let e;return{c(){e=te("Create supertag")},l(n){e=ne(n,"Create supertag")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function ls(s){let e,n,t="Create Supertag",l,o,r,a,i,c="Name",u,f,p,$,_,h="Description",w,R,E,T,k,z="Tags",V,H,b,D,j,I,Y,P,U=Ce(s[3]),W=[];for(let J=0;J<U.length;J+=1)W[J]=bt(vt(s,U,J));const ie=J=>y(W[J],1,1,()=>{W[J]=null});return j=new ze({props:{title:s[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!s[4],$$slots:{default:[ss]},$$scope:{ctx:s}}}),j.$on("click",s[9]),{c(){e=S("section"),n=S("h3"),n.textContent=t,l=L(),o=S("button"),r=L(),a=S("div"),i=S("label"),i.textContent=c,u=L(),f=S("input"),p=L(),$=S("div"),_=S("label"),_.textContent=h,w=L(),R=S("input"),E=L(),T=S("div"),k=S("span"),k.textContent=z,V=L(),H=S("ol");for(let J=0;J<W.length;J+=1)W[J].c();b=L(),D=S("div"),O(j.$$.fragment),this.h()},l(J){e=C(J,"SECTION",{class:!0});var K=A(e);n=C(K,"H3",{"data-svelte-h":!0}),pe(n)!=="svelte-ho1cwx"&&(n.textContent=t),l=N(K),o=C(K,"BUTTON",{type:!0,class:!0}),A(o).forEach(m),r=N(K),a=C(K,"DIV",{class:!0});var se=A(a);i=C(se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),pe(i)!=="svelte-10k8a68"&&(i.textContent=c),u=N(se),f=C(se,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),se.forEach(m),p=N(K),$=C(K,"DIV",{class:!0});var x=A($);_=C(x,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),pe(_)!=="svelte-14n9kp6"&&(_.textContent=h),w=N(x),R=C(x,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),x.forEach(m),E=N(K),T=C(K,"DIV",{class:!0});var he=A(T);k=C(he,"SPAN",{class:!0,"data-svelte-h":!0}),pe(k)!=="svelte-7hjyox"&&(k.textContent=z),V=N(he),H=C(he,"OL",{class:!0});var Ie=A(H);for(let Te=0;Te<W.length;Te+=1)W[Te].l(Ie);Ie.forEach(m),he.forEach(m),b=N(K),D=C(K,"DIV",{class:!0});var Me=A(D);B(j.$$.fragment,Me),Me.forEach(m),K.forEach(m),this.h()},h(){d(o,"type","button"),d(o,"class","codicon codicon-close svelte-1x6vc81"),d(i,"for","supertag-name"),d(i,"class","svelte-1x6vc81"),d(f,"type","text"),d(f,"placeholder","Descriptive name"),d(f,"id","supertag-name"),d(f,"class","svelte-1x6vc81"),d(a,"class","svelte-1x6vc81"),d(_,"for","supertag-description"),d(_,"class","svelte-1x6vc81"),d(R,"type","text"),d(R,"placeholder","Short description"),d(R,"id","supertag-description"),d(R,"class","svelte-1x6vc81"),d($,"class","svelte-1x6vc81"),d(k,"class","svelte-1x6vc81"),d(H,"class","svelte-1x6vc81"),d(T,"class","svelte-1x6vc81"),d(D,"class","last svelte-1x6vc81"),d(e,"class","svelte-1x6vc81")},m(J,K){F(J,e,K),g(e,n),g(e,l),g(e,o),g(e,r),g(e,a),g(a,i),g(a,u),g(a,f),Ge(f,s[0]),g(e,p),g(e,$),g($,_),g($,w),g($,R),Ge(R,s[2]),g(e,E),g(e,T),g(T,k),g(T,V),g(T,H);for(let se=0;se<W.length;se+=1)W[se]&&W[se].m(H,null);g(e,b),g(e,D),M(j,D,null),I=!0,Y||(P=[ee(o,"click",s[6]),ee(f,"input",s[7]),ee(R,"input",s[8])],Y=!0)},p(J,K){if(K&1&&f.value!==J[0]&&Ge(f,J[0]),K&4&&R.value!==J[2]&&Ge(R,J[2]),K&8){U=Ce(J[3]);let x;for(x=0;x<U.length;x+=1){const he=vt(J,U,x);W[x]?(W[x].p(he,K),v(W[x],1)):(W[x]=bt(he),W[x].c(),v(W[x],1),W[x].m(H,null))}for(_e(),x=U.length;x<W.length;x+=1)ie(x);de()}const se={};K&16&&(se.title=J[4]?"Click to create supertag":"Enter a valid name to continue"),K&16&&(se.disabled=!J[4]),K&16384&&(se.$$scope={dirty:K,ctx:J}),j.$set(se)},i(J){if(!I){for(let K=0;K<U.length;K+=1)v(W[K]);v(j.$$.fragment,J),I=!0}},o(J){W=W.filter(Boolean);for(let K=0;K<W.length;K+=1)y(W[K]);y(j.$$.fragment,J),I=!1},d(J){J&&m(e),Qe(W,J),q(j),Y=!1,Ue(P)}}}function rs(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[ls]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.dialog=s[1]),e=new Gt({props:o}),me.push(()=>Le(e,"dialog",l)),e.$on("close",s[6]),{c(){O(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],Pe(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function os(s,e,n){let t,{dialog:l}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=Be(),c=()=>l.close();function u(){o=this.value,n(0,o)}function f(){r=this.value,n(2,r)}const p=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:_,name:h})=>({modifier:_,name:h}))}),c()};function $(_){l=_,n(1,l)}return s.$$set=_=>{"dialog"in _&&n(1,l=_.dialog),"name"in _&&n(0,o=_.name),"description"in _&&n(2,r=_.description),"tags"in _&&n(3,a=_.tags)},s.$$.update=()=>{s.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,l,r,a,t,i,c,u,f,p,$]}class is extends ce{constructor(e){super(),ue(this,e,os,rs,ae,{dialog:1,name:0,description:2,tags:3})}}function as(s){let e,n,t,l,o,r,a,i,c,u;return{c(){e=S("div"),n=S("div"),t=S("i"),l=L(),o=S("div"),r=S("h3"),a=te(s[0]),i=L(),c=S("span"),u=te(s[2]),this.h()},l(f){e=C(f,"DIV",{class:!0});var p=A(e);n=C(p,"DIV",{class:!0});var $=A(n);t=C($,"I",{class:!0}),A(t).forEach(m),$.forEach(m),l=N(p),o=C(p,"DIV",{});var _=A(o);r=C(_,"H3",{class:!0});var h=A(r);a=ne(h,s[0]),h.forEach(m),i=N(_),c=C(_,"SPAN",{});var w=A(c);u=ne(w,s[2]),w.forEach(m),_.forEach(m),p.forEach(m),this.h()},h(){d(t,"class",cn(s[1])+" svelte-1yohziu"),d(n,"class","icon svelte-1yohziu"),d(r,"class","svelte-1yohziu"),d(e,"class","error svelte-1yohziu")},m(f,p){F(f,e,p),g(e,n),g(n,t),g(e,l),g(e,o),g(o,r),g(r,a),g(o,i),g(o,c),g(c,u)},p:Z,i:Z,o:Z,d(f){f&&m(e)}}}function cs(s,e,n){let{error:t}=e,l=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return s.$$set=a=>{"error"in a&&n(3,t=a.error)},[l,o,r,t]}class us extends ce{constructor(e){super(),ue(this,e,cs,as,ae,{error:3})}}function fs(s){let e;return{c(){e=te("Back to Top")},l(n){e=ne(n,"Back to Top")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function ps(s){let e;return{c(){e=te("Reset Tags")},l(n){e=ne(n,"Reset Tags")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function _s(s){let e,n,t,l,o,r="You have seen everything there is to see...",a,i,c,u,f,p;return c=new ze({props:{type:"secondary",title:"Scroll back up.",$$slots:{default:[fs]},$$scope:{ctx:s}}}),c.$on("click",s[0]),f=new ze({props:{type:"secondary",title:"Reset tags.",$$slots:{default:[ps]},$$scope:{ctx:s}}}),f.$on("click",s[1]),{c(){e=S("section"),n=S("img"),l=L(),o=S("p"),o.textContent=r,a=L(),i=S("div"),O(c.$$.fragment),u=L(),O(f.$$.fragment),this.h()},l($){e=C($,"SECTION",{class:!0});var _=A(e);n=C(_,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),l=N(_),o=C(_,"P",{"data-svelte-h":!0}),pe(o)!=="svelte-1i75mtf"&&(o.textContent=r),a=N(_),i=C(_,"DIV",{class:!0});var h=A(i);B(c.$$.fragment,h),u=N(h),B(f.$$.fragment,h),h.forEach(m),_.forEach(m),this.h()},h(){Se(n.src,t=Jt+"/assets/lynxy-chibi-not-found.webp")||d(n,"src",t),d(n,"alt","No more results to load"),d(n,"width","1231"),d(n,"height","864"),d(n,"class","svelte-1b36daw"),d(i,"class","svelte-1b36daw"),d(e,"class","svelte-1b36daw")},m($,_){F($,e,_),g(e,n),g(e,l),g(e,o),g(e,a),g(e,i),M(c,i,null),g(i,u),M(f,i,null),p=!0},p($,[_]){const h={};_&4&&(h.$$scope={dirty:_,ctx:$}),c.$set(h);const w={};_&4&&(w.$$scope={dirty:_,ctx:$}),f.$set(w)},i($){p||(v(c.$$.fragment,$),v(f.$$.fragment,$),p=!0)},o($){y(c.$$.fragment,$),y(f.$$.fragment,$),p=!1},d($){$&&m(e),q(c),q(f)}}}function ds(s){return[()=>{window.scrollTo({top:0})},()=>{et.reset(),at.reset()}]}class gs extends ce{constructor(e){super(),ue(this,e,ds,_s,ae,{})}}const ct=s=>`post_${s}`;function kt(s){let e;const n=s[4].default,t=un(n,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8)&&fn(t,n,l,l[3],e?_n(n,l[3],o,null):pn(l[3]),null)},i(l){e||(v(t,l),e=!0)},o(l){y(t,l),e=!1},d(l){t&&t.d(l)}}}function ms(s){let e,n,t,l,o=s[1]&&kt(s);return{c(){e=S("div"),o&&o.c(),this.h()},l(r){e=C(r,"DIV",{role:!0,tabindex:!0,class:!0});var a=A(e);o&&o.l(a),a.forEach(m),this.h()},h(){d(e,"role","none"),d(e,"tabindex","-1"),d(e,"class","svelte-6sy8qz")},m(r,a){F(r,e,a),o&&o.m(e,null),s[5](e),n=!0,t||(l=[ee(e,"click",pt(hs)),ee(e,"keydown",s[2])],t=!0)},p(r,[a]){r[1]?o?(o.p(r,a),a&2&&v(o,1)):(o=kt(r),o.c(),v(o,1),o.m(e,null)):o&&(_e(),y(o,1,1,()=>{o=null}),de())},i(r){n||(v(o),n=!0)},o(r){y(o),n=!1},d(r){r&&m(e),o&&o.d(),s[5](null),t=!1,Ue(l)}}}const hs=()=>{};function $s(s,e,n){let{$$slots:t={},$$scope:l}=e;const o=Be(),r=()=>o("close"),a=p=>{p.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let c,u=!1;nt(async()=>{c.focus(),document.addEventListener("fullscreenchange",i);try{await c.requestFullscreen()}catch{}n(1,u=!0)}),st(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function f(p){me[p?"unshift":"push"](()=>{c=p,n(0,c)})}return s.$$set=p=>{"$$scope"in p&&n(3,l=p.$$scope)},[c,u,a,l,t,f]}class vs extends ce{constructor(e){super(),ue(this,e,$s,ms,ae,{})}}function bs(s){let e,n;return{c(){e=S("div"),this.h()},l(t){e=C(t,"DIV",{style:!0}),A(e).forEach(m),this.h()},h(){d(e,"style",n=s[0]?`position:absolute;top:${s[0]};`:void 0)},m(t,l){F(t,e,l),s[3](e)},p(t,[l]){l&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&d(e,"style",n)},i:Z,o:Z,d(t){t&&m(e),s[3](null)}}}function ks(s,e,n){let{rootMargin:t}=e,{absoluteTop:l}=e;const o=Be(),r=new IntersectionObserver(c=>{c[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(c){me[c?"unshift":"push"](()=>{a=c,n(1,a)})}return s.$$set=c=>{"rootMargin"in c&&n(2,t=c.rootMargin),"absoluteTop"in c&&n(0,l=c.absoluteTop)},s.$$.update=()=>{s.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[l,a,t,i]}class sn extends ce{constructor(e){super(),ue(this,e,ks,bs,ae,{rootMargin:2,absoluteTop:0})}}function ws(s){let e,n;return{c(){e=S("a"),n=te("Open"),this.h()},l(t){e=C(t,"A",{href:!0,target:!0,class:!0});var l=A(e);n=ne(l,"Open"),l.forEach(m),this.h()},h(){d(e,"href",s[0]),d(e,"target","_newtab"),d(e,"class","codicon codicon-link-external svelte-10flxu9")},m(t,l){F(t,e,l),g(e,n)},p(t,[l]){l&1&&d(e,"href",t[0])},i:Z,o:Z,d(t){t&&m(e)}}}function ys(s,e,n){let{url:t}=e;return s.$$set=l=>{"url"in l&&n(0,t=l.url)},[t]}class Es extends ce{constructor(e){super(),ue(this,e,ys,ws,ae,{url:0})}}function wt(s,e,n){const t=s.slice();return t[4]=e[n][0],t[5]=e[n][1],t}function yt(s){let e,n="•",t,l,o;return l=new Xt({props:{source:s[0].source}}),{c(){e=S("span"),e.textContent=n,t=L(),O(l.$$.fragment)},l(r){e=C(r,"SPAN",{"data-svelte-h":!0}),pe(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=N(r),B(l.$$.fragment,r)},m(r,a){F(r,e,a),F(r,t,a),M(l,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),l.$set(i)},i(r){o||(v(l.$$.fragment,r),o=!0)},o(r){y(l.$$.fragment,r),o=!1},d(r){r&&(m(e),m(t)),q(l,r)}}}function Et(s){let e,n=s[4]+"",t,l,o,r;return o=new en({props:{tags:s[5]}}),{c(){e=S("h3"),t=te(n),l=L(),O(o.$$.fragment),this.h()},l(a){e=C(a,"H3",{class:!0});var i=A(e);t=ne(i,n),i.forEach(m),l=N(a),B(o.$$.fragment,a),this.h()},h(){d(e,"class","svelte-1tsjp7g")},m(a,i){F(a,e,i),g(e,t),F(a,l,i),M(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[4]+"")&&ye(t,n);const c={};i&2&&(c.tags=a[5]),o.$set(c)},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){y(o.$$.fragment,a),r=!1},d(a){a&&(m(e),m(l)),q(o,a)}}}function Ss(s){let e,n,t,l,o,r,a,i,c=s[0].id+"",u,f,p,$,_,h,w="•",R,E,T=s[0].type.toUpperCase()+"",k,z,V,H="•",b,D,j,I,Y="•",P,U,W,ie,J,K,se,x="•",he,Ie,Me,Te,lt="•",rt,Fe,ot,Ye,De,We,Q,re="Comments",Ae,$e,ve;$=new Cn({props:{value:s[0].rating}}),D=new Yt({props:{value:s[0].score}}),U=new Zt({props:{value:s[0].change}}),J=new Es({props:{url:"/post?id="+s[0].id+"&src="+encodeURIComponent(s[3])}}),Ie=new Xt({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+s[0].id}}),Fe=new In({props:{url:s[3]}});let le=s[0].source&&yt(s),be=Ce(Object.entries(s[1])),oe=[];for(let G=0;G<be.length;G+=1)oe[G]=Et(wt(s,be,G));const ut=G=>y(oe[G],1,1,()=>{oe[G]=null});return $e=new xt({props:{post:s[0]}}),{c(){e=S("div"),n=S("img"),l=L(),o=S("h1"),r=te("Post "),a=S("b"),i=te("#"),u=te(c),f=L(),p=S("div"),O($.$$.fragment),_=L(),h=S("span"),h.textContent=w,R=L(),E=S("span"),k=te(T),z=L(),V=S("span"),V.textContent=H,b=L(),O(D.$$.fragment),j=L(),I=S("span"),I.textContent=Y,P=L(),O(U.$$.fragment),W=L(),ie=S("div"),O(J.$$.fragment),K=L(),se=S("span"),se.textContent=x,he=L(),O(Ie.$$.fragment),Me=L(),Te=S("span"),Te.textContent=lt,rt=L(),O(Fe.$$.fragment),ot=L(),le&&le.c(),Ye=L(),De=S("div");for(let G=0;G<oe.length;G+=1)oe[G].c();We=L(),Q=S("h3"),Q.textContent=re,Ae=L(),O($e.$$.fragment),this.h()},l(G){e=C(G,"DIV",{class:!0});var X=A(e);n=C(X,"IMG",{class:!0,src:!0,alt:!0}),l=N(X),o=C(X,"H1",{class:!0});var je=A(o);r=ne(je,"Post "),a=C(je,"B",{});var Ze=A(a);i=ne(Ze,"#"),u=ne(Ze,c),Ze.forEach(m),je.forEach(m),f=N(X),p=C(X,"DIV",{class:!0});var ge=A(p);B($.$$.fragment,ge),_=N(ge),h=C(ge,"SPAN",{"data-svelte-h":!0}),pe(h)!=="svelte-7hh8jk"&&(h.textContent=w),R=N(ge),E=C(ge,"SPAN",{});var it=A(E);k=ne(it,T),it.forEach(m),z=N(ge),V=C(ge,"SPAN",{"data-svelte-h":!0}),pe(V)!=="svelte-7hh8jk"&&(V.textContent=H),b=N(ge),B(D.$$.fragment,ge),j=N(ge),I=C(ge,"SPAN",{"data-svelte-h":!0}),pe(I)!=="svelte-7hh8jk"&&(I.textContent=Y),P=N(ge),B(U.$$.fragment,ge),ge.forEach(m),W=N(X),ie=C(X,"DIV",{class:!0});var ke=A(ie);B(J.$$.fragment,ke),K=N(ke),se=C(ke,"SPAN",{"data-svelte-h":!0}),pe(se)!=="svelte-7hh8jk"&&(se.textContent=x),he=N(ke),B(Ie.$$.fragment,ke),Me=N(ke),Te=C(ke,"SPAN",{"data-svelte-h":!0}),pe(Te)!=="svelte-7hh8jk"&&(Te.textContent=lt),rt=N(ke),B(Fe.$$.fragment,ke),ot=N(ke),le&&le.l(ke),ke.forEach(m),Ye=N(X),De=C(X,"DIV",{});var qe=A(De);for(let Xe=0;Xe<oe.length;Xe+=1)oe[Xe].l(qe);We=N(qe),Q=C(qe,"H3",{class:!0,"data-svelte-h":!0}),pe(Q)!=="svelte-kc6sae"&&(Q.textContent=re),Ae=N(qe),B($e.$$.fragment,qe),qe.forEach(m),X.forEach(m),this.h()},h(){d(n,"class","preview svelte-1tsjp7g"),Se(n.src,t=s[2])||d(n,"src",t),d(n,"alt","preview"),d(o,"class","svelte-1tsjp7g"),d(p,"class","flex-row svelte-1tsjp7g"),d(ie,"class","flex-row svelte-1tsjp7g"),d(Q,"class","svelte-1tsjp7g"),d(e,"class","details svelte-1tsjp7g")},m(G,X){F(G,e,X),g(e,n),g(e,l),g(e,o),g(o,r),g(o,a),g(a,i),g(a,u),g(e,f),g(e,p),M($,p,null),g(p,_),g(p,h),g(p,R),g(p,E),g(E,k),g(p,z),g(p,V),g(p,b),M(D,p,null),g(p,j),g(p,I),g(p,P),M(U,p,null),g(e,W),g(e,ie),M(J,ie,null),g(ie,K),g(ie,se),g(ie,he),M(Ie,ie,null),g(ie,Me),g(ie,Te),g(ie,rt),M(Fe,ie,null),g(ie,ot),le&&le.m(ie,null),g(e,Ye),g(e,De);for(let je=0;je<oe.length;je+=1)oe[je]&&oe[je].m(De,null);g(De,We),g(De,Q),g(De,Ae),M($e,De,null),ve=!0},p(G,[X]){(!ve||X&4&&!Se(n.src,t=G[2]))&&d(n,"src",t),(!ve||X&1)&&c!==(c=G[0].id+"")&&ye(u,c);const je={};X&1&&(je.value=G[0].rating),$.$set(je),(!ve||X&1)&&T!==(T=G[0].type.toUpperCase()+"")&&ye(k,T);const Ze={};X&1&&(Ze.value=G[0].score),D.$set(Ze);const ge={};X&1&&(ge.value=G[0].change),U.$set(ge);const it={};X&9&&(it.url="/post?id="+G[0].id+"&src="+encodeURIComponent(G[3])),J.$set(it);const ke={};X&1&&(ke.source="https://rule34.xxx/index.php?page=post&s=view&id="+G[0].id),Ie.$set(ke);const qe={};if(X&8&&(qe.url=G[3]),Fe.$set(qe),G[0].source?le?(le.p(G,X),X&1&&v(le,1)):(le=yt(G),le.c(),v(le,1),le.m(ie,null)):le&&(_e(),y(le,1,1,()=>{le=null}),de()),X&2){be=Ce(Object.entries(G[1]));let we;for(we=0;we<be.length;we+=1){const gt=wt(G,be,we);oe[we]?(oe[we].p(gt,X),v(oe[we],1)):(oe[we]=Et(gt),oe[we].c(),v(oe[we],1),oe[we].m(De,We))}for(_e(),we=be.length;we<oe.length;we+=1)ut(we);de()}const Xe={};X&1&&(Xe.post=G[0]),$e.$set(Xe)},i(G){if(!ve){v($.$$.fragment,G),v(D.$$.fragment,G),v(U.$$.fragment,G),v(J.$$.fragment,G),v(Ie.$$.fragment,G),v(Fe.$$.fragment,G),v(le);for(let X=0;X<be.length;X+=1)v(oe[X]);v($e.$$.fragment,G),ve=!0}},o(G){y($.$$.fragment,G),y(D.$$.fragment,G),y(U.$$.fragment,G),y(J.$$.fragment,G),y(Ie.$$.fragment,G),y(Fe.$$.fragment,G),y(le),oe=oe.filter(Boolean);for(let X=0;X<oe.length;X+=1)y(oe[X]);y($e.$$.fragment,G),ve=!1},d(G){G&&m(e),q($),q(D),q(U),q(J),q(Ie),q(Fe),le&&le.d(),Qe(oe,G),q($e)}}}function Cs(s,e,n){let t,l,o,{post:r}=e;return s.$$set=a=>{"post"in a&&n(0,r=a.post)},s.$$.update=()=>{s.$$.dirty&1&&n(3,t=r.file_url),s.$$.dirty&1&&n(2,l=r.sample_url),s.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,l,t]}class Is extends ce{constructor(e){super(),ue(this,e,Cs,Ss,ae,{post:0})}}const xe=new IntersectionObserver(s=>{for(const e of s)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function Ts(s){let e,n,t,l;return{c(){e=S("div"),n=S("input"),this.h()},l(o){e=C(o,"DIV",{class:!0});var r=A(e);n=C(r,"INPUT",{type:!0,step:!0,max:!0,class:!0}),r.forEach(m),this.h()},h(){d(n,"type","range"),d(n,"step","0.001"),d(n,"max",s[1]),d(n,"class","svelte-dfxj87"),d(e,"class","svelte-dfxj87")},m(o,r){F(o,e,r),g(e,n),Ge(n,s[0]),t||(l=[ee(n,"change",s[5]),ee(n,"input",s[5]),ee(n,"scroll",pt(tt(s[4]))),ee(e,"click",pt(tt(s[2]))),ee(e,"scroll",pt(tt(s[3])))],t=!0)},p(o,[r]){r&2&&d(n,"max",o[1]),r&1&&Ge(n,o[0])},i:Z,o:Z,d(o){o&&m(e),t=!1,Ue(l)}}}function Ds(s,e,n){let{value:t}=e,{max:l}=e;function o(c){Re.call(this,s,c)}function r(c){Re.call(this,s,c)}function a(c){Re.call(this,s,c)}function i(){t=dn(this.value),n(0,t)}return s.$$set=c=>{"value"in c&&n(0,t=c.value),"max"in c&&n(1,l=c.max)},[t,l,o,r,a,i]}class ln extends ce{constructor(e){super(),ue(this,e,Ds,Ts,ae,{value:0,max:1})}}function St(s){let e,n=ft(s[2])+"",t,l,o=ft(s[4])+"",r;return{c(){e=S("span"),t=te(n),l=te(" / "),r=te(o),this.h()},l(a){e=C(a,"SPAN",{class:!0});var i=A(e);t=ne(i,n),l=ne(i," / "),r=ne(i,o),i.forEach(m),this.h()},h(){d(e,"class","svelte-r1orid")},m(a,i){F(a,e,i),g(e,t),g(e,l),g(e,r)},p(a,i){i&4&&n!==(n=ft(a[2])+"")&&ye(t,n),i&16&&o!==(o=ft(a[4])+"")&&ye(r,o)},d(a){a&&m(e)}}}function Ps(s){let e,n,t,l=!1,o,r=!0,a,i,c,u,f,p,$;function _(){cancelAnimationFrame(o),e.paused||(o=Tn(_),l=!0),s[10].call(e)}let h=s[2]!==void 0&&s[4]!==void 0&&St(s);function w(E){s[13](E)}let R={max:s[4]};return s[2]!==void 0&&(R.value=s[2]),c=new ln({props:R}),me.push(()=>Le(c,"value",w)),{c(){e=S("video"),a=L(),h&&h.c(),i=L(),O(c.$$.fragment),this.h()},l(E){e=C(E,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),A(e).forEach(m),a=N(E),h&&h.l(E),i=N(E),B(c.$$.fragment,E),this.h()},h(){Se(e.src,n=s[6])||d(e,"src",n),d(e,"poster",s[5]),d(e,"title",t="[VIDEO] post #"+s[0].id),d(e,"preload","metadata"),e.autoplay=!0,d(e,"class","svelte-r1orid"),s[4]===void 0&&gn(()=>s[12].call(e))},m(E,T){F(E,e,T),s[9](e),F(E,a,T),h&&h.m(E,T),F(E,i,T),M(c,E,T),f=!0,p||($=[ee(e,"timeupdate",_),ee(e,"play",s[11]),ee(e,"pause",s[11]),ee(e,"durationchange",s[12]),ee(e,"click",Ls),ee(e,"ended",s[8]),ee(e,"contextmenu",tt(Ns))],p=!0)},p(E,[T]){(!f||T&64&&!Se(e.src,n=E[6]))&&d(e,"src",n),(!f||T&32)&&d(e,"poster",E[5]),(!f||T&1&&t!==(t="[VIDEO] post #"+E[0].id))&&d(e,"title",t),!l&&T&4&&!isNaN(E[2])&&(e.currentTime=E[2]),l=!1,T&8&&r!==(r=E[3])&&e[r?"pause":"play"](),E[2]!==void 0&&E[4]!==void 0?h?h.p(E,T):(h=St(E),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null);const k={};T&16&&(k.max=E[4]),!u&&T&4&&(u=!0,k.value=E[2],Pe(()=>u=!1)),c.$set(k)},i(E){f||(v(c.$$.fragment,E),f=!0)},o(E){y(c.$$.fragment,E),f=!1},d(E){E&&(m(e),m(a),m(i)),s[9](null),h&&h.d(E),q(c,E),p=!1,Ue($)}}}const Ls=s=>s.target.paused?s.target.play():s.target.pause(),Ns=()=>{};function Rs(s,e,n){let t,l,o,{post:r}=e,a,i=0,c=!1,u;const f=E=>{a&&(E.key==="ArrowLeft"&&(E.preventDefault(),E.stopPropagation(),n(1,a.currentTime=Math.max(0,a.currentTime-5),a)),E.key==="ArrowRight"&&(E.preventDefault(),E.stopPropagation(),n(1,a.currentTime=Math.min(a.duration,a.currentTime+5),a)),E.key==="Space"&&(E.preventDefault(),E.stopPropagation(),n(3,c=!c)))};nt(()=>{a&&(xe==null||xe.observe(a)),document.addEventListener("keydown",f)}),st(()=>{a&&(xe==null||xe.unobserve(a)),document.removeEventListener("keydown",f)});function p(E){Re.call(this,s,E)}function $(E){me[E?"unshift":"push"](()=>{a=E,n(1,a)})}function _(){i=this.currentTime,n(2,i)}function h(){c=this.paused,n(3,c)}function w(){u=this.duration,n(4,u)}function R(E){i=E,n(2,i)}return s.$$set=E=>{"post"in E&&n(0,r=E.post)},s.$$.update=()=>{s.$$.dirty&1&&n(7,t=tn(r.file_url,r.sample_url,r.preview_url)),s.$$.dirty&128&&n(6,l=t.animated),s.$$.dirty&128&&n(5,o=t.static)},[r,a,i,c,u,o,l,t,p,$,_,h,w,R]}class Fs extends ce{constructor(e){super(),ue(this,e,Rs,Ps,ae,{post:0})}}function As(s){return{c:Z,l:Z,m:Z,p:Z,i:Z,o:Z,d:Z}}function js(s){let e,n,t,l,o,r;return{c(){e=S("img"),this.h()},l(a){e=C(a,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){Se(e.src,n=s[2])||d(e,"src",n),d(e,"alt",t="["+s[0].type+"] post #"+s[0].id),d(e,"title",l="["+s[0].type+"] post #"+s[0].id),d(e,"class","svelte-jlq3re")},m(a,i){F(a,e,i),o||(r=[ee(e,"contextmenu",tt(Ms)),ee(e,"click",s[6]),mn(s[7].call(null,e))],o=!0)},p(a,i){i&4&&!Se(e.src,n=a[2])&&d(e,"src",n),i&1&&t!==(t="["+a[0].type+"] post #"+a[0].id)&&d(e,"alt",t),i&1&&l!==(l="["+a[0].type+"] post #"+a[0].id)&&d(e,"title",l)},i:Z,o:Z,d(a){a&&m(e),o=!1,Ue(r)}}}function Vs(s){let e,n,t,l,o,r,a,i,c,u;return a=new dt({}),{c(){e=S("img"),o=L(),r=S("div"),O(a.$$.fragment),this.h()},l(f){e=C(f,"IMG",{src:!0,alt:!0,title:!0,class:!0}),o=N(f),r=C(f,"DIV",{class:!0});var p=A(r);B(a.$$.fragment,p),p.forEach(m),this.h()},h(){Se(e.src,n=s[3])||d(e,"src",n),d(e,"alt",t="["+s[0].type+"] post #"+s[0].id),d(e,"title",l="["+s[0].type+"] post #"+s[0].id),d(e,"class","svelte-jlq3re"),d(r,"class","svelte-jlq3re")},m(f,p){F(f,e,p),F(f,o,p),F(f,r,p),M(a,r,null),i=!0,c||(u=[ee(e,"contextmenu",tt(Bs)),ee(e,"click",s[6])],c=!0)},p(f,p){(!i||p&8&&!Se(e.src,n=f[3]))&&d(e,"src",n),(!i||p&1&&t!==(t="["+f[0].type+"] post #"+f[0].id))&&d(e,"alt",t),(!i||p&1&&l!==(l="["+f[0].type+"] post #"+f[0].id))&&d(e,"title",l)},i(f){i||(v(a.$$.fragment,f),i=!0)},o(f){y(a.$$.fragment,f),i=!1},d(f){f&&(m(e),m(o),m(r)),q(a),c=!1,Ue(u)}}}function Ct(s){let e,n,t;function l(r){s[10](r)}let o={max:s[5]};return s[1]!==void 0&&(o.value=s[1]),e=new ln({props:o}),me.push(()=>Le(e,"value",l)),{c(){O(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,a){const i={};a&32&&(i.max=r[5]),!n&&a&2&&(n=!0,i.value=r[1],Pe(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function Os(s){let e,n,t,l,o={ctx:s,current:null,token:null,hasCatch:!1,pending:Vs,then:js,catch:As,value:21,blocks:[,,,]};ht(e=s[8](s[2]),o);let r=s[4]&&Ct(s);return{c(){o.block.c(),n=L(),r&&r.c(),t=Oe()},l(a){o.block.l(a),n=N(a),r&&r.l(a),t=Oe()},m(a,i){o.block.m(a,o.anchor=i),o.mount=()=>n.parentNode,o.anchor=n,F(a,n,i),r&&r.m(a,i),F(a,t,i),l=!0},p(a,[i]){s=a,o.ctx=s,i&4&&e!==(e=s[8](s[2]))&&ht(e,o)||An(o,s,i),s[4]?r?(r.p(s,i),i&16&&v(r,1)):(r=Ct(s),r.c(),v(r,1),r.m(t.parentNode,t)):r&&(_e(),y(r,1,1,()=>{r=null}),de())},i(a){l||(v(o.block),v(r),l=!0)},o(a){for(let i=0;i<3;i+=1){const c=o.blocks[i];y(c)}y(r),l=!1},d(a){a&&(m(n),m(t)),o.block.d(a),o.token=null,o=null,r&&r.d(a)}}}const Bs=()=>{},Ms=()=>{};function qs(s,e,n){let t,l,o,r;fe(s,nn,b=>n(4,o=b)),fe(s,jn,b=>n(5,r=b));const a=Be();let{post:i}=e,{postId:c=-1}=e;const u=(b,D,j,I)=>{if(b==="gif"){const Y=Dn(D,j,I);return[Y.static,Y.animated]}return Bn?[j,D]:[I,j]};let f=0,p=Date.now(),$=Date.now(),_,h=!0,w;const R=()=>{$=Date.now(),_=$-p,p=$,h||n(1,f+=_/1e3),f>=r&&(a("ended"),n(1,f=0)),w=requestAnimationFrame(R)},E=()=>{h=!h},T=b=>{(b.code==="Space"||b.key==="k")&&(b.preventDefault(),b.stopPropagation(),h=!h)},k=new IntersectionObserver(b=>{for(const D of b)D.target&&(h=!D.isIntersecting)},{rootMargin:"0px",threshold:.5}),z=b=>(k==null||k.observe(b),{destroy(){k==null||k.unobserve(b)}});nt(()=>{o&&(w=requestAnimationFrame(R),document.addEventListener("keydown",T))}),st(()=>{cancelAnimationFrame(w),document.removeEventListener("keydown",T)});const V=b=>new Promise(D=>{h=!0;let j=new Image;j.onload=I=>{D(I),h=!1},j.src=b});function H(b){f=b,n(1,f),n(0,i),n(9,c)}return s.$$set=b=>{"post"in b&&n(0,i=b.post),"postId"in b&&n(9,c=b.postId)},s.$$.update=()=>{s.$$.dirty&1&&n(3,[t,l]=u(i.type,i.file_url,i.sample_url,i.preview_url),t,(n(2,l),n(0,i))),s.$$.dirty&513&&i.id!==c&&(n(9,c=i.id),n(1,f=0))},[i,f,l,t,o,r,E,z,V,c,H]}class zs extends ce{constructor(e){super(),ue(this,e,qs,Os,ae,{post:0,postId:9})}}function Us(s){let e,n;return e=new zs({props:{post:s[0]}}),e.$on("ended",s[2]),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Hs(s){let e,n;return e=new Fs({props:{post:s[0]}}),e.$on("ended",s[1]),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Gs(s){let e,n,t,l;const o=[Hs,Us],r=[];function a(i,c){return i[0].type==="video"?0:1}return n=a(s),t=r[n]=o[n](s),{c(){e=S("div"),t.c(),this.h()},l(i){e=C(i,"DIV",{class:!0});var c=A(e);t.l(c),c.forEach(m),this.h()},h(){d(e,"class","svelte-acjk3s")},m(i,c){F(i,e,c),r[n].m(e,null),l=!0},p(i,[c]){let u=n;n=a(i),n===u?r[n].p(i,c):(_e(),y(r[u],1,1,()=>{r[u]=null}),de(),t=r[n],t?t.p(i,c):(t=r[n]=o[n](i),t.c()),v(t,1),t.m(e,null))},i(i){l||(v(t),l=!0)},o(i){y(t),l=!1},d(i){i&&m(e),r[n].d()}}}function Ws(s,e,n){let{post:t}=e;function l(r){Re.call(this,s,r)}function o(r){Re.call(this,s,r)}return s.$$set=r=>{"post"in r&&n(0,t=r.post)},[t,l,o]}class Ks extends ce{constructor(e){super(),ue(this,e,Ws,Gs,ae,{post:0})}}function Js(s){let e,n,t;return{c(){e=S("img"),this.h()},l(l){e=C(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Se(e.src,n=s[2])||d(e,"src",n),d(e,"alt",t="post #"+s[0].id),d(e,"class","svelte-itxz72"),Ne(e,"top",s[1])},m(l,o){F(l,e,o)},p(l,[o]){o&4&&!Se(e.src,n=l[2])&&d(e,"src",n),o&1&&t!==(t="post #"+l[0].id)&&d(e,"alt",t),o&2&&Ne(e,"top",l[1])},i:Z,o:Z,d(l){l&&m(e)}}}function Qs(s,e,n){let t,{post:l}=e,{offset:o}=e;return s.$$set=r=>{"post"in r&&n(0,l=r.post),"offset"in r&&n(1,o=r.offset)},s.$$.update=()=>{s.$$.dirty&1&&n(2,t=Pn(l.sample_url)?l.preview_url:l.sample_url)},[l,o,t]}class rn extends ce{constructor(e){super(),ue(this,e,Qs,Js,ae,{post:0,offset:1})}}const Ys=()=>{const{subscribe:e,set:n}=zn(Un.FullscreenHintDone,!1,Gn,Hn);return{subscribe:e,set:n,reset:()=>n(!1)}},It=Ys();function Tt(s,e,n){const t=s.slice();return t[22]=e[n],t[24]=n,t}function Dt(s){let e,n;return e=new rn({props:{post:s[7],offset:s[4]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.post=t[7]),l&16&&(o.offset=t[4]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Zs(s){let e;return{c(){e=S("i"),this.h()},l(n){e=C(n,"I",{class:!0}),A(e).forEach(m),this.h()},h(){d(e,"class","codicon codicon-tag")},m(n,t){F(n,e,t)},p:Z,d(n){n&&m(e)}}}function Pt(s){let e,n;return e=new rn({props:{post:s[6],offset:s[3]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.post=t[6]),l&8&&(o.offset=t[3]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Lt(s){let e,n=`${s[24]*100}vh`;return{c(){e=S("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),A(e).forEach(m),this.h()},h(){d(e,"class","pseudo snap-item svelte-2epggd"),Ne(e,"top",n)},m(t,l){F(t,e,l)},p:Z,d(t){t&&m(e)}}}function Xs(s){let e,n,t,l,o,r,a,i,c,u,f,p,$,_,h,w=s[7]&&Dt(s);l=new Ks({props:{post:s[8]}}),l.$on("ended",s[11]),r=new Is({props:{post:s[8]}}),i=new Qt({props:{class:"details-button",$$slots:{default:[Zs]},$$scope:{ctx:s}}}),i.$on("click",s[14]);let R=s[6]&&Pt(s),E=Ce({length:s[0].posts.length}),T=[];for(let k=0;k<E.length;k+=1)T[k]=Lt(Tt(s,E,k));return p=new sn({props:{absoluteTop:s[0].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),p.$on("intersection",s[16]),{c(){e=S("div"),w&&w.c(),n=L(),t=S("div"),O(l.$$.fragment),o=L(),O(r.$$.fragment),a=L(),O(i.$$.fragment),c=L(),R&&R.c(),u=L();for(let k=0;k<T.length;k+=1)T[k].c();f=L(),O(p.$$.fragment),this.h()},l(k){e=C(k,"DIV",{class:!0});var z=A(e);w&&w.l(z),n=N(z),t=C(z,"DIV",{class:!0});var V=A(t);B(l.$$.fragment,V),o=N(V),B(r.$$.fragment,V),a=N(V),B(i.$$.fragment,V),V.forEach(m),c=N(z),R&&R.l(z),u=N(z);for(let H=0;H<T.length;H+=1)T[H].l(z);f=N(z),B(p.$$.fragment,z),z.forEach(m),this.h()},h(){d(t,"class","screen snap-container horizontal current svelte-2epggd"),Ee(t,"hint",!s[9]),Ne(t,"top",s[5]),d(e,"class","root screen snap-container svelte-2epggd")},m(k,z){F(k,e,z),w&&w.m(e,null),g(e,n),g(e,t),M(l,t,null),g(t,o),M(r,t,null),g(t,a),M(i,t,null),s[15](t),g(e,c),R&&R.m(e,null),g(e,u);for(let V=0;V<T.length;V+=1)T[V]&&T[V].m(e,null);g(e,f),M(p,e,null),s[17](e),$=!0,_||(h=ee(e,"scroll",s[12]),_=!0)},p(k,[z]){k[7]?w?(w.p(k,z),z&128&&v(w,1)):(w=Dt(k),w.c(),v(w,1),w.m(e,n)):w&&(_e(),y(w,1,1,()=>{w=null}),de());const V={};z&256&&(V.post=k[8]),l.$set(V);const H={};z&256&&(H.post=k[8]),r.$set(H);const b={};if(z&33554432&&(b.$$scope={dirty:z,ctx:k}),i.$set(b),(!$||z&512)&&Ee(t,"hint",!k[9]),z&32&&Ne(t,"top",k[5]),k[6]?R?(R.p(k,z),z&64&&v(R,1)):(R=Pt(k),R.c(),v(R,1),R.m(e,u)):R&&(_e(),y(R,1,1,()=>{R=null}),de()),z&1){E=Ce({length:k[0].posts.length});let j;for(j=0;j<E.length;j+=1){const I=Tt(k,E,j);T[j]?T[j].p(I,z):(T[j]=Lt(I),T[j].c(),T[j].m(e,f))}for(;j<T.length;j+=1)T[j].d(1);T.length=E.length}const D={};z&1&&(D.absoluteTop=k[0].posts.length*100+"vh"),p.$set(D)},i(k){$||(v(w),v(l.$$.fragment,k),v(r.$$.fragment,k),v(i.$$.fragment,k),v(R),v(p.$$.fragment,k),$=!0)},o(k){y(w),y(l.$$.fragment,k),y(r.$$.fragment,k),y(i.$$.fragment,k),y(R),y(p.$$.fragment,k),$=!1},d(k){k&&m(e),w&&w.d(),q(l),q(r),q(i),s[15](null),R&&R.d(),Qe(T,k),q(p),s[17](null),_=!1,h()}}}function xs(s,e,n){let t,l,o,r,a,i,c,u,f;fe(s,It,D=>n(9,c=D)),fe(s,nn,D=>n(18,u=D)),fe(s,Ke,D=>n(0,f=D));const p=Be();let{index:$}=e,_,h;const w=()=>{_.scrollTo({left:0,top:_.clientHeight*($-1),behavior:"smooth"})},R=()=>{_.scrollTo({left:0,top:_.clientHeight*($+1),behavior:"smooth"})},E=()=>{u&&R()},T=D=>{requestAnimationFrame(()=>{const j=D.target,I=j.getBoundingClientRect().height,Y=j.scrollTop/I,P=Math.round(Y);P!=$&&(n(13,$=P),h&&n(2,h.scrollLeft=0,h))})},k=D=>{D.key==="d"&&(D.preventDefault(),D.stopPropagation(),h.scrollLeft===0?h.scrollBy({left:_.clientWidth,top:0,behavior:"smooth"}):h.scrollBy({left:-_.clientWidth,top:0,behavior:"smooth"})),D.key==="ArrowUp"&&(D.preventDefault(),D.stopPropagation(),w()),D.key==="ArrowDown"&&(D.preventDefault(),D.stopPropagation(),R())};nt(()=>{h&&(h.scrollIntoView(!0),n(2,h.scrollLeft=0,h)),document.addEventListener("keydown",k)}),st(()=>{hn(It,c=!0,c),document.removeEventListener("keydown",k)});const z=()=>h.scrollBy({left:_.clientWidth,top:0,behavior:"smooth"});function V(D){me[D?"unshift":"push"](()=>{h=D,n(2,h)})}const H=()=>p("endreached");function b(D){me[D?"unshift":"push"](()=>{_=D,n(1,_)})}return s.$$set=D=>{"index"in D&&n(13,$=D.index)},s.$$.update=()=>{s.$$.dirty&8193&&n(8,t=f.posts[$]),s.$$.dirty&8193&&n(7,l=$>0?f.posts[$-1]:void 0),s.$$.dirty&8193&&n(6,o=$<f.posts.length-1?f.posts[$+1]:void 0),s.$$.dirty&8192&&n(5,r=`${$*100}vh`),s.$$.dirty&8192&&n(4,a=`${($-1)*100}vh`),s.$$.dirty&8192&&n(3,i=`${($+1)*100}vh`)},[f,_,h,i,a,r,o,l,t,c,p,E,T,$,z,V,H,b]}class el extends ce{constructor(e){super(),ue(this,e,xs,Xs,ae,{index:13})}}function tl(s){let e;return{c(){e=S("i"),this.h()},l(n){e=C(n,"I",{class:!0}),A(e).forEach(m),this.h()},h(){d(e,"class","codicon codicon-close")},m(n,t){F(n,e,t)},p:Z,d(n){n&&m(e)}}}function nl(s){let e,n,t,l,o;function r(i){s[2](i)}let a={};return s[0]!==void 0&&(a.index=s[0]),e=new el({props:a}),me.push(()=>Le(e,"index",r)),e.$on("endreached",s[3]),l=new Qt({props:{class:"button-close",$$slots:{default:[tl]},$$scope:{ctx:s}}}),l.$on("click",s[1]),{c(){O(e.$$.fragment),t=L(),O(l.$$.fragment)},l(i){B(e.$$.fragment,i),t=N(i),B(l.$$.fragment,i)},m(i,c){M(e,i,c),F(i,t,c),M(l,i,c),o=!0},p(i,c){const u={};!n&&c&1&&(n=!0,u.index=i[0],Pe(()=>n=!1)),e.$set(u);const f={};c&128&&(f.$$scope={dirty:c,ctx:i}),l.$set(f)},i(i){o||(v(e.$$.fragment,i),v(l.$$.fragment,i),o=!0)},o(i){y(e.$$.fragment,i),y(l.$$.fragment,i),o=!1},d(i){i&&m(t),q(e,i),q(l,i)}}}function sl(s){let e,n;return e=new vs({props:{$$slots:{default:[nl]},$$scope:{ctx:s}}}),e.$on("close",s[1]),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,[l]){const o={};l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ll(s,e,n){let{index:t}=e;const l=Be(),o=()=>{l("close",t)},r=u=>{u.key==="f"&&(u.preventDefault(),u.stopPropagation(),o())},a=()=>{var u,f;(((u=history.state)==null?void 0:u.fullscreen)===void 0||((f=history.state)==null?void 0:f.fullscreen)===!1)&&o()};nt(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),st(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(u){t=u,n(0,t)}function c(u){Re.call(this,s,u)}return s.$$set=u=>{"index"in u&&n(0,t=u.index)},[t,o,i,c]}class rl extends ce{constructor(e){super(),ue(this,e,ll,sl,ae,{index:0})}}function Nt(s){let e,n=s[0].type==="video"?"▶":"GIF",t;return{c(){e=S("span"),t=te(n),this.h()},l(l){e=C(l,"SPAN",{class:!0});var o=A(e);t=ne(o,n),o.forEach(m),this.h()},h(){d(e,"class","type svelte-rfj0jo")},m(l,o){F(l,e,o),g(e,t)},p(l,o){o&1&&n!==(n=l[0].type==="video"?"▶":"GIF")&&ye(t,n)},d(l){l&&m(e)}}}function ol(s){let e,n,t,l,o,r,a=Ve(s[0].score)+"",i,c,u,f,p=s[0].type!=="image"&&Nt(s);return{c(){e=S("div"),n=S("img"),l=L(),p&&p.c(),o=L(),r=S("span"),i=te(a),this.h()},l($){e=C($,"DIV",{id:!0,class:!0,style:!0});var _=A(e);n=C(_,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),l=N(_),p&&p.l(_),o=N(_),r=C(_,"SPAN",{class:!0});var h=A(r);i=ne(h,a),h.forEach(m),_.forEach(m),this.h()},h(){Se(n.src,t=s[1])||d(n,"src",t),d(n,"alt","post"),d(n,"class","post-media svelte-rfj0jo"),d(n,"tabindex","-1"),d(n,"loading","lazy"),d(r,"class","score svelte-rfj0jo"),d(e,"id",c=ct(s[0].id)),d(e,"class","post svelte-rfj0jo"),Ne(e,"grid-row","span "+s[2]),Ee(e,"open",open)},m($,_){F($,e,_),g(e,n),g(e,l),p&&p.m(e,null),g(e,o),g(e,r),g(r,i),u||(f=[ee(e,"click",s[3]),ee(e,"keydown",s[4])],u=!0)},p($,[_]){_&2&&!Se(n.src,t=$[1])&&d(n,"src",t),$[0].type!=="image"?p?p.p($,_):(p=Nt($),p.c(),p.m(e,o)):p&&(p.d(1),p=null),_&1&&a!==(a=Ve($[0].score)+"")&&ye(i,a),_&1&&c!==(c=ct($[0].id))&&d(e,"id",c),_&0&&Ee(e,"open",open)},i:Z,o:Z,d($){$&&m(e),p&&p.d(),u=!1,Ue(f)}}}let Rt=5;function il(s,e,n){let t,{post:l}=e,o=1/3,r=Ln(l.width,l.height),a=Math.max(Math.min(Math.round(Rt/r),Rt/o),2);const i=f=>f.endsWith(".jpg")||f.endsWith(".jpeg")||f.endsWith(".png")||f.endsWith(".webp");function c(f){Re.call(this,s,f)}const u=f=>{var p;(Mn(f)||f.key==="f")&&((p=f.target)==null||p.click())};return s.$$set=f=>{"post"in f&&n(0,l=f.post)},s.$$.update=()=>{s.$$.dirty&1&&n(1,t=i(l.sample_url)?l.sample_url:l.preview_url)},[l,t,a,c,u]}class al extends ce{constructor(e){super(),ue(this,e,il,ol,ae,{post:0})}}function Ft(s,e,n){const t=s.slice();t[2]=e[n];const l=t[2].host.replace("www.","");t[3]=l;const o=t[1][t[3]]??t[1].default;t[4]=o[0],t[5]=o[1];const r=t[3].includes("api-cdn")?"File":t[3];return t[6]=r,t}function At(s){let e,n,t=s[6]+"",l,o,r,a;return{c(){e=S("li"),n=S("a"),l=te(t),a=L(),this.h()},l(i){e=C(i,"LI",{});var c=A(e);n=C(c,"A",{href:!0,class:!0,style:!0});var u=A(n);l=ne(u,t),u.forEach(m),a=N(c),c.forEach(m),this.h()},h(){d(n,"href",o=s[2].toString()),d(n,"class",r="codicon codicon-link-external "+s[5]+" svelte-f59j30"),Ne(n,"background-color",s[4]),Ne(n,"color",s[5])},m(i,c){F(i,e,c),g(e,n),g(n,l),g(e,a)},p(i,c){c&1&&t!==(t=i[6]+"")&&ye(l,t),c&1&&o!==(o=i[2].toString())&&d(n,"href",o),c&1&&r!==(r="codicon codicon-link-external "+i[5]+" svelte-f59j30")&&d(n,"class",r),c&1&&Ne(n,"background-color",i[4]),c&1&&Ne(n,"color",i[5])},d(i){i&&m(e)}}}function cl(s){let e,n=Ce(s[0]),t=[];for(let l=0;l<n.length;l+=1)t[l]=At(Ft(s,n,l));return{c(){e=S("ol");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=C(l,"OL",{class:!0});var o=A(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){d(e,"class","svelte-f59j30")},m(l,o){F(l,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(l,[o]){if(o&3){n=Ce(l[0]);let r;for(r=0;r<n.length;r+=1){const a=Ft(l,n,r);t[r]?t[r].p(a,o):(t[r]=At(a),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:Z,o:Z,d(l){l&&m(e),Qe(t,l)}}}function ul(s,e,n){let{links:t}=e;const l={"kurosearch.com":["crimson","white"],"rule34.xxx":["#aae5a4","black"],"newgrounds.com":["#fda238","black"],"twitter.com":["rgb(29, 155, 240)","white"],"x.com":["rgb(29, 155, 240)","white"],"pornhub.com":["#f90","black"],"zone-archive.com":["#59396A","white"],"subscribestar.adult":["#ff4081","white"],"redgifs.com":["#E5194D","white"],"deviantart.com":["#00c787","black"],default:["var(--background-2)","white"]};return s.$$set=o=>{"links"in o&&n(0,t=o.links)},[t,l]}class fl extends ce{constructor(e){super(),ue(this,e,ul,cl,ae,{links:0})}}function jt(s){let e,n=Ve(s[0].comment_count)+"",t,l,o;return{c(){e=S("button"),t=te(n),this.h()},l(r){e=C(r,"BUTTON",{type:!0,class:!0});var a=A(e);t=ne(a,n),a.forEach(m),this.h()},h(){d(e,"type","button"),d(e,"class","codicon codicon-comment svelte-nhpj3u"),Ee(e,"active",s[1]==="comments")},m(r,a){F(r,e,a),g(e,t),l||(o=ee(e,"click",s[5]),l=!0)},p(r,a){a&1&&n!==(n=Ve(r[0].comment_count)+"")&&ye(t,n),a&2&&Ee(e,"active",r[1]==="comments")},d(r){r&&m(e),l=!1,o()}}}function pl(s){let e,n,t,l,o="•",r,a,i,c,u,f,p=Ve(s[2])+"",$,_,h,w,R=Ve(s[0].tags.length)+"",E,T,k,z;n=new Zt({props:{value:s[0].change}}),a=new Yt({props:{value:s[0].score}});let V=s[0].comment_count&&jt(s);return{c(){e=S("div"),O(n.$$.fragment),t=L(),l=S("span"),l.textContent=o,r=L(),O(a.$$.fragment),i=L(),c=S("span"),u=L(),f=S("button"),$=te(p),_=L(),V&&V.c(),h=L(),w=S("button"),E=te(R),this.h()},l(H){e=C(H,"DIV",{class:!0});var b=A(e);B(n.$$.fragment,b),t=N(b),l=C(b,"SPAN",{"data-svelte-h":!0}),pe(l)!=="svelte-7hh8jk"&&(l.textContent=o),r=N(b),B(a.$$.fragment,b),i=N(b),c=C(b,"SPAN",{class:!0}),A(c).forEach(m),u=N(b),f=C(b,"BUTTON",{type:!0,class:!0});var D=A(f);$=ne(D,p),D.forEach(m),_=N(b),V&&V.l(b),h=N(b),w=C(b,"BUTTON",{type:!0,class:!0});var j=A(w);E=ne(j,R),j.forEach(m),b.forEach(m),this.h()},h(){d(c,"class","divider svelte-nhpj3u"),d(f,"type","button"),d(f,"class","codicon codicon-link svelte-nhpj3u"),Ee(f,"active",s[1]==="links"),d(w,"type","button"),d(w,"class","codicon codicon-tag svelte-nhpj3u"),Ee(w,"active",s[1]==="tags"),d(e,"class","summary svelte-nhpj3u")},m(H,b){F(H,e,b),M(n,e,null),g(e,t),g(e,l),g(e,r),M(a,e,null),g(e,i),g(e,c),g(e,u),g(e,f),g(f,$),g(e,_),V&&V.m(e,null),g(e,h),g(e,w),g(w,E),T=!0,k||(z=[ee(f,"click",s[4]),ee(w,"click",s[6])],k=!0)},p(H,[b]){const D={};b&1&&(D.value=H[0].change),n.$set(D);const j={};b&1&&(j.value=H[0].score),a.$set(j),(!T||b&4)&&p!==(p=Ve(H[2])+"")&&ye($,p),(!T||b&2)&&Ee(f,"active",H[1]==="links"),H[0].comment_count?V?V.p(H,b):(V=jt(H),V.c(),V.m(e,h)):V&&(V.d(1),V=null),(!T||b&1)&&R!==(R=Ve(H[0].tags.length)+"")&&ye(E,R),(!T||b&2)&&Ee(w,"active",H[1]==="tags")},i(H){T||(v(n.$$.fragment,H),v(a.$$.fragment,H),T=!0)},o(H){y(n.$$.fragment,H),y(a.$$.fragment,H),T=!1},d(H){H&&m(e),q(n),q(a),V&&V.d(),k=!1,Ue(z)}}}function _l(s,e,n){const t=Be();let{post:l}=e,{active:o}=e,{links:r}=e;const a=()=>t("links"),i=()=>t("comments"),c=()=>t("tags");return s.$$set=u=>{"post"in u&&n(0,l=u.post),"active"in u&&n(1,o=u.active),"links"in u&&n(2,r=u.links)},[l,o,r,t,a,i,c]}class dl extends ce{constructor(e){super(),ue(this,e,_l,pl,ae,{post:0,active:1,links:2})}}function gl(s){let e,n='<i class="codicon codicon-screen-full"></i>',t,l;return{c(){e=S("button"),e.innerHTML=n,this.h()},l(o){e=C(o,"BUTTON",{type:!0,title:!0,class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-hnv5zq"&&(e.innerHTML=n),this.h()},h(){d(e,"type","button"),d(e,"title","Enter Fullscreen mode"),d(e,"class","svelte-txn4jo")},m(o,r){F(o,e,r),t||(l=ee(e,"click",s[0]),t=!0)},p:Z,i:Z,o:Z,d(o){o&&m(e),t=!1,l()}}}function ml(s){function e(n){Re.call(this,s,n)}return[e]}class hl extends ce{constructor(e){super(),ue(this,e,ml,gl,ae,{})}}function $l(s){const e=s.slice(),n=tn(e[1].file_url,e[1].sample_url,e[1].preview_url);return e[13]=n,e}function vl(s){let e,n;return e=new Nn({props:{post:s[1]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function bl(s){let e,n;return e=new Rn({props:{src:s[13].animated,poster:s[13].static,width:s[1].width,height:s[1].height,loop:s[3]||mt(s[1].tags)}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.src=t[13].animated),l&2&&(o.poster=t[13].static),l&2&&(o.width=t[1].width),l&2&&(o.height=t[1].height),l&10&&(o.loop=t[3]||mt(t[1].tags)),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function kl(s){let e,n;return e=new Fn({props:{post:s[1]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function wl(s){let e,n;return e=new fl({props:{links:s[6]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p:Z,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function yl(s){let e,n;return e=new xt({props:{post:s[1]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function El(s){let e,n;return e=new en({props:{tags:s[1].tags}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.tags=t[1].tags),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Sl(s){let e,n,t,l,o,r,a,i,c,u,f,p,$,_,h,w;const R=[kl,bl,vl],E=[];function T(b,D){return b[1].type==="image"?0:b[1].type==="video"?1:2}function k(b,D){return D===1?$l(b):b}t=T(s),l=E[t]=R[t](k(s,t)),r=new hl({}),r.$on("click",s[7]),c=new dl({props:{active:s[0],post:s[1],links:s[6].length}}),c.$on("tags",s[8]),c.$on("comments",s[9]),c.$on("links",s[10]);const z=[El,yl,wl],V=[];function H(b,D){return b[0]==="tags"?0:b[0]==="comments"?1:b[0]==="links"?2:-1}return~(f=H(s))&&(p=V[f]=z[f](s)),{c(){e=S("li"),n=S("div"),l.c(),o=L(),O(r.$$.fragment),a=L(),i=S("div"),O(c.$$.fragment),u=L(),p&&p.c(),this.h()},l(b){e=C(b,"LI",{id:!0,class:!0});var D=A(e);n=C(D,"DIV",{});var j=A(n);l.l(j),j.forEach(m),o=N(D),B(r.$$.fragment,D),a=N(D),i=C(D,"DIV",{class:!0});var I=A(i);B(c.$$.fragment,I),u=N(I),p&&p.l(I),I.forEach(m),D.forEach(m),this.h()},h(){d(i,"class","details svelte-162qa8v"),d(e,"id",$=ct(s[1].id)),d(e,"class","post svelte-162qa8v"),Ee(e,"openTab",s[0])},m(b,D){F(b,e,D),g(e,n),E[t].m(n,null),g(e,o),M(r,e,null),g(e,a),g(e,i),M(c,i,null),g(i,u),~f&&V[f].m(i,null),_=!0,h||(w=[ee(e,"keydown",s[11]),ee(e,"click",s[12])],h=!0)},p(b,[D]){let j=t;t=T(b),t===j?E[t].p(k(b,t),D):(_e(),y(E[j],1,1,()=>{E[j]=null}),de(),l=E[t],l?l.p(k(b,t),D):(l=E[t]=R[t](k(b,t)),l.c()),v(l,1),l.m(n,null));const I={};D&1&&(I.active=b[0]),D&2&&(I.post=b[1]),c.$set(I);let Y=f;f=H(b),f===Y?~f&&V[f].p(b,D):(p&&(_e(),y(V[Y],1,1,()=>{V[Y]=null}),de()),~f?(p=V[f],p?p.p(b,D):(p=V[f]=z[f](b),p.c()),v(p,1),p.m(i,null)):p=null),(!_||D&2&&$!==($=ct(b[1].id)))&&d(e,"id",$),(!_||D&1)&&Ee(e,"openTab",b[0])},i(b){_||(v(l),v(r.$$.fragment,b),v(c.$$.fragment,b),v(p),_=!0)},o(b){y(l),y(r.$$.fragment,b),y(c.$$.fragment,b),y(p),_=!1},d(b){b&&m(e),E[t].d(),q(r),q(c),~f&&V[f].d(),h=!1,Ue(w)}}}function Cl(s,e,n){let t,l;fe(s,Vn,w=>n(2,t=w)),fe(s,qn,w=>n(3,l=w));const o=Be();let{post:r}=e,{openTab:a=void 0}=e;const i=w=>{n(0,a=a===w?void 0:w)},c=[new URL(`https://kurosearch.com/post?id=${r.id}&src=${encodeURIComponent(r.file_url)}`),new URL(`https://rule34.xxx/index.php?page=post&s=view&id=${r.id}`),new URL(r.file_url),...r.source?r.source.split(" ").filter(w=>Wn(w)).map(w=>new URL(w)):[]],u=()=>o("fullscreen"),f=()=>i("tags"),p=()=>i("comments"),$=()=>i("links"),_=w=>{w.key==="f"&&o("fullscreen")},h=()=>{t&&i("tags")};return s.$$set=w=>{"post"in w&&n(1,r=w.post),"openTab"in w&&n(0,a=w.openTab)},[a,r,t,l,o,i,c,u,f,p,$,_,h]}class Il extends ce{constructor(e){super(),ue(this,e,Cl,Sl,ae,{post:1,openTab:0})}}function Vt(s,e,n){const t=s.slice();return t[7]=e[n],t[9]=n,t}function Ot(s,e,n){const t=s.slice();return t[7]=e[n],t[9]=n,t}function Tl(s){let e,n,t=Ce(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Bt(Vt(s,t,r));const o=r=>y(l[r],1,1,()=>{l[r]=null});return{c(){e=S("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=C(r,"OL",{class:!0,style:!0});var a=A(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(m),this.h()},h(){d(e,"class","multi-column svelte-1nfzeed"),Ne(e,"--nr-columns",s[2])},m(r,a){F(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=Ce(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Vt(r,t,i);l[i]?(l[i].p(c,a),v(l[i],1)):(l[i]=Bt(c),l[i].c(),v(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);de()}(!n||a&4)&&Ne(e,"--nr-columns",r[2])},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)y(l[a]);n=!1},d(r){r&&m(e),Qe(l,r)}}}function Dl(s){let e,n,t=Ce(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Mt(Ot(s,t,r));const o=r=>y(l[r],1,1,()=>{l[r]=null});return{c(){e=S("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=C(r,"OL",{class:!0});var a=A(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(m),this.h()},h(){d(e,"class","single-column svelte-1nfzeed")},m(r,a){F(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=Ce(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Ot(r,t,i);l[i]?(l[i].p(c,a),v(l[i],1)):(l[i]=Mt(c),l[i].c(),v(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);de()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)y(l[a]);n=!1},d(r){r&&m(e),Qe(l,r)}}}function Bt(s){let e,n;function t(){return s[5](s[9])}return e=new al({props:{post:s[7]}}),e.$on("click",t),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,o){M(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[7]),e.$set(r)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Mt(s){let e,n;function t(){return s[4](s[9])}return e=new Il({props:{post:s[7]}}),e.$on("fullscreen",t),{c(){O(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,o){M(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[7]),e.$set(r)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function qt(s){let e,n;return e=new rl({props:{index:s[0]}}),e.$on("close",s[3]),e.$on("endreached",s[6]),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.index=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Pl(s){let e,n,t,l,o;const r=[Dl,Tl],a=[];function i(u,f){return u[2]==="1"?0:1}e=i(s),n=a[e]=r[e](s);let c=s[0]!==void 0&&qt(s);return{c(){n.c(),t=L(),c&&c.c(),l=Oe()},l(u){n.l(u),t=N(u),c&&c.l(u),l=Oe()},m(u,f){a[e].m(u,f),F(u,t,f),c&&c.m(u,f),F(u,l,f),o=!0},p(u,[f]){let p=e;e=i(u),e===p?a[e].p(u,f):(_e(),y(a[p],1,1,()=>{a[p]=null}),de(),n=a[e],n?n.p(u,f):(n=a[e]=r[e](u),n.c()),v(n,1),n.m(t.parentNode,t)),u[0]!==void 0?c?(c.p(u,f),f&1&&v(c,1)):(c=qt(u),c.c(),v(c,1),c.m(l.parentNode,l)):c&&(_e(),y(c,1,1,()=>{c=null}),de())},i(u){o||(v(n),v(c),o=!0)},o(u){y(n),y(c),o=!1},d(u){u&&(m(t),m(l)),a[e].d(u),c&&c.d(u)}}}function Ll(s,e,n){let t,l;fe(s,Ke,u=>n(1,t=u)),fe(s,Wt,u=>n(2,l=u));let o;const r=u=>{var $;const f=t.posts[u.detail],p=ct(f.id);($=document.getElementById(p))==null||$.scrollIntoView(),n(0,o=void 0)},a=u=>{n(0,o=u)},i=u=>{n(0,o=u)};function c(u){Re.call(this,s,u)}return s.$$.update=()=>{var u;s.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(u=history.state)!=null&&u.fullscreen&&history.back())},[o,t,l,r,a,i,c]}class Nl extends ce{constructor(e){super(),ue(this,e,Ll,Pl,ae,{})}}function Rl(s){let e;return{c(){e=te("Reset Filter")},l(n){e=ne(n,"Reset Filter")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Fl(s){let e;return{c(){e=te("Reset Tags")},l(n){e=ne(n,"Reset Tags")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Al(s){let e,n,t,l,o,r="We couldn't find any posts matching your tags. Sorry...",a,i,c,u,f,p;return c=new ze({props:{type:"secondary",title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[Rl]},$$scope:{ctx:s}}}),c.$on("click",s[1]),f=new ze({props:{type:"secondary",title:"Tag combinations that are too specific will not yield results.",$$slots:{default:[Fl]},$$scope:{ctx:s}}}),f.$on("click",s[2]),{c(){e=S("section"),n=S("img"),l=L(),o=S("p"),o.textContent=r,a=L(),i=S("div"),O(c.$$.fragment),u=L(),O(f.$$.fragment),this.h()},l($){e=C($,"SECTION",{class:!0});var _=A(e);n=C(_,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),l=N(_),o=C(_,"P",{"data-svelte-h":!0}),pe(o)!=="svelte-1utxj3w"&&(o.textContent=r),a=N(_),i=C(_,"DIV",{class:!0});var h=A(i);B(c.$$.fragment,h),u=N(h),B(f.$$.fragment,h),h.forEach(m),_.forEach(m),this.h()},h(){Se(n.src,t=Jt+"/assets/lynxy-chibi-not-found.webp")||d(n,"src",t),d(n,"alt","Nothing here..."),d(n,"width","1231"),d(n,"height","864"),d(n,"class","svelte-18qympg"),d(i,"class","svelte-18qympg"),d(e,"class","svelte-18qympg")},m($,_){F($,e,_),g(e,n),g(e,l),g(e,o),g(e,a),g(e,i),M(c,i,null),g(i,u),M(f,i,null),p=!0},p($,[_]){const h={};_&8&&(h.$$scope={dirty:_,ctx:$}),c.$set(h);const w={};_&8&&(w.$$scope={dirty:_,ctx:$}),f.$set(w)},i($){p||(v(c.$$.fragment,$),v(f.$$.fragment,$),p=!0)},o($){y(c.$$.fragment,$),y(f.$$.fragment,$),p=!1},d($){$&&m(e),q(c),q(f)}}}function jl(s){const e=Be();return[e,()=>{Je.reset(),He.reset(),e("sortfilterupdate")},()=>{et.reset(),at.reset()}]}class Vl extends ce{constructor(e){super(),ue(this,e,jl,Al,ae,{})}}function zt(s,e,n){const t=s.slice();return t[5]=e[n][0],t[6]=e[n][1],t}function Ut(s){let e,n,t,l=!1,o,r,a,i=s[6]+"",c,u,f,p,$;return f=$n(s[4][0]),{c(){e=S("input"),r=L(),a=S("label"),c=te(i),this.h()},l(_){e=C(_,"INPUT",{type:!0,name:!0,id:!0,class:!0}),r=N(_),a=C(_,"LABEL",{for:!0,class:!0});var h=A(a);c=ne(h,i),h.forEach(m),this.h()},h(){d(e,"type","radio"),d(e,"name",n="group-"+s[1]),e.__value=t=s[5],Ge(e,e.__value),d(e,"id",o=s[1]+"-"+s[5]),d(e,"class","svelte-16oxivo"),d(a,"for",u=s[1]+"-"+s[5]),d(a,"class","svelte-16oxivo"),f.p(e)},m(_,h){F(_,e,h),e.checked=e.__value===s[0],F(_,r,h),F(_,a,h),g(a,c),p||($=ee(e,"change",s[3]),p=!0)},p(_,h){h&2&&n!==(n="group-"+_[1])&&d(e,"name",n),h&4&&t!==(t=_[5])&&(e.__value=t,Ge(e,e.__value),l=!0),h&6&&o!==(o=_[1]+"-"+_[5])&&d(e,"id",o),(l||h&5)&&(e.checked=e.__value===_[0]),h&4&&i!==(i=_[6]+"")&&ye(c,i),h&6&&u!==(u=_[1]+"-"+_[5])&&d(a,"for",u)},d(_){_&&(m(e),m(r),m(a)),f.r(),p=!1,$()}}}function Ol(s){let e,n,t=Ce(Object.entries(s[2])),l=[];for(let o=0;o<t.length;o+=1)l[o]=Ut(zt(s,t,o));return{c(){e=S("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=C(o,"DIV",{id:!0,role:!0,class:!0});var r=A(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){d(e,"id",n="group-"+s[1]),d(e,"role","radiogroup"),d(e,"class","svelte-16oxivo")},m(o,r){F(o,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(o,[r]){if(r&7){t=Ce(Object.entries(o[2]));let a;for(a=0;a<t.length;a+=1){const i=zt(o,t,a);l[a]?l[a].p(i,r):(l[a]=Ut(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}r&2&&n!==(n="group-"+o[1])&&d(e,"id",n)},i:Z,o:Z,d(o){o&&m(e),Qe(l,o)}}}function Bl(s,e,n){let{name:t}=e,{value:l}=e,{options:o}=e;const r=[[]];function a(){l=this.__value,n(0,l)}return s.$$set=i=>{"name"in i&&n(1,t=i.name),"value"in i&&n(0,l=i.value),"options"in i&&n(2,o=i.options)},[l,t,o,a,r]}class Ml extends ce{constructor(e){super(),ue(this,e,Bl,Ol,ae,{name:1,value:0,options:2})}}const ql=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),on=Object.freeze({">=":"≥","<=":"≤"}),an=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),zl=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),Ul=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),Hl=(s,e)=>s===0&&e===">="?void 0:`Score ${on[e]} ${Ve(s)}`,Gl=s=>s==="all"?void 0:an[s],Wl=(s,e,n)=>{let t=Gl(s),l=Hl(e,n);return[t,l].filter(o=>o!==void 0).join(",")||"All"},Kl=(s,e)=>ql[s][e];function Jl(s){let e;return{c(){e=te("Done")},l(n){e=ne(n,"Done")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Ql(s){let e;return{c(){e=te("Reset")},l(n){e=ne(n,"Reset")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Yl(s){let e,n,t="Sorting and Filtering",l,o,r,a="Sorting",i,c,u,f,p,$,_,h,w,R,E="Filtering by Score",T,k,z,V,H,b,D,j,I,Y,P="Rating",U,W,ie,J,K,se,x,he;function Ie(Q){s[4](Q)}let Me={options:Ul};s[1].direction!==void 0&&(Me.value=s[1].direction),u=new Sn({props:Me}),me.push(()=>Le(u,"value",Ie));function Te(Q){s[5](Q)}let lt={options:zl};s[1].property!==void 0&&(lt.value=s[1].property),$=new ts({props:lt}),me.push(()=>Le($,"value",Te));function rt(Q){s[6](Q)}let Fe={options:on};s[2].scoreComparator!==void 0&&(Fe.value=s[2].scoreComparator),z=new ns({props:Fe}),me.push(()=>Le(z,"value",rt));function ot(Q){s[7](Q)}let Ye={min:0,max:1e4,step:1};s[2].scoreValue!==void 0&&(Ye.value=s[2].scoreValue),b=new On({props:Ye}),me.push(()=>Le(b,"value",ot));function De(Q){s[8](Q)}let We={name:"rating",options:an};return s[2].rating!==void 0&&(We.value=s[2].rating),W=new Ml({props:We}),me.push(()=>Le(W,"value",De)),K=new ze({props:{title:"Return to searching",$$slots:{default:[Jl]},$$scope:{ctx:s}}}),K.$on("click",s[9]),x=new ze({props:{title:"Reset sort and filter",type:"secondary",$$slots:{default:[Ql]},$$scope:{ctx:s}}}),x.$on("click",s[3]),{c(){e=S("div"),n=S("h3"),n.textContent=t,l=L(),o=S("div"),r=S("b"),r.textContent=a,i=L(),c=S("div"),O(u.$$.fragment),p=L(),O($.$$.fragment),h=L(),w=S("div"),R=S("b"),R.textContent=E,T=L(),k=S("div"),O(z.$$.fragment),H=L(),O(b.$$.fragment),j=L(),I=S("div"),Y=S("b"),Y.textContent=P,U=L(),O(W.$$.fragment),J=L(),O(K.$$.fragment),se=L(),O(x.$$.fragment),this.h()},l(Q){e=C(Q,"DIV",{class:!0});var re=A(e);n=C(re,"H3",{"data-svelte-h":!0}),pe(n)!=="svelte-15zouq3"&&(n.textContent=t),l=N(re),o=C(re,"DIV",{});var Ae=A(o);r=C(Ae,"B",{class:!0,"data-svelte-h":!0}),pe(r)!=="svelte-ekzpgg"&&(r.textContent=a),i=N(Ae),c=C(Ae,"DIV",{class:!0});var $e=A(c);B(u.$$.fragment,$e),p=N($e),B($.$$.fragment,$e),$e.forEach(m),Ae.forEach(m),h=N(re),w=C(re,"DIV",{});var ve=A(w);R=C(ve,"B",{class:!0,"data-svelte-h":!0}),pe(R)!=="svelte-1flca3"&&(R.textContent=E),T=N(ve),k=C(ve,"DIV",{class:!0});var le=A(k);B(z.$$.fragment,le),H=N(le),B(b.$$.fragment,le),le.forEach(m),ve.forEach(m),j=N(re),I=C(re,"DIV",{});var be=A(I);Y=C(be,"B",{class:!0,"data-svelte-h":!0}),pe(Y)!=="svelte-1lwyn2b"&&(Y.textContent=P),U=N(be),B(W.$$.fragment,be),be.forEach(m),J=N(re),B(K.$$.fragment,re),se=N(re),B(x.$$.fragment,re),re.forEach(m),this.h()},h(){d(r,"class","svelte-fm5hcv"),d(c,"class","row svelte-fm5hcv"),d(R,"class","svelte-fm5hcv"),d(k,"class","row svelte-fm5hcv"),d(Y,"class","svelte-fm5hcv"),d(e,"class","container svelte-fm5hcv")},m(Q,re){F(Q,e,re),g(e,n),g(e,l),g(e,o),g(o,r),g(o,i),g(o,c),M(u,c,null),g(c,p),M($,c,null),g(e,h),g(e,w),g(w,R),g(w,T),g(w,k),M(z,k,null),g(k,H),M(b,k,null),g(e,j),g(e,I),g(I,Y),g(I,U),M(W,I,null),g(e,J),M(K,e,null),g(e,se),M(x,e,null),he=!0},p(Q,re){const Ae={};!f&&re&2&&(f=!0,Ae.value=Q[1].direction,Pe(()=>f=!1)),u.$set(Ae);const $e={};!_&&re&2&&(_=!0,$e.value=Q[1].property,Pe(()=>_=!1)),$.$set($e);const ve={};!V&&re&4&&(V=!0,ve.value=Q[2].scoreComparator,Pe(()=>V=!1)),z.$set(ve);const le={};!D&&re&4&&(D=!0,le.value=Q[2].scoreValue,Pe(()=>D=!1)),b.$set(le);const be={};!ie&&re&4&&(ie=!0,be.value=Q[2].rating,Pe(()=>ie=!1)),W.$set(be);const oe={};re&4096&&(oe.$$scope={dirty:re,ctx:Q}),K.$set(oe);const ut={};re&4096&&(ut.$$scope={dirty:re,ctx:Q}),x.$set(ut)},i(Q){he||(v(u.$$.fragment,Q),v($.$$.fragment,Q),v(z.$$.fragment,Q),v(b.$$.fragment,Q),v(W.$$.fragment,Q),v(K.$$.fragment,Q),v(x.$$.fragment,Q),he=!0)},o(Q){y(u.$$.fragment,Q),y($.$$.fragment,Q),y(z.$$.fragment,Q),y(b.$$.fragment,Q),y(W.$$.fragment,Q),y(K.$$.fragment,Q),y(x.$$.fragment,Q),he=!1},d(Q){Q&&m(e),q(u),q($),q(z),q(b),q(W),q(K),q(x)}}}function Zl(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[Yl]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.dialog=s[0]),e=new Gt({props:o}),me.push(()=>Le(e,"dialog",l)),e.$on("close",s[11]),{c(){O(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,[a]){const i={};a&4103&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],Pe(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function Xl(s,e,n){let t,l;fe(s,Je,h=>n(1,t=h)),fe(s,He,h=>n(2,l=h));let{dialog:o}=e;const r=()=>{Je.reset(),He.reset()};function a(h){s.$$.not_equal(t.direction,h)&&(t.direction=h,Je.set(t))}function i(h){s.$$.not_equal(t.property,h)&&(t.property=h,Je.set(t))}function c(h){s.$$.not_equal(l.scoreComparator,h)&&(l.scoreComparator=h,He.set(l))}function u(h){s.$$.not_equal(l.scoreValue,h)&&(l.scoreValue=h,He.set(l))}function f(h){s.$$.not_equal(l.rating,h)&&(l.rating=h,He.set(l))}const p=()=>o.close();function $(h){o=h,n(0,o)}function _(h){Re.call(this,s,h)}return s.$$set=h=>{"dialog"in h&&n(0,o=h.dialog)},[o,t,l,r,a,i,c,u,f,p,$,_]}class xl extends ce{constructor(e){super(),ue(this,e,Xl,Zl,ae,{dialog:0})}}function er(s){let e,n,t,l,o,r,a,i,c,u,f,p,$,_,h,w;function R(T){s[9](T)}let E={};return s[2]!==void 0&&(E.dialog=s[2]),p=new xl({props:E}),me.push(()=>Le(p,"dialog",R)),p.$on("close",s[10]),{c(){e=S("button"),n=S("i"),t=L(),l=S("span"),o=te(s[5]),r=L(),a=S("i"),i=L(),c=S("span"),u=te(s[4]),f=L(),O(p.$$.fragment),this.h()},l(T){e=C(T,"BUTTON",{type:!0,class:!0});var k=A(e);n=C(k,"I",{class:!0}),A(n).forEach(m),t=N(k),l=C(k,"SPAN",{class:!0});var z=A(l);o=ne(z,s[5]),z.forEach(m),r=N(k),a=C(k,"I",{class:!0}),A(a).forEach(m),i=N(k),c=C(k,"SPAN",{class:!0});var V=A(c);u=ne(V,s[4]),V.forEach(m),k.forEach(m),f=N(T),B(p.$$.fragment,T),this.h()},h(){d(n,"class","codicon codicon-filter svelte-3ooqm6"),d(l,"class","svelte-3ooqm6"),d(a,"class","codicon codicon-arrow-swap svelte-3ooqm6"),d(c,"class","svelte-3ooqm6"),d(e,"type","button"),d(e,"class","svelte-3ooqm6")},m(T,k){F(T,e,k),g(e,n),g(e,t),g(e,l),g(l,o),g(e,r),g(e,a),g(e,i),g(e,c),g(c,u),F(T,f,k),M(p,T,k),_=!0,h||(w=ee(e,"click",s[8]),h=!0)},p(T,[k]){(!_||k&32)&&ye(o,T[5]),(!_||k&16)&&ye(u,T[4]);const z={};!$&&k&4&&($=!0,z.dialog=T[2],Pe(()=>$=!1)),p.$set(z)},i(T){_||(v(p.$$.fragment,T),_=!0)},o(T){y(p.$$.fragment,T),_=!1},d(T){T&&(m(e),m(f)),q(p,T),h=!1,w()}}}function tr(s,e,n){let t,l,o,r;fe(s,Je,_=>n(0,o=_)),fe(s,He,_=>n(1,r=_));const a=Be(),i=(_,h)=>JSON.stringify(Object.assign({},_,h));let c,u="";const f=()=>{n(3,u=i(o,r)),c.showModal(),Kt("dialog")};function p(_){c=_,n(2,c)}const $=()=>{i(o,r)!==u&&a("sortfilterupdate")};return s.$$.update=()=>{s.$$.dirty&2&&n(5,t=Wl(r.rating,r.scoreValue,r.scoreComparator)),s.$$.dirty&1&&n(4,l=Kl(o.property,o.direction))},[o,r,c,u,l,t,a,i,f,p,$]}class nr extends ce{constructor(e){super(),ue(this,e,tr,er,ae,{})}}function sr(s){let e,n,t=Ve(s[1].postCount)+"",l,o,r,a,i;return a=new nr({}),a.$on("sortfilterupdate",s[2]),{c(){e=S("div"),n=S("span"),l=te(t),o=te(" posts"),r=L(),O(a.$$.fragment),this.h()},l(c){e=C(c,"DIV",{class:!0});var u=A(e);n=C(u,"SPAN",{class:!0});var f=A(n);l=ne(f,t),o=ne(f," posts"),f.forEach(m),r=N(u),B(a.$$.fragment,u),u.forEach(m),this.h()},h(){d(n,"class","svelte-1f1ky2c"),Ee(n,"loading",s[0]),d(e,"class","svelte-1f1ky2c")},m(c,u){F(c,e,u),g(e,n),g(n,l),g(n,o),g(e,r),M(a,e,null),i=!0},p(c,[u]){(!i||u&2)&&t!==(t=Ve(c[1].postCount)+"")&&ye(l,t),(!i||u&1)&&Ee(n,"loading",c[0])},i(c){i||(v(a.$$.fragment,c),i=!0)},o(c){y(a.$$.fragment,c),i=!1},d(c){c&&m(e),q(a)}}}function lr(s,e,n){let t;fe(s,Ke,r=>n(1,t=r));let{loading:l}=e;function o(r){Re.call(this,s,r)}return s.$$set=r=>{"loading"in r&&n(0,l=r.loading)},[l,t,o]}class rr extends ce{constructor(e){super(),ue(this,e,lr,sr,ae,{loading:0})}}const{document:_t}=bn;function or(s){let e;return{c(){e=te("Search")},l(n){e=ne(n,"Search")},m(n,t){F(n,e,t)},i:Z,o:Z,d(n){n&&m(e)}}}function ir(s){let e,n;return e=new dt({}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ar(s){let e,n,t,l;const o=[ir,or],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Oe()},l(i){n.l(i),t=Oe()},m(i,c){r[e].m(i,c),F(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(_e(),y(r[u],1,1,()=>{r[u]=null}),de(),n=r[e],n||(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){l||(v(n),l=!0)},o(i){y(n),l=!1},d(i){i&&m(t),r[e].d(i)}}}function cr(s){let e,n,t,l,o,r;const a=[pr,fr],i=[];function c(u,f){return u[3].postCount===0?0:1}return n=c(s),t=i[n]=a[n](s),o=new Zn({}),{c(){e=S("section"),t.c(),l=L(),O(o.$$.fragment),this.h()},l(u){e=C(u,"SECTION",{class:!0});var f=A(e);t.l(f),f.forEach(m),l=N(u),B(o.$$.fragment,u),this.h()},h(){d(e,"class","svelte-1lt7uko")},m(u,f){F(u,e,f),i[n].m(e,null),F(u,l,f),M(o,u,f),r=!0},p(u,f){let p=n;n=c(u),n===p?i[n].p(u,f):(_e(),y(i[p],1,1,()=>{i[p]=null}),de(),t=i[n],t?t.p(u,f):(t=i[n]=a[n](u),t.c()),v(t,1),t.m(e,null))},i(u){r||(v(t),v(o.$$.fragment,u),r=!0)},o(u){y(t),y(o.$$.fragment,u),r=!1},d(u){u&&(m(e),m(l)),i[n].d(),q(o,u)}}}function ur(s){let e,n;return e=new us({props:{error:s[1]}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.error=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function fr(s){let e,n,t,l,o,r;e=new Nl({}),e.$on("sortfilterupdate",s[9]),e.$on("endreached",s[10]);const a=[dr,_r],i=[];function c(u,f){return u[3].posts.length===u[3].postCount?0:1}return t=c(s),l=i[t]=a[t](s),{c(){O(e.$$.fragment),n=L(),l.c(),o=Oe()},l(u){B(e.$$.fragment,u),n=N(u),l.l(u),o=Oe()},m(u,f){M(e,u,f),F(u,n,f),i[t].m(u,f),F(u,o,f),r=!0},p(u,f){let p=t;t=c(u),t===p?i[t].p(u,f):(_e(),y(i[p],1,1,()=>{i[p]=null}),de(),l=i[t],l?l.p(u,f):(l=i[t]=a[t](u),l.c()),v(l,1),l.m(o.parentNode,o))},i(u){r||(v(e.$$.fragment,u),v(l),r=!0)},o(u){y(e.$$.fragment,u),y(l),r=!1},d(u){u&&(m(n),m(o)),q(e,u),i[t].d(u)}}}function pr(s){let e,n;return e=new Vl({}),e.$on("sortfilterupdate",s[9]),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p:Z,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function _r(s){let e,n,t,l;return e=new sn({props:{absoluteTop:void 0,rootMargin:1e3/Number(s[7])+"px"}}),e.$on("intersection",s[10]),t=new ze({props:{title:"Load more posts",$$slots:{default:[hr]},$$scope:{ctx:s}}}),t.$on("click",s[10]),{c(){O(e.$$.fragment),n=L(),O(t.$$.fragment)},l(o){B(e.$$.fragment,o),n=N(o),B(t.$$.fragment,o)},m(o,r){M(e,o,r),F(o,n,r),M(t,o,r),l=!0},p(o,r){const a={};r&128&&(a.rootMargin=1e3/Number(o[7])+"px"),e.$set(a);const i={};r&16777217&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){l||(v(e.$$.fragment,o),v(t.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),y(t.$$.fragment,o),l=!1},d(o){o&&m(n),q(e,o),q(t,o)}}}function dr(s){let e,n;return e=new gs({}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p:Z,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function gr(s){let e;return{c(){e=te("Load more")},l(n){e=ne(n,"Load more")},m(n,t){F(n,e,t)},i:Z,o:Z,d(n){n&&m(e)}}}function mr(s){let e,n;return e=new dt({}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function hr(s){let e,n,t,l;const o=[mr,gr],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Oe()},l(i){n.l(i),t=Oe()},m(i,c){r[e].m(i,c),F(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(_e(),y(r[u],1,1,()=>{r[u]=null}),de(),n=r[e],n||(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){l||(v(n),l=!0)},o(i){y(n),l=!1},d(i){i&&m(t),r[e].d(i)}}}function Ht(s){let e;return{c(){e=S("div"),this.h()},l(n){e=C(n,"DIV",{class:!0}),A(e).forEach(m),this.h()},h(){d(e,"class","svelte-1lt7uko")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function $r(s){let e,n,t,l,o,r,a,i,c,u,f,p,$,_,h,w,R,E,T,k,z,V;t=new kn({}),r=new yn({}),i=new Yn({props:{placeholder:"Search for tags",fetchSuggestions:s[8]}}),i.$on("pick",s[11]),u=new ze({props:{id:"btn-search",title:"Search with the tags above",$$slots:{default:[ar]},$$scope:{ctx:s}}}),u.$on("click",s[9]),p=new En({props:{tags:[...s[5],...s[4]]}}),p.$on("click",s[12]),p.$on("contextmenu",s[13]),p.$on("createSupertag",s[14]),_=new rr({props:{loading:s[0]}}),_.$on("sortfilterupdate",s[9]);const H=[ur,cr],b=[];function D(P,U){return P[1]?0:P[3].requested?1:-1}~(w=D(s))&&(R=b[w]=H[w](s));let j=s[0]&&Ht();function I(P){s[15](P)}let Y={tags:s[5]};return s[2]!==void 0&&(Y.dialog=s[2]),k=new is({props:Y}),me.push(()=>Le(k,"dialog",I)),k.$on("submit",s[16]),{c(){e=S("meta"),n=L(),O(t.$$.fragment),l=L(),o=S("section"),O(r.$$.fragment),a=L(),O(i.$$.fragment),c=L(),O(u.$$.fragment),f=L(),O(p.$$.fragment),$=L(),O(_.$$.fragment),h=L(),R&&R.c(),E=L(),j&&j.c(),T=L(),O(k.$$.fragment),this.h()},l(P){const U=vn("svelte-7jdp3v",_t.head);e=C(U,"META",{name:!0,content:!0}),U.forEach(m),n=N(P),B(t.$$.fragment,P),l=N(P),o=C(P,"SECTION",{id:!0,class:!0});var W=A(o);B(r.$$.fragment,W),a=N(W),B(i.$$.fragment,W),c=N(W),B(u.$$.fragment,W),f=N(W),B(p.$$.fragment,W),W.forEach(m),$=N(P),B(_.$$.fragment,P),h=N(P),R&&R.l(P),E=N(P),j&&j.l(P),T=N(P),B(k.$$.fragment,P),this.h()},h(){_t.title="kurosearch - Rule34 Hentai",d(e,"name","description"),d(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience."),d(o,"id","search"),d(o,"class","svelte-1lt7uko")},m(P,U){g(_t.head,e),F(P,n,U),M(t,P,U),F(P,l,U),F(P,o,U),M(r,o,null),g(o,a),M(i,o,null),g(o,c),M(u,o,null),g(o,f),M(p,o,null),F(P,$,U),M(_,P,U),F(P,h,U),~w&&b[w].m(P,U),F(P,E,U),j&&j.m(P,U),F(P,T,U),M(k,P,U),V=!0},p(P,[U]){const W={};U&16777217&&(W.$$scope={dirty:U,ctx:P}),u.$set(W);const ie={};U&48&&(ie.tags=[...P[5],...P[4]]),p.$set(ie);const J={};U&1&&(J.loading=P[0]),_.$set(J);let K=w;w=D(P),w===K?~w&&b[w].p(P,U):(R&&(_e(),y(b[K],1,1,()=>{b[K]=null}),de()),~w?(R=b[w],R?R.p(P,U):(R=b[w]=H[w](P),R.c()),v(R,1),R.m(E.parentNode,E)):R=null),P[0]?j||(j=Ht(),j.c(),j.m(T.parentNode,T)):j&&(j.d(1),j=null);const se={};U&32&&(se.tags=P[5]),!z&&U&4&&(z=!0,se.dialog=P[2],Pe(()=>z=!1)),k.$set(se)},i(P){V||(v(t.$$.fragment,P),v(r.$$.fragment,P),v(i.$$.fragment,P),v(u.$$.fragment,P),v(p.$$.fragment,P),v(_.$$.fragment,P),v(R),v(k.$$.fragment,P),V=!0)},o(P){y(t.$$.fragment,P),y(r.$$.fragment,P),y(i.$$.fragment,P),y(u.$$.fragment,P),y(p.$$.fragment,P),y(_.$$.fragment,P),y(R),y(k.$$.fragment,P),V=!1},d(P){P&&(m(n),m(l),m(o),m($),m(h),m(E),m(T)),m(e),q(t,P),q(r),q(i),q(u),q(p),q(_,P),~w&&b[w].d(P),j&&j.d(P),q(k,P)}}}function vr(s,e,n){let t,l,o,r,a,i,c,u;fe(s,Ke,I=>n(3,t=I)),fe(s,at,I=>n(4,l=I)),fe(s,He,I=>n(18,o=I)),fe(s,Je,I=>n(19,r=I)),fe(s,es,I=>n(20,a=I)),fe(s,et,I=>n(5,i=I)),fe(s,$t,I=>n(6,c=I)),fe(s,Wt,I=>n(7,u=I)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let f=!1,p,$,_=0;const h=async I=>{const Y=await Kn(I);return[...c.items.filter(({name:U})=>U.toLowerCase().includes(I.toLowerCase())).map(U=>({label:U.name,count:U.tags.length,type:"supertag"})),...Y]},w=()=>new Qn().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(l),R=async I=>{if(!f){n(1,p=void 0),n(0,f=!0);try{const Y=t.pageCount;await I(),Xn(Y).catch(()=>{})}catch(Y){n(1,p=Y),console.warn(Y)}finally{n(0,f=!1)}}},E=async()=>{Ke.reset(),_=0,R(async()=>{const[I,Y]=await w().getPageAndCount();Ke.addPage(I,Y)})},T=async()=>{R(async()=>{const I=await w().getPage();Ke.addPage(I)})},k=I=>{var Y,P;if((I.key==="/"||I.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&((Y=document.getElementById("searchbar"))==null||Y.focus(),I.preventDefault(),I.stopPropagation()),I.ctrlKey&&I.key==="Enter"&&(I.preventDefault(),I.stopPropagation(),E()),I.ctrlKey&&I.key==="m"&&((P=document.getElementById("select-modifier"))==null||P.click()),I.ctrlKey&&I.key==="ArrowDown"){const U=document.getElementsByClassName("post-media");U[_].focus(),_=Math.min(_+1,Math.max(0,U.length-1))}I.ctrlKey&&I.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[_].focus(),_=Math.max(_-1,0))};nt(async()=>{document.addEventListener("keydown",k),t.postCount===0&&E()}),st(()=>{document.removeEventListener("keydown",k)});const z=async I=>{const Y=I.detail;if(Y.type==="supertag"){const P=c.items.find(U=>U.name===Y.label);if(!P){console.warn("Supertag not present.");return}at.addOrReplace(P)}else{const P=await Jn(I.detail.label);et.addOrReplace({name:I.detail.label,modifier:I.detail.modifier,count:I.detail.count,type:(P==null?void 0:P.type)??"tag"})}},V=I=>"description"in I.detail?at.removeByName(I.detail.name):et.removeByName(I.detail.name),H=I=>{"description"in I.detail||(I.detail.modifier=xn(I.detail.modifier),et.addOrReplace(I.detail))},b=()=>{$.showModal(),Kt("dialog")};function D(I){$=I,n(2,$)}return[f,p,$,t,l,i,c,u,h,E,T,z,V,H,b,D,I=>$t.add(I.detail)]}class Qr extends ce{constructor(e){super(),ue(this,e,vr,$r,ae,{})}}export{Qr as component};
