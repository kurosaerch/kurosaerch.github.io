import{s as C,k as a}from"../chunks/scheduler.9ddb58b7.js";import{S as b,i as T}from"../chunks/index.ea5578de.js";import{a as i}from"../chunks/blocking-group-data.358160cd.js";import{s as c,f as p,S as k}from"../chunks/search-builder.1f09dd7e.js";import{p as B}from"../chunks/url-parsing.a8bc8aac.js";import{r as w,a as U}from"../chunks/results-store.db609e32.js";import{b as _}from"../chunks/blocked-content-store.656b24b7.js";function x(e,m,r){let l,s,n,u,h;a(e,U,t=>r(0,l=t)),a(e,p,t=>r(1,s=t)),a(e,c,t=>r(2,n=t)),a(e,_,t=>r(3,u=t)),a(e,i,t=>r(4,h=t));const d=async()=>{i.reset(),c.reset(),p.reset();let t=!1;const{tags:o,sort:g,filter:S}=B(new URL(location.href).searchParams);return o&&o.length>0&&(await Promise.all(o.map(async f=>await i.addByName(f.name,f.modifier))),t=!0),g&&(c.update(g),t=!0),S&&(p.update(S),t=!0),t},P=async()=>{try{w.reset();const[t,o]=await new k().withPid(0).withTags(h).withBlockedContent(u).withSortProperty(n.property).withSortDirection(n.direction).withScoreValue(s.scoreValue).withScoreComparator(s.scoreComparator).withRating(s.rating).withSupertags(l).getPageAndCount();w.addPage(t,o)}catch(t){console.warn(t)}},y=()=>{location.href="/"};return d().then(()=>P()).then(()=>y()),[]}class L extends b{constructor(m){super(),T(this,m,x,null,C,{})}}export{L as component};
