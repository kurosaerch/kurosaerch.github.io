import{s as le,f as C,a as D,l as Z,g as I,h as j,d as $,c as L,m as X,j as h,r as pn,i as N,u as v,v as K,x as ue,F as Se,G as We,H as dn,I as He,J as x,n as $e,p as ge,K as Le,y as te,L as je,M as Be,B as Ee,N as Ze,O as Je,o as xe,P as et,A as _n,C as gn,D as mn,E as hn,Q as rt,R as $n,S as vn,e as Re,T as bn,k as Ne,z as kn,w as wn}from"../chunks/scheduler.41e0bfa2.js";import{S as re,i as oe,b as A,d as O,m as V,a as E,t as S,e as B,f as Pe,g as pe,c as de}from"../chunks/index.e3f19884.js";import{g as yn}from"../chunks/globals.7f7f1b26.js";import{b as Wt}from"../chunks/paths.1fb9bb62.js";import{T as qe}from"../chunks/TextButton.a7c32e3b.js";import{a as Xe,r as Ge}from"../chunks/results-store.15b6bc91.js";import{a as Ke}from"../chunks/active-tags-store.8f583d8c.js";import{f as Ve}from"../chunks/format-tag.7e313273.js";import{s as Ye,f as Ue,S as En}from"../chunks/url-parsing.2c573dd0.js";import{N as Sn,a as Jt,b as Cn,o as In}from"../chunks/tags-shortcut-store.11c40deb.js";import{e as ve}from"../chunks/each.e59479a4.js";import{D as Qt,a as Yt,r as Zt}from"../chunks/result-columns-store.80cebd8d.js";import{R as Tn,I as Xt}from"../chunks/ModifierSelect.0aadd9b4.js";import{S as Dn}from"../chunks/Select.c695ea7a.js";import{R as Ln}from"../chunks/RotatingTextSelect.05274acd.js";import{R as Pn,S as xt,a as en,E as tn,b as Nn,C as nn,P as sn,g as ln,f as pt,r as jn,c as Rn,i as Fn,d as An,G as On,V as Vn,e as mt,I as Bn}from"../chunks/Gif.266dd814.js";import{h as ht,u as Mn}from"../chunks/await_block.421e30a4.js";import{L as _t}from"../chunks/LoadingAnimation.99c029b8.js";import{h as zn,i as qn,a as Un}from"../chunks/always-loop-store.06ca5387.js";import{p as Hn,S as Gn,b as Kn,a as Wn}from"../chunks/store-keys.6f7a52ba.js";import{i as Jn,g as Qn,a as Yn}from"../chunks/tags.49324235.js";import{b as rn,B as Zn}from"../chunks/blocked-content-store.1c414030.js";import{S as Xn}from"../chunks/ScrollUpButton.2bf26ab0.js";import{l as xn}from"../chunks/analytics.b280da65.js";import{L as es}from"../chunks/LynxMain.8a38d607.js";import{K as ts,A as ns}from"../chunks/ActiveTagList.5f4addae.js";import{S as ss}from"../chunks/Searchbar.b00f1b00.js";import{s as $t,n as ls}from"../chunks/supertags-store.d73614c9.js";import{D as rs}from"../chunks/DetailedTag.ff6b1b9d.js";function os(s){let e,n,t,l,o,r,a,i,c,u;return{c(){e=C("div"),n=C("div"),t=C("i"),l=D(),o=C("div"),r=C("h3"),a=Z(s[0]),i=D(),c=C("span"),u=Z(s[2]),this.h()},l(f){e=I(f,"DIV",{class:!0});var d=j(e);n=I(d,"DIV",{class:!0});var b=j(n);t=I(b,"I",{class:!0}),j(t).forEach($),b.forEach($),l=L(d),o=I(d,"DIV",{});var m=j(o);r=I(m,"H3",{class:!0});var p=j(r);a=X(p,s[0]),p.forEach($),i=L(m),c=I(m,"SPAN",{});var k=j(c);u=X(k,s[2]),k.forEach($),m.forEach($),d.forEach($),this.h()},h(){h(t,"class",pn(s[1])+" svelte-1yohziu"),h(n,"class","icon svelte-1yohziu"),h(r,"class","svelte-1yohziu"),h(e,"class","error svelte-1yohziu")},m(f,d){N(f,e,d),v(e,n),v(n,t),v(e,l),v(e,o),v(o,r),v(r,a),v(o,i),v(o,c),v(c,u)},p:K,i:K,o:K,d(f){f&&$(e)}}}function is(s,e,n){let{error:t}=e,l=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return s.$$set=a=>{"error"in a&&n(3,t=a.error)},[l,o,r,t]}class as extends re{constructor(e){super(),oe(this,e,is,os,le,{error:3})}}function cs(s){let e;return{c(){e=Z("Back to Top")},l(n){e=X(n,"Back to Top")},m(n,t){N(n,e,t)},d(n){n&&$(e)}}}function us(s){let e;return{c(){e=Z("Reset Tags")},l(n){e=X(n,"Reset Tags")},m(n,t){N(n,e,t)},d(n){n&&$(e)}}}function fs(s){let e,n,t,l,o,r="You have seen everything there is to see...",a,i,c,u,f,d;return c=new qe({props:{type:"secondary",title:"Scroll back up.",$$slots:{default:[cs]},$$scope:{ctx:s}}}),c.$on("click",s[0]),f=new qe({props:{type:"secondary",title:"Reset tags.",$$slots:{default:[us]},$$scope:{ctx:s}}}),f.$on("click",s[1]),{c(){e=C("section"),n=C("img"),l=D(),o=C("p"),o.textContent=r,a=D(),i=C("div"),A(c.$$.fragment),u=D(),A(f.$$.fragment),this.h()},l(b){e=I(b,"SECTION",{class:!0});var m=j(e);n=I(m,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),l=L(m),o=I(m,"P",{"data-svelte-h":!0}),ue(o)!=="svelte-1i75mtf"&&(o.textContent=r),a=L(m),i=I(m,"DIV",{class:!0});var p=j(i);O(c.$$.fragment,p),u=L(p),O(f.$$.fragment,p),p.forEach($),m.forEach($),this.h()},h(){Se(n.src,t=Wt+"/assets/lynxy-chibi-not-found.webp")||h(n,"src",t),h(n,"alt","No more results to load"),h(n,"width","1231"),h(n,"height","864"),h(n,"class","svelte-1b36daw"),h(i,"class","svelte-1b36daw"),h(e,"class","svelte-1b36daw")},m(b,m){N(b,e,m),v(e,n),v(e,l),v(e,o),v(e,a),v(e,i),V(c,i,null),v(i,u),V(f,i,null),d=!0},p(b,[m]){const p={};m&4&&(p.$$scope={dirty:m,ctx:b}),c.$set(p);const k={};m&4&&(k.$$scope={dirty:m,ctx:b}),f.$set(k)},i(b){d||(E(c.$$.fragment,b),E(f.$$.fragment,b),d=!0)},o(b){S(c.$$.fragment,b),S(f.$$.fragment,b),d=!1},d(b){b&&$(e),B(c),B(f)}}}function ps(s){return[()=>{window.scrollTo({top:0})},()=>{Ke.reset(),Xe.reset()}]}class ds extends re{constructor(e){super(),oe(this,e,ps,fs,le,{})}}function vt(s,e,n){const t=s.slice();return t[5]=e[n][0],t[6]=e[n][1],t}function bt(s){let e,n,t,l=!1,o,r,a,i=s[6]+"",c,u,f,d,b;return f=dn(s[4][0]),{c(){e=C("input"),r=D(),a=C("label"),c=Z(i),this.h()},l(m){e=I(m,"INPUT",{type:!0,name:!0,id:!0,class:!0}),r=L(m),a=I(m,"LABEL",{for:!0,class:!0});var p=j(a);c=X(p,i),p.forEach($),this.h()},h(){h(e,"type","radio"),h(e,"name",n="group-"+s[1]),e.__value=t=s[5],He(e,e.__value),h(e,"id",o=s[1]+"-"+s[5]),h(e,"class","svelte-16oxivo"),h(a,"for",u=s[1]+"-"+s[5]),h(a,"class","svelte-16oxivo"),f.p(e)},m(m,p){N(m,e,p),e.checked=e.__value===s[0],N(m,r,p),N(m,a,p),v(a,c),d||(b=x(e,"change",s[3]),d=!0)},p(m,p){p&2&&n!==(n="group-"+m[1])&&h(e,"name",n),p&4&&t!==(t=m[5])&&(e.__value=t,He(e,e.__value),l=!0),p&6&&o!==(o=m[1]+"-"+m[5])&&h(e,"id",o),(l||p&5)&&(e.checked=e.__value===m[0]),p&4&&i!==(i=m[6]+"")&&$e(c,i),p&6&&u!==(u=m[1]+"-"+m[5])&&h(a,"for",u)},d(m){m&&($(e),$(r),$(a)),f.r(),d=!1,b()}}}function _s(s){let e,n,t=ve(Object.entries(s[2])),l=[];for(let o=0;o<t.length;o+=1)l[o]=bt(vt(s,t,o));return{c(){e=C("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=I(o,"DIV",{id:!0,role:!0,class:!0});var r=j(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach($),this.h()},h(){h(e,"id",n="group-"+s[1]),h(e,"role","radiogroup"),h(e,"class","svelte-16oxivo")},m(o,r){N(o,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(o,[r]){if(r&7){t=ve(Object.entries(o[2]));let a;for(a=0;a<t.length;a+=1){const i=vt(o,t,a);l[a]?l[a].p(i,r):(l[a]=bt(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}r&2&&n!==(n="group-"+o[1])&&h(e,"id",n)},i:K,o:K,d(o){o&&$(e),We(l,o)}}}function gs(s,e,n){let{name:t}=e,{value:l}=e,{options:o}=e;const r=[[]];function a(){l=this.__value,n(0,l)}return s.$$set=i=>{"name"in i&&n(1,t=i.name),"value"in i&&n(0,l=i.value),"options"in i&&n(2,o=i.options)},[l,t,o,a,r]}class ms extends re{constructor(e){super(),oe(this,e,gs,_s,le,{name:1,value:0,options:2})}}const hs=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),on=Object.freeze({">=":"≥","<=":"≤"}),an=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),$s=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),vs=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),bs=(s,e)=>s===0&&e===">="?void 0:`Score ${on[e]} ${Ve(s)}`,ks=s=>s==="all"?void 0:an[s],ws=(s,e,n)=>{let t=ks(s),l=bs(e,n);return[t,l].filter(o=>o!==void 0).join(",")||"All"},ys=(s,e)=>hs[s][e];function Es(s){let e;return{c(){e=Z("Done")},l(n){e=X(n,"Done")},m(n,t){N(n,e,t)},d(n){n&&$(e)}}}function Ss(s){let e;return{c(){e=Z("Reset")},l(n){e=X(n,"Reset")},m(n,t){N(n,e,t)},d(n){n&&$(e)}}}function Cs(s){let e,n,t="Sorting and Filtering",l,o,r,a="Sorting",i,c,u,f,d,b,m,p,k,w,_="Filtering by Score",g,y,R,F,q,T,P,M,W,ae,Ie="Rating",fe,J,ce,H,G,ie,Y,me;function Ce(U){s[4](U)}let Me={options:vs};s[1].direction!==void 0&&(Me.value=s[1].direction),u=new Tn({props:Me}),ge.push(()=>Pe(u,"value",Ce));function Te(U){s[5](U)}let ot={options:$s};s[1].property!==void 0&&(ot.value=s[1].property),b=new Dn({props:ot}),ge.push(()=>Pe(b,"value",Te));function it(U){s[6](U)}let Fe={options:on};s[2].scoreComparator!==void 0&&(Fe.value=s[2].scoreComparator),R=new Ln({props:Fe}),ge.push(()=>Pe(R,"value",it));function at(U){s[7](U)}let tt={min:0,max:1e4,step:1};s[2].scoreValue!==void 0&&(tt.value=s[2].scoreValue),T=new Sn({props:tt}),ge.push(()=>Pe(T,"value",at));function De(U){s[8](U)}let Qe={name:"rating",options:an};return s[2].rating!==void 0&&(Qe.value=s[2].rating),J=new ms({props:Qe}),ge.push(()=>Pe(J,"value",De)),G=new qe({props:{title:"Return to searching",$$slots:{default:[Es]},$$scope:{ctx:s}}}),G.$on("click",s[9]),Y=new qe({props:{title:"Reset sort and filter",type:"secondary",$$slots:{default:[Ss]},$$scope:{ctx:s}}}),Y.$on("click",s[3]),{c(){e=C("div"),n=C("h3"),n.textContent=t,l=D(),o=C("div"),r=C("b"),r.textContent=a,i=D(),c=C("div"),A(u.$$.fragment),d=D(),A(b.$$.fragment),p=D(),k=C("div"),w=C("b"),w.textContent=_,g=D(),y=C("div"),A(R.$$.fragment),q=D(),A(T.$$.fragment),M=D(),W=C("div"),ae=C("b"),ae.textContent=Ie,fe=D(),A(J.$$.fragment),H=D(),A(G.$$.fragment),ie=D(),A(Y.$$.fragment),this.h()},l(U){e=I(U,"DIV",{class:!0});var ne=j(e);n=I(ne,"H3",{"data-svelte-h":!0}),ue(n)!=="svelte-15zouq3"&&(n.textContent=t),l=L(ne),o=I(ne,"DIV",{});var Ae=j(o);r=I(Ae,"B",{class:!0,"data-svelte-h":!0}),ue(r)!=="svelte-ekzpgg"&&(r.textContent=a),i=L(Ae),c=I(Ae,"DIV",{class:!0});var he=j(c);O(u.$$.fragment,he),d=L(he),O(b.$$.fragment,he),he.forEach($),Ae.forEach($),p=L(ne),k=I(ne,"DIV",{});var be=j(k);w=I(be,"B",{class:!0,"data-svelte-h":!0}),ue(w)!=="svelte-1flca3"&&(w.textContent=_),g=L(be),y=I(be,"DIV",{class:!0});var ee=j(y);O(R.$$.fragment,ee),q=L(ee),O(T.$$.fragment,ee),ee.forEach($),be.forEach($),M=L(ne),W=I(ne,"DIV",{});var ke=j(W);ae=I(ke,"B",{class:!0,"data-svelte-h":!0}),ue(ae)!=="svelte-1lwyn2b"&&(ae.textContent=Ie),fe=L(ke),O(J.$$.fragment,ke),ke.forEach($),H=L(ne),O(G.$$.fragment,ne),ie=L(ne),O(Y.$$.fragment,ne),ne.forEach($),this.h()},h(){h(r,"class","svelte-fm5hcv"),h(c,"class","row svelte-fm5hcv"),h(w,"class","svelte-fm5hcv"),h(y,"class","row svelte-fm5hcv"),h(ae,"class","svelte-fm5hcv"),h(e,"class","container svelte-fm5hcv")},m(U,ne){N(U,e,ne),v(e,n),v(e,l),v(e,o),v(o,r),v(o,i),v(o,c),V(u,c,null),v(c,d),V(b,c,null),v(e,p),v(e,k),v(k,w),v(k,g),v(k,y),V(R,y,null),v(y,q),V(T,y,null),v(e,M),v(e,W),v(W,ae),v(W,fe),V(J,W,null),v(e,H),V(G,e,null),v(e,ie),V(Y,e,null),me=!0},p(U,ne){const Ae={};!f&&ne&2&&(f=!0,Ae.value=U[1].direction,Le(()=>f=!1)),u.$set(Ae);const he={};!m&&ne&2&&(m=!0,he.value=U[1].property,Le(()=>m=!1)),b.$set(he);const be={};!F&&ne&4&&(F=!0,be.value=U[2].scoreComparator,Le(()=>F=!1)),R.$set(be);const ee={};!P&&ne&4&&(P=!0,ee.value=U[2].scoreValue,Le(()=>P=!1)),T.$set(ee);const ke={};!ce&&ne&4&&(ce=!0,ke.value=U[2].rating,Le(()=>ce=!1)),J.$set(ke);const se={};ne&4096&&(se.$$scope={dirty:ne,ctx:U}),G.$set(se);const ft={};ne&4096&&(ft.$$scope={dirty:ne,ctx:U}),Y.$set(ft)},i(U){me||(E(u.$$.fragment,U),E(b.$$.fragment,U),E(R.$$.fragment,U),E(T.$$.fragment,U),E(J.$$.fragment,U),E(G.$$.fragment,U),E(Y.$$.fragment,U),me=!0)},o(U){S(u.$$.fragment,U),S(b.$$.fragment,U),S(R.$$.fragment,U),S(T.$$.fragment,U),S(J.$$.fragment,U),S(G.$$.fragment,U),S(Y.$$.fragment,U),me=!1},d(U){U&&$(e),B(u),B(b),B(R),B(T),B(J),B(G),B(Y)}}}function Is(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[Cs]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.dialog=s[0]),e=new Qt({props:o}),ge.push(()=>Pe(e,"dialog",l)),e.$on("close",s[11]),{c(){A(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,a){V(e,r,a),t=!0},p(r,[a]){const i={};a&4103&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],Le(()=>n=!1)),e.$set(i)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Ts(s,e,n){let t,l;te(s,Ye,p=>n(1,t=p)),te(s,Ue,p=>n(2,l=p));let{dialog:o}=e;const r=()=>{Ye.reset(),Ue.reset()};function a(p){s.$$.not_equal(t.direction,p)&&(t.direction=p,Ye.set(t))}function i(p){s.$$.not_equal(t.property,p)&&(t.property=p,Ye.set(t))}function c(p){s.$$.not_equal(l.scoreComparator,p)&&(l.scoreComparator=p,Ue.set(l))}function u(p){s.$$.not_equal(l.scoreValue,p)&&(l.scoreValue=p,Ue.set(l))}function f(p){s.$$.not_equal(l.rating,p)&&(l.rating=p,Ue.set(l))}const d=()=>o.close();function b(p){o=p,n(0,o)}function m(p){je.call(this,s,p)}return s.$$set=p=>{"dialog"in p&&n(0,o=p.dialog)},[o,t,l,r,a,i,c,u,f,d,b,m]}class Ds extends re{constructor(e){super(),oe(this,e,Ts,Is,le,{dialog:0})}}function Ls(s){let e,n,t,l,o,r,a,i,c,u,f,d,b,m,p,k;function w(g){s[9](g)}let _={};return s[2]!==void 0&&(_.dialog=s[2]),d=new Ds({props:_}),ge.push(()=>Pe(d,"dialog",w)),d.$on("close",s[10]),{c(){e=C("button"),n=C("i"),t=D(),l=C("span"),o=Z(s[5]),r=D(),a=C("i"),i=D(),c=C("span"),u=Z(s[4]),f=D(),A(d.$$.fragment),this.h()},l(g){e=I(g,"BUTTON",{type:!0,class:!0});var y=j(e);n=I(y,"I",{class:!0}),j(n).forEach($),t=L(y),l=I(y,"SPAN",{class:!0});var R=j(l);o=X(R,s[5]),R.forEach($),r=L(y),a=I(y,"I",{class:!0}),j(a).forEach($),i=L(y),c=I(y,"SPAN",{class:!0});var F=j(c);u=X(F,s[4]),F.forEach($),y.forEach($),f=L(g),O(d.$$.fragment,g),this.h()},h(){h(n,"class","codicon codicon-filter svelte-3ooqm6"),h(l,"class","svelte-3ooqm6"),h(a,"class","codicon codicon-arrow-swap svelte-3ooqm6"),h(c,"class","svelte-3ooqm6"),h(e,"type","button"),h(e,"class","svelte-3ooqm6")},m(g,y){N(g,e,y),v(e,n),v(e,t),v(e,l),v(l,o),v(e,r),v(e,a),v(e,i),v(e,c),v(c,u),N(g,f,y),V(d,g,y),m=!0,p||(k=x(e,"click",s[8]),p=!0)},p(g,[y]){(!m||y&32)&&$e(o,g[5]),(!m||y&16)&&$e(u,g[4]);const R={};!b&&y&4&&(b=!0,R.dialog=g[2],Le(()=>b=!1)),d.$set(R)},i(g){m||(E(d.$$.fragment,g),m=!0)},o(g){S(d.$$.fragment,g),m=!1},d(g){g&&($(e),$(f)),B(d,g),p=!1,k()}}}function Ps(s,e,n){let t,l,o,r;te(s,Ye,m=>n(0,o=m)),te(s,Ue,m=>n(1,r=m));const a=Be(),i=(m,p)=>JSON.stringify(Object.assign({},m,p));let c,u="";const f=()=>{n(3,u=i(o,r)),c.showModal(),Yt("dialog")};function d(m){c=m,n(2,c)}const b=()=>{i(o,r)!==u&&a("sortfilterupdate")};return s.$$.update=()=>{s.$$.dirty&2&&n(5,t=ws(r.rating,r.scoreValue,r.scoreComparator)),s.$$.dirty&1&&n(4,l=ys(o.property,o.direction))},[o,r,c,u,l,t,a,i,f,d,b]}class Ns extends re{constructor(e){super(),oe(this,e,Ps,Ls,le,{})}}function js(s){let e,n,t=Ve(s[1].postCount)+"",l,o,r,a,i;return a=new Ns({}),a.$on("sortfilterupdate",s[2]),{c(){e=C("div"),n=C("span"),l=Z(t),o=Z(" posts"),r=D(),A(a.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var u=j(e);n=I(u,"SPAN",{class:!0});var f=j(n);l=X(f,t),o=X(f," posts"),f.forEach($),r=L(u),O(a.$$.fragment,u),u.forEach($),this.h()},h(){h(n,"class","svelte-1f1ky2c"),Ee(n,"loading",s[0]),h(e,"class","svelte-1f1ky2c")},m(c,u){N(c,e,u),v(e,n),v(n,l),v(n,o),v(e,r),V(a,e,null),i=!0},p(c,[u]){(!i||u&2)&&t!==(t=Ve(c[1].postCount)+"")&&$e(l,t),(!i||u&1)&&Ee(n,"loading",c[0])},i(c){i||(E(a.$$.fragment,c),i=!0)},o(c){S(a.$$.fragment,c),i=!1},d(c){c&&$(e),B(a)}}}function Rs(s,e,n){let t;te(s,Ge,r=>n(1,t=r));let{loading:l}=e;function o(r){je.call(this,s,r)}return s.$$set=r=>{"loading"in r&&n(0,l=r.loading)},[l,t,o]}class Fs extends re{constructor(e){super(),oe(this,e,Rs,js,le,{loading:0})}}const ut=s=>`post_${s}`;function kt(s){let e;const n=s[4].default,t=_n(n,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8)&&gn(t,n,l,l[3],e?hn(n,l[3],o,null):mn(l[3]),null)},i(l){e||(E(t,l),e=!0)},o(l){S(t,l),e=!1},d(l){t&&t.d(l)}}}function As(s){let e,n,t,l,o=s[1]&&kt(s);return{c(){e=C("div"),o&&o.c(),this.h()},l(r){e=I(r,"DIV",{role:!0,tabindex:!0,class:!0});var a=j(e);o&&o.l(a),a.forEach($),this.h()},h(){h(e,"role","none"),h(e,"tabindex","-1"),h(e,"class","svelte-6sy8qz")},m(r,a){N(r,e,a),o&&o.m(e,null),s[5](e),n=!0,t||(l=[x(e,"click",Ze(Os)),x(e,"keydown",s[2])],t=!0)},p(r,[a]){r[1]?o?(o.p(r,a),a&2&&E(o,1)):(o=kt(r),o.c(),E(o,1),o.m(e,null)):o&&(pe(),S(o,1,1,()=>{o=null}),de())},i(r){n||(E(o),n=!0)},o(r){S(o),n=!1},d(r){r&&$(e),o&&o.d(),s[5](null),t=!1,Je(l)}}}const Os=()=>{};function Vs(s,e,n){let{$$slots:t={},$$scope:l}=e;const o=Be(),r=()=>o("close"),a=d=>{d.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let c,u=!1;xe(async()=>{c.focus(),document.addEventListener("fullscreenchange",i);try{await c.requestFullscreen()}catch{}n(1,u=!0)}),et(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function f(d){ge[d?"unshift":"push"](()=>{c=d,n(0,c)})}return s.$$set=d=>{"$$scope"in d&&n(3,l=d.$$scope)},[c,u,a,l,t,f]}class Bs extends re{constructor(e){super(),oe(this,e,Vs,As,le,{})}}function Ms(s){let e,n;return{c(){e=C("div"),this.h()},l(t){e=I(t,"DIV",{style:!0}),j(e).forEach($),this.h()},h(){h(e,"style",n=s[0]?`position:absolute;top:${s[0]};`:void 0)},m(t,l){N(t,e,l),s[3](e)},p(t,[l]){l&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&h(e,"style",n)},i:K,o:K,d(t){t&&$(e),s[3](null)}}}function zs(s,e,n){let{rootMargin:t}=e,{absoluteTop:l}=e;const o=Be(),r=new IntersectionObserver(c=>{c[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(c){ge[c?"unshift":"push"](()=>{a=c,n(1,a)})}return s.$$set=c=>{"rootMargin"in c&&n(2,t=c.rootMargin),"absoluteTop"in c&&n(0,l=c.absoluteTop)},s.$$.update=()=>{s.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[l,a,t,i]}class cn extends re{constructor(e){super(),oe(this,e,zs,Ms,le,{rootMargin:2,absoluteTop:0})}}function qs(s){let e,n;return{c(){e=C("a"),n=Z("Open"),this.h()},l(t){e=I(t,"A",{href:!0,target:!0,class:!0});var l=j(e);n=X(l,"Open"),l.forEach($),this.h()},h(){h(e,"href",s[0]),h(e,"target","_newtab"),h(e,"class","codicon codicon-link-external svelte-10flxu9")},m(t,l){N(t,e,l),v(e,n)},p(t,[l]){l&1&&h(e,"href",t[0])},i:K,o:K,d(t){t&&$(e)}}}function Us(s,e,n){let{url:t}=e;return s.$$set=l=>{"url"in l&&n(0,t=l.url)},[t]}class Hs extends re{constructor(e){super(),oe(this,e,Us,qs,le,{url:0})}}function wt(s,e,n){const t=s.slice();return t[4]=e[n][0],t[5]=e[n][1],t}function yt(s){let e,n="•",t,l,o;return l=new tn({props:{source:s[0].source}}),{c(){e=C("span"),e.textContent=n,t=D(),A(l.$$.fragment)},l(r){e=I(r,"SPAN",{"data-svelte-h":!0}),ue(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=L(r),O(l.$$.fragment,r)},m(r,a){N(r,e,a),N(r,t,a),V(l,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),l.$set(i)},i(r){o||(E(l.$$.fragment,r),o=!0)},o(r){S(l.$$.fragment,r),o=!1},d(r){r&&($(e),$(t)),B(l,r)}}}function Et(s){let e,n=s[4]+"",t,l,o,r;return o=new sn({props:{tags:s[5]}}),{c(){e=C("h3"),t=Z(n),l=D(),A(o.$$.fragment),this.h()},l(a){e=I(a,"H3",{class:!0});var i=j(e);t=X(i,n),i.forEach($),l=L(a),O(o.$$.fragment,a),this.h()},h(){h(e,"class","svelte-1tsjp7g")},m(a,i){N(a,e,i),v(e,t),N(a,l,i),V(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[4]+"")&&$e(t,n);const c={};i&2&&(c.tags=a[5]),o.$set(c)},i(a){r||(E(o.$$.fragment,a),r=!0)},o(a){S(o.$$.fragment,a),r=!1},d(a){a&&($(e),$(l)),B(o,a)}}}function Gs(s){let e,n,t,l,o,r,a,i,c=s[0].id+"",u,f,d,b,m,p,k="•",w,_,g=s[0].type.toUpperCase()+"",y,R,F,q="•",T,P,M,W,ae="•",Ie,fe,J,ce,H,G,ie,Y="•",me,Ce,Me,Te,ot="•",it,Fe,at,tt,De,Qe,U,ne="Comments",Ae,he,be;b=new Pn({props:{value:s[0].rating}}),P=new xt({props:{value:s[0].score}}),fe=new en({props:{value:s[0].change}}),H=new Hs({props:{url:"/post?id="+s[0].id+"&src="+encodeURIComponent(s[3])}}),Ce=new tn({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+s[0].id}}),Fe=new Nn({props:{url:s[3]}});let ee=s[0].source&&yt(s),ke=ve(Object.entries(s[1])),se=[];for(let z=0;z<ke.length;z+=1)se[z]=Et(wt(s,ke,z));const ft=z=>S(se[z],1,1,()=>{se[z]=null});return he=new nn({props:{post:s[0]}}),{c(){e=C("div"),n=C("img"),l=D(),o=C("h1"),r=Z("Post "),a=C("b"),i=Z("#"),u=Z(c),f=D(),d=C("div"),A(b.$$.fragment),m=D(),p=C("span"),p.textContent=k,w=D(),_=C("span"),y=Z(g),R=D(),F=C("span"),F.textContent=q,T=D(),A(P.$$.fragment),M=D(),W=C("span"),W.textContent=ae,Ie=D(),A(fe.$$.fragment),J=D(),ce=C("div"),A(H.$$.fragment),G=D(),ie=C("span"),ie.textContent=Y,me=D(),A(Ce.$$.fragment),Me=D(),Te=C("span"),Te.textContent=ot,it=D(),A(Fe.$$.fragment),at=D(),ee&&ee.c(),tt=D(),De=C("div");for(let z=0;z<se.length;z+=1)se[z].c();Qe=D(),U=C("h3"),U.textContent=ne,Ae=D(),A(he.$$.fragment),this.h()},l(z){e=I(z,"DIV",{class:!0});var Q=j(e);n=I(Q,"IMG",{class:!0,src:!0,alt:!0}),l=L(Q),o=I(Q,"H1",{class:!0});var Oe=j(o);r=X(Oe,"Post "),a=I(Oe,"B",{});var nt=j(a);i=X(nt,"#"),u=X(nt,c),nt.forEach($),Oe.forEach($),f=L(Q),d=I(Q,"DIV",{class:!0});var _e=j(d);O(b.$$.fragment,_e),m=L(_e),p=I(_e,"SPAN",{"data-svelte-h":!0}),ue(p)!=="svelte-7hh8jk"&&(p.textContent=k),w=L(_e),_=I(_e,"SPAN",{});var ct=j(_);y=X(ct,g),ct.forEach($),R=L(_e),F=I(_e,"SPAN",{"data-svelte-h":!0}),ue(F)!=="svelte-7hh8jk"&&(F.textContent=q),T=L(_e),O(P.$$.fragment,_e),M=L(_e),W=I(_e,"SPAN",{"data-svelte-h":!0}),ue(W)!=="svelte-7hh8jk"&&(W.textContent=ae),Ie=L(_e),O(fe.$$.fragment,_e),_e.forEach($),J=L(Q),ce=I(Q,"DIV",{class:!0});var we=j(ce);O(H.$$.fragment,we),G=L(we),ie=I(we,"SPAN",{"data-svelte-h":!0}),ue(ie)!=="svelte-7hh8jk"&&(ie.textContent=Y),me=L(we),O(Ce.$$.fragment,we),Me=L(we),Te=I(we,"SPAN",{"data-svelte-h":!0}),ue(Te)!=="svelte-7hh8jk"&&(Te.textContent=ot),it=L(we),O(Fe.$$.fragment,we),at=L(we),ee&&ee.l(we),we.forEach($),tt=L(Q),De=I(Q,"DIV",{});var ze=j(De);for(let st=0;st<se.length;st+=1)se[st].l(ze);Qe=L(ze),U=I(ze,"H3",{class:!0,"data-svelte-h":!0}),ue(U)!=="svelte-kc6sae"&&(U.textContent=ne),Ae=L(ze),O(he.$$.fragment,ze),ze.forEach($),Q.forEach($),this.h()},h(){h(n,"class","preview svelte-1tsjp7g"),Se(n.src,t=s[2])||h(n,"src",t),h(n,"alt","preview"),h(o,"class","svelte-1tsjp7g"),h(d,"class","flex-row svelte-1tsjp7g"),h(ce,"class","flex-row svelte-1tsjp7g"),h(U,"class","svelte-1tsjp7g"),h(e,"class","details svelte-1tsjp7g")},m(z,Q){N(z,e,Q),v(e,n),v(e,l),v(e,o),v(o,r),v(o,a),v(a,i),v(a,u),v(e,f),v(e,d),V(b,d,null),v(d,m),v(d,p),v(d,w),v(d,_),v(_,y),v(d,R),v(d,F),v(d,T),V(P,d,null),v(d,M),v(d,W),v(d,Ie),V(fe,d,null),v(e,J),v(e,ce),V(H,ce,null),v(ce,G),v(ce,ie),v(ce,me),V(Ce,ce,null),v(ce,Me),v(ce,Te),v(ce,it),V(Fe,ce,null),v(ce,at),ee&&ee.m(ce,null),v(e,tt),v(e,De);for(let Oe=0;Oe<se.length;Oe+=1)se[Oe]&&se[Oe].m(De,null);v(De,Qe),v(De,U),v(De,Ae),V(he,De,null),be=!0},p(z,[Q]){(!be||Q&4&&!Se(n.src,t=z[2]))&&h(n,"src",t),(!be||Q&1)&&c!==(c=z[0].id+"")&&$e(u,c);const Oe={};Q&1&&(Oe.value=z[0].rating),b.$set(Oe),(!be||Q&1)&&g!==(g=z[0].type.toUpperCase()+"")&&$e(y,g);const nt={};Q&1&&(nt.value=z[0].score),P.$set(nt);const _e={};Q&1&&(_e.value=z[0].change),fe.$set(_e);const ct={};Q&9&&(ct.url="/post?id="+z[0].id+"&src="+encodeURIComponent(z[3])),H.$set(ct);const we={};Q&1&&(we.source="https://rule34.xxx/index.php?page=post&s=view&id="+z[0].id),Ce.$set(we);const ze={};if(Q&8&&(ze.url=z[3]),Fe.$set(ze),z[0].source?ee?(ee.p(z,Q),Q&1&&E(ee,1)):(ee=yt(z),ee.c(),E(ee,1),ee.m(ce,null)):ee&&(pe(),S(ee,1,1,()=>{ee=null}),de()),Q&2){ke=ve(Object.entries(z[1]));let ye;for(ye=0;ye<ke.length;ye+=1){const gt=wt(z,ke,ye);se[ye]?(se[ye].p(gt,Q),E(se[ye],1)):(se[ye]=Et(gt),se[ye].c(),E(se[ye],1),se[ye].m(De,Qe))}for(pe(),ye=ke.length;ye<se.length;ye+=1)ft(ye);de()}const st={};Q&1&&(st.post=z[0]),he.$set(st)},i(z){if(!be){E(b.$$.fragment,z),E(P.$$.fragment,z),E(fe.$$.fragment,z),E(H.$$.fragment,z),E(Ce.$$.fragment,z),E(Fe.$$.fragment,z),E(ee);for(let Q=0;Q<ke.length;Q+=1)E(se[Q]);E(he.$$.fragment,z),be=!0}},o(z){S(b.$$.fragment,z),S(P.$$.fragment,z),S(fe.$$.fragment,z),S(H.$$.fragment,z),S(Ce.$$.fragment,z),S(Fe.$$.fragment,z),S(ee),se=se.filter(Boolean);for(let Q=0;Q<se.length;Q+=1)S(se[Q]);S(he.$$.fragment,z),be=!1},d(z){z&&$(e),B(b),B(P),B(fe),B(H),B(Ce),B(Fe),ee&&ee.d(),We(se,z),B(he)}}}function Ks(s,e,n){let t,l,o,{post:r}=e;return s.$$set=a=>{"post"in a&&n(0,r=a.post)},s.$$.update=()=>{s.$$.dirty&1&&n(3,t=r.file_url),s.$$.dirty&1&&n(2,l=r.sample_url),s.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,l,t]}class Ws extends re{constructor(e){super(),oe(this,e,Ks,Gs,le,{post:0})}}const lt=new IntersectionObserver(s=>{for(const e of s)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function Js(s){let e,n,t,l;return{c(){e=C("div"),n=C("input"),this.h()},l(o){e=I(o,"DIV",{class:!0});var r=j(e);n=I(r,"INPUT",{type:!0,step:!0,max:!0,class:!0}),r.forEach($),this.h()},h(){h(n,"type","range"),h(n,"step","0.001"),h(n,"max",s[1]),h(n,"class","svelte-dfxj87"),h(e,"class","svelte-dfxj87")},m(o,r){N(o,e,r),v(e,n),He(n,s[0]),t||(l=[x(n,"change",s[5]),x(n,"input",s[5]),x(n,"scroll",Ze(rt(s[4]))),x(e,"click",Ze(rt(s[2]))),x(e,"scroll",Ze(rt(s[3])))],t=!0)},p(o,[r]){r&2&&h(n,"max",o[1]),r&1&&He(n,o[0])},i:K,o:K,d(o){o&&$(e),t=!1,Je(l)}}}function Qs(s,e,n){let{value:t}=e,{max:l}=e;function o(c){je.call(this,s,c)}function r(c){je.call(this,s,c)}function a(c){je.call(this,s,c)}function i(){t=$n(this.value),n(0,t)}return s.$$set=c=>{"value"in c&&n(0,t=c.value),"max"in c&&n(1,l=c.max)},[t,l,o,r,a,i]}class un extends re{constructor(e){super(),oe(this,e,Qs,Js,le,{value:0,max:1})}}function St(s){let e,n=pt(s[2])+"",t,l,o=pt(s[4])+"",r;return{c(){e=C("span"),t=Z(n),l=Z(" / "),r=Z(o),this.h()},l(a){e=I(a,"SPAN",{class:!0});var i=j(e);t=X(i,n),l=X(i," / "),r=X(i,o),i.forEach($),this.h()},h(){h(e,"class","svelte-r1orid")},m(a,i){N(a,e,i),v(e,t),v(e,l),v(e,r)},p(a,i){i&4&&n!==(n=pt(a[2])+"")&&$e(t,n),i&16&&o!==(o=pt(a[4])+"")&&$e(r,o)},d(a){a&&$(e)}}}function Ys(s){let e,n,t,l=!1,o,r=!0,a,i,c,u,f,d,b;function m(){cancelAnimationFrame(o),e.paused||(o=jn(m),l=!0),s[10].call(e)}let p=s[2]!==void 0&&s[4]!==void 0&&St(s);function k(_){s[13](_)}let w={max:s[4]};return s[2]!==void 0&&(w.value=s[2]),c=new un({props:w}),ge.push(()=>Pe(c,"value",k)),{c(){e=C("video"),a=D(),p&&p.c(),i=D(),A(c.$$.fragment),this.h()},l(_){e=I(_,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),j(e).forEach($),a=L(_),p&&p.l(_),i=L(_),O(c.$$.fragment,_),this.h()},h(){Se(e.src,n=s[6])||h(e,"src",n),h(e,"poster",s[5]),h(e,"title",t="[VIDEO] post #"+s[0].id),h(e,"preload","metadata"),e.autoplay=!0,h(e,"class","svelte-r1orid"),s[4]===void 0&&vn(()=>s[12].call(e))},m(_,g){N(_,e,g),s[9](e),N(_,a,g),p&&p.m(_,g),N(_,i,g),V(c,_,g),f=!0,d||(b=[x(e,"timeupdate",m),x(e,"play",s[11]),x(e,"pause",s[11]),x(e,"durationchange",s[12]),x(e,"click",Zs),x(e,"ended",s[8]),x(e,"contextmenu",rt(Xs))],d=!0)},p(_,[g]){(!f||g&64&&!Se(e.src,n=_[6]))&&h(e,"src",n),(!f||g&32)&&h(e,"poster",_[5]),(!f||g&1&&t!==(t="[VIDEO] post #"+_[0].id))&&h(e,"title",t),!l&&g&4&&!isNaN(_[2])&&(e.currentTime=_[2]),l=!1,g&8&&r!==(r=_[3])&&e[r?"pause":"play"](),_[2]!==void 0&&_[4]!==void 0?p?p.p(_,g):(p=St(_),p.c(),p.m(i.parentNode,i)):p&&(p.d(1),p=null);const y={};g&16&&(y.max=_[4]),!u&&g&4&&(u=!0,y.value=_[2],Le(()=>u=!1)),c.$set(y)},i(_){f||(E(c.$$.fragment,_),f=!0)},o(_){S(c.$$.fragment,_),f=!1},d(_){_&&($(e),$(a),$(i)),s[9](null),p&&p.d(_),B(c,_),d=!1,Je(b)}}}const Zs=s=>s.target.paused?s.target.play():s.target.pause(),Xs=()=>{};function xs(s,e,n){let t,l,o,{post:r}=e,a,i=0,c=!1,u;const f=_=>{a&&(_.key==="ArrowLeft"&&(_.preventDefault(),_.stopPropagation(),n(1,a.currentTime=Math.max(0,a.currentTime-5),a)),_.key==="ArrowRight"&&(_.preventDefault(),_.stopPropagation(),n(1,a.currentTime=Math.min(a.duration,a.currentTime+5),a)),_.key==="Space"&&(_.preventDefault(),_.stopPropagation(),n(3,c=!c)))};xe(()=>{a&&(lt==null||lt.observe(a)),document.addEventListener("keydown",f)}),et(()=>{a&&(lt==null||lt.unobserve(a)),document.removeEventListener("keydown",f)});function d(_){je.call(this,s,_)}function b(_){ge[_?"unshift":"push"](()=>{a=_,n(1,a)})}function m(){i=this.currentTime,n(2,i)}function p(){c=this.paused,n(3,c)}function k(){u=this.duration,n(4,u)}function w(_){i=_,n(2,i)}return s.$$set=_=>{"post"in _&&n(0,r=_.post)},s.$$.update=()=>{s.$$.dirty&1&&n(7,t=ln(r.file_url,r.sample_url,r.preview_url)),s.$$.dirty&128&&n(6,l=t.animated),s.$$.dirty&128&&n(5,o=t.static)},[r,a,i,c,u,o,l,t,d,b,m,p,k,w]}class el extends re{constructor(e){super(),oe(this,e,xs,Ys,le,{post:0})}}function tl(s){return{c:K,l:K,m:K,p:K,i:K,o:K,d:K}}function nl(s){let e,n,t,l,o,r;return{c(){e=C("img"),this.h()},l(a){e=I(a,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){Se(e.src,n=s[2])||h(e,"src",n),h(e,"alt",t="["+s[0].type+"] post #"+s[0].id),h(e,"title",l="["+s[0].type+"] post #"+s[0].id),h(e,"class","svelte-jlq3re")},m(a,i){N(a,e,i),o||(r=[x(e,"contextmenu",rt(ol)),x(e,"click",s[6]),bn(s[7].call(null,e))],o=!0)},p(a,i){i&4&&!Se(e.src,n=a[2])&&h(e,"src",n),i&1&&t!==(t="["+a[0].type+"] post #"+a[0].id)&&h(e,"alt",t),i&1&&l!==(l="["+a[0].type+"] post #"+a[0].id)&&h(e,"title",l)},i:K,o:K,d(a){a&&$(e),o=!1,Je(r)}}}function sl(s){let e,n,t,l,o,r,a,i,c,u;return a=new _t({}),{c(){e=C("img"),o=D(),r=C("div"),A(a.$$.fragment),this.h()},l(f){e=I(f,"IMG",{src:!0,alt:!0,title:!0,class:!0}),o=L(f),r=I(f,"DIV",{class:!0});var d=j(r);O(a.$$.fragment,d),d.forEach($),this.h()},h(){Se(e.src,n=s[3])||h(e,"src",n),h(e,"alt",t="["+s[0].type+"] post #"+s[0].id),h(e,"title",l="["+s[0].type+"] post #"+s[0].id),h(e,"class","svelte-jlq3re"),h(r,"class","svelte-jlq3re")},m(f,d){N(f,e,d),N(f,o,d),N(f,r,d),V(a,r,null),i=!0,c||(u=[x(e,"contextmenu",rt(rl)),x(e,"click",s[6])],c=!0)},p(f,d){(!i||d&8&&!Se(e.src,n=f[3]))&&h(e,"src",n),(!i||d&1&&t!==(t="["+f[0].type+"] post #"+f[0].id))&&h(e,"alt",t),(!i||d&1&&l!==(l="["+f[0].type+"] post #"+f[0].id))&&h(e,"title",l)},i(f){i||(E(a.$$.fragment,f),i=!0)},o(f){S(a.$$.fragment,f),i=!1},d(f){f&&($(e),$(o),$(r)),B(a),c=!1,Je(u)}}}function Ct(s){let e,n,t;function l(r){s[10](r)}let o={max:s[5]};return s[1]!==void 0&&(o.value=s[1]),e=new un({props:o}),ge.push(()=>Pe(e,"value",l)),{c(){A(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,a){V(e,r,a),t=!0},p(r,a){const i={};a&32&&(i.max=r[5]),!n&&a&2&&(n=!0,i.value=r[1],Le(()=>n=!1)),e.$set(i)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function ll(s){let e,n,t,l,o={ctx:s,current:null,token:null,hasCatch:!1,pending:sl,then:nl,catch:tl,value:21,blocks:[,,,]};ht(e=s[8](s[2]),o);let r=s[4]&&Ct(s);return{c(){o.block.c(),n=D(),r&&r.c(),t=Re()},l(a){o.block.l(a),n=L(a),r&&r.l(a),t=Re()},m(a,i){o.block.m(a,o.anchor=i),o.mount=()=>n.parentNode,o.anchor=n,N(a,n,i),r&&r.m(a,i),N(a,t,i),l=!0},p(a,[i]){s=a,o.ctx=s,i&4&&e!==(e=s[8](s[2]))&&ht(e,o)||Mn(o,s,i),s[4]?r?(r.p(s,i),i&16&&E(r,1)):(r=Ct(s),r.c(),E(r,1),r.m(t.parentNode,t)):r&&(pe(),S(r,1,1,()=>{r=null}),de())},i(a){l||(E(o.block),E(r),l=!0)},o(a){for(let i=0;i<3;i+=1){const c=o.blocks[i];S(c)}S(r),l=!1},d(a){a&&($(n),$(t)),o.block.d(a),o.token=null,o=null,r&&r.d(a)}}}const rl=()=>{},ol=()=>{};function il(s,e,n){let t,l,o,r;te(s,Jt,T=>n(4,o=T)),te(s,Cn,T=>n(5,r=T));const a=Be();let{post:i}=e,{postId:c=-1}=e;const u=(T,P,M,W)=>{if(T==="gif"){const ae=Rn(P,M,W);return[ae.static,ae.animated]}return zn?[M,P]:[W,M]};let f=0,d=Date.now(),b=Date.now(),m,p=!0,k;const w=()=>{b=Date.now(),m=b-d,d=b,p||n(1,f+=m/1e3),f>=r&&(a("ended"),n(1,f=0)),k=requestAnimationFrame(w)},_=()=>{p=!p},g=T=>{(T.code==="Space"||T.key==="k")&&(T.preventDefault(),T.stopPropagation(),p=!p)},y=new IntersectionObserver(T=>{for(const P of T)P.target&&(p=!P.isIntersecting)},{rootMargin:"0px",threshold:.5}),R=T=>(y==null||y.observe(T),{destroy(){y==null||y.unobserve(T)}});xe(()=>{o&&(k=requestAnimationFrame(w),document.addEventListener("keydown",g))}),et(()=>{cancelAnimationFrame(k),document.removeEventListener("keydown",g)});const F=T=>new Promise(P=>{p=!0;let M=new Image;M.onload=W=>{P(W),p=!1},M.src=T});function q(T){f=T,n(1,f),n(0,i),n(9,c)}return s.$$set=T=>{"post"in T&&n(0,i=T.post),"postId"in T&&n(9,c=T.postId)},s.$$.update=()=>{s.$$.dirty&1&&n(3,[t,l]=u(i.type,i.file_url,i.sample_url,i.preview_url),t,(n(2,l),n(0,i))),s.$$.dirty&513&&i.id!==c&&(n(9,c=i.id),n(1,f=0))},[i,f,l,t,o,r,_,R,F,c,q]}class al extends re{constructor(e){super(),oe(this,e,il,ll,le,{post:0,postId:9})}}function cl(s){let e,n;return e=new al({props:{post:s[0]}}),e.$on("ended",s[2]),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function ul(s){let e,n;return e=new el({props:{post:s[0]}}),e.$on("ended",s[1]),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function fl(s){let e,n,t,l;const o=[ul,cl],r=[];function a(i,c){return i[0].type==="video"?0:1}return n=a(s),t=r[n]=o[n](s),{c(){e=C("div"),t.c(),this.h()},l(i){e=I(i,"DIV",{class:!0});var c=j(e);t.l(c),c.forEach($),this.h()},h(){h(e,"class","svelte-acjk3s")},m(i,c){N(i,e,c),r[n].m(e,null),l=!0},p(i,[c]){let u=n;n=a(i),n===u?r[n].p(i,c):(pe(),S(r[u],1,1,()=>{r[u]=null}),de(),t=r[n],t?t.p(i,c):(t=r[n]=o[n](i),t.c()),E(t,1),t.m(e,null))},i(i){l||(E(t),l=!0)},o(i){S(t),l=!1},d(i){i&&$(e),r[n].d()}}}function pl(s,e,n){let{post:t}=e;function l(r){je.call(this,s,r)}function o(r){je.call(this,s,r)}return s.$$set=r=>{"post"in r&&n(0,t=r.post)},[t,l,o]}class dl extends re{constructor(e){super(),oe(this,e,pl,fl,le,{post:0})}}function _l(s){let e,n,t;return{c(){e=C("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Se(e.src,n=s[2])||h(e,"src",n),h(e,"alt",t="post #"+s[0].id),h(e,"class","svelte-itxz72"),Ne(e,"top",s[1])},m(l,o){N(l,e,o)},p(l,[o]){o&4&&!Se(e.src,n=l[2])&&h(e,"src",n),o&1&&t!==(t="post #"+l[0].id)&&h(e,"alt",t),o&2&&Ne(e,"top",l[1])},i:K,o:K,d(l){l&&$(e)}}}function gl(s,e,n){let t,{post:l}=e,{offset:o}=e;return s.$$set=r=>{"post"in r&&n(0,l=r.post),"offset"in r&&n(1,o=r.offset)},s.$$.update=()=>{s.$$.dirty&1&&n(2,t=Fn(l.sample_url)?l.preview_url:l.sample_url)},[l,o,t]}class fn extends re{constructor(e){super(),oe(this,e,gl,_l,le,{post:0,offset:1})}}const ml=()=>{const{subscribe:e,set:n}=Hn(Gn.FullscreenHintDone,!1,Wn,Kn);return{subscribe:e,set:n,reset:()=>n(!1)}},It=ml();function Tt(s,e,n){const t=s.slice();return t[22]=e[n],t[24]=n,t}function Dt(s){let e,n;return e=new fn({props:{post:s[7],offset:s[4]}}),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.post=t[7]),l&16&&(o.offset=t[4]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function hl(s){let e;return{c(){e=C("i"),this.h()},l(n){e=I(n,"I",{class:!0}),j(e).forEach($),this.h()},h(){h(e,"class","codicon codicon-tag")},m(n,t){N(n,e,t)},p:K,d(n){n&&$(e)}}}function Lt(s){let e,n;return e=new fn({props:{post:s[6],offset:s[3]}}),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.post=t[6]),l&8&&(o.offset=t[3]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Pt(s){let e,n=`${s[24]*100}vh`;return{c(){e=C("div"),this.h()},l(t){e=I(t,"DIV",{class:!0}),j(e).forEach($),this.h()},h(){h(e,"class","pseudo snap-item svelte-2epggd"),Ne(e,"top",n)},m(t,l){N(t,e,l)},p:K,d(t){t&&$(e)}}}function $l(s){let e,n,t,l,o,r,a,i,c,u,f,d,b,m,p,k=s[7]&&Dt(s);l=new dl({props:{post:s[8]}}),l.$on("ended",s[11]),r=new Ws({props:{post:s[8]}}),i=new Xt({props:{class:"details-button",$$slots:{default:[hl]},$$scope:{ctx:s}}}),i.$on("click",s[14]);let w=s[6]&&Lt(s),_=ve({length:s[0].posts.length}),g=[];for(let y=0;y<_.length;y+=1)g[y]=Pt(Tt(s,_,y));return d=new cn({props:{absoluteTop:s[0].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),d.$on("intersection",s[16]),{c(){e=C("div"),k&&k.c(),n=D(),t=C("div"),A(l.$$.fragment),o=D(),A(r.$$.fragment),a=D(),A(i.$$.fragment),c=D(),w&&w.c(),u=D();for(let y=0;y<g.length;y+=1)g[y].c();f=D(),A(d.$$.fragment),this.h()},l(y){e=I(y,"DIV",{class:!0});var R=j(e);k&&k.l(R),n=L(R),t=I(R,"DIV",{class:!0});var F=j(t);O(l.$$.fragment,F),o=L(F),O(r.$$.fragment,F),a=L(F),O(i.$$.fragment,F),F.forEach($),c=L(R),w&&w.l(R),u=L(R);for(let q=0;q<g.length;q+=1)g[q].l(R);f=L(R),O(d.$$.fragment,R),R.forEach($),this.h()},h(){h(t,"class","screen snap-container horizontal current svelte-2epggd"),Ee(t,"hint",!s[9]),Ne(t,"top",s[5]),h(e,"class","root screen snap-container svelte-2epggd")},m(y,R){N(y,e,R),k&&k.m(e,null),v(e,n),v(e,t),V(l,t,null),v(t,o),V(r,t,null),v(t,a),V(i,t,null),s[15](t),v(e,c),w&&w.m(e,null),v(e,u);for(let F=0;F<g.length;F+=1)g[F]&&g[F].m(e,null);v(e,f),V(d,e,null),s[17](e),b=!0,m||(p=x(e,"scroll",s[12]),m=!0)},p(y,[R]){y[7]?k?(k.p(y,R),R&128&&E(k,1)):(k=Dt(y),k.c(),E(k,1),k.m(e,n)):k&&(pe(),S(k,1,1,()=>{k=null}),de());const F={};R&256&&(F.post=y[8]),l.$set(F);const q={};R&256&&(q.post=y[8]),r.$set(q);const T={};if(R&33554432&&(T.$$scope={dirty:R,ctx:y}),i.$set(T),(!b||R&512)&&Ee(t,"hint",!y[9]),R&32&&Ne(t,"top",y[5]),y[6]?w?(w.p(y,R),R&64&&E(w,1)):(w=Lt(y),w.c(),E(w,1),w.m(e,u)):w&&(pe(),S(w,1,1,()=>{w=null}),de()),R&1){_=ve({length:y[0].posts.length});let M;for(M=0;M<_.length;M+=1){const W=Tt(y,_,M);g[M]?g[M].p(W,R):(g[M]=Pt(W),g[M].c(),g[M].m(e,f))}for(;M<g.length;M+=1)g[M].d(1);g.length=_.length}const P={};R&1&&(P.absoluteTop=y[0].posts.length*100+"vh"),d.$set(P)},i(y){b||(E(k),E(l.$$.fragment,y),E(r.$$.fragment,y),E(i.$$.fragment,y),E(w),E(d.$$.fragment,y),b=!0)},o(y){S(k),S(l.$$.fragment,y),S(r.$$.fragment,y),S(i.$$.fragment,y),S(w),S(d.$$.fragment,y),b=!1},d(y){y&&$(e),k&&k.d(),B(l),B(r),B(i),s[15](null),w&&w.d(),We(g,y),B(d),s[17](null),m=!1,p()}}}function vl(s,e,n){let t,l,o,r,a,i,c,u,f;te(s,It,P=>n(9,c=P)),te(s,Jt,P=>n(18,u=P)),te(s,Ge,P=>n(0,f=P));const d=Be();let{index:b}=e,m,p;const k=()=>{m.scrollTo({left:0,top:m.clientHeight*(b-1),behavior:"smooth"})},w=()=>{m.scrollTo({left:0,top:m.clientHeight*(b+1),behavior:"smooth"})},_=()=>{u&&w()},g=P=>{requestAnimationFrame(()=>{const M=P.target,W=M.getBoundingClientRect().height,ae=M.scrollTop/W,Ie=Math.round(ae);Ie!=b&&(n(13,b=Ie),p&&n(2,p.scrollLeft=0,p))})},y=P=>{P.key==="d"&&(P.preventDefault(),P.stopPropagation(),p.scrollLeft===0?p.scrollBy({left:m.clientWidth,top:0,behavior:"smooth"}):p.scrollBy({left:-m.clientWidth,top:0,behavior:"smooth"})),P.key==="ArrowUp"&&(P.preventDefault(),P.stopPropagation(),k()),P.key==="ArrowDown"&&(P.preventDefault(),P.stopPropagation(),w())};xe(()=>{p&&(p.scrollIntoView(!0),n(2,p.scrollLeft=0,p)),document.addEventListener("keydown",y)}),et(()=>{kn(It,c=!0,c),document.removeEventListener("keydown",y)});const R=()=>p.scrollBy({left:m.clientWidth,top:0,behavior:"smooth"});function F(P){ge[P?"unshift":"push"](()=>{p=P,n(2,p)})}const q=()=>d("endreached");function T(P){ge[P?"unshift":"push"](()=>{m=P,n(1,m)})}return s.$$set=P=>{"index"in P&&n(13,b=P.index)},s.$$.update=()=>{s.$$.dirty&8193&&n(8,t=f.posts[b]),s.$$.dirty&8193&&n(7,l=b>0?f.posts[b-1]:void 0),s.$$.dirty&8193&&n(6,o=b<f.posts.length-1?f.posts[b+1]:void 0),s.$$.dirty&8192&&n(5,r=`${b*100}vh`),s.$$.dirty&8192&&n(4,a=`${(b-1)*100}vh`),s.$$.dirty&8192&&n(3,i=`${(b+1)*100}vh`)},[f,m,p,i,a,r,o,l,t,c,d,_,g,b,R,F,q,T]}class bl extends re{constructor(e){super(),oe(this,e,vl,$l,le,{index:13})}}function kl(s){let e;return{c(){e=C("i"),this.h()},l(n){e=I(n,"I",{class:!0}),j(e).forEach($),this.h()},h(){h(e,"class","codicon codicon-close")},m(n,t){N(n,e,t)},p:K,d(n){n&&$(e)}}}function wl(s){let e,n,t,l,o;function r(i){s[2](i)}let a={};return s[0]!==void 0&&(a.index=s[0]),e=new bl({props:a}),ge.push(()=>Pe(e,"index",r)),e.$on("endreached",s[3]),l=new Xt({props:{class:"button-close",$$slots:{default:[kl]},$$scope:{ctx:s}}}),l.$on("click",s[1]),{c(){A(e.$$.fragment),t=D(),A(l.$$.fragment)},l(i){O(e.$$.fragment,i),t=L(i),O(l.$$.fragment,i)},m(i,c){V(e,i,c),N(i,t,c),V(l,i,c),o=!0},p(i,c){const u={};!n&&c&1&&(n=!0,u.index=i[0],Le(()=>n=!1)),e.$set(u);const f={};c&128&&(f.$$scope={dirty:c,ctx:i}),l.$set(f)},i(i){o||(E(e.$$.fragment,i),E(l.$$.fragment,i),o=!0)},o(i){S(e.$$.fragment,i),S(l.$$.fragment,i),o=!1},d(i){i&&$(t),B(e,i),B(l,i)}}}function yl(s){let e,n;return e=new Bs({props:{$$slots:{default:[wl]},$$scope:{ctx:s}}}),e.$on("close",s[1]),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,[l]){const o={};l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function El(s,e,n){let{index:t}=e;const l=Be(),o=()=>{l("close",t)},r=u=>{u.key==="f"&&(u.preventDefault(),u.stopPropagation(),o())},a=()=>{var u,f;(((u=history.state)==null?void 0:u.fullscreen)===void 0||((f=history.state)==null?void 0:f.fullscreen)===!1)&&o()};xe(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),et(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(u){t=u,n(0,t)}function c(u){je.call(this,s,u)}return s.$$set=u=>{"index"in u&&n(0,t=u.index)},[t,o,i,c]}class Sl extends re{constructor(e){super(),oe(this,e,El,yl,le,{index:0})}}function Nt(s){let e,n=s[0].type==="video"?"▶":"GIF",t;return{c(){e=C("span"),t=Z(n),this.h()},l(l){e=I(l,"SPAN",{class:!0});var o=j(e);t=X(o,n),o.forEach($),this.h()},h(){h(e,"class","type svelte-rfj0jo")},m(l,o){N(l,e,o),v(e,t)},p(l,o){o&1&&n!==(n=l[0].type==="video"?"▶":"GIF")&&$e(t,n)},d(l){l&&$(e)}}}function Cl(s){let e,n,t,l,o,r,a=Ve(s[0].score)+"",i,c,u,f,d=s[0].type!=="image"&&Nt(s);return{c(){e=C("div"),n=C("img"),l=D(),d&&d.c(),o=D(),r=C("span"),i=Z(a),this.h()},l(b){e=I(b,"DIV",{id:!0,class:!0,style:!0});var m=j(e);n=I(m,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),l=L(m),d&&d.l(m),o=L(m),r=I(m,"SPAN",{class:!0});var p=j(r);i=X(p,a),p.forEach($),m.forEach($),this.h()},h(){Se(n.src,t=s[1])||h(n,"src",t),h(n,"alt","post"),h(n,"class","post-media svelte-rfj0jo"),h(n,"tabindex","-1"),h(n,"loading","lazy"),h(r,"class","score svelte-rfj0jo"),h(e,"id",c=ut(s[0].id)),h(e,"class","post svelte-rfj0jo"),Ne(e,"grid-row","span "+s[2]),Ee(e,"open",open)},m(b,m){N(b,e,m),v(e,n),v(e,l),d&&d.m(e,null),v(e,o),v(e,r),v(r,i),u||(f=[x(e,"click",s[3]),x(e,"keydown",s[4])],u=!0)},p(b,[m]){m&2&&!Se(n.src,t=b[1])&&h(n,"src",t),b[0].type!=="image"?d?d.p(b,m):(d=Nt(b),d.c(),d.m(e,o)):d&&(d.d(1),d=null),m&1&&a!==(a=Ve(b[0].score)+"")&&$e(i,a),m&1&&c!==(c=ut(b[0].id))&&h(e,"id",c),m&0&&Ee(e,"open",open)},i:K,o:K,d(b){b&&$(e),d&&d.d(),u=!1,Je(f)}}}let jt=5;function Il(s,e,n){let t,{post:l}=e,o=1/3,r=An(l.width,l.height),a=Math.max(Math.min(Math.round(jt/r),jt/o),2);const i=f=>f.endsWith(".jpg")||f.endsWith(".jpeg")||f.endsWith(".png")||f.endsWith(".webp");function c(f){je.call(this,s,f)}const u=f=>{var d;(qn(f)||f.key==="f")&&((d=f.target)==null||d.click())};return s.$$set=f=>{"post"in f&&n(0,l=f.post)},s.$$.update=()=>{s.$$.dirty&1&&n(1,t=i(l.sample_url)?l.sample_url:l.preview_url)},[l,t,a,c,u]}class Tl extends re{constructor(e){super(),oe(this,e,Il,Cl,le,{post:0})}}function Rt(s,e,n){const t=s.slice();t[2]=e[n];const l=t[2].host.replace("www.","");t[3]=l;const o=t[1][t[3]]??t[1].default;t[4]=o[0],t[5]=o[1];const r=t[3].includes("api-cdn")?"File":t[3];return t[6]=r,t}function Ft(s){let e,n,t=s[6]+"",l,o,r,a;return{c(){e=C("li"),n=C("a"),l=Z(t),a=D(),this.h()},l(i){e=I(i,"LI",{});var c=j(e);n=I(c,"A",{href:!0,class:!0,style:!0});var u=j(n);l=X(u,t),u.forEach($),a=L(c),c.forEach($),this.h()},h(){h(n,"href",o=s[2].toString()),h(n,"class",r="codicon codicon-link-external "+s[5]+" svelte-f59j30"),Ne(n,"background-color",s[4]),Ne(n,"color",s[5])},m(i,c){N(i,e,c),v(e,n),v(n,l),v(e,a)},p(i,c){c&1&&t!==(t=i[6]+"")&&$e(l,t),c&1&&o!==(o=i[2].toString())&&h(n,"href",o),c&1&&r!==(r="codicon codicon-link-external "+i[5]+" svelte-f59j30")&&h(n,"class",r),c&1&&Ne(n,"background-color",i[4]),c&1&&Ne(n,"color",i[5])},d(i){i&&$(e)}}}function Dl(s){let e,n=ve(s[0]),t=[];for(let l=0;l<n.length;l+=1)t[l]=Ft(Rt(s,n,l));return{c(){e=C("ol");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=I(l,"OL",{class:!0});var o=j(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach($),this.h()},h(){h(e,"class","svelte-f59j30")},m(l,o){N(l,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(l,[o]){if(o&3){n=ve(l[0]);let r;for(r=0;r<n.length;r+=1){const a=Rt(l,n,r);t[r]?t[r].p(a,o):(t[r]=Ft(a),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:K,o:K,d(l){l&&$(e),We(t,l)}}}function Ll(s,e,n){let{links:t}=e;const l={"kurosearch.com":["crimson","white"],"rule34.xxx":["#aae5a4","black"],"newgrounds.com":["#fda238","black"],"twitter.com":["rgb(29, 155, 240)","white"],"x.com":["rgb(29, 155, 240)","white"],"pornhub.com":["#f90","black"],"zone-archive.com":["#59396A","white"],"subscribestar.adult":["#ff4081","white"],"redgifs.com":["#E5194D","white"],"deviantart.com":["#00c787","black"],default:["var(--background-2)","white"]};return s.$$set=o=>{"links"in o&&n(0,t=o.links)},[t,l]}class Pl extends re{constructor(e){super(),oe(this,e,Ll,Dl,le,{links:0})}}function At(s){let e,n=Ve(s[0].comment_count)+"",t,l,o;return{c(){e=C("button"),t=Z(n),this.h()},l(r){e=I(r,"BUTTON",{type:!0,class:!0});var a=j(e);t=X(a,n),a.forEach($),this.h()},h(){h(e,"type","button"),h(e,"class","codicon codicon-comment svelte-nhpj3u"),Ee(e,"active",s[1]==="comments")},m(r,a){N(r,e,a),v(e,t),l||(o=x(e,"click",Ze(s[5])),l=!0)},p(r,a){a&1&&n!==(n=Ve(r[0].comment_count)+"")&&$e(t,n),a&2&&Ee(e,"active",r[1]==="comments")},d(r){r&&$(e),l=!1,o()}}}function Nl(s){let e,n,t,l,o="•",r,a,i,c,u,f,d=Ve(s[2])+"",b,m,p,k,w=Ve(s[0].tags.length)+"",_,g,y,R;n=new en({props:{value:s[0].change}}),a=new xt({props:{value:s[0].score}});let F=s[0].comment_count&&At(s);return{c(){e=C("div"),A(n.$$.fragment),t=D(),l=C("span"),l.textContent=o,r=D(),A(a.$$.fragment),i=D(),c=C("span"),u=D(),f=C("button"),b=Z(d),m=D(),F&&F.c(),p=D(),k=C("button"),_=Z(w),this.h()},l(q){e=I(q,"DIV",{class:!0});var T=j(e);O(n.$$.fragment,T),t=L(T),l=I(T,"SPAN",{"data-svelte-h":!0}),ue(l)!=="svelte-7hh8jk"&&(l.textContent=o),r=L(T),O(a.$$.fragment,T),i=L(T),c=I(T,"SPAN",{class:!0}),j(c).forEach($),u=L(T),f=I(T,"BUTTON",{type:!0,class:!0});var P=j(f);b=X(P,d),P.forEach($),m=L(T),F&&F.l(T),p=L(T),k=I(T,"BUTTON",{type:!0,class:!0});var M=j(k);_=X(M,w),M.forEach($),T.forEach($),this.h()},h(){h(c,"class","divider svelte-nhpj3u"),h(f,"type","button"),h(f,"class","codicon codicon-link svelte-nhpj3u"),Ee(f,"active",s[1]==="links"),h(k,"type","button"),h(k,"class","codicon codicon-tag svelte-nhpj3u"),Ee(k,"active",s[1]==="tags"),h(e,"class","summary svelte-nhpj3u")},m(q,T){N(q,e,T),V(n,e,null),v(e,t),v(e,l),v(e,r),V(a,e,null),v(e,i),v(e,c),v(e,u),v(e,f),v(f,b),v(e,m),F&&F.m(e,null),v(e,p),v(e,k),v(k,_),g=!0,y||(R=[x(f,"click",Ze(s[4])),x(k,"click",Ze(s[6]))],y=!0)},p(q,[T]){const P={};T&1&&(P.value=q[0].change),n.$set(P);const M={};T&1&&(M.value=q[0].score),a.$set(M),(!g||T&4)&&d!==(d=Ve(q[2])+"")&&$e(b,d),(!g||T&2)&&Ee(f,"active",q[1]==="links"),q[0].comment_count?F?F.p(q,T):(F=At(q),F.c(),F.m(e,p)):F&&(F.d(1),F=null),(!g||T&1)&&w!==(w=Ve(q[0].tags.length)+"")&&$e(_,w),(!g||T&2)&&Ee(k,"active",q[1]==="tags")},i(q){g||(E(n.$$.fragment,q),E(a.$$.fragment,q),g=!0)},o(q){S(n.$$.fragment,q),S(a.$$.fragment,q),g=!1},d(q){q&&$(e),B(n),B(a),F&&F.d(),y=!1,Je(R)}}}function jl(s,e,n){const t=Be();let{post:l}=e,{active:o}=e,{links:r}=e;const a=()=>t("links"),i=()=>t("comments"),c=()=>t("tags");return s.$$set=u=>{"post"in u&&n(0,l=u.post),"active"in u&&n(1,o=u.active),"links"in u&&n(2,r=u.links)},[l,o,r,t,a,i,c]}class Rl extends re{constructor(e){super(),oe(this,e,jl,Nl,le,{post:0,active:1,links:2})}}function Fl(s){let e,n='<i class="codicon codicon-screen-full"></i>',t,l;return{c(){e=C("button"),e.innerHTML=n,this.h()},l(o){e=I(o,"BUTTON",{type:!0,title:!0,class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-hnv5zq"&&(e.innerHTML=n),this.h()},h(){h(e,"type","button"),h(e,"title","Enter Fullscreen mode"),h(e,"class","svelte-txn4jo")},m(o,r){N(o,e,r),t||(l=x(e,"click",s[0]),t=!0)},p:K,i:K,o:K,d(o){o&&$(e),t=!1,l()}}}function Al(s){function e(n){je.call(this,s,n)}return[e]}class Ol extends re{constructor(e){super(),oe(this,e,Al,Fl,le,{})}}function Vl(s){const e=s.slice(),n=ln(e[1].file_url,e[1].sample_url,e[1].preview_url);return e[13]=n,e}function Bl(s){let e,n;return e=new On({props:{post:s[1]}}),e.$on("click",s[5]),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Ml(s){let e,n;return e=new Vn({props:{src:s[13].animated,poster:s[13].static,width:s[1].width,height:s[1].height,loop:s[2]||mt(s[1].tags)}}),e.$on("click",s[5]),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.src=t[13].animated),l&2&&(o.poster=t[13].static),l&2&&(o.width=t[1].width),l&2&&(o.height=t[1].height),l&6&&(o.loop=t[2]||mt(t[1].tags)),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function zl(s){let e,n;return e=new Bn({props:{post:s[1]}}),e.$on("click",s[5]),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function ql(s){let e,n;return e=new Pl({props:{links:s[6]}}),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p:K,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Ul(s){let e,n;return e=new nn({props:{post:s[1]}}),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Hl(s){let e,n;return e=new sn({props:{tags:s[1].tags}}),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.tags=t[1].tags),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Gl(s){let e,n,t,l,o,r,a,i,c,u,f,d,b,m,p,k;const w=[zl,Ml,Bl],_=[];function g(T,P){return T[1].type==="image"?0:T[1].type==="video"?1:2}function y(T,P){return P===1?Vl(T):T}t=g(s),l=_[t]=w[t](y(s,t)),r=new Ol({}),r.$on("click",s[7]),c=new Rl({props:{active:s[0],post:s[1],links:s[6].length}}),c.$on("tags",s[8]),c.$on("comments",s[9]),c.$on("links",s[10]);const R=[Hl,Ul,ql],F=[];function q(T,P){return T[0]==="tags"?0:T[0]==="comments"?1:T[0]==="links"?2:-1}return~(f=q(s))&&(d=F[f]=R[f](s)),{c(){e=C("li"),n=C("div"),l.c(),o=D(),A(r.$$.fragment),a=D(),i=C("div"),A(c.$$.fragment),u=D(),d&&d.c(),this.h()},l(T){e=I(T,"LI",{id:!0,class:!0});var P=j(e);n=I(P,"DIV",{});var M=j(n);l.l(M),M.forEach($),o=L(P),O(r.$$.fragment,P),a=L(P),i=I(P,"DIV",{class:!0});var W=j(i);O(c.$$.fragment,W),u=L(W),d&&d.l(W),W.forEach($),P.forEach($),this.h()},h(){h(i,"class","details svelte-162qa8v"),h(e,"id",b=ut(s[1].id)),h(e,"class","post svelte-162qa8v"),Ee(e,"openTab",s[0])},m(T,P){N(T,e,P),v(e,n),_[t].m(n,null),v(e,o),V(r,e,null),v(e,a),v(e,i),V(c,i,null),v(i,u),~f&&F[f].m(i,null),m=!0,p||(k=x(e,"keydown",s[11]),p=!0)},p(T,[P]){let M=t;t=g(T),t===M?_[t].p(y(T,t),P):(pe(),S(_[M],1,1,()=>{_[M]=null}),de(),l=_[t],l?l.p(y(T,t),P):(l=_[t]=w[t](y(T,t)),l.c()),E(l,1),l.m(n,null));const W={};P&1&&(W.active=T[0]),P&2&&(W.post=T[1]),c.$set(W);let ae=f;f=q(T),f===ae?~f&&F[f].p(T,P):(d&&(pe(),S(F[ae],1,1,()=>{F[ae]=null}),de()),~f?(d=F[f],d?d.p(T,P):(d=F[f]=R[f](T),d.c()),E(d,1),d.m(i,null)):d=null),(!m||P&2&&b!==(b=ut(T[1].id)))&&h(e,"id",b),(!m||P&1)&&Ee(e,"openTab",T[0])},i(T){m||(E(l),E(r.$$.fragment,T),E(c.$$.fragment,T),E(d),m=!0)},o(T){S(l),S(r.$$.fragment,T),S(c.$$.fragment,T),S(d),m=!1},d(T){T&&$(e),_[t].d(),B(r),B(c),~f&&F[f].d(),p=!1,k()}}}function Kl(s,e,n){let t,l;te(s,In,k=>n(12,t=k)),te(s,Un,k=>n(2,l=k));const o=Be();let{post:r}=e,{openTab:a=void 0}=e;const i=k=>{n(0,a=a===k?void 0:k)},c=()=>{t&&i("tags")},u=[new URL(`https://kurosearch.com/post?id=${r.id}&src=${encodeURIComponent(r.file_url)}`),new URL(`https://rule34.xxx/index.php?page=post&s=view&id=${r.id}`),new URL(r.file_url),...r.source?r.source.split(" ").filter(k=>Jn(k)).map(k=>new URL(k)):[]],f=()=>o("fullscreen"),d=()=>i("tags"),b=()=>i("comments"),m=()=>i("links"),p=k=>{k.key==="f"&&o("fullscreen")};return s.$$set=k=>{"post"in k&&n(1,r=k.post),"openTab"in k&&n(0,a=k.openTab)},[a,r,l,o,i,c,u,f,d,b,m,p]}class Wl extends re{constructor(e){super(),oe(this,e,Kl,Gl,le,{post:1,openTab:0})}}function Ot(s,e,n){const t=s.slice();return t[7]=e[n],t[9]=n,t}function Vt(s,e,n){const t=s.slice();return t[7]=e[n],t[9]=n,t}function Jl(s){let e,n,t=ve(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Bt(Ot(s,t,r));const o=r=>S(l[r],1,1,()=>{l[r]=null});return{c(){e=C("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=I(r,"OL",{class:!0,style:!0});var a=j(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach($),this.h()},h(){h(e,"class","multi-column svelte-1nfzeed"),Ne(e,"--nr-columns",s[2])},m(r,a){N(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=ve(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Ot(r,t,i);l[i]?(l[i].p(c,a),E(l[i],1)):(l[i]=Bt(c),l[i].c(),E(l[i],1),l[i].m(e,null))}for(pe(),i=t.length;i<l.length;i+=1)o(i);de()}(!n||a&4)&&Ne(e,"--nr-columns",r[2])},i(r){if(!n){for(let a=0;a<t.length;a+=1)E(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)S(l[a]);n=!1},d(r){r&&$(e),We(l,r)}}}function Ql(s){let e,n,t=ve(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Mt(Vt(s,t,r));const o=r=>S(l[r],1,1,()=>{l[r]=null});return{c(){e=C("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=I(r,"OL",{class:!0});var a=j(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach($),this.h()},h(){h(e,"class","single-column svelte-1nfzeed")},m(r,a){N(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=ve(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Vt(r,t,i);l[i]?(l[i].p(c,a),E(l[i],1)):(l[i]=Mt(c),l[i].c(),E(l[i],1),l[i].m(e,null))}for(pe(),i=t.length;i<l.length;i+=1)o(i);de()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)E(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)S(l[a]);n=!1},d(r){r&&$(e),We(l,r)}}}function Bt(s){let e,n;function t(){return s[5](s[9])}return e=new Tl({props:{post:s[7]}}),e.$on("click",t),{c(){A(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,o){V(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[7]),e.$set(r)},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){S(e.$$.fragment,l),n=!1},d(l){B(e,l)}}}function Mt(s){let e,n;function t(){return s[4](s[9])}return e=new Wl({props:{post:s[7]}}),e.$on("fullscreen",t),{c(){A(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,o){V(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[7]),e.$set(r)},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){S(e.$$.fragment,l),n=!1},d(l){B(e,l)}}}function zt(s){let e,n;return e=new Sl({props:{index:s[0]}}),e.$on("close",s[3]),e.$on("endreached",s[6]),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.index=t[0]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Yl(s){let e,n,t,l,o;const r=[Ql,Jl],a=[];function i(u,f){return u[2]==="1"?0:1}e=i(s),n=a[e]=r[e](s);let c=s[0]!==void 0&&zt(s);return{c(){n.c(),t=D(),c&&c.c(),l=Re()},l(u){n.l(u),t=L(u),c&&c.l(u),l=Re()},m(u,f){a[e].m(u,f),N(u,t,f),c&&c.m(u,f),N(u,l,f),o=!0},p(u,[f]){let d=e;e=i(u),e===d?a[e].p(u,f):(pe(),S(a[d],1,1,()=>{a[d]=null}),de(),n=a[e],n?n.p(u,f):(n=a[e]=r[e](u),n.c()),E(n,1),n.m(t.parentNode,t)),u[0]!==void 0?c?(c.p(u,f),f&1&&E(c,1)):(c=zt(u),c.c(),E(c,1),c.m(l.parentNode,l)):c&&(pe(),S(c,1,1,()=>{c=null}),de())},i(u){o||(E(n),E(c),o=!0)},o(u){S(n),S(c),o=!1},d(u){u&&($(t),$(l)),a[e].d(u),c&&c.d(u)}}}function Zl(s,e,n){let t,l;te(s,Ge,u=>n(1,t=u)),te(s,Zt,u=>n(2,l=u));let o;const r=u=>{var b;const f=t.posts[u.detail],d=ut(f.id);(b=document.getElementById(d))==null||b.scrollIntoView(),n(0,o=void 0)},a=u=>{n(0,o=u)},i=u=>{n(0,o=u)};function c(u){je.call(this,s,u)}return s.$$.update=()=>{var u;s.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(u=history.state)!=null&&u.fullscreen&&history.back())},[o,t,l,r,a,i,c]}class Xl extends re{constructor(e){super(),oe(this,e,Zl,Yl,le,{})}}function qt(s,e,n){const t=s.slice();return t[8]=e[n],t}function xl(s){let e,n="We couldn't find any posts matching your tags. Sorry...";return{c(){e=C("p"),e.textContent=n},l(t){e=I(t,"P",{"data-svelte-h":!0}),ue(e)!=="svelte-1utxj3w"&&(e.textContent=n)},m(t,l){N(t,e,l)},p:K,d(t){t&&$(e)}}}function er(s){let e,n='<b class="svelte-zfjaug">⚠</b> <span>Conflicting tags detected</span> <b class="svelte-zfjaug">⚠</b>',t,l,o=ve(s[0]),r=[];for(let a=0;a<o.length;a+=1)r[a]=Ut(qt(s,o,a));return{c(){e=C("h6"),e.innerHTML=n,t=D(),l=C("ul");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=I(a,"H6",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1e4zdfj"&&(e.innerHTML=n),t=L(a),l=I(a,"UL",{class:!0});var i=j(l);for(let c=0;c<r.length;c+=1)r[c].l(i);i.forEach($),this.h()},h(){h(e,"class","svelte-zfjaug"),h(l,"class","svelte-zfjaug")},m(a,i){N(a,e,i),N(a,t,i),N(a,l,i);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(l,null)},p(a,i){if(i&1){o=ve(a[0]);let c;for(c=0;c<o.length;c+=1){const u=qt(a,o,c);r[c]?r[c].p(u,i):(r[c]=Ut(u),r[c].c(),r[c].m(l,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}},d(a){a&&($(e),$(t),$(l)),We(r,a)}}}function Ut(s){let e,n,t="⚠",l,o,r=s[8]+"",a,i;return{c(){e=C("li"),n=C("b"),n.textContent=t,l=D(),o=C("span"),a=Z(r),i=D(),this.h()},l(c){e=I(c,"LI",{class:!0});var u=j(e);n=I(u,"B",{class:!0,"data-svelte-h":!0}),ue(n)!=="svelte-yluixs"&&(n.textContent=t),l=L(u),o=I(u,"SPAN",{});var f=j(o);a=X(f,r),f.forEach($),i=L(u),u.forEach($),this.h()},h(){h(n,"class","svelte-zfjaug"),h(e,"class","svelte-zfjaug")},m(c,u){N(c,e,u),v(e,n),v(e,l),v(e,o),v(o,a),v(e,i)},p(c,u){u&1&&r!==(r=c[8]+"")&&$e(a,r)},d(c){c&&$(e)}}}function tr(s){let e;return{c(){e=Z("Reset Filter")},l(n){e=X(n,"Reset Filter")},m(n,t){N(n,e,t)},d(n){n&&$(e)}}}function nr(s){let e;return{c(){e=Z("Reset Tags")},l(n){e=X(n,"Reset Tags")},m(n,t){N(n,e,t)},d(n){n&&$(e)}}}function sr(s){let e,n,t,l,o,r,a,i,c,u;function f(m,p){return m[0].length?er:xl}let d=f(s),b=d(s);return a=new qe({props:{type:"secondary",title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[tr]},$$scope:{ctx:s}}}),a.$on("click",s[5]),c=new qe({props:{type:"secondary",title:"Tag combinations that are too specific will not yield results.",$$slots:{default:[nr]},$$scope:{ctx:s}}}),c.$on("click",s[6]),{c(){e=C("section"),n=C("img"),l=D(),b.c(),o=D(),r=C("div"),A(a.$$.fragment),i=D(),A(c.$$.fragment),this.h()},l(m){e=I(m,"SECTION",{class:!0});var p=j(e);n=I(p,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),l=L(p),b.l(p),o=L(p),r=I(p,"DIV",{class:!0});var k=j(r);O(a.$$.fragment,k),i=L(k),O(c.$$.fragment,k),k.forEach($),p.forEach($),this.h()},h(){Se(n.src,t=Wt+"/assets/lynxy-chibi-not-found.webp")||h(n,"src",t),h(n,"alt","Nothing here..."),h(n,"width","1231"),h(n,"height","864"),h(n,"class","svelte-zfjaug"),h(r,"class","svelte-zfjaug"),h(e,"class","svelte-zfjaug")},m(m,p){N(m,e,p),v(e,n),v(e,l),b.m(e,null),v(e,o),v(e,r),V(a,r,null),v(r,i),V(c,r,null),u=!0},p(m,[p]){d===(d=f(m))&&b?b.p(m,p):(b.d(1),b=d(m),b&&(b.c(),b.m(e,o)));const k={};p&2048&&(k.$$scope={dirty:p,ctx:m}),a.$set(k);const w={};p&2048&&(w.$$scope={dirty:p,ctx:m}),c.$set(w)},i(m){u||(E(a.$$.fragment,m),E(c.$$.fragment,m),u=!0)},o(m){S(a.$$.fragment,m),S(c.$$.fragment,m),u=!1},d(m){m&&$(e),b.d(),B(a),B(c)}}}function lr(s,e,n){let t,l,o,r;te(s,Xe,f=>n(2,l=f)),te(s,rn,f=>n(3,o=f)),te(s,Ke,f=>n(4,r=f));const a=Be(),i=(f,d,b)=>{const m=b.flatMap(w=>w.tags.map(_=>({..._,supertag:w.name}))),p=Object.keys(d).filter(w=>d[w]).flatMap(w=>Zn[w].map(_=>({modifier:"-",name:_,group:w}))),k=[];for(const w of f){const _=p.find(y=>y.name===w.name);w.modifier!=="-"&&_&&k.push(`"${w.name}" is blocked by "${_.group}" in preferences.`);const g=m.find(y=>y.name===w.name);g&&(w.modifier==="-"&&g.modifier!=="-"&&k.push(`"${w.name}" is excluded but required by supertag "${g.supertag}".`),w.modifier!=="-"&&g.modifier==="-"&&k.push(`"${w.name}" is required but excluded by supertag "${g.supertag}".`))}for(const w of m){const _=p.find(y=>y.name===w.name);w.modifier!=="-"&&_&&k.push(`"${w.name}" (of supertag "${w.supertag}") is blocked by "${_.group}" in preferences.`);const g=m.find(y=>y.supertag!==w.supertag&&y.name===w.name);g&&(w.modifier==="-"&&g.modifier!=="-"&&k.push(`"${w.name}" is excluded by "${w.supertag}" but required by supertag "${g.supertag}".`),w.modifier!=="-"&&g.modifier==="-"&&k.push(`"${w.name}" is required by "${w.supertag}" but excluded by supertag "${g.supertag}".`))}return k},c=()=>{Ye.reset(),Ue.reset(),a("sortfilterupdate")},u=()=>{Ke.reset(),Xe.reset()};return s.$$.update=()=>{s.$$.dirty&28&&n(0,t=i(r,o,l))},[t,a,l,o,r,c,u]}class rr extends re{constructor(e){super(),oe(this,e,lr,sr,le,{})}}function Ht(s,e,n){const t=s.slice();return t[11]=e[n],t}function Gt(s){let e,n;return e=new rs({props:{tag:s[11]}}),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.tag=t[11]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function or(s){let e;return{c(){e=Z("Create supertag")},l(n){e=X(n,"Create supertag")},m(n,t){N(n,e,t)},d(n){n&&$(e)}}}function ir(s){let e,n,t="Create Supertag",l,o,r,a,i,c="Name",u,f,d,b,m,p="Description",k,w,_,g,y,R="Tags",F,q,T,P,M,W,ae,Ie,fe=ve(s[3]),J=[];for(let H=0;H<fe.length;H+=1)J[H]=Gt(Ht(s,fe,H));const ce=H=>S(J[H],1,1,()=>{J[H]=null});return M=new qe({props:{title:s[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!s[4],$$slots:{default:[or]},$$scope:{ctx:s}}}),M.$on("click",s[9]),{c(){e=C("section"),n=C("h3"),n.textContent=t,l=D(),o=C("button"),r=D(),a=C("div"),i=C("label"),i.textContent=c,u=D(),f=C("input"),d=D(),b=C("div"),m=C("label"),m.textContent=p,k=D(),w=C("input"),_=D(),g=C("div"),y=C("span"),y.textContent=R,F=D(),q=C("ol");for(let H=0;H<J.length;H+=1)J[H].c();T=D(),P=C("div"),A(M.$$.fragment),this.h()},l(H){e=I(H,"SECTION",{class:!0});var G=j(e);n=I(G,"H3",{"data-svelte-h":!0}),ue(n)!=="svelte-ho1cwx"&&(n.textContent=t),l=L(G),o=I(G,"BUTTON",{type:!0,class:!0}),j(o).forEach($),r=L(G),a=I(G,"DIV",{class:!0});var ie=j(a);i=I(ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(i)!=="svelte-10k8a68"&&(i.textContent=c),u=L(ie),f=I(ie,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),ie.forEach($),d=L(G),b=I(G,"DIV",{class:!0});var Y=j(b);m=I(Y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(m)!=="svelte-14n9kp6"&&(m.textContent=p),k=L(Y),w=I(Y,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),Y.forEach($),_=L(G),g=I(G,"DIV",{class:!0});var me=j(g);y=I(me,"SPAN",{class:!0,"data-svelte-h":!0}),ue(y)!=="svelte-7hjyox"&&(y.textContent=R),F=L(me),q=I(me,"OL",{class:!0});var Ce=j(q);for(let Te=0;Te<J.length;Te+=1)J[Te].l(Ce);Ce.forEach($),me.forEach($),T=L(G),P=I(G,"DIV",{class:!0});var Me=j(P);O(M.$$.fragment,Me),Me.forEach($),G.forEach($),this.h()},h(){h(o,"type","button"),h(o,"class","codicon codicon-close svelte-1x6vc81"),h(i,"for","supertag-name"),h(i,"class","svelte-1x6vc81"),h(f,"type","text"),h(f,"placeholder","Descriptive name"),h(f,"id","supertag-name"),h(f,"class","svelte-1x6vc81"),h(a,"class","svelte-1x6vc81"),h(m,"for","supertag-description"),h(m,"class","svelte-1x6vc81"),h(w,"type","text"),h(w,"placeholder","Short description"),h(w,"id","supertag-description"),h(w,"class","svelte-1x6vc81"),h(b,"class","svelte-1x6vc81"),h(y,"class","svelte-1x6vc81"),h(q,"class","svelte-1x6vc81"),h(g,"class","svelte-1x6vc81"),h(P,"class","last svelte-1x6vc81"),h(e,"class","svelte-1x6vc81")},m(H,G){N(H,e,G),v(e,n),v(e,l),v(e,o),v(e,r),v(e,a),v(a,i),v(a,u),v(a,f),He(f,s[0]),v(e,d),v(e,b),v(b,m),v(b,k),v(b,w),He(w,s[2]),v(e,_),v(e,g),v(g,y),v(g,F),v(g,q);for(let ie=0;ie<J.length;ie+=1)J[ie]&&J[ie].m(q,null);v(e,T),v(e,P),V(M,P,null),W=!0,ae||(Ie=[x(o,"click",s[6]),x(f,"input",s[7]),x(w,"input",s[8])],ae=!0)},p(H,G){if(G&1&&f.value!==H[0]&&He(f,H[0]),G&4&&w.value!==H[2]&&He(w,H[2]),G&8){fe=ve(H[3]);let Y;for(Y=0;Y<fe.length;Y+=1){const me=Ht(H,fe,Y);J[Y]?(J[Y].p(me,G),E(J[Y],1)):(J[Y]=Gt(me),J[Y].c(),E(J[Y],1),J[Y].m(q,null))}for(pe(),Y=fe.length;Y<J.length;Y+=1)ce(Y);de()}const ie={};G&16&&(ie.title=H[4]?"Click to create supertag":"Enter a valid name to continue"),G&16&&(ie.disabled=!H[4]),G&16384&&(ie.$$scope={dirty:G,ctx:H}),M.$set(ie)},i(H){if(!W){for(let G=0;G<fe.length;G+=1)E(J[G]);E(M.$$.fragment,H),W=!0}},o(H){J=J.filter(Boolean);for(let G=0;G<J.length;G+=1)S(J[G]);S(M.$$.fragment,H),W=!1},d(H){H&&$(e),We(J,H),B(M),ae=!1,Je(Ie)}}}function ar(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[ir]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.dialog=s[1]),e=new Qt({props:o}),ge.push(()=>Pe(e,"dialog",l)),e.$on("close",s[6]),{c(){A(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,a){V(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],Le(()=>n=!1)),e.$set(i)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function cr(s,e,n){let t,{dialog:l}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=Be(),c=()=>l.close();function u(){o=this.value,n(0,o)}function f(){r=this.value,n(2,r)}const d=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:m,name:p})=>({modifier:m,name:p}))}),c()};function b(m){l=m,n(1,l)}return s.$$set=m=>{"dialog"in m&&n(1,l=m.dialog),"name"in m&&n(0,o=m.name),"description"in m&&n(2,r=m.description),"tags"in m&&n(3,a=m.tags)},s.$$.update=()=>{s.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,l,r,a,t,i,c,u,f,d,b]}class ur extends re{constructor(e){super(),oe(this,e,cr,ar,le,{dialog:1,name:0,description:2,tags:3})}}function fr(s){let e;return{c(){e=Z("Search")},l(n){e=X(n,"Search")},m(n,t){N(n,e,t)},i:K,o:K,d(n){n&&$(e)}}}function pr(s){let e,n;return e=new _t({}),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function dr(s){let e,n,t,l;const o=[pr,fr],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Re()},l(i){n.l(i),t=Re()},m(i,c){r[e].m(i,c),N(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(pe(),S(r[u],1,1,()=>{r[u]=null}),de(),n=r[e],n||(n=r[e]=o[e](i),n.c()),E(n,1),n.m(t.parentNode,t))},i(i){l||(E(n),l=!0)},o(i){S(n),l=!1},d(i){i&&$(t),r[e].d(i)}}}function _r(s){let e,n,t,l,o,r,a,i,c,u,f,d;n=new ts({}),l=new ss({props:{placeholder:"Search for tags",fetchSuggestions:s[6]}}),l.$on("pick",s[7]),r=new qe({props:{id:"btn-search",title:"Search with the tags above",$$slots:{default:[dr]},$$scope:{ctx:s}}}),r.$on("click",s[5]),i=new ns({props:{tags:[...s[3],...s[4]]}}),i.$on("click",s[8]),i.$on("contextmenu",s[9]),i.$on("createSupertag",s[10]);function b(p){s[11](p)}let m={tags:s[3]};return s[1]!==void 0&&(m.dialog=s[1]),u=new ur({props:m}),ge.push(()=>Pe(u,"dialog",b)),u.$on("submit",s[12]),{c(){e=C("section"),A(n.$$.fragment),t=D(),A(l.$$.fragment),o=D(),A(r.$$.fragment),a=D(),A(i.$$.fragment),c=D(),A(u.$$.fragment),this.h()},l(p){e=I(p,"SECTION",{id:!0,class:!0});var k=j(e);O(n.$$.fragment,k),t=L(k),O(l.$$.fragment,k),o=L(k),O(r.$$.fragment,k),a=L(k),O(i.$$.fragment,k),k.forEach($),c=L(p),O(u.$$.fragment,p),this.h()},h(){h(e,"id","search"),h(e,"class","svelte-6guf0u")},m(p,k){N(p,e,k),V(n,e,null),v(e,t),V(l,e,null),v(e,o),V(r,e,null),v(e,a),V(i,e,null),N(p,c,k),V(u,p,k),d=!0},p(p,[k]){const w={};k&65537&&(w.$$scope={dirty:k,ctx:p}),r.$set(w);const _={};k&24&&(_.tags=[...p[3],...p[4]]),i.$set(_);const g={};k&8&&(g.tags=p[3]),!f&&k&2&&(f=!0,g.dialog=p[1],Le(()=>f=!1)),u.$set(g)},i(p){d||(E(n.$$.fragment,p),E(l.$$.fragment,p),E(r.$$.fragment,p),E(i.$$.fragment,p),E(u.$$.fragment,p),d=!0)},o(p){S(n.$$.fragment,p),S(l.$$.fragment,p),S(r.$$.fragment,p),S(i.$$.fragment,p),S(u.$$.fragment,p),d=!1},d(p){p&&($(e),$(c)),B(n),B(l),B(r),B(i),B(u,p)}}}function gr(s,e,n){let t,l,o,r;te(s,Ge,g=>n(13,t=g)),te(s,$t,g=>n(2,l=g)),te(s,Ke,g=>n(3,o=g)),te(s,Xe,g=>n(4,r=g));const a=Be(),i=()=>a("submit");let{loading:c}=e,u;const f=async g=>{const y=await Qn(g);return[...l.items.filter(({name:F})=>F.toLowerCase().includes(g.toLowerCase())).map(F=>({label:F.name,count:F.tags.length,type:"supertag"})),...y]},d=g=>{var y,R;(g.key==="/"||g.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&(g.preventDefault(),g.stopPropagation(),(y=document.getElementById("searchbar"))==null||y.focus()),g.ctrlKey&&g.key==="Enter"&&(g.preventDefault(),g.stopPropagation(),i()),g.ctrlKey&&g.key==="m"&&(g.preventDefault(),g.stopPropagation(),(R=document.getElementById("select-modifier"))==null||R.click())};xe(async()=>{document.addEventListener("keydown",d),t.postCount===0&&i()}),et(()=>{document.removeEventListener("keydown",d)});const b=async g=>{const y=g.detail;if(y.type==="supertag"){const R=l.items.find(F=>F.name===y.label);if(!R){console.warn("Supertag not present.");return}Xe.addOrReplace(R)}else{const R=await Yn(g.detail.label);Ke.addOrReplace({name:g.detail.label,modifier:g.detail.modifier,count:g.detail.count,type:(R==null?void 0:R.type)??"tag"})}},m=g=>"description"in g.detail?Xe.removeByName(g.detail.name):Ke.removeByName(g.detail.name),p=g=>{"description"in g.detail||(g.detail.modifier=ls(g.detail.modifier),Ke.addOrReplace(g.detail))},k=()=>{u.showModal(),Yt("dialog")};function w(g){u=g,n(1,u)}const _=g=>$t.add(g.detail);return s.$$set=g=>{"loading"in g&&n(0,c=g.loading)},[c,u,l,o,r,i,f,b,m,p,k,w,_]}class mr extends re{constructor(e){super(),oe(this,e,gr,_r,le,{loading:0})}}const{document:dt}=yn;function hr(s){let e,n,t,l,o,r;const a=[br,vr],i=[];function c(u,f){return u[2].postCount===0?0:1}return n=c(s),t=i[n]=a[n](s),o=new Xn({}),{c(){e=C("section"),t.c(),l=D(),A(o.$$.fragment),this.h()},l(u){e=I(u,"SECTION",{class:!0});var f=j(e);t.l(f),f.forEach($),l=L(u),O(o.$$.fragment,u),this.h()},h(){h(e,"class","svelte-1ezwrd1")},m(u,f){N(u,e,f),i[n].m(e,null),N(u,l,f),V(o,u,f),r=!0},p(u,f){let d=n;n=c(u),n===d?i[n].p(u,f):(pe(),S(i[d],1,1,()=>{i[d]=null}),de(),t=i[n],t?t.p(u,f):(t=i[n]=a[n](u),t.c()),E(t,1),t.m(e,null))},i(u){r||(E(t),E(o.$$.fragment,u),r=!0)},o(u){S(t),S(o.$$.fragment,u),r=!1},d(u){u&&($(e),$(l)),i[n].d(),B(o,u)}}}function $r(s){let e,n;return e=new as({props:{error:s[1]}}),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.error=t[1]),e.$set(o)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function vr(s){let e,n,t,l,o,r;e=new Xl({}),e.$on("sortfilterupdate",s[4]),e.$on("endreached",s[5]);const a=[wr,kr],i=[];function c(u,f){return u[2].posts.length===u[2].postCount?0:1}return t=c(s),l=i[t]=a[t](s),{c(){A(e.$$.fragment),n=D(),l.c(),o=Re()},l(u){O(e.$$.fragment,u),n=L(u),l.l(u),o=Re()},m(u,f){V(e,u,f),N(u,n,f),i[t].m(u,f),N(u,o,f),r=!0},p(u,f){let d=t;t=c(u),t===d?i[t].p(u,f):(pe(),S(i[d],1,1,()=>{i[d]=null}),de(),l=i[t],l?l.p(u,f):(l=i[t]=a[t](u),l.c()),E(l,1),l.m(o.parentNode,o))},i(u){r||(E(e.$$.fragment,u),E(l),r=!0)},o(u){S(e.$$.fragment,u),S(l),r=!1},d(u){u&&($(n),$(o)),B(e,u),i[t].d(u)}}}function br(s){let e,n;return e=new rr({}),e.$on("sortfilterupdate",s[4]),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p:K,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function kr(s){let e,n,t,l;return e=new cn({props:{absoluteTop:void 0,rootMargin:1e3/Number(s[3])+"px"}}),e.$on("intersection",s[5]),t=new qe({props:{title:"Load more posts",$$slots:{default:[Sr]},$$scope:{ctx:s}}}),t.$on("click",s[5]),{c(){A(e.$$.fragment),n=D(),A(t.$$.fragment)},l(o){O(e.$$.fragment,o),n=L(o),O(t.$$.fragment,o)},m(o,r){V(e,o,r),N(o,n,r),V(t,o,r),l=!0},p(o,r){const a={};r&8&&(a.rootMargin=1e3/Number(o[3])+"px"),e.$set(a);const i={};r&32769&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){l||(E(e.$$.fragment,o),E(t.$$.fragment,o),l=!0)},o(o){S(e.$$.fragment,o),S(t.$$.fragment,o),l=!1},d(o){o&&$(n),B(e,o),B(t,o)}}}function wr(s){let e,n;return e=new ds({}),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p:K,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function yr(s){let e;return{c(){e=Z("Load more")},l(n){e=X(n,"Load more")},m(n,t){N(n,e,t)},i:K,o:K,d(n){n&&$(e)}}}function Er(s){let e,n;return e=new _t({}),{c(){A(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Sr(s){let e,n,t,l;const o=[Er,yr],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Re()},l(i){n.l(i),t=Re()},m(i,c){r[e].m(i,c),N(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(pe(),S(r[u],1,1,()=>{r[u]=null}),de(),n=r[e],n||(n=r[e]=o[e](i),n.c()),E(n,1),n.m(t.parentNode,t))},i(i){l||(E(n),l=!0)},o(i){S(n),l=!1},d(i){i&&$(t),r[e].d(i)}}}function Kt(s){let e;return{c(){e=C("div"),this.h()},l(n){e=I(n,"DIV",{class:!0}),j(e).forEach($),this.h()},h(){h(e,"class","svelte-1ezwrd1")},m(n,t){N(n,e,t)},d(n){n&&$(e)}}}function Cr(s){let e,n,t,l,o,r,a,i,c,u,f,d,b;t=new es({}),o=new mr({props:{loading:s[0]}}),o.$on("submit",s[4]),a=new Fs({props:{loading:s[0]}}),a.$on("sortfilterupdate",s[4]);const m=[$r,hr],p=[];function k(_,g){return _[1]?0:_[2].requested?1:-1}~(c=k(s))&&(u=p[c]=m[c](s));let w=s[0]&&Kt();return{c(){e=C("meta"),n=D(),A(t.$$.fragment),l=D(),A(o.$$.fragment),r=D(),A(a.$$.fragment),i=D(),u&&u.c(),f=D(),w&&w.c(),d=Re(),this.h()},l(_){const g=wn("svelte-7jdp3v",dt.head);e=I(g,"META",{name:!0,content:!0}),g.forEach($),n=L(_),O(t.$$.fragment,_),l=L(_),O(o.$$.fragment,_),r=L(_),O(a.$$.fragment,_),i=L(_),u&&u.l(_),f=L(_),w&&w.l(_),d=Re(),this.h()},h(){dt.title="kurosearch - Rule34 Hentai",h(e,"name","description"),h(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience.")},m(_,g){v(dt.head,e),N(_,n,g),V(t,_,g),N(_,l,g),V(o,_,g),N(_,r,g),V(a,_,g),N(_,i,g),~c&&p[c].m(_,g),N(_,f,g),w&&w.m(_,g),N(_,d,g),b=!0},p(_,[g]){const y={};g&1&&(y.loading=_[0]),o.$set(y);const R={};g&1&&(R.loading=_[0]),a.$set(R);let F=c;c=k(_),c===F?~c&&p[c].p(_,g):(u&&(pe(),S(p[F],1,1,()=>{p[F]=null}),de()),~c?(u=p[c],u?u.p(_,g):(u=p[c]=m[c](_),u.c()),E(u,1),u.m(f.parentNode,f)):u=null),_[0]?w||(w=Kt(),w.c(),w.m(d.parentNode,d)):w&&(w.d(1),w=null)},i(_){b||(E(t.$$.fragment,_),E(o.$$.fragment,_),E(a.$$.fragment,_),E(u),b=!0)},o(_){S(t.$$.fragment,_),S(o.$$.fragment,_),S(a.$$.fragment,_),S(u),b=!1},d(_){_&&($(n),$(l),$(r),$(i),$(f),$(d)),$(e),B(t,_),B(o,_),B(a,_),~c&&p[c].d(_),w&&w.d(_)}}}function Ir(s,e,n){let t,l,o,r,a,i,c;te(s,Ge,_=>n(2,t=_)),te(s,Xe,_=>n(7,l=_)),te(s,Ue,_=>n(8,o=_)),te(s,Ye,_=>n(9,r=_)),te(s,rn,_=>n(10,a=_)),te(s,Ke,_=>n(11,i=_)),te(s,Zt,_=>n(3,c=_)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let u=!1,f,d=0;const b=()=>new En().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(l),m=async _=>{if(!u){n(1,f=void 0),n(0,u=!0);try{const g=t.pageCount;await _(),xn(g).catch(()=>{})}catch(g){n(1,f=g),console.warn(g)}finally{n(0,u=!1)}}},p=async()=>{Ge.reset(),d=0,m(async()=>{const[_,g]=await b().getPageAndCount();Ge.addPage(_,g)})},k=async()=>{m(async()=>{const _=await b().getPage();Ge.addPage(_)})},w=_=>{if(_.ctrlKey&&_.key==="ArrowDown"){const g=document.getElementsByClassName("post-media");g[d].focus(),d=Math.min(d+1,Math.max(0,g.length-1))}_.ctrlKey&&_.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[d].focus(),d=Math.max(d-1,0))};return xe(async()=>{document.addEventListener("keydown",w)}),et(()=>{document.removeEventListener("keydown",w)}),[u,f,t,c,p,k]}class so extends re{constructor(e){super(),oe(this,e,Ir,Cr,le,{})}}export{so as component};
