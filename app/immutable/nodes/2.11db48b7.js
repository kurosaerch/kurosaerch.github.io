import{s as fe,D as Te,f as S,a as N,g as I,h as V,y as ue,c as O,d as g,j as d,r as Mt,i as T,u as m,E as je,F as we,G as Ue,H as lt,l as ie,m as ae,v as K,I as ve,w as Jt,J as Xt,z as xt,A as en,B as tn,o as et,K as tt,p as Se,n as Ve,e as be,k as Fe,C as de,L as Ye,M as Je,N as st,O as nn,P as Lt,Q as it}from"../chunks/scheduler.a20787a1.js";import{S as pe,i as _e,b as F,d as R,m as M,a as v,t as b,e as L,g as le,c as re,f as Ze,h as sn}from"../chunks/index.16c92c5c.js";import{e as ye}from"../chunks/each.e59479a4.js";import{D as Bt,r as zt}from"../chunks/result-columns-store.fb17ebd6.js";import{T as qe}from"../chunks/TextButton.217547ed.js";import{D as ln}from"../chunks/DetailedTag.2d4ca846.js";import{K as rn,A as on}from"../chunks/ActiveTagList.707face6.js";import{b as jt}from"../chunks/paths.f6781fac.js";import{f as Xe}from"../chunks/format-tag.7e313273.js";import{r as Ge,f as Ae,s as Le,a as ot,S as an}from"../chunks/active-supertags-store.ab7cc25a.js";import{I as Gt,R as cn}from"../chunks/ModifierSelect.6fdc6a54.js";import{h as at,u as un}from"../chunks/await_block.091a89a4.js";import{L as qt}from"../chunks/LoadingAnimation.08dd10df.js";import{R as fn,S as pn,a as _n,E as Ut,b as mn,g as ct,P as dn,C as gn,c as hn,d as Ht,i as $n,e as Wt,D as vn,G as bn,V as kn,f as ut,I as wn}from"../chunks/Details.d52f77b5.js";import{a as yn}from"../chunks/always-loop-store.15242a8e.js";import{S as ft}from"../chunks/Select.ce2f7816.js";import{R as Cn}from"../chunks/RotatingTextSelect.2729c896.js";import{S as En,n as Sn,s as pt}from"../chunks/supertags-store.7cc8d8fc.js";import{S as In}from"../chunks/ScrollUpButton.0d29f4f6.js";import{g as Dn,a as Pn}from"../chunks/tags.49324235.js";import{l as Nn}from"../chunks/analytics.eca95ce1.js";import{a as nt}from"../chunks/active-tags-store.b3e4fe76.js";import{b as On}from"../chunks/blocked-content-store.9c031c36.js";import{c as Kt}from"../chunks/cookies-accepted-store.5162e58d.js";function _t(l,e,n){const t=l.slice();return t[9]=e[n],t}function mt(l){let e,n;return e=new ln({props:{tag:l[9]}}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&4&&(o.tag=t[9]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Tn(l){let e;return{c(){e=ie("Create supertag")},l(n){e=ae(n,"Create supertag")},m(n,t){T(n,e,t)},d(n){n&&g(e)}}}function An(l){let e,n,t="Create Supertag",s,o,r,a,i,u="Name",c,f,_,E,C,k="Description",$,p,h,w,y,D="Tags",A,ee,Z,x,ne,se,P,J,W=ye(l[2]),B=[];for(let j=0;j<W.length;j+=1)B[j]=mt(_t(l,W,j));const oe=j=>b(B[j],1,1,()=>{B[j]=null});return ne=new qe({props:{title:l[3]?"Click to create supertag":"Enter a valid name to continue",disabled:!l[3],$$slots:{default:[Tn]},$$scope:{ctx:l}}}),ne.$on("click",l[8]),{c(){e=S("section"),n=S("h3"),n.textContent=t,s=N(),o=S("button"),r=N(),a=S("div"),i=S("label"),i.textContent=u,c=N(),f=S("input"),_=N(),E=S("div"),C=S("label"),C.textContent=k,$=N(),p=S("input"),h=N(),w=S("div"),y=S("span"),y.textContent=D,A=N(),ee=S("ol");for(let j=0;j<B.length;j+=1)B[j].c();Z=N(),x=S("div"),F(ne.$$.fragment),this.h()},l(j){e=I(j,"SECTION",{class:!0});var G=V(e);n=I(G,"H3",{"data-svelte-h":!0}),ue(n)!=="svelte-ho1cwx"&&(n.textContent=t),s=O(G),o=I(G,"BUTTON",{class:!0}),V(o).forEach(g),r=O(G),a=I(G,"DIV",{class:!0});var X=V(a);i=I(X,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(i)!=="svelte-10k8a68"&&(i.textContent=u),c=O(X),f=I(X,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),X.forEach(g),_=O(G),E=I(G,"DIV",{class:!0});var Q=V(E);C=I(Q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(C)!=="svelte-14n9kp6"&&(C.textContent=k),$=O(Q),p=I(Q,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),Q.forEach(g),h=O(G),w=I(G,"DIV",{class:!0});var ge=V(w);y=I(ge,"SPAN",{class:!0,"data-svelte-h":!0}),ue(y)!=="svelte-7hjyox"&&(y.textContent=D),A=O(ge),ee=I(ge,"OL",{class:!0});var he=V(ee);for(let De=0;De<B.length;De+=1)B[De].l(he);he.forEach(g),ge.forEach(g),Z=O(G),x=I(G,"DIV",{class:!0});var Ie=V(x);R(ne.$$.fragment,Ie),Ie.forEach(g),G.forEach(g),this.h()},h(){d(o,"class",Mt("codicon codicon-close")+" svelte-1x6vc81"),d(i,"for","supertag-name"),d(i,"class","svelte-1x6vc81"),d(f,"type","text"),d(f,"placeholder","Descriptive name"),d(f,"id","supertag-name"),d(f,"class","svelte-1x6vc81"),d(a,"class","svelte-1x6vc81"),d(C,"for","supertag-description"),d(C,"class","svelte-1x6vc81"),d(p,"type","text"),d(p,"placeholder","Short description"),d(p,"id","supertag-description"),d(p,"class","svelte-1x6vc81"),d(E,"class","svelte-1x6vc81"),d(y,"class","svelte-1x6vc81"),d(ee,"class","svelte-1x6vc81"),d(w,"class","svelte-1x6vc81"),d(x,"class","last svelte-1x6vc81"),d(e,"class","svelte-1x6vc81")},m(j,G){T(j,e,G),m(e,n),m(e,s),m(e,o),m(e,r),m(e,a),m(a,i),m(a,c),m(a,f),je(f,l[0]),m(e,_),m(e,E),m(E,C),m(E,$),m(E,p),je(p,l[1]),m(e,h),m(e,w),m(w,y),m(w,A),m(w,ee);for(let X=0;X<B.length;X+=1)B[X]&&B[X].m(ee,null);m(e,Z),m(e,x),M(ne,x,null),se=!0,P||(J=[we(o,"click",l[5]),we(f,"input",l[6]),we(p,"input",l[7])],P=!0)},p(j,G){if(G&1&&f.value!==j[0]&&je(f,j[0]),G&2&&p.value!==j[1]&&je(p,j[1]),G&4){W=ye(j[2]);let Q;for(Q=0;Q<W.length;Q+=1){const ge=_t(j,W,Q);B[Q]?(B[Q].p(ge,G),v(B[Q],1)):(B[Q]=mt(ge),B[Q].c(),v(B[Q],1),B[Q].m(ee,null))}for(le(),Q=W.length;Q<B.length;Q+=1)oe(Q);re()}const X={};G&8&&(X.title=j[3]?"Click to create supertag":"Enter a valid name to continue"),G&8&&(X.disabled=!j[3]),G&4096&&(X.$$scope={dirty:G,ctx:j}),ne.$set(X)},i(j){if(!se){for(let G=0;G<W.length;G+=1)v(B[G]);v(ne.$$.fragment,j),se=!0}},o(j){B=B.filter(Boolean);for(let G=0;G<B.length;G+=1)b(B[G]);b(ne.$$.fragment,j),se=!1},d(j){j&&g(e),Ue(B,j),L(ne),P=!1,lt(J)}}}function Vn(l){let e,n;return e=new Bt({props:{$$slots:{default:[An]},$$scope:{ctx:l}}}),e.$on("close",l[5]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,[s]){const o={};s&4111&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Fn(l,e,n){let t,{name:s=""}=e,{description:o=""}=e,{tags:r}=e;const a=Te(),i=()=>a("close");function u(){s=this.value,n(0,s)}function c(){o=this.value,n(1,o)}const f=()=>{a("submit",{name:s,description:o,tags:r.map(({modifier:_,name:E})=>({modifier:_,name:E}))}),i()};return l.$$set=_=>{"name"in _&&n(0,s=_.name),"description"in _&&n(1,o=_.description),"tags"in _&&n(2,r=_.tags)},l.$$.update=()=>{l.$$.dirty&5&&n(3,t=typeof s=="string"&&s!==""&&r.length>1)},[s,o,r,t,a,i,u,c,f]}class Rn extends pe{constructor(e){super(),_e(this,e,Fn,Vn,fe,{name:0,description:1,tags:2})}}function Mn(l){let e,n,t,s,o,r,a,i,u,c;return{c(){e=S("div"),n=S("div"),t=S("i"),s=N(),o=S("div"),r=S("h3"),a=ie(l[0]),i=N(),u=S("span"),c=ie(l[2]),this.h()},l(f){e=I(f,"DIV",{class:!0});var _=V(e);n=I(_,"DIV",{class:!0});var E=V(n);t=I(E,"I",{class:!0}),V(t).forEach(g),E.forEach(g),s=O(_),o=I(_,"DIV",{});var C=V(o);r=I(C,"H3",{class:!0});var k=V(r);a=ae(k,l[0]),k.forEach(g),i=O(C),u=I(C,"SPAN",{});var $=V(u);c=ae($,l[2]),$.forEach(g),C.forEach(g),_.forEach(g),this.h()},h(){d(t,"class",Mt(l[1])+" svelte-1yohziu"),d(n,"class","icon svelte-1yohziu"),d(r,"class","svelte-1yohziu"),d(e,"class","error svelte-1yohziu")},m(f,_){T(f,e,_),m(e,n),m(n,t),m(e,s),m(e,o),m(o,r),m(r,a),m(o,i),m(o,u),m(u,c)},p:K,i:K,o:K,d(f){f&&g(e)}}}function Ln(l,e,n){let{error:t}=e,s=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return l.$$set=a=>{"error"in a&&n(3,t=a.error)},[s,o,r,t]}class Bn extends pe{constructor(e){super(),_e(this,e,Ln,Mn,fe,{error:3})}}function zn(l){let e,n,t,s,o="You have seen everything there is to see...";return{c(){e=S("img"),t=N(),s=S("p"),s.textContent=o,this.h()},l(r){e=I(r,"IMG",{src:!0,alt:!0,class:!0}),t=O(r),s=I(r,"P",{"data-svelte-h":!0}),ue(s)!=="svelte-1i75mtf"&&(s.textContent=o),this.h()},h(){ve(e.src,n=jt+"/assets/shironeko-x.png")||d(e,"src",n),d(e,"alt","No more results to load"),d(e,"class","svelte-1pkma0d")},m(r,a){T(r,e,a),T(r,t,a),T(r,s,a)},p:K,i:K,o:K,d(r){r&&(g(e),g(t),g(s))}}}class jn extends pe{constructor(e){super(),_e(this,e,null,zn,fe,{})}}const xe=l=>`post_${l}`;function Gn(l){let e,n,t,s;const o=l[3].default,r=Jt(o,l,l[2],null);return{c(){e=S("div"),r&&r.c(),this.h()},l(a){e=I(a,"DIV",{role:!0,tabindex:!0,class:!0});var i=V(e);r&&r.l(i),i.forEach(g),this.h()},h(){d(e,"role","none"),d(e,"tabindex","-1"),d(e,"class","svelte-6sy8qz")},m(a,i){T(a,e,i),r&&r.m(e,null),l[4](e),n=!0,t||(s=[we(e,"click",Xt(qn)),we(e,"keydown",l[1])],t=!0)},p(a,[i]){r&&r.p&&(!n||i&4)&&xt(r,o,a,a[2],n?tn(o,a[2],i,null):en(a[2]),null)},i(a){n||(v(r,a),n=!0)},o(a){b(r,a),n=!1},d(a){a&&g(e),r&&r.d(a),l[4](null),t=!1,lt(s)}}}const qn=()=>{};function Un(l,e,n){let{$$slots:t={},$$scope:s}=e;const o=Te(),r=()=>o("close"),a=f=>{f.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let u;et(async()=>{u.focus(),document.addEventListener("fullscreenchange",i);try{await u.requestFullscreen()}catch{}}),tt(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function c(f){Se[f?"unshift":"push"](()=>{u=f,n(0,u)})}return l.$$set=f=>{"$$scope"in f&&n(2,s=f.$$scope)},[u,a,s,t,c]}class Hn extends pe{constructor(e){super(),_e(this,e,Un,Gn,fe,{})}}function Wn(l){let e;return{c(){e=S("div")},l(n){e=I(n,"DIV",{}),V(e).forEach(g)},m(n,t){T(n,e,t),l[2](e)},p:K,i:K,o:K,d(n){n&&g(e),l[2](null)}}}function Kn(l,e,n){let{rootMargin:t}=e;const s=Te(),o=new IntersectionObserver(i=>{i[0].isIntersecting&&s("intersection")},{rootMargin:t});let r;function a(i){Se[i?"unshift":"push"](()=>{r=i,n(0,r)})}return l.$$set=i=>{"rootMargin"in i&&n(1,t=i.rootMargin)},l.$$.update=()=>{l.$$.dirty&1&&(o.disconnect(),r&&o.observe(r))},[r,t,a]}class Qt extends pe{constructor(e){super(),_e(this,e,Kn,Wn,fe,{rootMargin:1})}}function dt(l,e,n){const t=l.slice();return t[3]=e[n],t}function gt(l,e,n){const t=l.slice();return t[6]=e[n][0],t[7]=e[n][1],t}function ht(l){let e,n="•",t,s,o;return s=new Ut({props:{source:l[0].source}}),{c(){e=S("span"),e.textContent=n,t=N(),F(s.$$.fragment)},l(r){e=I(r,"SPAN",{"data-svelte-h":!0}),ue(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=O(r),R(s.$$.fragment,r)},m(r,a){T(r,e,a),T(r,t,a),M(s,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),s.$set(i)},i(r){o||(v(s.$$.fragment,r),o=!0)},o(r){b(s.$$.fragment,r),o=!1},d(r){r&&(g(e),g(t)),L(s,r)}}}function $t(l){let e,n=l[6]+"",t,s,o,r;return o=new dn({props:{tags:l[7]}}),{c(){e=S("h3"),t=ie(n),s=N(),F(o.$$.fragment),this.h()},l(a){e=I(a,"H3",{class:!0});var i=V(e);t=ae(i,n),i.forEach(g),s=O(a),R(o.$$.fragment,a),this.h()},h(){d(e,"class","svelte-1kekodt")},m(a,i){T(a,e,i),m(e,t),T(a,s,i),M(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[6]+"")&&Ve(t,n);const u={};i&2&&(u.tags=a[7]),o.$set(u)},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){b(o.$$.fragment,a),r=!1},d(a){a&&(g(e),g(s)),L(o,a)}}}function Qn(l){return{c:K,l:K,m:K,p:K,i:K,o:K,d:K}}function Yn(l){let e,n,t,s;const o=[Jn,Zn],r=[];function a(i,u){return i[2].length>0?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=be()},l(i){n.l(i),t=be()},m(i,u){r[e].m(i,u),T(i,t,u),s=!0},p(i,u){let c=e;e=a(i),e===c?r[e].p(i,u):(le(),b(r[c],1,1,()=>{r[c]=null}),re(),n=r[e],n?n.p(i,u):(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){s||(v(n),s=!0)},o(i){b(n),s=!1},d(i){i&&g(t),r[e].d(i)}}}function Zn(l){let e,n="Comments for this post are not available";return{c(){e=S("span"),e.textContent=n,this.h()},l(t){e=I(t,"SPAN",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-4t2lxe"&&(e.textContent=n),this.h()},h(){d(e,"class","no-comments svelte-1kekodt")},m(t,s){T(t,e,s)},p:K,i:K,o:K,d(t){t&&g(e)}}}function Jn(l){let e,n,t=ye(l[2]),s=[];for(let r=0;r<t.length;r+=1)s[r]=vt(dt(l,t,r));const o=r=>b(s[r],1,1,()=>{s[r]=null});return{c(){e=S("ul");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=I(r,"UL",{class:!0});var a=V(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(g),this.h()},h(){d(e,"class","comments svelte-1kekodt")},m(r,a){T(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&1){t=ye(r[2]);let i;for(i=0;i<t.length;i+=1){const u=dt(r,t,i);s[i]?(s[i].p(u,a),v(s[i],1)):(s[i]=vt(u),s[i].c(),v(s[i],1),s[i].m(e,null))}for(le(),i=t.length;i<s.length;i+=1)o(i);re()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)b(s[a]);n=!1},d(r){r&&g(e),Ue(s,r)}}}function vt(l){let e,n;return e=new gn({props:{comment:l[3]}}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&1&&(o.comment=t[3]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Xn(l){let e,n;return e=new qt({}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p:K,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function xn(l){let e,n,t,s,o,r,a,i,u=l[0].id+"",c,f,_,E,C,k,$="•",p,h,w=l[0].type.toUpperCase()+"",y,D,A,ee="•",Z,x,ne,se,P="•",J,W,B,oe,j,G,X,Q="•",ge,he,Ie,De,Pe,He,Ce,Ne,We="Comments",Ke,Re,U;E=new fn({props:{value:l[0].rating}}),x=new pn({props:{value:l[0].score}}),W=new _n({props:{value:l[0].change}}),j=new Ut({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id}}),he=new mn({props:{url:l[0].file_url}});let q=l[0].source&&ht(l),$e=ye(Object.entries(l[1])),Y=[];for(let H=0;H<$e.length;H+=1)Y[H]=$t(gt(l,$e,H));const Oe=H=>b(Y[H],1,1,()=>{Y[H]=null});let te={ctx:l,current:null,token:null,hasCatch:!1,pending:Xn,then:Yn,catch:Qn,value:2,blocks:[,,,]};return at(Re=ct(l[0].id),te),{c(){e=S("div"),n=S("img"),s=N(),o=S("h1"),r=ie("Post "),a=S("b"),i=ie("#"),c=ie(u),f=N(),_=S("div"),F(E.$$.fragment),C=N(),k=S("span"),k.textContent=$,p=N(),h=S("span"),y=ie(w),D=N(),A=S("span"),A.textContent=ee,Z=N(),F(x.$$.fragment),ne=N(),se=S("span"),se.textContent=P,J=N(),F(W.$$.fragment),B=N(),oe=S("div"),F(j.$$.fragment),G=N(),X=S("span"),X.textContent=Q,ge=N(),F(he.$$.fragment),Ie=N(),q&&q.c(),De=N(),Pe=S("div");for(let H=0;H<Y.length;H+=1)Y[H].c();He=N(),Ce=S("div"),Ne=S("h3"),Ne.textContent=We,Ke=N(),te.block.c(),this.h()},l(H){e=I(H,"DIV",{class:!0});var z=V(e);n=I(z,"IMG",{class:!0,src:!0,alt:!0}),s=O(z),o=I(z,"H1",{class:!0});var ke=V(o);r=ae(ke,"Post "),a=I(ke,"B",{});var Be=V(a);i=ae(Be,"#"),c=ae(Be,u),Be.forEach(g),ke.forEach(g),f=O(z),_=I(z,"DIV",{class:!0});var me=V(_);R(E.$$.fragment,me),C=O(me),k=I(me,"SPAN",{"data-svelte-h":!0}),ue(k)!=="svelte-7hh8jk"&&(k.textContent=$),p=O(me),h=I(me,"SPAN",{});var Qe=V(h);y=ae(Qe,w),Qe.forEach(g),D=O(me),A=I(me,"SPAN",{"data-svelte-h":!0}),ue(A)!=="svelte-7hh8jk"&&(A.textContent=ee),Z=O(me),R(x.$$.fragment,me),ne=O(me),se=I(me,"SPAN",{"data-svelte-h":!0}),ue(se)!=="svelte-7hh8jk"&&(se.textContent=P),J=O(me),R(W.$$.fragment,me),me.forEach(g),B=O(z),oe=I(z,"DIV",{class:!0});var Ee=V(oe);R(j.$$.fragment,Ee),G=O(Ee),X=I(Ee,"SPAN",{"data-svelte-h":!0}),ue(X)!=="svelte-7hh8jk"&&(X.textContent=Q),ge=O(Ee),R(he.$$.fragment,Ee),Ie=O(Ee),q&&q.l(Ee),Ee.forEach(g),De=O(z),Pe=I(z,"DIV",{});var ce=V(Pe);for(let rt=0;rt<Y.length;rt+=1)Y[rt].l(ce);ce.forEach(g),He=O(z),Ce=I(z,"DIV",{});var Me=V(Ce);Ne=I(Me,"H3",{class:!0,"data-svelte-h":!0}),ue(Ne)!=="svelte-kc6sae"&&(Ne.textContent=We),Ke=O(Me),te.block.l(Me),Me.forEach(g),z.forEach(g),this.h()},h(){d(n,"class","preview svelte-1kekodt"),ve(n.src,t=l[0].sample_url)||d(n,"src",t),d(n,"alt","preview"),d(o,"class","svelte-1kekodt"),d(_,"class","flex-row svelte-1kekodt"),d(oe,"class","flex-row svelte-1kekodt"),d(Ne,"class","svelte-1kekodt"),d(e,"class","details svelte-1kekodt")},m(H,z){T(H,e,z),m(e,n),m(e,s),m(e,o),m(o,r),m(o,a),m(a,i),m(a,c),m(e,f),m(e,_),M(E,_,null),m(_,C),m(_,k),m(_,p),m(_,h),m(h,y),m(_,D),m(_,A),m(_,Z),M(x,_,null),m(_,ne),m(_,se),m(_,J),M(W,_,null),m(e,B),m(e,oe),M(j,oe,null),m(oe,G),m(oe,X),m(oe,ge),M(he,oe,null),m(oe,Ie),q&&q.m(oe,null),m(e,De),m(e,Pe);for(let ke=0;ke<Y.length;ke+=1)Y[ke]&&Y[ke].m(Pe,null);m(e,He),m(e,Ce),m(Ce,Ne),m(Ce,Ke),te.block.m(Ce,te.anchor=null),te.mount=()=>Ce,te.anchor=null,U=!0},p(H,[z]){l=H,(!U||z&1&&!ve(n.src,t=l[0].sample_url))&&d(n,"src",t),(!U||z&1)&&u!==(u=l[0].id+"")&&Ve(c,u);const ke={};z&1&&(ke.value=l[0].rating),E.$set(ke),(!U||z&1)&&w!==(w=l[0].type.toUpperCase()+"")&&Ve(y,w);const Be={};z&1&&(Be.value=l[0].score),x.$set(Be);const me={};z&1&&(me.value=l[0].change),W.$set(me);const Qe={};z&1&&(Qe.source="https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id),j.$set(Qe);const Ee={};if(z&1&&(Ee.url=l[0].file_url),he.$set(Ee),l[0].source?q?(q.p(l,z),z&1&&v(q,1)):(q=ht(l),q.c(),v(q,1),q.m(oe,null)):q&&(le(),b(q,1,1,()=>{q=null}),re()),z&2){$e=ye(Object.entries(l[1]));let ce;for(ce=0;ce<$e.length;ce+=1){const Me=gt(l,$e,ce);Y[ce]?(Y[ce].p(Me,z),v(Y[ce],1)):(Y[ce]=$t(Me),Y[ce].c(),v(Y[ce],1),Y[ce].m(Pe,null))}for(le(),ce=$e.length;ce<Y.length;ce+=1)Oe(ce);re()}te.ctx=l,z&1&&Re!==(Re=ct(l[0].id))&&at(Re,te)||un(te,l,z)},i(H){if(!U){v(E.$$.fragment,H),v(x.$$.fragment,H),v(W.$$.fragment,H),v(j.$$.fragment,H),v(he.$$.fragment,H),v(q);for(let z=0;z<$e.length;z+=1)v(Y[z]);v(te.block),U=!0}},o(H){b(E.$$.fragment,H),b(x.$$.fragment,H),b(W.$$.fragment,H),b(j.$$.fragment,H),b(he.$$.fragment,H),b(q),Y=Y.filter(Boolean);for(let z=0;z<Y.length;z+=1)b(Y[z]);for(let z=0;z<3;z+=1){const ke=te.blocks[z];b(ke)}U=!1},d(H){H&&g(e),L(E),L(x),L(W),L(j),L(he),q&&q.d(),Ue(Y,H),te.block.d(),te.token=null,te=null}}}function es(l,e,n){let t,{post:s}=e;return l.$$set=o=>{"post"in o&&n(0,s=o.post)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=s.tags.reduce((o,r)=>(o[r.type]===void 0&&(o[r.type]=[]),o[r.type].push(r),o),{}))},[s,t]}class ts extends pe{constructor(e){super(),_e(this,e,es,xn,fe,{post:0})}}const ze=new IntersectionObserver(l=>{for(const e of l)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function ns(l){const e=l.slice(),n=hn(e[0].file_url,e[0].sample_url,e[0].preview_url);return e[4]=n,e}function ss(l){const e=l.slice(),n=Ht(e[0].file_url,e[0].sample_url,e[0].preview_url);return e[4]=n,e}function bt(l){let e,n,t,s;return{c(){e=S("img"),this.h()},l(o){e=I(o,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){ve(e.src,n=l[4].animated)||d(e,"src",n),d(e,"alt",t="[GIF] post #"+l[0].id),d(e,"title",s="[GIF] post #"+l[0].id),d(e,"class","svelte-1cjgn2p")},m(o,r){T(o,e,r)},p(o,r){r&1&&!ve(e.src,n=o[4].animated)&&d(e,"src",n),r&1&&t!==(t="[GIF] post #"+o[0].id)&&d(e,"alt",t),r&1&&s!==(s="[GIF] post #"+o[0].id)&&d(e,"title",s)},d(o){o&&g(e)}}}function kt(l){let e,n,t,s;return{c(){e=S("video"),this.h()},l(o){e=I(o,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),V(e).forEach(g),this.h()},h(){ve(e.src,n=l[4].animated)||d(e,"src",n),d(e,"poster",t=l[4].static),e.loop=!0,d(e,"title",s="[VIDEO] post #"+l[0].id),e.controls=!0,d(e,"preload","metadata"),e.autoplay=!0,d(e,"class","svelte-1cjgn2p")},m(o,r){T(o,e,r),l[2](e)},p(o,r){r&1&&!ve(e.src,n=o[4].animated)&&d(e,"src",n),r&1&&t!==(t=o[4].static)&&d(e,"poster",t),r&1&&s!==(s="[VIDEO] post #"+o[0].id)&&d(e,"title",s)},d(o){o&&g(e),l[2](null)}}}function ls(l){let e,n,t,s;return{c(){e=S("img"),this.h()},l(o){e=I(o,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){ve(e.src,n=l[0].sample_url)||d(e,"src",n),d(e,"alt",t="[IMAGE] post #"+l[0].id),d(e,"title",s="[IMAGE] post #"+l[0].id),d(e,"class","svelte-1cjgn2p")},m(o,r){T(o,e,r)},p(o,r){r&1&&!ve(e.src,n=o[0].sample_url)&&d(e,"src",n),r&1&&t!==(t="[IMAGE] post #"+o[0].id)&&d(e,"alt",t),r&1&&s!==(s="[IMAGE] post #"+o[0].id)&&d(e,"title",s)},d(o){o&&g(e)}}}function rs(l){let e;function n(r,a){return r[0].type==="image"?ls:r[0].type==="video"?kt:bt}function t(r,a){return a===kt?ss(r):a===bt?ns(r):r}let s=n(l),o=s(t(l,s));return{c(){o.c(),e=be()},l(r){o.l(r),e=be()},m(r,a){o.m(r,a),T(r,e,a)},p(r,[a]){s===(s=n(r))&&o?o.p(t(r,s),a):(o.d(1),o=s(t(r,s)),o&&(o.c(),o.m(e.parentNode,e)))},i:K,o:K,d(r){r&&g(e),o.d(r)}}}function os(l,e,n){let{post:t}=e,s;const o=a=>{t.type==="video"&&s&&(a.key==="ArrowLeft"&&(a.preventDefault(),a.stopPropagation(),n(1,s.currentTime=Math.max(0,s.currentTime-5),s)),a.key==="ArrowRight"&&(a.preventDefault(),a.stopPropagation(),n(1,s.currentTime=Math.min(s.duration,s.currentTime+5),s)))};et(()=>{s&&(ze==null||ze.observe(s)),document.addEventListener("keydown",o)}),tt(()=>{s&&(ze==null||ze.unobserve(s)),document.removeEventListener("keydown",o)});function r(a){Se[a?"unshift":"push"](()=>{s=a,n(1,s)})}return l.$$set=a=>{"post"in a&&n(0,t=a.post)},[t,s,r]}class is extends pe{constructor(e){super(),_e(this,e,os,rs,fe,{post:0})}}function as(l){let e,n,t;return{c(){e=S("img"),this.h()},l(s){e=I(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ve(e.src,n=l[2])||d(e,"src",n),d(e,"alt",t="post #"+l[0].id),d(e,"class","svelte-itxz72"),Fe(e,"top",l[1])},m(s,o){T(s,e,o)},p(s,[o]){o&4&&!ve(e.src,n=s[2])&&d(e,"src",n),o&1&&t!==(t="post #"+s[0].id)&&d(e,"alt",t),o&2&&Fe(e,"top",s[1])},i:K,o:K,d(s){s&&g(e)}}}function cs(l,e,n){let t,{post:s}=e,{offset:o}=e;return l.$$set=r=>{"post"in r&&n(0,s=r.post),"offset"in r&&n(1,o=r.offset)},l.$$.update=()=>{l.$$.dirty&1&&n(2,t=$n(s.sample_url)?s.preview_url:s.sample_url)},[s,o,t]}class Yt extends pe{constructor(e){super(),_e(this,e,cs,as,fe,{post:0,offset:1})}}function wt(l,e,n){const t=l.slice();return t[17]=e[n],t[19]=n,t}function yt(l){let e,n;return e=new Yt({props:{post:l[3],offset:l[6]}}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&8&&(o.post=t[3]),s&64&&(o.offset=t[6]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ct(l){let e,n;return e=new Yt({props:{post:l[4],offset:l[7]}}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&16&&(o.post=t[4]),s&128&&(o.offset=t[7]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Et(l){let e,n=`${l[19]*100}vh`;return{c(){e=S("div"),this.h()},l(t){e=I(t,"DIV",{class:!0}),V(e).forEach(g),this.h()},h(){d(e,"class","pseudo snap-item svelte-3khu3"),Fe(e,"top",n)},m(t,s){T(t,e,s)},p:K,d(t){t&&g(e)}}}function us(l){let e,n,t,s,o,r,a,i,u,c,f,_,E,C=l[3]&&yt(l);s=new is({props:{post:l[2]}}),r=new ts({props:{post:l[2]}});let k=l[4]&&Ct(l),$=ye({length:l[8].posts.length}),p=[];for(let h=0;h<$.length;h+=1)p[h]=Et(wt(l,$,h));return c=new Qt({props:{rootMargin:window.innerHeight*2+"px"}}),c.$on("intersection",l[13]),{c(){e=S("div"),C&&C.c(),n=N(),t=S("div"),F(s.$$.fragment),o=N(),F(r.$$.fragment),a=N(),k&&k.c(),i=N();for(let h=0;h<p.length;h+=1)p[h].c();u=N(),F(c.$$.fragment),this.h()},l(h){e=I(h,"DIV",{class:!0});var w=V(e);C&&C.l(w),n=O(w),t=I(w,"DIV",{class:!0});var y=V(t);R(s.$$.fragment,y),o=O(y),R(r.$$.fragment,y),y.forEach(g),a=O(w),k&&k.l(w),i=O(w);for(let D=0;D<p.length;D+=1)p[D].l(w);u=O(w),R(c.$$.fragment,w),w.forEach(g),this.h()},h(){d(t,"class","screen snap-container horizontal current svelte-3khu3"),Fe(t,"top",l[5]),d(e,"class","root screen snap-container svelte-3khu3")},m(h,w){T(h,e,w),C&&C.m(e,null),m(e,n),m(e,t),M(s,t,null),m(t,o),M(r,t,null),l[12](t),m(e,a),k&&k.m(e,null),m(e,i);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(e,null);m(e,u),M(c,e,null),l[14](e),f=!0,_||(E=we(e,"scroll",l[10]),_=!0)},p(h,[w]){h[3]?C?(C.p(h,w),w&8&&v(C,1)):(C=yt(h),C.c(),v(C,1),C.m(e,n)):C&&(le(),b(C,1,1,()=>{C=null}),re());const y={};w&4&&(y.post=h[2]),s.$set(y);const D={};if(w&4&&(D.post=h[2]),r.$set(D),w&32&&Fe(t,"top",h[5]),h[4]?k?(k.p(h,w),w&16&&v(k,1)):(k=Ct(h),k.c(),v(k,1),k.m(e,i)):k&&(le(),b(k,1,1,()=>{k=null}),re()),w&256){$=ye({length:h[8].posts.length});let A;for(A=0;A<$.length;A+=1){const ee=wt(h,$,A);p[A]?p[A].p(ee,w):(p[A]=Et(ee),p[A].c(),p[A].m(e,u))}for(;A<p.length;A+=1)p[A].d(1);p.length=$.length}},i(h){f||(v(C),v(s.$$.fragment,h),v(r.$$.fragment,h),v(k),v(c.$$.fragment,h),f=!0)},o(h){b(C),b(s.$$.fragment,h),b(r.$$.fragment,h),b(k),b(c.$$.fragment,h),f=!1},d(h){h&&g(e),C&&C.d(),L(s),L(r),l[12](null),k&&k.d(),Ue(p,h),L(c),l[14](null),_=!1,E()}}}function fs(l,e,n){let t;de(l,Ge,y=>n(8,t=y));let{index:s}=e,o,r,a=t.posts[s],i=s>0?t.posts[s-1]:void 0,u=s<t.posts.length-1?t.posts[s+1]:void 0,c=`${s*100}vh`,f=`${(s-1)*100}vh`,_=`${(s+1)*100}vh`;const E=Te(),C=()=>{r&&(r.scrollIntoView(),n(1,r.scrollLeft=0,r))},k=y=>{const D=y.target,A=D.getBoundingClientRect().height,ee=D.scrollTop/A,Z=Math.round(ee);Z!=s&&requestAnimationFrame(()=>{n(11,s=Z),n(2,a=t.posts[s]),n(3,i=s>0?t.posts[s-1]:void 0),n(4,u=s<t.posts.length-1?t.posts[s+1]:void 0),n(5,c=`${s*100}vh`),n(6,f=`${(s-1)*100}vh`),n(7,_=`${(s+1)*100}vh`),r&&n(1,r.scrollLeft=0,r)})},$=y=>{y.key==="d"&&(y.preventDefault(),y.stopPropagation(),r.scrollLeft===0?r.scrollBy({left:o.clientWidth,top:0,behavior:"smooth"}):r.scrollBy({left:-o.clientWidth,top:0,behavior:"smooth"})),y.key==="ArrowUp"&&(y.preventDefault(),y.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(s-1),behavior:"smooth"})),y.key==="ArrowDown"&&(y.preventDefault(),y.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(s+1),behavior:"smooth"}))};et(()=>{document.addEventListener("keydown",$),C()}),tt(()=>{document.removeEventListener("keydown",$)});function p(y){Se[y?"unshift":"push"](()=>{r=y,n(1,r)})}const h=()=>E("endreached");function w(y){Se[y?"unshift":"push"](()=>{o=y,n(0,o)})}return l.$$set=y=>{"index"in y&&n(11,s=y.index)},[o,r,a,i,u,c,f,_,t,E,k,s,p,h,w]}class ps extends pe{constructor(e){super(),_e(this,e,fs,us,fe,{index:11})}}function _s(l){let e;return{c(){e=S("i"),this.h()},l(n){e=I(n,"I",{class:!0}),V(e).forEach(g),this.h()},h(){d(e,"class","codicon codicon-close")},m(n,t){T(n,e,t)},p:K,d(n){n&&g(e)}}}function ms(l){let e,n,t,s,o;function r(i){l[2](i)}let a={};return l[0]!==void 0&&(a.index=l[0]),e=new ps({props:a}),Se.push(()=>Ze(e,"index",r)),e.$on("endreached",l[3]),s=new Gt({props:{class:"button-close",$$slots:{default:[_s]},$$scope:{ctx:l}}}),s.$on("click",l[1]),{c(){F(e.$$.fragment),t=N(),F(s.$$.fragment)},l(i){R(e.$$.fragment,i),t=O(i),R(s.$$.fragment,i)},m(i,u){M(e,i,u),T(i,t,u),M(s,i,u),o=!0},p(i,u){const c={};!n&&u&1&&(n=!0,c.index=i[0],Ye(()=>n=!1)),e.$set(c);const f={};u&128&&(f.$$scope={dirty:u,ctx:i}),s.$set(f)},i(i){o||(v(e.$$.fragment,i),v(s.$$.fragment,i),o=!0)},o(i){b(e.$$.fragment,i),b(s.$$.fragment,i),o=!1},d(i){i&&g(t),L(e,i),L(s,i)}}}function ds(l){let e,n;return e=new Hn({props:{$$slots:{default:[ms]},$$scope:{ctx:l}}}),e.$on("close",l[1]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,[s]){const o={};s&129&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function gs(l,e,n){let{index:t}=e;const s=Te(),o=()=>{s("close",t)},r=c=>{c.key==="f"&&(c.preventDefault(),c.stopPropagation(),o())},a=()=>{var c,f;(((c=history.state)==null?void 0:c.fullscreen)===void 0||((f=history.state)==null?void 0:f.fullscreen)===!1)&&o()};et(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),tt(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(c){t=c,n(0,t)}function u(c){Je.call(this,l,c)}return l.$$set=c=>{"index"in c&&n(0,t=c.index)},[t,o,i,u]}class hs extends pe{constructor(e){super(),_e(this,e,gs,ds,fe,{index:0})}}function St(l){let e,n=l[0].type==="video"?"▶":"GIF",t;return{c(){e=S("span"),t=ie(n),this.h()},l(s){e=I(s,"SPAN",{class:!0});var o=V(e);t=ae(o,n),o.forEach(g),this.h()},h(){d(e,"class","type svelte-1213alg")},m(s,o){T(s,e,o),m(e,t)},p(s,o){o&1&&n!==(n=s[0].type==="video"?"▶":"GIF")&&Ve(t,n)},d(s){s&&g(e)}}}function $s(l){let e,n,t,s,o,r=Xe(l[0].score)+"",a,i,u,c,f,_=l[0].type!=="image"&&St(l);return{c(){e=S("div"),n=S("img"),s=N(),o=S("span"),a=ie(r),i=N(),_&&_.c(),this.h()},l(E){e=I(E,"DIV",{id:!0,class:!0,style:!0});var C=V(e);n=I(C,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),s=O(C),o=I(C,"SPAN",{class:!0});var k=V(o);a=ae(k,r),k.forEach(g),i=O(C),_&&_.l(C),C.forEach(g),this.h()},h(){ve(n.src,t=l[1])||d(n,"src",t),d(n,"alt","post"),d(n,"class","post-media svelte-1213alg"),d(n,"tabindex","-1"),d(n,"loading","lazy"),d(o,"class","score svelte-1213alg"),d(e,"id",u=xe(l[0].id)),d(e,"class","post svelte-1213alg"),Fe(e,"grid-row","span "+l[2]),st(e,"open",open)},m(E,C){T(E,e,C),m(e,n),m(e,s),m(e,o),m(o,a),m(e,i),_&&_.m(e,null),c||(f=[we(e,"click",l[3]),we(e,"keydown",l[4])],c=!0)},p(E,[C]){C&2&&!ve(n.src,t=E[1])&&d(n,"src",t),C&1&&r!==(r=Xe(E[0].score)+"")&&Ve(a,r),E[0].type!=="image"?_?_.p(E,C):(_=St(E),_.c(),_.m(e,null)):_&&(_.d(1),_=null),C&1&&u!==(u=xe(E[0].id))&&d(e,"id",u),C&0&&st(e,"open",open)},i:K,o:K,d(E){E&&g(e),_&&_.d(),c=!1,lt(f)}}}let It=3;function vs(l,e,n){let t,{post:s}=e,o=Math.min(Math.round(s.height/s.width)*It,It*3);const r=u=>u.endsWith(".jpg")||u.endsWith(".jpeg")||u.endsWith(".png")||u.endsWith(".webp");function a(u){Je.call(this,l,u)}const i=u=>{var c;(Wt(u)||u.key==="f")&&((c=u.target)==null||c.click())};return l.$$set=u=>{"post"in u&&n(0,s=u.post)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=r(s.sample_url)?s.sample_url:s.preview_url)},[s,t,o,a,i]}class bs extends pe{constructor(e){super(),_e(this,e,vs,$s,fe,{post:0})}}function ks(l){const e=l.slice(),n=Ht(e[1].file_url,e[1].sample_url,e[1].preview_url);return e[7]=n,e}function ws(l){let e,n;return e=new bn({props:{post:l[1]}}),e.$on("click",l[4]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function ys(l){let e,n;return e=new kn({props:{src:l[7].animated,poster:l[7].static,width:l[1].width,height:l[1].height,loop:l[2]||ut(l[1].tags)}}),e.$on("click",l[4]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.src=t[7].animated),s&2&&(o.poster=t[7].static),s&2&&(o.width=t[1].width),s&2&&(o.height=t[1].height),s&6&&(o.loop=t[2]||ut(t[1].tags)),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Cs(l){let e,n;return e=new wn({props:{post:l[1],open:l[0]}}),e.$on("click",l[4]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),s&1&&(o.open=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Es(l){let e;return{c(){e=S("i"),this.h()},l(n){e=I(n,"I",{class:!0}),V(e).forEach(g),this.h()},h(){d(e,"class","codicon codicon-screen-full")},m(n,t){T(n,e,t)},p:K,d(n){n&&g(e)}}}function Dt(l){let e,n;return e=new vn({props:{post:l[1]}}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ss(l){let e,n,t,s,o,r,a,i,u,c;const f=[Cs,ys,ws],_=[];function E($,p){return $[1].type==="image"?0:$[1].type==="video"?1:2}function C($,p){return p===1?ks($):$}n=E(l),t=_[n]=f[n](C(l,n)),o=new Gt({props:{class:"button-fullscreen","aria-label":"Enter Fullscreen mode",$$slots:{default:[Es]},$$scope:{ctx:l}}}),o.$on("click",l[5]);let k=l[0]&&Dt(l);return{c(){e=S("div"),t.c(),s=N(),F(o.$$.fragment),r=N(),k&&k.c(),this.h()},l($){e=I($,"DIV",{id:!0,class:!0});var p=V(e);t.l(p),s=O(p),R(o.$$.fragment,p),r=O(p),k&&k.l(p),p.forEach(g),this.h()},h(){d(e,"id",a=xe(l[1].id)),d(e,"class","post svelte-pwgq1f"),st(e,"open",l[0])},m($,p){T($,e,p),_[n].m(e,null),m(e,s),M(o,e,null),m(e,r),k&&k.m(e,null),i=!0,u||(c=we(e,"keydown",l[6]),u=!0)},p($,[p]){let h=n;n=E($),n===h?_[n].p(C($,n),p):(le(),b(_[h],1,1,()=>{_[h]=null}),re(),t=_[n],t?t.p(C($,n),p):(t=_[n]=f[n](C($,n)),t.c()),v(t,1),t.m(e,s));const w={};p&256&&(w.$$scope={dirty:p,ctx:$}),o.$set(w),$[0]?k?(k.p($,p),p&1&&v(k,1)):(k=Dt($),k.c(),v(k,1),k.m(e,null)):k&&(le(),b(k,1,1,()=>{k=null}),re()),(!i||p&2&&a!==(a=xe($[1].id)))&&d(e,"id",a),(!i||p&1)&&st(e,"open",$[0])},i($){i||(v(t),v(o.$$.fragment,$),v(k),i=!0)},o($){b(t),b(o.$$.fragment,$),b(k),i=!1},d($){$&&g(e),_[n].d(),L(o),k&&k.d(),u=!1,c()}}}function Is(l,e,n){let t;de(l,yn,c=>n(2,t=c));const s=Te(),o=()=>n(0,a=!a);let{post:r}=e,{open:a=!1}=e;const i=()=>s("fullscreen"),u=c=>{c.key==="f"&&s("fullscreen")};return l.$$set=c=>{"post"in c&&n(1,r=c.post),"open"in c&&n(0,a=c.open)},[a,r,t,s,o,i,u]}class Ds extends pe{constructor(e){super(),_e(this,e,Is,Ss,fe,{post:1,open:0})}}function Ps(l){let e;return{c(){e=ie("Done")},l(n){e=ae(n,"Done")},m(n,t){T(n,e,t)},d(n){n&&g(e)}}}function Ns(l){let e;return{c(){e=ie("Reset")},l(n){e=ae(n,"Reset")},m(n,t){T(n,e,t)},d(n){n&&g(e)}}}function Os(l){let e,n,t="Sorting and Filtering",s,o,r,a="Sorting",i,u,c,f,_,E,C,k,$,p,h="Filtering by Score",w,y,D,A,ee,Z,x,ne,se,P="Filtering by Rating",J,W,B,oe,j,G,X,Q,ge,he,Ie;function De(U){l[6](U)}let Pe={options:Vs};l[2].direction!==void 0&&(Pe.value=l[2].direction),c=new cn({props:Pe}),Se.push(()=>Ze(c,"value",De));function He(U){l[7](U)}let Ce={options:As};l[2].property!==void 0&&(Ce.value=l[2].property),E=new ft({props:Ce}),Se.push(()=>Ze(E,"value",He));function Ne(U){l[8](U)}let We={options:Fs};l[1].scoreComparator!==void 0&&(We.value=l[1].scoreComparator),D=new Cn({props:We}),Se.push(()=>Ze(D,"value",Ne));function Ke(U){l[10](U)}let Re={options:Zt};return l[1].rating!==void 0&&(Re.value=l[1].rating),B=new ft({props:Re}),Se.push(()=>Ze(B,"value",Ke)),G=new qe({props:{title:"Return to searching.",$$slots:{default:[Ps]},$$scope:{ctx:l}}}),G.$on("click",l[11]),Q=new qe({props:{title:"Reset sort and filter.",type:"secondary",$$slots:{default:[Ns]},$$scope:{ctx:l}}}),Q.$on("click",l[5]),{c(){e=S("div"),n=S("h3"),n.textContent=t,s=N(),o=S("div"),r=S("b"),r.textContent=a,i=N(),u=S("div"),F(c.$$.fragment),_=N(),F(E.$$.fragment),k=N(),$=S("div"),p=S("b"),p.textContent=h,w=N(),y=S("div"),F(D.$$.fragment),ee=N(),Z=S("input"),x=N(),ne=S("div"),se=S("b"),se.textContent=P,J=N(),W=S("div"),F(B.$$.fragment),j=N(),F(G.$$.fragment),X=N(),F(Q.$$.fragment),this.h()},l(U){e=I(U,"DIV",{class:!0});var q=V(e);n=I(q,"H3",{"data-svelte-h":!0}),ue(n)!=="svelte-15zouq3"&&(n.textContent=t),s=O(q),o=I(q,"DIV",{});var $e=V(o);r=I($e,"B",{class:!0,"data-svelte-h":!0}),ue(r)!=="svelte-ekzpgg"&&(r.textContent=a),i=O($e),u=I($e,"DIV",{class:!0});var Y=V(u);R(c.$$.fragment,Y),_=O(Y),R(E.$$.fragment,Y),Y.forEach(g),$e.forEach(g),k=O(q),$=I(q,"DIV",{});var Oe=V($);p=I(Oe,"B",{class:!0,"data-svelte-h":!0}),ue(p)!=="svelte-1flca3"&&(p.textContent=h),w=O(Oe),y=I(Oe,"DIV",{class:!0});var te=V(y);R(D.$$.fragment,te),ee=O(te),Z=I(te,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),te.forEach(g),Oe.forEach(g),x=O(q),ne=I(q,"DIV",{});var H=V(ne);se=I(H,"B",{class:!0,"data-svelte-h":!0}),ue(se)!=="svelte-1evbw58"&&(se.textContent=P),J=O(H),W=I(H,"DIV",{class:!0});var z=V(W);R(B.$$.fragment,z),z.forEach(g),H.forEach(g),j=O(q),R(G.$$.fragment,q),X=O(q),R(Q.$$.fragment,q),q.forEach(g),this.h()},h(){d(r,"class","svelte-kdg2ou"),d(u,"class","row svelte-kdg2ou"),d(p,"class","svelte-kdg2ou"),d(Z,"type","number"),d(Z,"min",0),d(Z,"max",1e5),d(Z,"step",1),d(Z,"class","svelte-kdg2ou"),d(y,"class","row svelte-kdg2ou"),d(se,"class","svelte-kdg2ou"),d(W,"class","row svelte-kdg2ou"),d(e,"class","container svelte-kdg2ou")},m(U,q){T(U,e,q),m(e,n),m(e,s),m(e,o),m(o,r),m(o,i),m(o,u),M(c,u,null),m(u,_),M(E,u,null),m(e,k),m(e,$),m($,p),m($,w),m($,y),M(D,y,null),m(y,ee),m(y,Z),je(Z,l[0]),m(e,x),m(e,ne),m(ne,se),m(ne,J),m(ne,W),M(B,W,null),m(e,j),M(G,e,null),m(e,X),M(Q,e,null),ge=!0,he||(Ie=[we(Z,"input",l[9]),we(Z,"keyup",l[4])],he=!0)},p(U,q){const $e={};!f&&q&4&&(f=!0,$e.value=U[2].direction,Ye(()=>f=!1)),c.$set($e);const Y={};!C&&q&4&&(C=!0,Y.value=U[2].property,Ye(()=>C=!1)),E.$set(Y);const Oe={};!A&&q&2&&(A=!0,Oe.value=U[1].scoreComparator,Ye(()=>A=!1)),D.$set(Oe),q&1&&Lt(Z.value)!==U[0]&&je(Z,U[0]);const te={};!oe&&q&2&&(oe=!0,te.value=U[1].rating,Ye(()=>oe=!1)),B.$set(te);const H={};q&8192&&(H.$$scope={dirty:q,ctx:U}),G.$set(H);const z={};q&8192&&(z.$$scope={dirty:q,ctx:U}),Q.$set(z)},i(U){ge||(v(c.$$.fragment,U),v(E.$$.fragment,U),v(D.$$.fragment,U),v(B.$$.fragment,U),v(G.$$.fragment,U),v(Q.$$.fragment,U),ge=!0)},o(U){b(c.$$.fragment,U),b(E.$$.fragment,U),b(D.$$.fragment,U),b(B.$$.fragment,U),b(G.$$.fragment,U),b(Q.$$.fragment,U),ge=!1},d(U){U&&g(e),L(c),L(E),L(D),L(B),L(G),L(Q),he=!1,lt(Ie)}}}function Ts(l){let e,n;return e=new Bt({props:{$$slots:{default:[Os]},$$scope:{ctx:l}}}),e.$on("close",l[12]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,[s]){const o={};s&8199&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}const Zt=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),As=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),Vs=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),Fs=Object.freeze({">=":"≥","<=":"≤"});function Rs(l,e,n){let t,s;de(l,Ae,$=>n(1,t=$)),de(l,Le,$=>n(2,s=$));let o;const r=Te(),a=$=>{var p;return Wt($)&&((p=$.target)==null?void 0:p.blur())},i=()=>{Le.reset(),Ae.reset(),n(0,o=t.scoreValue)};function u($){l.$$.not_equal(s.direction,$)&&(s.direction=$,Le.set(s))}function c($){l.$$.not_equal(s.property,$)&&(s.property=$,Le.set(s))}function f($){l.$$.not_equal(t.scoreComparator,$)&&(t.scoreComparator=$,Ae.set(t))}function _(){o=Lt(this.value),n(0,o),n(1,t)}function E($){l.$$.not_equal(t.rating,$)&&(t.rating=$,Ae.set(t))}const C=()=>r("close");function k($){Je.call(this,l,$)}return l.$$.update=()=>{if(l.$$.dirty&3){o===void 0&&n(0,o=t.scoreValue);let $=Number(o);isNaN($)||nn(Ae,t.scoreValue=$,t)}},[o,t,s,r,a,i,u,c,f,_,E,C,k]}class Ms extends pe{constructor(e){super(),_e(this,e,Rs,Ts,fe,{})}}function Pt(l){let e,n;return e=new Ms({}),e.$on("close",l[4]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p:K,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ls(l){let e,n,t,s,o,r,a,i,u,c,f,_,E,C,k,$=l[0]&&Pt(l);return{c(){e=S("button"),n=S("i"),t=N(),s=S("span"),o=ie(l[2]),r=N(),a=S("i"),i=N(),u=S("span"),c=ie(l[1]),f=N(),$&&$.c(),_=be(),this.h()},l(p){e=I(p,"BUTTON",{class:!0});var h=V(e);n=I(h,"I",{class:!0}),V(n).forEach(g),t=O(h),s=I(h,"SPAN",{});var w=V(s);o=ae(w,l[2]),w.forEach(g),r=O(h),a=I(h,"I",{class:!0}),V(a).forEach(g),i=O(h),u=I(h,"SPAN",{});var y=V(u);c=ae(y,l[1]),y.forEach(g),h.forEach(g),f=O(p),$&&$.l(p),_=be(),this.h()},h(){d(n,"class","codicon codicon-filter svelte-a4zz3f"),d(a,"class","codicon codicon-arrow-swap svelte-a4zz3f"),d(e,"class","svelte-a4zz3f")},m(p,h){T(p,e,h),m(e,n),m(e,t),m(e,s),m(s,o),m(e,r),m(e,a),m(e,i),m(e,u),m(u,c),T(p,f,h),$&&$.m(p,h),T(p,_,h),E=!0,C||(k=we(e,"click",l[3]),C=!0)},p(p,[h]){(!E||h&4)&&Ve(o,p[2]),(!E||h&2)&&Ve(c,p[1]),p[0]?$?($.p(p,h),h&1&&v($,1)):($=Pt(p),$.c(),v($,1),$.m(_.parentNode,_)):$&&(le(),b($,1,1,()=>{$=null}),re())},i(p){E||(v($),E=!0)},o(p){b($),E=!1},d(p){p&&(g(e),g(f),g(_)),$&&$.d(p),C=!1,k()}}}const Bs=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),zs=(l,e,n)=>{let t=l==="all"?void 0:Zt[l],s=e===0&&n===">="?void 0:`Score${n}${Xe(e)}`;return[t,s].filter(o=>o!==void 0).join(",")||"All"};function js(l,e,n){let t,s,o,r;de(l,Le,f=>n(5,o=f)),de(l,Ae,f=>n(6,r=f));let a=!1;const i=Te(),u=()=>n(0,a=!0),c=()=>{n(0,a=!1),i("sortfilterupdate")};return l.$$.update=()=>{l.$$.dirty&64&&n(2,t=zs(r.rating,r.scoreValue,r.scoreComparator)),l.$$.dirty&32&&n(1,s=Bs[o.property][o.direction])},[a,s,t,u,c,o,r]}class Gs extends pe{constructor(e){super(),_e(this,e,js,Ls,fe,{})}}function Nt(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function Ot(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function qs(l){let e,n,t=ye(l[1].posts),s=[];for(let r=0;r<t.length;r+=1)s[r]=Tt(Nt(l,t,r));const o=r=>b(s[r],1,1,()=>{s[r]=null});return{c(){e=S("section");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=I(r,"SECTION",{class:!0,style:!0});var a=V(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(g),this.h()},h(){d(e,"class","multi-column svelte-wypqh"),Fe(e,"grid-template-columns","repeat("+l[2]+", 1fr)")},m(r,a){T(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&3){t=ye(r[1].posts);let i;for(i=0;i<t.length;i+=1){const u=Nt(r,t,i);s[i]?(s[i].p(u,a),v(s[i],1)):(s[i]=Tt(u),s[i].c(),v(s[i],1),s[i].m(e,null))}for(le(),i=t.length;i<s.length;i+=1)o(i);re()}(!n||a&4)&&Fe(e,"grid-template-columns","repeat("+r[2]+", 1fr)")},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)b(s[a]);n=!1},d(r){r&&g(e),Ue(s,r)}}}function Us(l){let e,n,t=ye(l[1].posts),s=[];for(let r=0;r<t.length;r+=1)s[r]=At(Ot(l,t,r));const o=r=>b(s[r],1,1,()=>{s[r]=null});return{c(){e=S("section");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=I(r,"SECTION",{class:!0});var a=V(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(g),this.h()},h(){d(e,"class","single-column svelte-wypqh")},m(r,a){T(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&3){t=ye(r[1].posts);let i;for(i=0;i<t.length;i+=1){const u=Ot(r,t,i);s[i]?(s[i].p(u,a),v(s[i],1)):(s[i]=At(u),s[i].c(),v(s[i],1),s[i].m(e,null))}for(le(),i=t.length;i<s.length;i+=1)o(i);re()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)b(s[a]);n=!1},d(r){r&&g(e),Ue(s,r)}}}function Tt(l){let e,n;function t(){return l[6](l[10])}return e=new bs({props:{post:l[8]}}),e.$on("click",t),{c(){F(e.$$.fragment)},l(s){R(e.$$.fragment,s)},m(s,o){M(e,s,o),n=!0},p(s,o){l=s;const r={};o&2&&(r.post=l[8]),e.$set(r)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){L(e,s)}}}function At(l){let e,n;function t(){return l[5](l[10])}return e=new Ds({props:{post:l[8]}}),e.$on("fullscreen",t),{c(){F(e.$$.fragment)},l(s){R(e.$$.fragment,s)},m(s,o){M(e,s,o),n=!0},p(s,o){l=s;const r={};o&2&&(r.post=l[8]),e.$set(r)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){L(e,s)}}}function Vt(l){let e,n;return e=new hs({props:{index:l[0]}}),e.$on("close",l[3]),e.$on("endreached",l[7]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&1&&(o.index=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Hs(l){let e,n,t=Xe(l[1].postCount)+"",s,o,r,a,i,u,c,f,_,E;a=new Gs({}),a.$on("sortfilterupdate",l[4]);const C=[Us,qs],k=[];function $(h,w){return h[2]==="1"?0:1}u=$(l),c=k[u]=C[u](l);let p=l[0]!==void 0&&Vt(l);return{c(){e=S("div"),n=S("span"),s=ie(t),o=ie(" posts"),r=N(),F(a.$$.fragment),i=N(),c.c(),f=N(),p&&p.c(),_=be(),this.h()},l(h){e=I(h,"DIV",{class:!0});var w=V(e);n=I(w,"SPAN",{});var y=V(n);s=ae(y,t),o=ae(y," posts"),y.forEach(g),r=O(w),R(a.$$.fragment,w),w.forEach(g),i=O(h),c.l(h),f=O(h),p&&p.l(h),_=be(),this.h()},h(){d(e,"class","svelte-wypqh")},m(h,w){T(h,e,w),m(e,n),m(n,s),m(n,o),m(e,r),M(a,e,null),T(h,i,w),k[u].m(h,w),T(h,f,w),p&&p.m(h,w),T(h,_,w),E=!0},p(h,[w]){(!E||w&2)&&t!==(t=Xe(h[1].postCount)+"")&&Ve(s,t);let y=u;u=$(h),u===y?k[u].p(h,w):(le(),b(k[y],1,1,()=>{k[y]=null}),re(),c=k[u],c?c.p(h,w):(c=k[u]=C[u](h),c.c()),v(c,1),c.m(f.parentNode,f)),h[0]!==void 0?p?(p.p(h,w),w&1&&v(p,1)):(p=Vt(h),p.c(),v(p,1),p.m(_.parentNode,_)):p&&(le(),b(p,1,1,()=>{p=null}),re())},i(h){E||(v(a.$$.fragment,h),v(c),v(p),E=!0)},o(h){b(a.$$.fragment,h),b(c),b(p),E=!1},d(h){h&&(g(e),g(i),g(f),g(_)),L(a),k[u].d(h),p&&p.d(h)}}}function Ws(l,e,n){let t,s;de(l,Ge,f=>n(1,t=f)),de(l,zt,f=>n(2,s=f));let o;const r=f=>{var C;const _=t.posts[f.detail],E=xe(_.id);(C=document.getElementById(E))==null||C.scrollIntoView(),n(0,o=void 0)};function a(f){Je.call(this,l,f)}const i=f=>{n(0,o=f)},u=f=>{n(0,o=f)};function c(f){Je.call(this,l,f)}return l.$$.update=()=>{var f;l.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(f=history.state)!=null&&f.fullscreen&&history.back())},[o,t,s,r,a,i,u,c]}class Ks extends pe{constructor(e){super(),_e(this,e,Ws,Hs,fe,{})}}function Qs(l){let e;return{c(){e=ie("Reset Filter")},l(n){e=ae(n,"Reset Filter")},m(n,t){T(n,e,t)},d(n){n&&g(e)}}}function Ys(l){let e,n,t,s,o="We couldn't find any posts matching your tags. Sorry...",r,a,i;return a=new qe({props:{title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[Qs]},$$scope:{ctx:l}}}),a.$on("click",l[1]),{c(){e=S("img"),t=N(),s=S("p"),s.textContent=o,r=N(),F(a.$$.fragment),this.h()},l(u){e=I(u,"IMG",{src:!0,alt:!0,class:!0}),t=O(u),s=I(u,"P",{"data-svelte-h":!0}),ue(s)!=="svelte-1utxj3w"&&(s.textContent=o),r=O(u),R(a.$$.fragment,u),this.h()},h(){ve(e.src,n=jt+"/assets/shironeko-confused.png")||d(e,"src",n),d(e,"alt","Nothing here..."),d(e,"class","svelte-1bb5e7g")},m(u,c){T(u,e,c),T(u,t,c),T(u,s,c),T(u,r,c),M(a,u,c),i=!0},p(u,[c]){const f={};c&4&&(f.$$scope={dirty:c,ctx:u}),a.$set(f)},i(u){i||(v(a.$$.fragment,u),i=!0)},o(u){b(a.$$.fragment,u),i=!1},d(u){u&&(g(e),g(t),g(s),g(r)),L(a,u)}}}function Zs(l){const e=Te();return[e,()=>{Le.reset(),Ae.reset(),e("sortfilterupdate")}]}class Js extends pe{constructor(e){super(),_e(this,e,Zs,Ys,fe,{})}}function Xs(l){const e=l-1;return e*e*e+1}function xs(l,{delay:e=0,duration:n=400,easing:t=Xs,x:s=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(l),i=+a.opacity,u=a.transform==="none"?"":a.transform,c=i*(1-r),[f,_]=it(s),[E,C]=it(o);return{delay:e,duration:n,easing:t,css:(k,$)=>`
			transform: ${u} translate(${(1-k)*f}${_}, ${(1-k)*E}${C});
			opacity: ${i-c*$}`}}function el(l){let e;return{c(){e=ie("Ok")},l(n){e=ae(n,"Ok")},m(n,t){T(n,e,t)},d(n){n&&g(e)}}}function tl(l){let e,n,t="This site uses cookies",s,o,r,a;return o=new qe({props:{title:"Accept cookies",$$slots:{default:[el]},$$scope:{ctx:l}}}),o.$on("click",l[0]),{c(){e=S("div"),n=S("span"),n.textContent=t,s=N(),F(o.$$.fragment),this.h()},l(i){e=I(i,"DIV",{class:!0});var u=V(e);n=I(u,"SPAN",{"data-svelte-h":!0}),ue(n)!=="svelte-17tpe0c"&&(n.textContent=t),s=O(u),R(o.$$.fragment,u),u.forEach(g),this.h()},h(){d(e,"class","svelte-20j44m")},m(i,u){T(i,e,u),m(e,n),m(e,s),M(o,e,null),a=!0},p(i,[u]){const c={};u&2&&(c.$$scope={dirty:u,ctx:i}),o.$set(c)},i(i){a||(v(o.$$.fragment,i),r&&r.end(1),a=!0)},o(i){b(o.$$.fragment,i),i&&(r=sn(e,xs,{y:200,duration:200})),a=!1},d(i){i&&g(e),L(o),i&&r&&r.end()}}}function nl(l){return[()=>Kt.set(!0)]}class sl extends pe{constructor(e){super(),_e(this,e,nl,tl,fe,{})}}function ll(l){let e;return{c(){e=ie("Search")},l(n){e=ae(n,"Search")},m(n,t){T(n,e,t)},i:K,o:K,d(n){n&&g(e)}}}function rl(l){let e,n;return e=new qt({}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function ol(l){let e,n,t,s;const o=[rl,ll],r=[];function a(i,u){return i[0]?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=be()},l(i){n.l(i),t=be()},m(i,u){r[e].m(i,u),T(i,t,u),s=!0},p(i,u){let c=e;e=a(i),e!==c&&(le(),b(r[c],1,1,()=>{r[c]=null}),re(),n=r[e],n||(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){s||(v(n),s=!0)},o(i){b(n),s=!1},d(i){i&&g(t),r[e].d(i)}}}function il(l){let e,n,t,s,o,r;const a=[ul,cl],i=[];function u(c,f){return c[3].postCount===0?0:1}return n=u(l),t=i[n]=a[n](l),o=new In({}),{c(){e=S("section"),t.c(),s=N(),F(o.$$.fragment),this.h()},l(c){e=I(c,"SECTION",{class:!0});var f=V(e);t.l(f),f.forEach(g),s=O(c),R(o.$$.fragment,c),this.h()},h(){d(e,"class","svelte-1muglpt")},m(c,f){T(c,e,f),i[n].m(e,null),T(c,s,f),M(o,c,f),r=!0},p(c,f){let _=n;n=u(c),n===_?i[n].p(c,f):(le(),b(i[_],1,1,()=>{i[_]=null}),re(),t=i[n],t?t.p(c,f):(t=i[n]=a[n](c),t.c()),v(t,1),t.m(e,null))},i(c){r||(v(t),v(o.$$.fragment,c),r=!0)},o(c){b(t),b(o.$$.fragment,c),r=!1},d(c){c&&(g(e),g(s)),i[n].d(),L(o,c)}}}function al(l){let e,n;return e=new Bn({props:{error:l[1]}}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.error=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function cl(l){let e,n,t,s,o,r;e=new Ks({}),e.$on("sortfilterupdate",l[10]),e.$on("endreached",l[11]);const a=[pl,fl],i=[];function u(c,f){return c[3].posts.length===c[3].postCount?0:1}return t=u(l),s=i[t]=a[t](l),{c(){F(e.$$.fragment),n=N(),s.c(),o=be()},l(c){R(e.$$.fragment,c),n=O(c),s.l(c),o=be()},m(c,f){M(e,c,f),T(c,n,f),i[t].m(c,f),T(c,o,f),r=!0},p(c,f){let _=t;t=u(c),t===_?i[t].p(c,f):(le(),b(i[_],1,1,()=>{i[_]=null}),re(),s=i[t],s?s.p(c,f):(s=i[t]=a[t](c),s.c()),v(s,1),s.m(o.parentNode,o))},i(c){r||(v(e.$$.fragment,c),v(s),r=!0)},o(c){b(e.$$.fragment,c),b(s),r=!1},d(c){c&&(g(n),g(o)),L(e,c),i[t].d(c)}}}function ul(l){let e,n;return e=new Js({}),e.$on("sortfilterupdate",l[10]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p:K,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function fl(l){let e,n;return e=new Qt({props:{rootMargin:1e3/Number(l[7])+"px"}}),e.$on("intersection",l[11]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&128&&(o.rootMargin=1e3/Number(t[7])+"px"),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function pl(l){let e,n;return e=new jn({}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p:K,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ft(l){let e,n;return e=new Rn({props:{tags:l[5]}}),e.$on("close",l[16]),e.$on("submit",l[17]),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&32&&(o.tags=t[5]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Rt(l){let e,n;return e=new sl({}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function _l(l){let e,n,t,s,o,r,a,i,u,c,f,_,E,C,k;n=new rn({}),s=new En({props:{placeholder:"Search for tags",fetchSuggestions:l[9]}}),s.$on("pick",l[12]),r=new qe({props:{title:"Search with the tags above",$$slots:{default:[ol]},$$scope:{ctx:l}}}),r.$on("click",l[10]),i=new on({props:{tags:[...l[5],...l[4]]}}),i.$on("click",l[13]),i.$on("contextmenu",l[14]),i.$on("createSupertag",l[15]);const $=[al,il],p=[];function h(D,A){return D[1]?0:D[3].requested?1:-1}~(c=h(l))&&(f=p[c]=$[c](l));let w=l[2]&&Ft(l),y=!l[8]&&Rt();return{c(){e=S("section"),F(n.$$.fragment),t=N(),F(s.$$.fragment),o=N(),F(r.$$.fragment),a=N(),F(i.$$.fragment),u=N(),f&&f.c(),_=N(),w&&w.c(),E=N(),y&&y.c(),C=be(),this.h()},l(D){e=I(D,"SECTION",{id:!0,class:!0});var A=V(e);R(n.$$.fragment,A),t=O(A),R(s.$$.fragment,A),o=O(A),R(r.$$.fragment,A),a=O(A),R(i.$$.fragment,A),A.forEach(g),u=O(D),f&&f.l(D),_=O(D),w&&w.l(D),E=O(D),y&&y.l(D),C=be(),this.h()},h(){d(e,"id","search"),d(e,"class","svelte-1muglpt")},m(D,A){T(D,e,A),M(n,e,null),m(e,t),M(s,e,null),m(e,o),M(r,e,null),m(e,a),M(i,e,null),T(D,u,A),~c&&p[c].m(D,A),T(D,_,A),w&&w.m(D,A),T(D,E,A),y&&y.m(D,A),T(D,C,A),k=!0},p(D,[A]){const ee={};A&33554433&&(ee.$$scope={dirty:A,ctx:D}),r.$set(ee);const Z={};A&48&&(Z.tags=[...D[5],...D[4]]),i.$set(Z);let x=c;c=h(D),c===x?~c&&p[c].p(D,A):(f&&(le(),b(p[x],1,1,()=>{p[x]=null}),re()),~c?(f=p[c],f?f.p(D,A):(f=p[c]=$[c](D),f.c()),v(f,1),f.m(_.parentNode,_)):f=null),D[2]?w?(w.p(D,A),A&4&&v(w,1)):(w=Ft(D),w.c(),v(w,1),w.m(E.parentNode,E)):w&&(le(),b(w,1,1,()=>{w=null}),re()),D[8]?y&&(le(),b(y,1,1,()=>{y=null}),re()):y?A&256&&v(y,1):(y=Rt(),y.c(),v(y,1),y.m(C.parentNode,C))},i(D){k||(v(n.$$.fragment,D),v(s.$$.fragment,D),v(r.$$.fragment,D),v(i.$$.fragment,D),v(f),v(w),v(y),k=!0)},o(D){b(n.$$.fragment,D),b(s.$$.fragment,D),b(r.$$.fragment,D),b(i.$$.fragment,D),b(f),b(w),b(y),k=!1},d(D){D&&(g(e),g(u),g(_),g(E),g(C)),L(n),L(s),L(r),L(i),~c&&p[c].d(D),w&&w.d(D),y&&y.d(D)}}}function ml(l,e,n){let t,s,o,r,a,i,u,c,f;de(l,Ge,P=>n(3,t=P)),de(l,ot,P=>n(4,s=P)),de(l,Ae,P=>n(19,o=P)),de(l,Le,P=>n(20,r=P)),de(l,On,P=>n(21,a=P)),de(l,nt,P=>n(5,i=P)),de(l,pt,P=>n(6,u=P)),de(l,zt,P=>n(7,c=P)),de(l,Kt,P=>n(8,f=P));let _=!1,E,C=!1,k=0;const $=async P=>{const J=await Dn(P);return[...u.items.filter(({name:B})=>B.toLowerCase().includes(P.toLowerCase())).map(B=>({label:B.name,count:B.tags.length,type:"supertag"})),...J]},p=()=>new an().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(s),h=async P=>{if(!_){n(1,E=void 0),n(0,_=!0);try{const J=t.pageCount;await P(),Nn(J).catch(()=>{})}catch(J){n(1,E=J),console.warn(J)}finally{n(0,_=!1)}}},w=async()=>{Ge.reset(),k=0,h(async()=>{const[P,J]=await p().getPageAndCount();Ge.addPage(P,J)})},y=async()=>{h(async()=>{const P=await p().getPage();Ge.addPage(P)})},D=P=>{var J,W;if((P.key==="/"||P.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&((J=document.getElementById("searchbar"))==null||J.focus(),P.preventDefault(),P.stopPropagation()),P.ctrlKey&&P.key==="Enter"&&(P.preventDefault(),P.stopPropagation(),w()),P.ctrlKey&&P.key==="m"&&((W=document.getElementById("select-modifier"))==null||W.click()),P.ctrlKey&&P.key==="ArrowDown"){const B=document.getElementsByClassName("post-media");B[k].focus(),k=Math.min(k+1,Math.max(0,B.length-1))}P.ctrlKey&&P.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[k].focus(),k=Math.max(k-1,0))};return et(async()=>{document.addEventListener("keydown",D)}),tt(()=>{document.removeEventListener("keydown",D)}),[_,E,C,t,s,i,u,c,f,$,w,y,async P=>{const J=P.detail;if(J.type==="supertag"){const W=u.items.find(B=>B.name===J.label);if(!W){console.warn("Supertag not present.");return}ot.addOrReplace(W)}else{const W=await Pn(P.detail.label);nt.addOrReplace({name:P.detail.label,modifier:P.detail.modifier,count:P.detail.count,type:(W==null?void 0:W.type)??"tag"})}},P=>"description"in P.detail?ot.removeByName(P.detail.name):nt.removeByName(P.detail.name),P=>{"description"in P.detail||(P.detail.modifier=Sn(P.detail.modifier),nt.addOrReplace(P.detail))},()=>n(2,C=!0),()=>n(2,C=!1),P=>pt.add(P.detail)]}class Bl extends pe{constructor(e){super(),_e(this,e,ml,_l,fe,{})}}export{Bl as component};
