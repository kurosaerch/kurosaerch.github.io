import{s as fe,p as ke,E as Fe,F as je,f as C,a as D,g as E,h as M,y as ue,c as P,d,j as m,r as Gt,i as A,u as _,G as Je,H as De,I as Ye,J as ct,l as oe,m as ie,v as Q,K as we,L as sn,o as rt,M as ot,w as ln,A as rn,B as on,C as an,n as Le,e as ye,k as Be,D as ge,N as nt,z as at,O as cn,P as Ut,Q as _t,x as un}from"../chunks/scheduler.1fe7733a.js";import{S as pe,i as _e,f as Re,b as O,d as F,m as R,a as v,t as w,e as V,g as ae,c as ce,h as fn}from"../chunks/index.f7414ec0.js";import{g as pn}from"../chunks/globals.7f7f1b26.js";import{e as Pe}from"../chunks/each.e59479a4.js";import{D as qt,a as Ht,r as Kt}from"../chunks/result-columns-store.3cc83729.js";import{T as Ge}from"../chunks/TextButton.82eafe13.js";import{D as _n}from"../chunks/DetailedTag.f6531b9e.js";import{K as dn,A as gn}from"../chunks/ActiveTagList.1ab04209.js";import{b as Wt}from"../chunks/paths.8be2efc7.js";import{f as st}from"../chunks/format-tag.7e313273.js";import{r as Qe,a as ut}from"../chunks/active-supertags-store.6695960a.js";import{I as Jt,R as mn}from"../chunks/ModifierSelect.9e9c1560.js";import{h as dt,u as hn}from"../chunks/await_block.2d81fefc.js";import{L as pt}from"../chunks/LoadingAnimation.e457af0b.js";import{R as $n,S as vn,a as bn,K as kn,E as Qt,b as wn,g as gt,P as yn,C as Cn,c as En,d as Yt,i as Sn,e as Zt,D as In,G as Dn,V as Pn,f as mt,I as Nn}from"../chunks/Details.b87d4a8e.js";import{a as Tn}from"../chunks/always-loop-store.aab1c9ab.js";import{f as Me,s as ze,S as An}from"../chunks/search-builder.4c1984f9.js";import{S as ht}from"../chunks/Select.e916c42e.js";import{R as On}from"../chunks/RotatingTextSelect.37bd60a4.js";import{S as Fn}from"../chunks/Searchbar.55d61045.js";import{S as Rn}from"../chunks/ScrollUpButton.3befe2fc.js";import{g as Vn,a as Mn}from"../chunks/tags.49324235.js";import{l as Ln}from"../chunks/analytics.b280da65.js";import{n as Bn,s as $t}from"../chunks/supertags-store.7ba1df06.js";import{a as it}from"../chunks/active-tags-store.cd90ee28.js";import{b as jn}from"../chunks/blocked-content-store.2ba3de95.js";import{c as Xt}from"../chunks/cookies-accepted-store.95bbfb0b.js";function vt(l,e,n){const t=l.slice();return t[11]=e[n],t}function bt(l){let e,n;return e=new _n({props:{tag:l[11]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&8&&(o.tag=t[11]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function zn(l){let e;return{c(){e=oe("Create supertag")},l(n){e=ie(n,"Create supertag")},m(n,t){A(n,e,t)},d(n){n&&d(e)}}}function Gn(l){let e,n,t="Create Supertag",s,o,r,a,i,c="Name",u,h,f,y,$,b="Description",N,p,k,g,T,G="Tags",te,W,X,H,I,U,S,x,K=Pe(l[3]),L=[];for(let B=0;B<K.length;B+=1)L[B]=bt(vt(l,K,B));const le=B=>w(L[B],1,1,()=>{L[B]=null});return I=new Ge({props:{title:l[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!l[4],$$slots:{default:[zn]},$$scope:{ctx:l}}}),I.$on("click",l[9]),{c(){e=C("section"),n=C("h3"),n.textContent=t,s=D(),o=C("button"),r=D(),a=C("div"),i=C("label"),i.textContent=c,u=D(),h=C("input"),f=D(),y=C("div"),$=C("label"),$.textContent=b,N=D(),p=C("input"),k=D(),g=C("div"),T=C("span"),T.textContent=G,te=D(),W=C("ol");for(let B=0;B<L.length;B+=1)L[B].c();X=D(),H=C("div"),O(I.$$.fragment),this.h()},l(B){e=E(B,"SECTION",{class:!0});var j=M(e);n=E(j,"H3",{"data-svelte-h":!0}),ue(n)!=="svelte-ho1cwx"&&(n.textContent=t),s=P(j),o=E(j,"BUTTON",{class:!0}),M(o).forEach(d),r=P(j),a=E(j,"DIV",{class:!0});var ne=M(a);i=E(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(i)!=="svelte-10k8a68"&&(i.textContent=c),u=P(ne),h=E(ne,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),ne.forEach(d),f=P(j),y=E(j,"DIV",{class:!0});var Y=M(y);$=E(Y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue($)!=="svelte-14n9kp6"&&($.textContent=b),N=P(Y),p=E(Y,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),Y.forEach(d),k=P(j),g=E(j,"DIV",{class:!0});var me=M(g);T=E(me,"SPAN",{class:!0,"data-svelte-h":!0}),ue(T)!=="svelte-7hjyox"&&(T.textContent=G),te=P(me),W=E(me,"OL",{class:!0});var he=M(W);for(let Se=0;Se<L.length;Se+=1)L[Se].l(he);he.forEach(d),me.forEach(d),X=P(j),H=E(j,"DIV",{class:!0});var Oe=M(H);F(I.$$.fragment,Oe),Oe.forEach(d),j.forEach(d),this.h()},h(){m(o,"class",Gt("codicon codicon-close")+" svelte-1x6vc81"),m(i,"for","supertag-name"),m(i,"class","svelte-1x6vc81"),m(h,"type","text"),m(h,"placeholder","Descriptive name"),m(h,"id","supertag-name"),m(h,"class","svelte-1x6vc81"),m(a,"class","svelte-1x6vc81"),m($,"for","supertag-description"),m($,"class","svelte-1x6vc81"),m(p,"type","text"),m(p,"placeholder","Short description"),m(p,"id","supertag-description"),m(p,"class","svelte-1x6vc81"),m(y,"class","svelte-1x6vc81"),m(T,"class","svelte-1x6vc81"),m(W,"class","svelte-1x6vc81"),m(g,"class","svelte-1x6vc81"),m(H,"class","last svelte-1x6vc81"),m(e,"class","svelte-1x6vc81")},m(B,j){A(B,e,j),_(e,n),_(e,s),_(e,o),_(e,r),_(e,a),_(a,i),_(a,u),_(a,h),Je(h,l[0]),_(e,f),_(e,y),_(y,$),_(y,N),_(y,p),Je(p,l[2]),_(e,k),_(e,g),_(g,T),_(g,te),_(g,W);for(let ne=0;ne<L.length;ne+=1)L[ne]&&L[ne].m(W,null);_(e,X),_(e,H),R(I,H,null),U=!0,S||(x=[De(o,"click",l[6]),De(h,"input",l[7]),De(p,"input",l[8])],S=!0)},p(B,j){if(j&1&&h.value!==B[0]&&Je(h,B[0]),j&4&&p.value!==B[2]&&Je(p,B[2]),j&8){K=Pe(B[3]);let Y;for(Y=0;Y<K.length;Y+=1){const me=vt(B,K,Y);L[Y]?(L[Y].p(me,j),v(L[Y],1)):(L[Y]=bt(me),L[Y].c(),v(L[Y],1),L[Y].m(W,null))}for(ae(),Y=K.length;Y<L.length;Y+=1)le(Y);ce()}const ne={};j&16&&(ne.title=B[4]?"Click to create supertag":"Enter a valid name to continue"),j&16&&(ne.disabled=!B[4]),j&16384&&(ne.$$scope={dirty:j,ctx:B}),I.$set(ne)},i(B){if(!U){for(let j=0;j<K.length;j+=1)v(L[j]);v(I.$$.fragment,B),U=!0}},o(B){L=L.filter(Boolean);for(let j=0;j<L.length;j+=1)w(L[j]);w(I.$$.fragment,B),U=!1},d(B){B&&d(e),Ye(L,B),V(I),S=!1,ct(x)}}}function Un(l){let e,n,t;function s(r){l[10](r)}let o={$$slots:{default:[Gn]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.dialog=l[1]),e=new qt({props:o}),ke.push(()=>Re(e,"dialog",s)),e.$on("close",l[6]),{c(){O(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){R(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],Fe(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}function qn(l,e,n){let t,{dialog:s}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=je(),c=()=>s.close();function u(){o=this.value,n(0,o)}function h(){r=this.value,n(2,r)}const f=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:$,name:b})=>({modifier:$,name:b}))}),c()};function y($){s=$,n(1,s)}return l.$$set=$=>{"dialog"in $&&n(1,s=$.dialog),"name"in $&&n(0,o=$.name),"description"in $&&n(2,r=$.description),"tags"in $&&n(3,a=$.tags)},l.$$.update=()=>{l.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,s,r,a,t,i,c,u,h,f,y]}class Hn extends pe{constructor(e){super(),_e(this,e,qn,Un,fe,{dialog:1,name:0,description:2,tags:3})}}function Kn(l){let e,n,t,s,o,r,a,i,c,u;return{c(){e=C("div"),n=C("div"),t=C("i"),s=D(),o=C("div"),r=C("h3"),a=oe(l[0]),i=D(),c=C("span"),u=oe(l[2]),this.h()},l(h){e=E(h,"DIV",{class:!0});var f=M(e);n=E(f,"DIV",{class:!0});var y=M(n);t=E(y,"I",{class:!0}),M(t).forEach(d),y.forEach(d),s=P(f),o=E(f,"DIV",{});var $=M(o);r=E($,"H3",{class:!0});var b=M(r);a=ie(b,l[0]),b.forEach(d),i=P($),c=E($,"SPAN",{});var N=M(c);u=ie(N,l[2]),N.forEach(d),$.forEach(d),f.forEach(d),this.h()},h(){m(t,"class",Gt(l[1])+" svelte-1yohziu"),m(n,"class","icon svelte-1yohziu"),m(r,"class","svelte-1yohziu"),m(e,"class","error svelte-1yohziu")},m(h,f){A(h,e,f),_(e,n),_(n,t),_(e,s),_(e,o),_(o,r),_(r,a),_(o,i),_(o,c),_(c,u)},p:Q,i:Q,o:Q,d(h){h&&d(e)}}}function Wn(l,e,n){let{error:t}=e,s=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return l.$$set=a=>{"error"in a&&n(3,t=a.error)},[s,o,r,t]}class Jn extends pe{constructor(e){super(),_e(this,e,Wn,Kn,fe,{error:3})}}function Qn(l){let e,n,t,s,o="You have seen everything there is to see...";return{c(){e=C("img"),t=D(),s=C("p"),s.textContent=o,this.h()},l(r){e=E(r,"IMG",{src:!0,alt:!0,class:!0}),t=P(r),s=E(r,"P",{"data-svelte-h":!0}),ue(s)!=="svelte-1i75mtf"&&(s.textContent=o),this.h()},h(){we(e.src,n=Wt+"/assets/shironeko-x.png")||m(e,"src",n),m(e,"alt","No more results to load"),m(e,"class","svelte-1pkma0d")},m(r,a){A(r,e,a),A(r,t,a),A(r,s,a)},p:Q,i:Q,o:Q,d(r){r&&(d(e),d(t),d(s))}}}class Yn extends pe{constructor(e){super(),_e(this,e,null,Qn,fe,{})}}const lt=l=>`post_${l}`;function kt(l){let e;const n=l[4].default,t=ln(n,l,l[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o&8)&&rn(t,n,s,s[3],e?an(n,s[3],o,null):on(s[3]),null)},i(s){e||(v(t,s),e=!0)},o(s){w(t,s),e=!1},d(s){t&&t.d(s)}}}function Zn(l){let e,n,t,s,o=l[1]&&kt(l);return{c(){e=C("div"),o&&o.c(),this.h()},l(r){e=E(r,"DIV",{role:!0,tabindex:!0,class:!0});var a=M(e);o&&o.l(a),a.forEach(d),this.h()},h(){m(e,"role","none"),m(e,"tabindex","-1"),m(e,"class","svelte-6sy8qz")},m(r,a){A(r,e,a),o&&o.m(e,null),l[5](e),n=!0,t||(s=[De(e,"click",sn(Xn)),De(e,"keydown",l[2])],t=!0)},p(r,[a]){r[1]?o?(o.p(r,a),a&2&&v(o,1)):(o=kt(r),o.c(),v(o,1),o.m(e,null)):o&&(ae(),w(o,1,1,()=>{o=null}),ce())},i(r){n||(v(o),n=!0)},o(r){w(o),n=!1},d(r){r&&d(e),o&&o.d(),l[5](null),t=!1,ct(s)}}}const Xn=()=>{};function xn(l,e,n){let{$$slots:t={},$$scope:s}=e;const o=je(),r=()=>o("close"),a=f=>{f.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let c,u=!1;rt(async()=>{c.focus(),document.addEventListener("fullscreenchange",i);try{await c.requestFullscreen()}catch{}n(1,u=!0)}),ot(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function h(f){ke[f?"unshift":"push"](()=>{c=f,n(0,c)})}return l.$$set=f=>{"$$scope"in f&&n(3,s=f.$$scope)},[c,u,a,s,t,h]}class es extends pe{constructor(e){super(),_e(this,e,xn,Zn,fe,{})}}function ts(l){let e,n;return{c(){e=C("div"),this.h()},l(t){e=E(t,"DIV",{style:!0}),M(e).forEach(d),this.h()},h(){m(e,"style",n=l[0]?`position:absolute;top:${l[0]};`:void 0)},m(t,s){A(t,e,s),l[3](e)},p(t,[s]){s&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&m(e,"style",n)},i:Q,o:Q,d(t){t&&d(e),l[3](null)}}}function ns(l,e,n){let{rootMargin:t}=e,{absoluteTop:s}=e;const o=je(),r=new IntersectionObserver(c=>{c[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(c){ke[c?"unshift":"push"](()=>{a=c,n(1,a)})}return l.$$set=c=>{"rootMargin"in c&&n(2,t=c.rootMargin),"absoluteTop"in c&&n(0,s=c.absoluteTop)},l.$$.update=()=>{l.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[s,a,t,i]}class xt extends pe{constructor(e){super(),_e(this,e,ns,ts,fe,{rootMargin:2,absoluteTop:0})}}function wt(l,e,n){const t=l.slice();return t[5]=e[n],t}function yt(l,e,n){const t=l.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function Ct(l){let e,n="•",t,s,o;return s=new Qt({props:{source:l[0].source}}),{c(){e=C("span"),e.textContent=n,t=D(),O(s.$$.fragment)},l(r){e=E(r,"SPAN",{"data-svelte-h":!0}),ue(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=P(r),F(s.$$.fragment,r)},m(r,a){A(r,e,a),A(r,t,a),R(s,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),s.$set(i)},i(r){o||(v(s.$$.fragment,r),o=!0)},o(r){w(s.$$.fragment,r),o=!1},d(r){r&&(d(e),d(t)),V(s,r)}}}function Et(l){let e,n=l[8]+"",t,s,o,r;return o=new yn({props:{tags:l[9]}}),{c(){e=C("h3"),t=oe(n),s=D(),O(o.$$.fragment),this.h()},l(a){e=E(a,"H3",{class:!0});var i=M(e);t=ie(i,n),i.forEach(d),s=P(a),F(o.$$.fragment,a),this.h()},h(){m(e,"class","svelte-1kekodt")},m(a,i){A(a,e,i),_(e,t),A(a,s,i),R(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[8]+"")&&Le(t,n);const c={};i&2&&(c.tags=a[9]),o.$set(c)},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){w(o.$$.fragment,a),r=!1},d(a){a&&(d(e),d(s)),V(o,a)}}}function ss(l){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function ls(l){let e,n,t,s;const o=[os,rs],r=[];function a(i,c){return i[4].length>0?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=ye()},l(i){n.l(i),t=ye()},m(i,c){r[e].m(i,c),A(i,t,c),s=!0},p(i,c){let u=e;e=a(i),e===u?r[e].p(i,c):(ae(),w(r[u],1,1,()=>{r[u]=null}),ce(),n=r[e],n?n.p(i,c):(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){s||(v(n),s=!0)},o(i){w(n),s=!1},d(i){i&&d(t),r[e].d(i)}}}function rs(l){let e,n="Comments for this post are not available";return{c(){e=C("span"),e.textContent=n,this.h()},l(t){e=E(t,"SPAN",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-4t2lxe"&&(e.textContent=n),this.h()},h(){m(e,"class","no-comments svelte-1kekodt")},m(t,s){A(t,e,s)},p:Q,i:Q,o:Q,d(t){t&&d(e)}}}function os(l){let e,n,t=Pe(l[4]),s=[];for(let r=0;r<t.length;r+=1)s[r]=St(wt(l,t,r));const o=r=>w(s[r],1,1,()=>{s[r]=null});return{c(){e=C("ul");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=E(r,"UL",{class:!0});var a=M(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(d),this.h()},h(){m(e,"class","comments svelte-1kekodt")},m(r,a){A(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&1){t=Pe(r[4]);let i;for(i=0;i<t.length;i+=1){const c=wt(r,t,i);s[i]?(s[i].p(c,a),v(s[i],1)):(s[i]=St(c),s[i].c(),v(s[i],1),s[i].m(e,null))}for(ae(),i=t.length;i<s.length;i+=1)o(i);ce()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(r){r&&d(e),Ye(s,r)}}}function St(l){let e,n;return e=new Cn({props:{comment:l[5]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&1&&(o.comment=t[5]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function is(l){let e,n;return e=new pt({}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p:Q,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function as(l){let e,n,t,s,o,r,a,i,c=l[0].id+"",u,h,f,y,$,b,N="•",p,k,g=l[0].type.toUpperCase()+"",T,G,te,W="•",X,H,I,U,S="•",x,K,L,le,B,j,ne,Y="•",me,he,Oe,Se,Ze="•",Xe,Ne,xe,Ue,Ve,qe,z,Z,Ae="Comments",Te,Ie,$e;y=new $n({props:{value:l[0].rating}}),H=new vn({props:{value:l[0].score}}),K=new bn({props:{value:l[0].change}}),B=new kn({props:{url:"/post?id="+l[0].id+"&src="+encodeURIComponent(l[3])}}),he=new Qt({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id}}),Ne=new wn({props:{url:l[3]}});let ee=l[0].source&&Ct(l),Ce=Pe(Object.entries(l[1])),se=[];for(let J=0;J<Ce.length;J+=1)se[J]=Et(yt(l,Ce,J));const nn=J=>w(se[J],1,1,()=>{se[J]=null});let ve={ctx:l,current:null,token:null,hasCatch:!1,pending:is,then:ls,catch:ss,value:4,blocks:[,,,]};return dt(Ie=gt(l[0].id),ve),{c(){e=C("div"),n=C("img"),s=D(),o=C("h1"),r=oe("Post "),a=C("b"),i=oe("#"),u=oe(c),h=D(),f=C("div"),O(y.$$.fragment),$=D(),b=C("span"),b.textContent=N,p=D(),k=C("span"),T=oe(g),G=D(),te=C("span"),te.textContent=W,X=D(),O(H.$$.fragment),I=D(),U=C("span"),U.textContent=S,x=D(),O(K.$$.fragment),L=D(),le=C("div"),O(B.$$.fragment),j=D(),ne=C("span"),ne.textContent=Y,me=D(),O(he.$$.fragment),Oe=D(),Se=C("span"),Se.textContent=Ze,Xe=D(),O(Ne.$$.fragment),xe=D(),ee&&ee.c(),Ue=D(),Ve=C("div");for(let J=0;J<se.length;J+=1)se[J].c();qe=D(),z=C("div"),Z=C("h3"),Z.textContent=Ae,Te=D(),ve.block.c(),this.h()},l(J){e=E(J,"DIV",{class:!0});var q=M(e);n=E(q,"IMG",{class:!0,src:!0,alt:!0}),s=P(q),o=E(q,"H1",{class:!0});var Ee=M(o);r=ie(Ee,"Post "),a=E(Ee,"B",{});var He=M(a);i=ie(He,"#"),u=ie(He,c),He.forEach(d),Ee.forEach(d),h=P(q),f=E(q,"DIV",{class:!0});var de=M(f);F(y.$$.fragment,de),$=P(de),b=E(de,"SPAN",{"data-svelte-h":!0}),ue(b)!=="svelte-7hh8jk"&&(b.textContent=N),p=P(de),k=E(de,"SPAN",{});var et=M(k);T=ie(et,g),et.forEach(d),G=P(de),te=E(de,"SPAN",{"data-svelte-h":!0}),ue(te)!=="svelte-7hh8jk"&&(te.textContent=W),X=P(de),F(H.$$.fragment,de),I=P(de),U=E(de,"SPAN",{"data-svelte-h":!0}),ue(U)!=="svelte-7hh8jk"&&(U.textContent=S),x=P(de),F(K.$$.fragment,de),de.forEach(d),L=P(q),le=E(q,"DIV",{class:!0});var be=M(le);F(B.$$.fragment,be),j=P(be),ne=E(be,"SPAN",{"data-svelte-h":!0}),ue(ne)!=="svelte-7hh8jk"&&(ne.textContent=Y),me=P(be),F(he.$$.fragment,be),Oe=P(be),Se=E(be,"SPAN",{"data-svelte-h":!0}),ue(Se)!=="svelte-7hh8jk"&&(Se.textContent=Ze),Xe=P(be),F(Ne.$$.fragment,be),xe=P(be),ee&&ee.l(be),be.forEach(d),Ue=P(q),Ve=E(q,"DIV",{});var tt=M(Ve);for(let Ke=0;Ke<se.length;Ke+=1)se[Ke].l(tt);tt.forEach(d),qe=P(q),z=E(q,"DIV",{});var re=M(z);Z=E(re,"H3",{class:!0,"data-svelte-h":!0}),ue(Z)!=="svelte-kc6sae"&&(Z.textContent=Ae),Te=P(re),ve.block.l(re),re.forEach(d),q.forEach(d),this.h()},h(){m(n,"class","preview svelte-1kekodt"),we(n.src,t=l[2])||m(n,"src",t),m(n,"alt","preview"),m(o,"class","svelte-1kekodt"),m(f,"class","flex-row svelte-1kekodt"),m(le,"class","flex-row svelte-1kekodt"),m(Z,"class","svelte-1kekodt"),m(e,"class","details svelte-1kekodt")},m(J,q){A(J,e,q),_(e,n),_(e,s),_(e,o),_(o,r),_(o,a),_(a,i),_(a,u),_(e,h),_(e,f),R(y,f,null),_(f,$),_(f,b),_(f,p),_(f,k),_(k,T),_(f,G),_(f,te),_(f,X),R(H,f,null),_(f,I),_(f,U),_(f,x),R(K,f,null),_(e,L),_(e,le),R(B,le,null),_(le,j),_(le,ne),_(le,me),R(he,le,null),_(le,Oe),_(le,Se),_(le,Xe),R(Ne,le,null),_(le,xe),ee&&ee.m(le,null),_(e,Ue),_(e,Ve);for(let Ee=0;Ee<se.length;Ee+=1)se[Ee]&&se[Ee].m(Ve,null);_(e,qe),_(e,z),_(z,Z),_(z,Te),ve.block.m(z,ve.anchor=null),ve.mount=()=>z,ve.anchor=null,$e=!0},p(J,[q]){l=J,(!$e||q&4&&!we(n.src,t=l[2]))&&m(n,"src",t),(!$e||q&1)&&c!==(c=l[0].id+"")&&Le(u,c);const Ee={};q&1&&(Ee.value=l[0].rating),y.$set(Ee),(!$e||q&1)&&g!==(g=l[0].type.toUpperCase()+"")&&Le(T,g);const He={};q&1&&(He.value=l[0].score),H.$set(He);const de={};q&1&&(de.value=l[0].change),K.$set(de);const et={};q&9&&(et.url="/post?id="+l[0].id+"&src="+encodeURIComponent(l[3])),B.$set(et);const be={};q&1&&(be.source="https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id),he.$set(be);const tt={};if(q&8&&(tt.url=l[3]),Ne.$set(tt),l[0].source?ee?(ee.p(l,q),q&1&&v(ee,1)):(ee=Ct(l),ee.c(),v(ee,1),ee.m(le,null)):ee&&(ae(),w(ee,1,1,()=>{ee=null}),ce()),q&2){Ce=Pe(Object.entries(l[1]));let re;for(re=0;re<Ce.length;re+=1){const Ke=yt(l,Ce,re);se[re]?(se[re].p(Ke,q),v(se[re],1)):(se[re]=Et(Ke),se[re].c(),v(se[re],1),se[re].m(Ve,null))}for(ae(),re=Ce.length;re<se.length;re+=1)nn(re);ce()}ve.ctx=l,q&1&&Ie!==(Ie=gt(l[0].id))&&dt(Ie,ve)||hn(ve,l,q)},i(J){if(!$e){v(y.$$.fragment,J),v(H.$$.fragment,J),v(K.$$.fragment,J),v(B.$$.fragment,J),v(he.$$.fragment,J),v(Ne.$$.fragment,J),v(ee);for(let q=0;q<Ce.length;q+=1)v(se[q]);v(ve.block),$e=!0}},o(J){w(y.$$.fragment,J),w(H.$$.fragment,J),w(K.$$.fragment,J),w(B.$$.fragment,J),w(he.$$.fragment,J),w(Ne.$$.fragment,J),w(ee),se=se.filter(Boolean);for(let q=0;q<se.length;q+=1)w(se[q]);for(let q=0;q<3;q+=1){const Ee=ve.blocks[q];w(Ee)}$e=!1},d(J){J&&d(e),V(y),V(H),V(K),V(B),V(he),V(Ne),ee&&ee.d(),Ye(se,J),ve.block.d(),ve.token=null,ve=null}}}function cs(l,e,n){let t,s,o,{post:r}=e;return l.$$set=a=>{"post"in a&&n(0,r=a.post)},l.$$.update=()=>{l.$$.dirty&1&&n(3,t=r.file_url),l.$$.dirty&1&&n(2,s=r.sample_url),l.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,s,t]}class us extends pe{constructor(e){super(),_e(this,e,cs,as,fe,{post:0})}}const We=new IntersectionObserver(l=>{for(const e of l)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function fs(l){const e=l.slice(),n=En(e[0].file_url,e[0].sample_url,e[0].preview_url);e[5]=n;const t=e[5].animated;return e[6]=t,e}function ps(l){const e=l.slice(),n=Yt(e[0].file_url,e[0].sample_url,e[0].preview_url);e[5]=n;const t=e[5].animated;e[6]=t;const s=e[5].static;return e[7]=s,e}function _s(l){const e=l.slice(),n=e[0].sample_url;return e[4]=n,e}function ds(l){let e,n,t,s;return{c(){e=C("img"),this.h()},l(o){e=E(o,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){we(e.src,n=l[6])||m(e,"src",n),m(e,"alt",t="[GIF] post #"+l[0].id),m(e,"title",s="[GIF] post #"+l[0].id),m(e,"class","svelte-1cjgn2p")},m(o,r){A(o,e,r)},p(o,r){r&1&&!we(e.src,n=o[6])&&m(e,"src",n),r&1&&t!==(t="[GIF] post #"+o[0].id)&&m(e,"alt",t),r&1&&s!==(s="[GIF] post #"+o[0].id)&&m(e,"title",s)},d(o){o&&d(e)}}}function It(l){let e,n,t,s;return{c(){e=C("video"),this.h()},l(o){e=E(o,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),M(e).forEach(d),this.h()},h(){we(e.src,n=l[6])||m(e,"src",n),m(e,"poster",t=l[7]),e.loop=!0,m(e,"title",s="[VIDEO] post #"+l[0].id),e.controls=!0,m(e,"preload","metadata"),e.autoplay=!0,m(e,"class","svelte-1cjgn2p")},m(o,r){A(o,e,r),l[2](e)},p(o,r){r&1&&!we(e.src,n=o[6])&&m(e,"src",n),r&1&&t!==(t=o[7])&&m(e,"poster",t),r&1&&s!==(s="[VIDEO] post #"+o[0].id)&&m(e,"title",s)},d(o){o&&d(e),l[2](null)}}}function Dt(l){let e,n,t,s;return{c(){e=C("img"),this.h()},l(o){e=E(o,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){we(e.src,n=l[4])||m(e,"src",n),m(e,"alt",t="[IMAGE] post #"+l[0].id),m(e,"title",s="[IMAGE] post #"+l[0].id),m(e,"class","svelte-1cjgn2p")},m(o,r){A(o,e,r)},p(o,r){r&1&&!we(e.src,n=o[4])&&m(e,"src",n),r&1&&t!==(t="[IMAGE] post #"+o[0].id)&&m(e,"alt",t),r&1&&s!==(s="[IMAGE] post #"+o[0].id)&&m(e,"title",s)},d(o){o&&d(e)}}}function gs(l){let e;function n(r,a){return r[0].type==="image"?Dt:r[0].type==="video"?It:ds}function t(r,a){return a===Dt?_s(r):a===It?ps(r):fs(r)}let s=n(l),o=s(t(l,s));return{c(){o.c(),e=ye()},l(r){o.l(r),e=ye()},m(r,a){o.m(r,a),A(r,e,a)},p(r,[a]){s===(s=n(r))&&o?o.p(t(r,s),a):(o.d(1),o=s(t(r,s)),o&&(o.c(),o.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&d(e),o.d(r)}}}function ms(l,e,n){let{post:t}=e,s;const o=a=>{t.type==="video"&&s&&(a.key==="ArrowLeft"&&(a.preventDefault(),a.stopPropagation(),n(1,s.currentTime=Math.max(0,s.currentTime-5),s)),a.key==="ArrowRight"&&(a.preventDefault(),a.stopPropagation(),n(1,s.currentTime=Math.min(s.duration,s.currentTime+5),s)))};rt(()=>{s&&(We==null||We.observe(s)),document.addEventListener("keydown",o)}),ot(()=>{s&&(We==null||We.unobserve(s)),document.removeEventListener("keydown",o)});function r(a){ke[a?"unshift":"push"](()=>{s=a,n(1,s)})}return l.$$set=a=>{"post"in a&&n(0,t=a.post)},[t,s,r]}class hs extends pe{constructor(e){super(),_e(this,e,ms,gs,fe,{post:0})}}function $s(l){let e,n,t;return{c(){e=C("img"),this.h()},l(s){e=E(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){we(e.src,n=l[2])||m(e,"src",n),m(e,"alt",t="post #"+l[0].id),m(e,"class","svelte-itxz72"),Be(e,"top",l[1])},m(s,o){A(s,e,o)},p(s,[o]){o&4&&!we(e.src,n=s[2])&&m(e,"src",n),o&1&&t!==(t="post #"+s[0].id)&&m(e,"alt",t),o&2&&Be(e,"top",s[1])},i:Q,o:Q,d(s){s&&d(e)}}}function vs(l,e,n){let t,{post:s}=e,{offset:o}=e;return l.$$set=r=>{"post"in r&&n(0,s=r.post),"offset"in r&&n(1,o=r.offset)},l.$$.update=()=>{l.$$.dirty&1&&n(2,t=Sn(s.sample_url)?s.preview_url:s.sample_url)},[s,o,t]}class en extends pe{constructor(e){super(),_e(this,e,vs,$s,fe,{post:0,offset:1})}}function Pt(l,e,n){const t=l.slice();return t[16]=e[n],t[18]=n,t}function Nt(l){let e,n;return e=new en({props:{post:l[3],offset:l[6]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&8&&(o.post=t[3]),s&64&&(o.offset=t[6]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Tt(l){let e,n;return e=new en({props:{post:l[4],offset:l[7]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&16&&(o.post=t[4]),s&128&&(o.offset=t[7]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function At(l){let e,n=`${l[18]*100}vh`;return{c(){e=C("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),M(e).forEach(d),this.h()},h(){m(e,"class","pseudo snap-item svelte-3khu3"),Be(e,"top",n)},m(t,s){A(t,e,s)},p:Q,d(t){t&&d(e)}}}function bs(l){let e,n,t,s,o,r,a,i,c,u,h,f,y,$=l[3]&&Nt(l);s=new hs({props:{post:l[2]}}),r=new us({props:{post:l[2]}});let b=l[4]&&Tt(l),N=Pe({length:l[8].posts.length}),p=[];for(let k=0;k<N.length;k+=1)p[k]=At(Pt(l,N,k));return u=new xt({props:{absoluteTop:l[8].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),u.$on("intersection",l[13]),{c(){e=C("div"),$&&$.c(),n=D(),t=C("div"),O(s.$$.fragment),o=D(),O(r.$$.fragment),a=D(),b&&b.c(),i=D();for(let k=0;k<p.length;k+=1)p[k].c();c=D(),O(u.$$.fragment),this.h()},l(k){e=E(k,"DIV",{class:!0});var g=M(e);$&&$.l(g),n=P(g),t=E(g,"DIV",{class:!0});var T=M(t);F(s.$$.fragment,T),o=P(T),F(r.$$.fragment,T),T.forEach(d),a=P(g),b&&b.l(g),i=P(g);for(let G=0;G<p.length;G+=1)p[G].l(g);c=P(g),F(u.$$.fragment,g),g.forEach(d),this.h()},h(){m(t,"class","screen snap-container horizontal current svelte-3khu3"),Be(t,"top",l[5]),m(e,"class","root screen snap-container svelte-3khu3")},m(k,g){A(k,e,g),$&&$.m(e,null),_(e,n),_(e,t),R(s,t,null),_(t,o),R(r,t,null),l[12](t),_(e,a),b&&b.m(e,null),_(e,i);for(let T=0;T<p.length;T+=1)p[T]&&p[T].m(e,null);_(e,c),R(u,e,null),l[14](e),h=!0,f||(y=De(e,"scroll",l[10]),f=!0)},p(k,[g]){k[3]?$?($.p(k,g),g&8&&v($,1)):($=Nt(k),$.c(),v($,1),$.m(e,n)):$&&(ae(),w($,1,1,()=>{$=null}),ce());const T={};g&4&&(T.post=k[2]),s.$set(T);const G={};if(g&4&&(G.post=k[2]),r.$set(G),g&32&&Be(t,"top",k[5]),k[4]?b?(b.p(k,g),g&16&&v(b,1)):(b=Tt(k),b.c(),v(b,1),b.m(e,i)):b&&(ae(),w(b,1,1,()=>{b=null}),ce()),g&256){N=Pe({length:k[8].posts.length});let W;for(W=0;W<N.length;W+=1){const X=Pt(k,N,W);p[W]?p[W].p(X,g):(p[W]=At(X),p[W].c(),p[W].m(e,c))}for(;W<p.length;W+=1)p[W].d(1);p.length=N.length}const te={};g&256&&(te.absoluteTop=k[8].posts.length*100+"vh"),u.$set(te)},i(k){h||(v($),v(s.$$.fragment,k),v(r.$$.fragment,k),v(b),v(u.$$.fragment,k),h=!0)},o(k){w($),w(s.$$.fragment,k),w(r.$$.fragment,k),w(b),w(u.$$.fragment,k),h=!1},d(k){k&&d(e),$&&$.d(),V(s),V(r),l[12](null),b&&b.d(),Ye(p,k),V(u),l[14](null),f=!1,y()}}}function ks(l,e,n){let t;ge(l,Qe,g=>n(8,t=g));let{index:s}=e,o,r,a=t.posts[s],i=s>0?t.posts[s-1]:void 0,c=s<t.posts.length-1?t.posts[s+1]:void 0,u=`${s*100}vh`,h=`${(s-1)*100}vh`,f=`${(s+1)*100}vh`;const y=je(),$=g=>{requestAnimationFrame(()=>{const T=g.target,G=T.getBoundingClientRect().height,te=T.scrollTop/G,W=Math.round(te);W!=s&&(n(11,s=W),n(2,a=t.posts[s]),n(3,i=s>0?t.posts[s-1]:void 0),n(4,c=s<t.posts.length-1?t.posts[s+1]:void 0),n(5,u=`${s*100}vh`),n(6,h=`${(s-1)*100}vh`),n(7,f=`${(s+1)*100}vh`),r&&n(1,r.scrollLeft=0,r))})},b=g=>{g.key==="d"&&(g.preventDefault(),g.stopPropagation(),r.scrollLeft===0?r.scrollBy({left:o.clientWidth,top:0,behavior:"smooth"}):r.scrollBy({left:-o.clientWidth,top:0,behavior:"smooth"})),g.key==="ArrowUp"&&(g.preventDefault(),g.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(s-1),behavior:"smooth"})),g.key==="ArrowDown"&&(g.preventDefault(),g.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(s+1),behavior:"smooth"}))};rt(()=>{r&&(r.scrollIntoView(!0),n(1,r.scrollLeft=0,r)),document.addEventListener("keydown",b)}),ot(()=>{document.removeEventListener("keydown",b)});function N(g){ke[g?"unshift":"push"](()=>{r=g,n(1,r)})}const p=()=>{y("endreached")};function k(g){ke[g?"unshift":"push"](()=>{o=g,n(0,o)})}return l.$$set=g=>{"index"in g&&n(11,s=g.index)},[o,r,a,i,c,u,h,f,t,y,$,s,N,p,k]}class ws extends pe{constructor(e){super(),_e(this,e,ks,bs,fe,{index:11})}}function ys(l){let e;return{c(){e=C("i"),this.h()},l(n){e=E(n,"I",{class:!0}),M(e).forEach(d),this.h()},h(){m(e,"class","codicon codicon-close")},m(n,t){A(n,e,t)},p:Q,d(n){n&&d(e)}}}function Cs(l){let e,n,t,s,o;function r(i){l[2](i)}let a={};return l[0]!==void 0&&(a.index=l[0]),e=new ws({props:a}),ke.push(()=>Re(e,"index",r)),e.$on("endreached",l[3]),s=new Jt({props:{class:"button-close",$$slots:{default:[ys]},$$scope:{ctx:l}}}),s.$on("click",l[1]),{c(){O(e.$$.fragment),t=D(),O(s.$$.fragment)},l(i){F(e.$$.fragment,i),t=P(i),F(s.$$.fragment,i)},m(i,c){R(e,i,c),A(i,t,c),R(s,i,c),o=!0},p(i,c){const u={};!n&&c&1&&(n=!0,u.index=i[0],Fe(()=>n=!1)),e.$set(u);const h={};c&128&&(h.$$scope={dirty:c,ctx:i}),s.$set(h)},i(i){o||(v(e.$$.fragment,i),v(s.$$.fragment,i),o=!0)},o(i){w(e.$$.fragment,i),w(s.$$.fragment,i),o=!1},d(i){i&&d(t),V(e,i),V(s,i)}}}function Es(l){let e,n;return e=new es({props:{$$slots:{default:[Cs]},$$scope:{ctx:l}}}),e.$on("close",l[1]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,[s]){const o={};s&129&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Ss(l,e,n){let{index:t}=e;const s=je(),o=()=>{s("close",t)},r=u=>{u.key==="f"&&(u.preventDefault(),u.stopPropagation(),o())},a=()=>{var u,h;(((u=history.state)==null?void 0:u.fullscreen)===void 0||((h=history.state)==null?void 0:h.fullscreen)===!1)&&o()};rt(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),ot(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(u){t=u,n(0,t)}function c(u){nt.call(this,l,u)}return l.$$set=u=>{"index"in u&&n(0,t=u.index)},[t,o,i,c]}class Is extends pe{constructor(e){super(),_e(this,e,Ss,Es,fe,{index:0})}}function Ot(l){let e,n=l[0].type==="video"?"▶":"GIF",t;return{c(){e=C("span"),t=oe(n),this.h()},l(s){e=E(s,"SPAN",{class:!0});var o=M(e);t=ie(o,n),o.forEach(d),this.h()},h(){m(e,"class","type svelte-1213alg")},m(s,o){A(s,e,o),_(e,t)},p(s,o){o&1&&n!==(n=s[0].type==="video"?"▶":"GIF")&&Le(t,n)},d(s){s&&d(e)}}}function Ds(l){let e,n,t,s,o,r=st(l[0].score)+"",a,i,c,u,h,f=l[0].type!=="image"&&Ot(l);return{c(){e=C("div"),n=C("img"),s=D(),o=C("span"),a=oe(r),i=D(),f&&f.c(),this.h()},l(y){e=E(y,"DIV",{id:!0,class:!0,style:!0});var $=M(e);n=E($,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),s=P($),o=E($,"SPAN",{class:!0});var b=M(o);a=ie(b,r),b.forEach(d),i=P($),f&&f.l($),$.forEach(d),this.h()},h(){we(n.src,t=l[1])||m(n,"src",t),m(n,"alt","post"),m(n,"class","post-media svelte-1213alg"),m(n,"tabindex","-1"),m(n,"loading","lazy"),m(o,"class","score svelte-1213alg"),m(e,"id",c=lt(l[0].id)),m(e,"class","post svelte-1213alg"),Be(e,"grid-row","span "+l[2]),at(e,"open",open)},m(y,$){A(y,e,$),_(e,n),_(e,s),_(e,o),_(o,a),_(e,i),f&&f.m(e,null),u||(h=[De(e,"click",l[3]),De(e,"keydown",l[4])],u=!0)},p(y,[$]){$&2&&!we(n.src,t=y[1])&&m(n,"src",t),$&1&&r!==(r=st(y[0].score)+"")&&Le(a,r),y[0].type!=="image"?f?f.p(y,$):(f=Ot(y),f.c(),f.m(e,null)):f&&(f.d(1),f=null),$&1&&c!==(c=lt(y[0].id))&&m(e,"id",c),$&0&&at(e,"open",open)},i:Q,o:Q,d(y){y&&d(e),f&&f.d(),u=!1,ct(h)}}}let Ft=3;function Ps(l,e,n){let t,{post:s}=e,o=Math.min(Math.round(s.height/s.width)*Ft,Ft*3);const r=c=>c.endsWith(".jpg")||c.endsWith(".jpeg")||c.endsWith(".png")||c.endsWith(".webp");function a(c){nt.call(this,l,c)}const i=c=>{var u;(Zt(c)||c.key==="f")&&((u=c.target)==null||u.click())};return l.$$set=c=>{"post"in c&&n(0,s=c.post)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=r(s.sample_url)?s.sample_url:s.preview_url)},[s,t,o,a,i]}class Ns extends pe{constructor(e){super(),_e(this,e,Ps,Ds,fe,{post:0})}}function Ts(l){const e=l.slice(),n=Yt(e[1].file_url,e[1].sample_url,e[1].preview_url);e[7]=n;const t=e[7].animated;e[8]=t;const s=e[7].static;return e[9]=s,e}function As(l){let e,n;return e=new Dn({props:{post:l[1]}}),e.$on("click",l[4]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Os(l){let e,n;return e=new Pn({props:{src:l[8],poster:l[9],width:l[1].width,height:l[1].height,loop:l[2]||mt(l[1].tags)}}),e.$on("click",l[4]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.src=t[8]),s&2&&(o.poster=t[9]),s&2&&(o.width=t[1].width),s&2&&(o.height=t[1].height),s&6&&(o.loop=t[2]||mt(t[1].tags)),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Fs(l){let e,n;return e=new Nn({props:{post:l[1],open:l[0]}}),e.$on("click",l[4]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),s&1&&(o.open=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Rs(l){let e;return{c(){e=C("i"),this.h()},l(n){e=E(n,"I",{class:!0}),M(e).forEach(d),this.h()},h(){m(e,"class","codicon codicon-screen-full")},m(n,t){A(n,e,t)},p:Q,d(n){n&&d(e)}}}function Rt(l){let e,n;return e=new In({props:{post:l[1]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Vs(l){let e,n,t,s,o,r,a,i,c,u;const h=[Fs,Os,As],f=[];function y(N,p){return N[1].type==="image"?0:N[1].type==="video"?1:2}function $(N,p){return p===1?Ts(N):N}n=y(l),t=f[n]=h[n]($(l,n)),o=new Jt({props:{class:"button-fullscreen","aria-label":"Enter Fullscreen mode",$$slots:{default:[Rs]},$$scope:{ctx:l}}}),o.$on("click",l[5]);let b=l[0]&&Rt(l);return{c(){e=C("div"),t.c(),s=D(),O(o.$$.fragment),r=D(),b&&b.c(),this.h()},l(N){e=E(N,"DIV",{id:!0,class:!0});var p=M(e);t.l(p),s=P(p),F(o.$$.fragment,p),r=P(p),b&&b.l(p),p.forEach(d),this.h()},h(){m(e,"id",a=lt(l[1].id)),m(e,"class","post svelte-pwgq1f"),at(e,"open",l[0])},m(N,p){A(N,e,p),f[n].m(e,null),_(e,s),R(o,e,null),_(e,r),b&&b.m(e,null),i=!0,c||(u=De(e,"keydown",l[6]),c=!0)},p(N,[p]){let k=n;n=y(N),n===k?f[n].p($(N,n),p):(ae(),w(f[k],1,1,()=>{f[k]=null}),ce(),t=f[n],t?t.p($(N,n),p):(t=f[n]=h[n]($(N,n)),t.c()),v(t,1),t.m(e,s));const g={};p&1024&&(g.$$scope={dirty:p,ctx:N}),o.$set(g),N[0]?b?(b.p(N,p),p&1&&v(b,1)):(b=Rt(N),b.c(),v(b,1),b.m(e,null)):b&&(ae(),w(b,1,1,()=>{b=null}),ce()),(!i||p&2&&a!==(a=lt(N[1].id)))&&m(e,"id",a),(!i||p&1)&&at(e,"open",N[0])},i(N){i||(v(t),v(o.$$.fragment,N),v(b),i=!0)},o(N){w(t),w(o.$$.fragment,N),w(b),i=!1},d(N){N&&d(e),f[n].d(),V(o),b&&b.d(),c=!1,u()}}}function Ms(l,e,n){let t;ge(l,Tn,u=>n(2,t=u));const s=je(),o=()=>n(0,a=!a);let{post:r}=e,{open:a=!1}=e;const i=()=>s("fullscreen"),c=u=>{u.key==="f"&&s("fullscreen")};return l.$$set=u=>{"post"in u&&n(1,r=u.post),"open"in u&&n(0,a=u.open)},[a,r,t,s,o,i,c]}class Ls extends pe{constructor(e){super(),_e(this,e,Ms,Vs,fe,{post:1,open:0})}}function Bs(l){let e;return{c(){e=oe("Done")},l(n){e=ie(n,"Done")},m(n,t){A(n,e,t)},d(n){n&&d(e)}}}function js(l){let e;return{c(){e=oe("Reset")},l(n){e=ie(n,"Reset")},m(n,t){A(n,e,t)},d(n){n&&d(e)}}}function zs(l){let e,n,t="Sorting and Filtering",s,o,r,a="Sorting",i,c,u,h,f,y,$,b,N,p,k="Filtering by Score",g,T,G,te,W,X,H,I,U,S="Filtering by Rating",x,K,L,le,B,j,ne,Y,me,he,Oe;function Se(z){l[6](z)}let Ze={options:qs};l[3].direction!==void 0&&(Ze.value=l[3].direction),u=new mn({props:Ze}),ke.push(()=>Re(u,"value",Se));function Xe(z){l[7](z)}let Ne={options:Us};l[3].property!==void 0&&(Ne.value=l[3].property),y=new ht({props:Ne}),ke.push(()=>Re(y,"value",Xe));function xe(z){l[8](z)}let Ue={options:Hs};l[2].scoreComparator!==void 0&&(Ue.value=l[2].scoreComparator),G=new On({props:Ue}),ke.push(()=>Re(G,"value",xe));function Ve(z){l[10](z)}let qe={options:tn};return l[2].rating!==void 0&&(qe.value=l[2].rating),L=new ht({props:qe}),ke.push(()=>Re(L,"value",Ve)),j=new Ge({props:{title:"Return to searching.",$$slots:{default:[Bs]},$$scope:{ctx:l}}}),j.$on("click",l[11]),Y=new Ge({props:{title:"Reset sort and filter.",type:"secondary",$$slots:{default:[js]},$$scope:{ctx:l}}}),Y.$on("click",l[5]),{c(){e=C("div"),n=C("h3"),n.textContent=t,s=D(),o=C("div"),r=C("b"),r.textContent=a,i=D(),c=C("div"),O(u.$$.fragment),f=D(),O(y.$$.fragment),b=D(),N=C("div"),p=C("b"),p.textContent=k,g=D(),T=C("div"),O(G.$$.fragment),W=D(),X=C("input"),H=D(),I=C("div"),U=C("b"),U.textContent=S,x=D(),K=C("div"),O(L.$$.fragment),B=D(),O(j.$$.fragment),ne=D(),O(Y.$$.fragment),this.h()},l(z){e=E(z,"DIV",{class:!0});var Z=M(e);n=E(Z,"H3",{"data-svelte-h":!0}),ue(n)!=="svelte-15zouq3"&&(n.textContent=t),s=P(Z),o=E(Z,"DIV",{});var Ae=M(o);r=E(Ae,"B",{class:!0,"data-svelte-h":!0}),ue(r)!=="svelte-ekzpgg"&&(r.textContent=a),i=P(Ae),c=E(Ae,"DIV",{class:!0});var Te=M(c);F(u.$$.fragment,Te),f=P(Te),F(y.$$.fragment,Te),Te.forEach(d),Ae.forEach(d),b=P(Z),N=E(Z,"DIV",{});var Ie=M(N);p=E(Ie,"B",{class:!0,"data-svelte-h":!0}),ue(p)!=="svelte-1flca3"&&(p.textContent=k),g=P(Ie),T=E(Ie,"DIV",{class:!0});var $e=M(T);F(G.$$.fragment,$e),W=P($e),X=E($e,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),$e.forEach(d),Ie.forEach(d),H=P(Z),I=E(Z,"DIV",{});var ee=M(I);U=E(ee,"B",{class:!0,"data-svelte-h":!0}),ue(U)!=="svelte-1evbw58"&&(U.textContent=S),x=P(ee),K=E(ee,"DIV",{class:!0});var Ce=M(K);F(L.$$.fragment,Ce),Ce.forEach(d),ee.forEach(d),B=P(Z),F(j.$$.fragment,Z),ne=P(Z),F(Y.$$.fragment,Z),Z.forEach(d),this.h()},h(){m(r,"class","svelte-kdg2ou"),m(c,"class","row svelte-kdg2ou"),m(p,"class","svelte-kdg2ou"),m(X,"type","number"),m(X,"min",0),m(X,"max",1e5),m(X,"step",1),m(X,"class","svelte-kdg2ou"),m(T,"class","row svelte-kdg2ou"),m(U,"class","svelte-kdg2ou"),m(K,"class","row svelte-kdg2ou"),m(e,"class","container svelte-kdg2ou")},m(z,Z){A(z,e,Z),_(e,n),_(e,s),_(e,o),_(o,r),_(o,i),_(o,c),R(u,c,null),_(c,f),R(y,c,null),_(e,b),_(e,N),_(N,p),_(N,g),_(N,T),R(G,T,null),_(T,W),_(T,X),Je(X,l[1]),_(e,H),_(e,I),_(I,U),_(I,x),_(I,K),R(L,K,null),_(e,B),R(j,e,null),_(e,ne),R(Y,e,null),me=!0,he||(Oe=[De(X,"input",l[9]),De(X,"keyup",l[4])],he=!0)},p(z,Z){const Ae={};!h&&Z&8&&(h=!0,Ae.value=z[3].direction,Fe(()=>h=!1)),u.$set(Ae);const Te={};!$&&Z&8&&($=!0,Te.value=z[3].property,Fe(()=>$=!1)),y.$set(Te);const Ie={};!te&&Z&4&&(te=!0,Ie.value=z[2].scoreComparator,Fe(()=>te=!1)),G.$set(Ie),Z&2&&Ut(X.value)!==z[1]&&Je(X,z[1]);const $e={};!le&&Z&4&&(le=!0,$e.value=z[2].rating,Fe(()=>le=!1)),L.$set($e);const ee={};Z&16384&&(ee.$$scope={dirty:Z,ctx:z}),j.$set(ee);const Ce={};Z&16384&&(Ce.$$scope={dirty:Z,ctx:z}),Y.$set(Ce)},i(z){me||(v(u.$$.fragment,z),v(y.$$.fragment,z),v(G.$$.fragment,z),v(L.$$.fragment,z),v(j.$$.fragment,z),v(Y.$$.fragment,z),me=!0)},o(z){w(u.$$.fragment,z),w(y.$$.fragment,z),w(G.$$.fragment,z),w(L.$$.fragment,z),w(j.$$.fragment,z),w(Y.$$.fragment,z),me=!1},d(z){z&&d(e),V(u),V(y),V(G),V(L),V(j),V(Y),he=!1,ct(Oe)}}}function Gs(l){let e,n,t;function s(r){l[12](r)}let o={$$slots:{default:[zs]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.dialog=l[0]),e=new qt({props:o}),ke.push(()=>Re(e,"dialog",s)),e.$on("close",l[13]),{c(){O(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){R(e,r,a),t=!0},p(r,[a]){const i={};a&16399&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],Fe(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){V(e,r)}}}const tn=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),Us=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),qs=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),Hs=Object.freeze({">=":"≥","<=":"≤"});function Ks(l,e,n){let t,s;ge(l,Me,p=>n(2,t=p)),ge(l,ze,p=>n(3,s=p));let{dialog:o}=e,r;const a=p=>{var k;return Zt(p)&&((k=p.target)==null?void 0:k.blur())},i=()=>{ze.reset(),Me.reset(),n(1,r=t.scoreValue)};function c(p){l.$$.not_equal(s.direction,p)&&(s.direction=p,ze.set(s))}function u(p){l.$$.not_equal(s.property,p)&&(s.property=p,ze.set(s))}function h(p){l.$$.not_equal(t.scoreComparator,p)&&(t.scoreComparator=p,Me.set(t))}function f(){r=Ut(this.value),n(1,r),n(2,t)}function y(p){l.$$.not_equal(t.rating,p)&&(t.rating=p,Me.set(t))}const $=()=>o.close();function b(p){o=p,n(0,o)}function N(p){nt.call(this,l,p)}return l.$$set=p=>{"dialog"in p&&n(0,o=p.dialog)},l.$$.update=()=>{if(l.$$.dirty&6){r===void 0&&n(1,r=t.scoreValue);let p=Number(r);isNaN(p)||cn(Me,t.scoreValue=p,t)}},[o,r,t,s,a,i,c,u,h,f,y,$,b,N]}class Ws extends pe{constructor(e){super(),_e(this,e,Ks,Gs,fe,{dialog:0})}}function Js(l){let e,n,t,s,o,r,a,i,c,u,h,f,y,$,b,N;function p(g){l[9](g)}let k={};return l[2]!==void 0&&(k.dialog=l[2]),f=new Ws({props:k}),ke.push(()=>Re(f,"dialog",p)),f.$on("close",l[10]),{c(){e=C("button"),n=C("i"),t=D(),s=C("span"),o=oe(l[5]),r=D(),a=C("i"),i=D(),c=C("span"),u=oe(l[4]),h=D(),O(f.$$.fragment),this.h()},l(g){e=E(g,"BUTTON",{class:!0});var T=M(e);n=E(T,"I",{class:!0}),M(n).forEach(d),t=P(T),s=E(T,"SPAN",{});var G=M(s);o=ie(G,l[5]),G.forEach(d),r=P(T),a=E(T,"I",{class:!0}),M(a).forEach(d),i=P(T),c=E(T,"SPAN",{});var te=M(c);u=ie(te,l[4]),te.forEach(d),T.forEach(d),h=P(g),F(f.$$.fragment,g),this.h()},h(){m(n,"class","codicon codicon-filter svelte-a4zz3f"),m(a,"class","codicon codicon-arrow-swap svelte-a4zz3f"),m(e,"class","svelte-a4zz3f")},m(g,T){A(g,e,T),_(e,n),_(e,t),_(e,s),_(s,o),_(e,r),_(e,a),_(e,i),_(e,c),_(c,u),A(g,h,T),R(f,g,T),$=!0,b||(N=De(e,"click",l[8]),b=!0)},p(g,[T]){(!$||T&32)&&Le(o,g[5]),(!$||T&16)&&Le(u,g[4]);const G={};!y&&T&4&&(y=!0,G.dialog=g[2],Fe(()=>y=!1)),f.$set(G)},i(g){$||(v(f.$$.fragment,g),$=!0)},o(g){w(f.$$.fragment,g),$=!1},d(g){g&&(d(e),d(h)),V(f,g),b=!1,N()}}}const Qs=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),Ys=(l,e,n)=>{let t=l==="all"?void 0:tn[l],s=e===0&&n===">="?void 0:`Score${n}${st(e)}`;return[t,s].filter(o=>o!==void 0).join(",")||"All"};function Zs(l,e,n){let t,s,o,r;ge(l,ze,$=>n(0,o=$)),ge(l,Me,$=>n(1,r=$));const a=je(),i=($,b)=>JSON.stringify(Object.assign({},$,b));let c,u="";const h=()=>{n(3,u=i(o,r)),c.showModal(),Ht("dialog")};function f($){c=$,n(2,c)}const y=()=>{i(o,r)!==u&&a("sortfilterupdate")};return l.$$.update=()=>{l.$$.dirty&2&&n(5,t=Ys(r.rating,r.scoreValue,r.scoreComparator)),l.$$.dirty&1&&n(4,s=Qs[o.property][o.direction])},[o,r,c,u,s,t,a,i,h,f,y]}class Xs extends pe{constructor(e){super(),_e(this,e,Zs,Js,fe,{})}}function Vt(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function Mt(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function xs(l){let e,n,t=Pe(l[1].posts),s=[];for(let r=0;r<t.length;r+=1)s[r]=Lt(Vt(l,t,r));const o=r=>w(s[r],1,1,()=>{s[r]=null});return{c(){e=C("section");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=E(r,"SECTION",{class:!0,style:!0});var a=M(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(d),this.h()},h(){m(e,"class","multi-column svelte-wypqh"),Be(e,"grid-template-columns","repeat("+l[2]+", 1fr)")},m(r,a){A(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&3){t=Pe(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Vt(r,t,i);s[i]?(s[i].p(c,a),v(s[i],1)):(s[i]=Lt(c),s[i].c(),v(s[i],1),s[i].m(e,null))}for(ae(),i=t.length;i<s.length;i+=1)o(i);ce()}(!n||a&4)&&Be(e,"grid-template-columns","repeat("+r[2]+", 1fr)")},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(r){r&&d(e),Ye(s,r)}}}function el(l){let e,n,t=Pe(l[1].posts),s=[];for(let r=0;r<t.length;r+=1)s[r]=Bt(Mt(l,t,r));const o=r=>w(s[r],1,1,()=>{s[r]=null});return{c(){e=C("section");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=E(r,"SECTION",{class:!0});var a=M(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(d),this.h()},h(){m(e,"class","single-column svelte-wypqh")},m(r,a){A(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&3){t=Pe(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Mt(r,t,i);s[i]?(s[i].p(c,a),v(s[i],1)):(s[i]=Bt(c),s[i].c(),v(s[i],1),s[i].m(e,null))}for(ae(),i=t.length;i<s.length;i+=1)o(i);ce()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(r){r&&d(e),Ye(s,r)}}}function Lt(l){let e,n;function t(){return l[6](l[10])}return e=new Ns({props:{post:l[8]}}),e.$on("click",t),{c(){O(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){R(e,s,o),n=!0},p(s,o){l=s;const r={};o&2&&(r.post=l[8]),e.$set(r)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function Bt(l){let e,n;function t(){return l[5](l[10])}return e=new Ls({props:{post:l[8]}}),e.$on("fullscreen",t),{c(){O(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,o){R(e,s,o),n=!0},p(s,o){l=s;const r={};o&2&&(r.post=l[8]),e.$set(r)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function jt(l){let e,n;return e=new Is({props:{index:l[0]}}),e.$on("close",l[3]),e.$on("endreached",l[7]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&1&&(o.index=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function tl(l){let e,n,t=st(l[1].postCount)+"",s,o,r,a,i,c,u,h,f,y;a=new Xs({}),a.$on("sortfilterupdate",l[4]);const $=[el,xs],b=[];function N(k,g){return k[2]==="1"?0:1}c=N(l),u=b[c]=$[c](l);let p=l[0]!==void 0&&jt(l);return{c(){e=C("div"),n=C("span"),s=oe(t),o=oe(" posts"),r=D(),O(a.$$.fragment),i=D(),u.c(),h=D(),p&&p.c(),f=ye(),this.h()},l(k){e=E(k,"DIV",{class:!0});var g=M(e);n=E(g,"SPAN",{});var T=M(n);s=ie(T,t),o=ie(T," posts"),T.forEach(d),r=P(g),F(a.$$.fragment,g),g.forEach(d),i=P(k),u.l(k),h=P(k),p&&p.l(k),f=ye(),this.h()},h(){m(e,"class","svelte-wypqh")},m(k,g){A(k,e,g),_(e,n),_(n,s),_(n,o),_(e,r),R(a,e,null),A(k,i,g),b[c].m(k,g),A(k,h,g),p&&p.m(k,g),A(k,f,g),y=!0},p(k,[g]){(!y||g&2)&&t!==(t=st(k[1].postCount)+"")&&Le(s,t);let T=c;c=N(k),c===T?b[c].p(k,g):(ae(),w(b[T],1,1,()=>{b[T]=null}),ce(),u=b[c],u?u.p(k,g):(u=b[c]=$[c](k),u.c()),v(u,1),u.m(h.parentNode,h)),k[0]!==void 0?p?(p.p(k,g),g&1&&v(p,1)):(p=jt(k),p.c(),v(p,1),p.m(f.parentNode,f)):p&&(ae(),w(p,1,1,()=>{p=null}),ce())},i(k){y||(v(a.$$.fragment,k),v(u),v(p),y=!0)},o(k){w(a.$$.fragment,k),w(u),w(p),y=!1},d(k){k&&(d(e),d(i),d(h),d(f)),V(a),b[c].d(k),p&&p.d(k)}}}function nl(l,e,n){let t,s;ge(l,Qe,h=>n(1,t=h)),ge(l,Kt,h=>n(2,s=h));let o;const r=h=>{var $;const f=t.posts[h.detail],y=lt(f.id);($=document.getElementById(y))==null||$.scrollIntoView(),n(0,o=void 0)};function a(h){nt.call(this,l,h)}const i=h=>{n(0,o=h)},c=h=>{n(0,o=h)};function u(h){nt.call(this,l,h)}return l.$$.update=()=>{var h;l.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(h=history.state)!=null&&h.fullscreen&&history.back())},[o,t,s,r,a,i,c,u]}class sl extends pe{constructor(e){super(),_e(this,e,nl,tl,fe,{})}}function ll(l){let e;return{c(){e=oe("Reset Filter")},l(n){e=ie(n,"Reset Filter")},m(n,t){A(n,e,t)},d(n){n&&d(e)}}}function rl(l){let e,n,t,s,o="We couldn't find any posts matching your tags. Sorry...",r,a,i;return a=new Ge({props:{title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[ll]},$$scope:{ctx:l}}}),a.$on("click",l[1]),{c(){e=C("img"),t=D(),s=C("p"),s.textContent=o,r=D(),O(a.$$.fragment),this.h()},l(c){e=E(c,"IMG",{src:!0,alt:!0,class:!0}),t=P(c),s=E(c,"P",{"data-svelte-h":!0}),ue(s)!=="svelte-1utxj3w"&&(s.textContent=o),r=P(c),F(a.$$.fragment,c),this.h()},h(){we(e.src,n=Wt+"/assets/shironeko-confused.png")||m(e,"src",n),m(e,"alt","Nothing here..."),m(e,"class","svelte-1bb5e7g")},m(c,u){A(c,e,u),A(c,t,u),A(c,s,u),A(c,r,u),R(a,c,u),i=!0},p(c,[u]){const h={};u&4&&(h.$$scope={dirty:u,ctx:c}),a.$set(h)},i(c){i||(v(a.$$.fragment,c),i=!0)},o(c){w(a.$$.fragment,c),i=!1},d(c){c&&(d(e),d(t),d(s),d(r)),V(a,c)}}}function ol(l){const e=je();return[e,()=>{ze.reset(),Me.reset(),e("sortfilterupdate")}]}class il extends pe{constructor(e){super(),_e(this,e,ol,rl,fe,{})}}function al(l){const e=l-1;return e*e*e+1}function cl(l,{delay:e=0,duration:n=400,easing:t=al,x:s=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(l),i=+a.opacity,c=a.transform==="none"?"":a.transform,u=i*(1-r),[h,f]=_t(s),[y,$]=_t(o);return{delay:e,duration:n,easing:t,css:(b,N)=>`
			transform: ${c} translate(${(1-b)*h}${f}, ${(1-b)*y}${$});
			opacity: ${i-u*N}`}}function ul(l){let e;return{c(){e=oe("Ok")},l(n){e=ie(n,"Ok")},m(n,t){A(n,e,t)},d(n){n&&d(e)}}}function fl(l){let e,n,t="This site uses cookies",s,o,r,a;return o=new Ge({props:{title:"Accept cookies",$$slots:{default:[ul]},$$scope:{ctx:l}}}),o.$on("click",l[0]),{c(){e=C("div"),n=C("span"),n.textContent=t,s=D(),O(o.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var c=M(e);n=E(c,"SPAN",{"data-svelte-h":!0}),ue(n)!=="svelte-17tpe0c"&&(n.textContent=t),s=P(c),F(o.$$.fragment,c),c.forEach(d),this.h()},h(){m(e,"class","svelte-20j44m")},m(i,c){A(i,e,c),_(e,n),_(e,s),R(o,e,null),a=!0},p(i,[c]){const u={};c&2&&(u.$$scope={dirty:c,ctx:i}),o.$set(u)},i(i){a||(v(o.$$.fragment,i),r&&r.end(1),a=!0)},o(i){w(o.$$.fragment,i),i&&(r=fn(e,cl,{y:200,duration:200})),a=!1},d(i){i&&d(e),V(o),i&&r&&r.end()}}}function pl(l){return[()=>Xt.set(!0)]}class _l extends pe{constructor(e){super(),_e(this,e,pl,fl,fe,{})}}const{document:ft}=pn;function dl(l){let e;return{c(){e=oe("Search")},l(n){e=ie(n,"Search")},m(n,t){A(n,e,t)},i:Q,o:Q,d(n){n&&d(e)}}}function gl(l){let e,n;return e=new pt({}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function ml(l){let e,n,t,s;const o=[gl,dl],r=[];function a(i,c){return i[0]?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=ye()},l(i){n.l(i),t=ye()},m(i,c){r[e].m(i,c),A(i,t,c),s=!0},p(i,c){let u=e;e=a(i),e!==u&&(ae(),w(r[u],1,1,()=>{r[u]=null}),ce(),n=r[e],n||(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){s||(v(n),s=!0)},o(i){w(n),s=!1},d(i){i&&d(t),r[e].d(i)}}}function hl(l){let e,n,t,s,o,r;const a=[bl,vl],i=[];function c(u,h){return u[3].postCount===0?0:1}return n=c(l),t=i[n]=a[n](l),o=new Rn({}),{c(){e=C("section"),t.c(),s=D(),O(o.$$.fragment),this.h()},l(u){e=E(u,"SECTION",{class:!0});var h=M(e);t.l(h),h.forEach(d),s=P(u),F(o.$$.fragment,u),this.h()},h(){m(e,"class","svelte-nujk24")},m(u,h){A(u,e,h),i[n].m(e,null),A(u,s,h),R(o,u,h),r=!0},p(u,h){let f=n;n=c(u),n===f?i[n].p(u,h):(ae(),w(i[f],1,1,()=>{i[f]=null}),ce(),t=i[n],t?t.p(u,h):(t=i[n]=a[n](u),t.c()),v(t,1),t.m(e,null))},i(u){r||(v(t),v(o.$$.fragment,u),r=!0)},o(u){w(t),w(o.$$.fragment,u),r=!1},d(u){u&&(d(e),d(s)),i[n].d(),V(o,u)}}}function $l(l){let e,n;return e=new Jn({props:{error:l[1]}}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.error=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function vl(l){let e,n,t,s,o,r;e=new sl({}),e.$on("sortfilterupdate",l[10]),e.$on("endreached",l[11]);const a=[wl,kl],i=[];function c(u,h){return u[3].posts.length===u[3].postCount?0:1}return t=c(l),s=i[t]=a[t](l),{c(){O(e.$$.fragment),n=D(),s.c(),o=ye()},l(u){F(e.$$.fragment,u),n=P(u),s.l(u),o=ye()},m(u,h){R(e,u,h),A(u,n,h),i[t].m(u,h),A(u,o,h),r=!0},p(u,h){let f=t;t=c(u),t===f?i[t].p(u,h):(ae(),w(i[f],1,1,()=>{i[f]=null}),ce(),s=i[t],s?s.p(u,h):(s=i[t]=a[t](u),s.c()),v(s,1),s.m(o.parentNode,o))},i(u){r||(v(e.$$.fragment,u),v(s),r=!0)},o(u){w(e.$$.fragment,u),w(s),r=!1},d(u){u&&(d(n),d(o)),V(e,u),i[t].d(u)}}}function bl(l){let e,n;return e=new il({}),e.$on("sortfilterupdate",l[10]),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p:Q,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function kl(l){let e,n,t,s;return e=new xt({props:{absoluteTop:void 0,rootMargin:1e3/Number(l[7])+"px"}}),e.$on("intersection",l[11]),t=new Ge({props:{title:"Load more posts",$$slots:{default:[El]},$$scope:{ctx:l}}}),t.$on("click",l[11]),{c(){O(e.$$.fragment),n=D(),O(t.$$.fragment)},l(o){F(e.$$.fragment,o),n=P(o),F(t.$$.fragment,o)},m(o,r){R(e,o,r),A(o,n,r),R(t,o,r),s=!0},p(o,r){const a={};r&128&&(a.rootMargin=1e3/Number(o[7])+"px"),e.$set(a);const i={};r&33554433&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){s||(v(e.$$.fragment,o),v(t.$$.fragment,o),s=!0)},o(o){w(e.$$.fragment,o),w(t.$$.fragment,o),s=!1},d(o){o&&d(n),V(e,o),V(t,o)}}}function wl(l){let e,n;return e=new Yn({}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},p:Q,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function yl(l){let e;return{c(){e=oe("Load more")},l(n){e=ie(n,"Load more")},m(n,t){A(n,e,t)},i:Q,o:Q,d(n){n&&d(e)}}}function Cl(l){let e,n;return e=new pt({}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function El(l){let e,n,t,s;const o=[Cl,yl],r=[];function a(i,c){return i[0]?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=ye()},l(i){n.l(i),t=ye()},m(i,c){r[e].m(i,c),A(i,t,c),s=!0},p(i,c){let u=e;e=a(i),e!==u&&(ae(),w(r[u],1,1,()=>{r[u]=null}),ce(),n=r[e],n||(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){s||(v(n),s=!0)},o(i){w(n),s=!1},d(i){i&&d(t),r[e].d(i)}}}function zt(l){let e,n;return e=new _l({}),{c(){O(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){R(e,t,s),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Sl(l){let e,n,t,s,o,r,a,i,c,u,h,f,y,$,b,N,p,k,g;s=new dn({}),r=new Fn({props:{placeholder:"Search for tags",fetchSuggestions:l[9]}}),r.$on("pick",l[12]),i=new Ge({props:{title:"Search with the tags above",$$slots:{default:[ml]},$$scope:{ctx:l}}}),i.$on("click",l[10]),u=new gn({props:{tags:[...l[5],...l[4]]}}),u.$on("click",l[13]),u.$on("contextmenu",l[14]),u.$on("createSupertag",l[15]);const T=[$l,hl],G=[];function te(I,U){return I[1]?0:I[3].requested?1:-1}~(f=te(l))&&(y=G[f]=T[f](l));function W(I){l[16](I)}let X={tags:l[5]};l[2]!==void 0&&(X.dialog=l[2]),b=new Hn({props:X}),ke.push(()=>Re(b,"dialog",W)),b.$on("submit",l[17]);let H=!l[8]&&zt();return{c(){e=C("meta"),n=D(),t=C("section"),O(s.$$.fragment),o=D(),O(r.$$.fragment),a=D(),O(i.$$.fragment),c=D(),O(u.$$.fragment),h=D(),y&&y.c(),$=D(),O(b.$$.fragment),p=D(),H&&H.c(),k=ye(),this.h()},l(I){const U=un("svelte-7jdp3v",ft.head);e=E(U,"META",{name:!0,content:!0}),U.forEach(d),n=P(I),t=E(I,"SECTION",{id:!0,class:!0});var S=M(t);F(s.$$.fragment,S),o=P(S),F(r.$$.fragment,S),a=P(S),F(i.$$.fragment,S),c=P(S),F(u.$$.fragment,S),S.forEach(d),h=P(I),y&&y.l(I),$=P(I),F(b.$$.fragment,I),p=P(I),H&&H.l(I),k=ye(),this.h()},h(){ft.title="kurosearch - Rule34 Hentai",m(e,"name","description"),m(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience."),m(t,"id","search"),m(t,"class","svelte-nujk24")},m(I,U){_(ft.head,e),A(I,n,U),A(I,t,U),R(s,t,null),_(t,o),R(r,t,null),_(t,a),R(i,t,null),_(t,c),R(u,t,null),A(I,h,U),~f&&G[f].m(I,U),A(I,$,U),R(b,I,U),A(I,p,U),H&&H.m(I,U),A(I,k,U),g=!0},p(I,[U]){const S={};U&33554433&&(S.$$scope={dirty:U,ctx:I}),i.$set(S);const x={};U&48&&(x.tags=[...I[5],...I[4]]),u.$set(x);let K=f;f=te(I),f===K?~f&&G[f].p(I,U):(y&&(ae(),w(G[K],1,1,()=>{G[K]=null}),ce()),~f?(y=G[f],y?y.p(I,U):(y=G[f]=T[f](I),y.c()),v(y,1),y.m($.parentNode,$)):y=null);const L={};U&32&&(L.tags=I[5]),!N&&U&4&&(N=!0,L.dialog=I[2],Fe(()=>N=!1)),b.$set(L),I[8]?H&&(ae(),w(H,1,1,()=>{H=null}),ce()):H?U&256&&v(H,1):(H=zt(),H.c(),v(H,1),H.m(k.parentNode,k))},i(I){g||(v(s.$$.fragment,I),v(r.$$.fragment,I),v(i.$$.fragment,I),v(u.$$.fragment,I),v(y),v(b.$$.fragment,I),v(H),g=!0)},o(I){w(s.$$.fragment,I),w(r.$$.fragment,I),w(i.$$.fragment,I),w(u.$$.fragment,I),w(y),w(b.$$.fragment,I),w(H),g=!1},d(I){I&&(d(n),d(t),d(h),d($),d(p),d(k)),d(e),V(s),V(r),V(i),V(u),~f&&G[f].d(I),V(b,I),H&&H.d(I)}}}function Il(l,e,n){let t,s,o,r,a,i,c,u,h;ge(l,Qe,S=>n(3,t=S)),ge(l,ut,S=>n(4,s=S)),ge(l,Me,S=>n(19,o=S)),ge(l,ze,S=>n(20,r=S)),ge(l,jn,S=>n(21,a=S)),ge(l,it,S=>n(5,i=S)),ge(l,$t,S=>n(6,c=S)),ge(l,Kt,S=>n(7,u=S)),ge(l,Xt,S=>n(8,h=S)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let f=!1,y,$,b=0;const N=async S=>{const x=await Vn(S);return[...c.items.filter(({name:L})=>L.toLowerCase().includes(S.toLowerCase())).map(L=>({label:L.name,count:L.tags.length,type:"supertag"})),...x]},p=()=>new An().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(s),k=async S=>{if(!f){n(1,y=void 0),n(0,f=!0);try{const x=t.pageCount;await S(),Ln(x).catch(()=>{})}catch(x){n(1,y=x),console.warn(x)}finally{n(0,f=!1)}}},g=async()=>{Qe.reset(),b=0,k(async()=>{const[S,x]=await p().getPageAndCount();Qe.addPage(S,x)})},T=async()=>{k(async()=>{const S=await p().getPage();Qe.addPage(S)})},G=S=>{var x,K;if((S.key==="/"||S.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&((x=document.getElementById("searchbar"))==null||x.focus(),S.preventDefault(),S.stopPropagation()),S.ctrlKey&&S.key==="Enter"&&(S.preventDefault(),S.stopPropagation(),g()),S.ctrlKey&&S.key==="m"&&((K=document.getElementById("select-modifier"))==null||K.click()),S.ctrlKey&&S.key==="ArrowDown"){const L=document.getElementsByClassName("post-media");L[b].focus(),b=Math.min(b+1,Math.max(0,L.length-1))}S.ctrlKey&&S.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[b].focus(),b=Math.max(b-1,0))};rt(async()=>{document.addEventListener("keydown",G),t.postCount===0&&g()}),ot(()=>{document.removeEventListener("keydown",G)});const te=async S=>{const x=S.detail;if(x.type==="supertag"){const K=c.items.find(L=>L.name===x.label);if(!K){console.warn("Supertag not present.");return}ut.addOrReplace(K)}else{const K=await Mn(S.detail.label);it.addOrReplace({name:S.detail.label,modifier:S.detail.modifier,count:S.detail.count,type:(K==null?void 0:K.type)??"tag"})}},W=S=>"description"in S.detail?ut.removeByName(S.detail.name):it.removeByName(S.detail.name),X=S=>{"description"in S.detail||(S.detail.modifier=Bn(S.detail.modifier),it.addOrReplace(S.detail))},H=()=>{$.showModal(),Ht("dialog")};function I(S){$=S,n(2,$)}return[f,y,$,t,s,i,c,u,h,N,g,T,te,W,X,H,I,S=>$t.add(S.detail)]}class tr extends pe{constructor(e){super(),_e(this,e,Il,Sl,fe,{})}}export{tr as component};
