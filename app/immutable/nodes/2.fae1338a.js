import{s as ie,p as ke,E as Me,F as Be,f as C,a as P,g as S,h as R,y as ue,c as N,d as m,j as g,r as Bt,i as A,u as d,G as Ue,H as de,I as Ke,J as lt,l as se,m as le,v as x,K as we,L as on,o as rt,M as ot,w as an,A as cn,B as un,C as fn,n as Ce,k as Ie,z as De,D as fe,N as zt,O as Xe,P as _n,Q as Ut,e as Le,R as ft,x as pn}from"../chunks/scheduler.2e119837.js";import{S as ae,i as ce,f as Ve,b as L,d as j,m as F,a as k,t as E,e as M,g as _e,c as pe,h as gn}from"../chunks/index.564f3e18.js";import{g as dn}from"../chunks/globals.7f7f1b26.js";import{e as ye}from"../chunks/each.e59479a4.js";import{D as Gt,a as Ht,r as qt}from"../chunks/result-columns-store.30be9581.js";import{T as qe}from"../chunks/TextButton.1d7fb571.js";import{D as mn}from"../chunks/DetailedTag.23023067.js";import{K as hn,A as $n}from"../chunks/ActiveTagList.9bc071f1.js";import{b as Kt}from"../chunks/paths.852312db.js";import{f as Oe}from"../chunks/format-tag.7e313273.js";import{r as Ze,a as at}from"../chunks/active-supertags-store.564ebb7d.js";import{I as vn,R as bn}from"../chunks/ModifierSelect.a17fc7e1.js";import{R as kn,S as Wt,a as Jt,K as wn,E as Qt,b as yn,C as Yt,P as Zt,g as En,c as Xt,i as Cn,d as xt,G as Sn,V as In,e as _t,I as Dn}from"../chunks/Gif.85cffca5.js";import{p as Tn,S as Pn,b as Nn,a as On}from"../chunks/store-keys.5df44647.js";import{a as An}from"../chunks/always-loop-store.ba41ce48.js";import{i as Rn,g as Ln,a as jn}from"../chunks/tags.49324235.js";import{f as ze,s as He,S as Fn}from"../chunks/search-builder.20b08516.js";import{S as Mn}from"../chunks/Select.5cc822d6.js";import{R as Vn}from"../chunks/RotatingTextSelect.c6ebcec9.js";import{S as Bn}from"../chunks/Searchbar.29cd4982.js";import{S as zn}from"../chunks/ScrollUpButton.e3e3b4de.js";import{l as Un}from"../chunks/analytics.b280da65.js";import{n as Gn,s as pt}from"../chunks/supertags-store.2cd00a2c.js";import{a as it}from"../chunks/active-tags-store.80efbdb8.js";import{b as Hn}from"../chunks/blocked-content-store.a3596c49.js";import{L as en}from"../chunks/LoadingAnimation.392b4d60.js";import{c as tn}from"../chunks/cookies-accepted-store.833e5d68.js";function gt(l,e,n){const t=l.slice();return t[11]=e[n],t}function dt(l){let e,n;return e=new mn({props:{tag:l[11]}}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,s){const r={};s&8&&(r.tag=t[11]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function qn(l){let e;return{c(){e=se("Create supertag")},l(n){e=le(n,"Create supertag")},m(n,t){A(n,e,t)},d(n){n&&m(e)}}}function Kn(l){let e,n,t="Create Supertag",s,r,o,i,a,u="Name",c,f,p,w,_,v="Description",B,$,h,b,y,G="Tags",z,V,I,O,D,H,T,Z,Q=ye(l[3]),q=[];for(let W=0;W<Q.length;W+=1)q[W]=dt(gt(l,Q,W));const ee=W=>E(q[W],1,1,()=>{q[W]=null});return D=new qe({props:{title:l[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!l[4],$$slots:{default:[qn]},$$scope:{ctx:l}}}),D.$on("click",l[9]),{c(){e=C("section"),n=C("h3"),n.textContent=t,s=P(),r=C("button"),o=P(),i=C("div"),a=C("label"),a.textContent=u,c=P(),f=C("input"),p=P(),w=C("div"),_=C("label"),_.textContent=v,B=P(),$=C("input"),h=P(),b=C("div"),y=C("span"),y.textContent=G,z=P(),V=C("ol");for(let W=0;W<q.length;W+=1)q[W].c();I=P(),O=C("div"),L(D.$$.fragment),this.h()},l(W){e=S(W,"SECTION",{class:!0});var J=R(e);n=S(J,"H3",{"data-svelte-h":!0}),ue(n)!=="svelte-ho1cwx"&&(n.textContent=t),s=N(J),r=S(J,"BUTTON",{class:!0}),R(r).forEach(m),o=N(J),i=S(J,"DIV",{class:!0});var ne=R(i);a=S(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(a)!=="svelte-10k8a68"&&(a.textContent=u),c=N(ne),f=S(ne,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),ne.forEach(m),p=N(J),w=S(J,"DIV",{class:!0});var te=R(w);_=S(te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(_)!=="svelte-14n9kp6"&&(_.textContent=v),B=N(te),$=S(te,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),te.forEach(m),h=N(J),b=S(J,"DIV",{class:!0});var be=R(b);y=S(be,"SPAN",{class:!0,"data-svelte-h":!0}),ue(y)!=="svelte-7hjyox"&&(y.textContent=G),z=N(be),V=S(be,"OL",{class:!0});var Ee=R(V);for(let Se=0;Se<q.length;Se+=1)q[Se].l(Ee);Ee.forEach(m),be.forEach(m),I=N(J),O=S(J,"DIV",{class:!0});var je=R(O);j(D.$$.fragment,je),je.forEach(m),J.forEach(m),this.h()},h(){g(r,"class",Bt("codicon codicon-close")+" svelte-1x6vc81"),g(a,"for","supertag-name"),g(a,"class","svelte-1x6vc81"),g(f,"type","text"),g(f,"placeholder","Descriptive name"),g(f,"id","supertag-name"),g(f,"class","svelte-1x6vc81"),g(i,"class","svelte-1x6vc81"),g(_,"for","supertag-description"),g(_,"class","svelte-1x6vc81"),g($,"type","text"),g($,"placeholder","Short description"),g($,"id","supertag-description"),g($,"class","svelte-1x6vc81"),g(w,"class","svelte-1x6vc81"),g(y,"class","svelte-1x6vc81"),g(V,"class","svelte-1x6vc81"),g(b,"class","svelte-1x6vc81"),g(O,"class","last svelte-1x6vc81"),g(e,"class","svelte-1x6vc81")},m(W,J){A(W,e,J),d(e,n),d(e,s),d(e,r),d(e,o),d(e,i),d(i,a),d(i,c),d(i,f),Ue(f,l[0]),d(e,p),d(e,w),d(w,_),d(w,B),d(w,$),Ue($,l[2]),d(e,h),d(e,b),d(b,y),d(b,z),d(b,V);for(let ne=0;ne<q.length;ne+=1)q[ne]&&q[ne].m(V,null);d(e,I),d(e,O),F(D,O,null),H=!0,T||(Z=[de(r,"click",l[6]),de(f,"input",l[7]),de($,"input",l[8])],T=!0)},p(W,J){if(J&1&&f.value!==W[0]&&Ue(f,W[0]),J&4&&$.value!==W[2]&&Ue($,W[2]),J&8){Q=ye(W[3]);let te;for(te=0;te<Q.length;te+=1){const be=gt(W,Q,te);q[te]?(q[te].p(be,J),k(q[te],1)):(q[te]=dt(be),q[te].c(),k(q[te],1),q[te].m(V,null))}for(_e(),te=Q.length;te<q.length;te+=1)ee(te);pe()}const ne={};J&16&&(ne.title=W[4]?"Click to create supertag":"Enter a valid name to continue"),J&16&&(ne.disabled=!W[4]),J&16384&&(ne.$$scope={dirty:J,ctx:W}),D.$set(ne)},i(W){if(!H){for(let J=0;J<Q.length;J+=1)k(q[J]);k(D.$$.fragment,W),H=!0}},o(W){q=q.filter(Boolean);for(let J=0;J<q.length;J+=1)E(q[J]);E(D.$$.fragment,W),H=!1},d(W){W&&m(e),Ke(q,W),M(D),T=!1,lt(Z)}}}function Wn(l){let e,n,t;function s(o){l[10](o)}let r={$$slots:{default:[Kn]},$$scope:{ctx:l}};return l[1]!==void 0&&(r.dialog=l[1]),e=new Gt({props:r}),ke.push(()=>Ve(e,"dialog",s)),e.$on("close",l[6]),{c(){L(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,i){F(e,o,i),t=!0},p(o,[i]){const a={};i&16413&&(a.$$scope={dirty:i,ctx:o}),!n&&i&2&&(n=!0,a.dialog=o[1],Me(()=>n=!1)),e.$set(a)},i(o){t||(k(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}function Jn(l,e,n){let t,{dialog:s}=e,{name:r=""}=e,{description:o=""}=e,{tags:i}=e;const a=Be(),u=()=>s.close();function c(){r=this.value,n(0,r)}function f(){o=this.value,n(2,o)}const p=()=>{a("submit",{name:r,description:o,tags:i.map(({modifier:_,name:v})=>({modifier:_,name:v}))}),u()};function w(_){s=_,n(1,s)}return l.$$set=_=>{"dialog"in _&&n(1,s=_.dialog),"name"in _&&n(0,r=_.name),"description"in _&&n(2,o=_.description),"tags"in _&&n(3,i=_.tags)},l.$$.update=()=>{l.$$.dirty&9&&n(4,t=typeof r=="string"&&r!==""&&i.length>1)},[r,s,o,i,t,a,u,c,f,p,w]}class Qn extends ae{constructor(e){super(),ce(this,e,Jn,Wn,ie,{dialog:1,name:0,description:2,tags:3})}}function Yn(l){let e,n,t,s,r,o,i,a,u,c;return{c(){e=C("div"),n=C("div"),t=C("i"),s=P(),r=C("div"),o=C("h3"),i=se(l[0]),a=P(),u=C("span"),c=se(l[2]),this.h()},l(f){e=S(f,"DIV",{class:!0});var p=R(e);n=S(p,"DIV",{class:!0});var w=R(n);t=S(w,"I",{class:!0}),R(t).forEach(m),w.forEach(m),s=N(p),r=S(p,"DIV",{});var _=R(r);o=S(_,"H3",{class:!0});var v=R(o);i=le(v,l[0]),v.forEach(m),a=N(_),u=S(_,"SPAN",{});var B=R(u);c=le(B,l[2]),B.forEach(m),_.forEach(m),p.forEach(m),this.h()},h(){g(t,"class",Bt(l[1])+" svelte-1yohziu"),g(n,"class","icon svelte-1yohziu"),g(o,"class","svelte-1yohziu"),g(e,"class","error svelte-1yohziu")},m(f,p){A(f,e,p),d(e,n),d(n,t),d(e,s),d(e,r),d(r,o),d(o,i),d(r,a),d(r,u),d(u,c)},p:x,i:x,o:x,d(f){f&&m(e)}}}function Zn(l,e,n){let{error:t}=e,s=t.message==="Failed to fetch"?"Connection Error":"Application Error",r=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",o=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return l.$$set=i=>{"error"in i&&n(3,t=i.error)},[s,r,o,t]}class Xn extends ae{constructor(e){super(),ce(this,e,Zn,Yn,ie,{error:3})}}function xn(l){let e,n,t,s,r="You have seen everything there is to see...";return{c(){e=C("img"),t=P(),s=C("p"),s.textContent=r,this.h()},l(o){e=S(o,"IMG",{src:!0,alt:!0,class:!0}),t=N(o),s=S(o,"P",{"data-svelte-h":!0}),ue(s)!=="svelte-1i75mtf"&&(s.textContent=r),this.h()},h(){we(e.src,n=Kt+"/assets/shironeko-x.png")||g(e,"src",n),g(e,"alt","No more results to load"),g(e,"class","svelte-1pkma0d")},m(o,i){A(o,e,i),A(o,t,i),A(o,s,i)},p:x,i:x,o:x,d(o){o&&(m(e),m(t),m(s))}}}class es extends ae{constructor(e){super(),ce(this,e,null,xn,ie,{})}}const st=l=>`post_${l}`;function mt(l){let e;const n=l[4].default,t=an(n,l,l[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,r){t&&t.m(s,r),e=!0},p(s,r){t&&t.p&&(!e||r&8)&&cn(t,n,s,s[3],e?fn(n,s[3],r,null):un(s[3]),null)},i(s){e||(k(t,s),e=!0)},o(s){E(t,s),e=!1},d(s){t&&t.d(s)}}}function ts(l){let e,n,t,s,r=l[1]&&mt(l);return{c(){e=C("div"),r&&r.c(),this.h()},l(o){e=S(o,"DIV",{role:!0,tabindex:!0,class:!0});var i=R(e);r&&r.l(i),i.forEach(m),this.h()},h(){g(e,"role","none"),g(e,"tabindex","-1"),g(e,"class","svelte-6sy8qz")},m(o,i){A(o,e,i),r&&r.m(e,null),l[5](e),n=!0,t||(s=[de(e,"click",on(ns)),de(e,"keydown",l[2])],t=!0)},p(o,[i]){o[1]?r?(r.p(o,i),i&2&&k(r,1)):(r=mt(o),r.c(),k(r,1),r.m(e,null)):r&&(_e(),E(r,1,1,()=>{r=null}),pe())},i(o){n||(k(r),n=!0)},o(o){E(r),n=!1},d(o){o&&m(e),r&&r.d(),l[5](null),t=!1,lt(s)}}}const ns=()=>{};function ss(l,e,n){let{$$slots:t={},$$scope:s}=e;const r=Be(),o=()=>r("close"),i=p=>{p.key==="Escape"&&o()},a=()=>{document.fullscreenElement||o()};let u,c=!1;rt(async()=>{u.focus(),document.addEventListener("fullscreenchange",a);try{await u.requestFullscreen()}catch{}n(1,c=!0)}),ot(async()=>{document.removeEventListener("fullscreenchange",a);try{await document.exitFullscreen()}catch{}});function f(p){ke[p?"unshift":"push"](()=>{u=p,n(0,u)})}return l.$$set=p=>{"$$scope"in p&&n(3,s=p.$$scope)},[u,c,i,s,t,f]}class ls extends ae{constructor(e){super(),ce(this,e,ss,ts,ie,{})}}function rs(l){let e,n;return{c(){e=C("div"),this.h()},l(t){e=S(t,"DIV",{style:!0}),R(e).forEach(m),this.h()},h(){g(e,"style",n=l[0]?`position:absolute;top:${l[0]};`:void 0)},m(t,s){A(t,e,s),l[3](e)},p(t,[s]){s&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&g(e,"style",n)},i:x,o:x,d(t){t&&m(e),l[3](null)}}}function os(l,e,n){let{rootMargin:t}=e,{absoluteTop:s}=e;const r=Be(),o=new IntersectionObserver(u=>{u[0].isIntersecting&&r("intersection")},{rootMargin:t});let i;function a(u){ke[u?"unshift":"push"](()=>{i=u,n(1,i)})}return l.$$set=u=>{"rootMargin"in u&&n(2,t=u.rootMargin),"absoluteTop"in u&&n(0,s=u.absoluteTop)},l.$$.update=()=>{l.$$.dirty&2&&(o.disconnect(),i&&o.observe(i))},[s,i,t,a]}class nn extends ae{constructor(e){super(),ce(this,e,os,rs,ie,{rootMargin:2,absoluteTop:0})}}function ht(l,e,n){const t=l.slice();return t[4]=e[n][0],t[5]=e[n][1],t}function $t(l){let e,n="•",t,s,r;return s=new Qt({props:{source:l[0].source}}),{c(){e=C("span"),e.textContent=n,t=P(),L(s.$$.fragment)},l(o){e=S(o,"SPAN",{"data-svelte-h":!0}),ue(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=N(o),j(s.$$.fragment,o)},m(o,i){A(o,e,i),A(o,t,i),F(s,o,i),r=!0},p(o,i){const a={};i&1&&(a.source=o[0].source),s.$set(a)},i(o){r||(k(s.$$.fragment,o),r=!0)},o(o){E(s.$$.fragment,o),r=!1},d(o){o&&(m(e),m(t)),M(s,o)}}}function vt(l){let e,n=l[4]+"",t,s,r,o;return r=new Zt({props:{tags:l[5]}}),{c(){e=C("h3"),t=se(n),s=P(),L(r.$$.fragment),this.h()},l(i){e=S(i,"H3",{class:!0});var a=R(e);t=le(a,n),a.forEach(m),s=N(i),j(r.$$.fragment,i),this.h()},h(){g(e,"class","svelte-1tsjp7g")},m(i,a){A(i,e,a),d(e,t),A(i,s,a),F(r,i,a),o=!0},p(i,a){(!o||a&2)&&n!==(n=i[4]+"")&&Ce(t,n);const u={};a&2&&(u.tags=i[5]),r.$set(u)},i(i){o||(k(r.$$.fragment,i),o=!0)},o(i){E(r.$$.fragment,i),o=!1},d(i){i&&(m(e),m(s)),M(r,i)}}}function is(l){let e,n,t,s,r,o,i,a,u=l[0].id+"",c,f,p,w,_,v,B="•",$,h,b=l[0].type.toUpperCase()+"",y,G,z,V="•",I,O,D,H,T="•",Z,Q,q,ee,W,J,ne,te="•",be,Ee,je,Se,xe="•",et,Te,tt,We,K,X,he,Ae="Comments",Pe,me,Re;w=new kn({props:{value:l[0].rating}}),O=new Wt({props:{value:l[0].score}}),Q=new Jt({props:{value:l[0].change}}),W=new wn({props:{url:"/post?id="+l[0].id+"&src="+encodeURIComponent(l[3])}}),Ee=new Qt({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id}}),Te=new yn({props:{url:l[3]}});let oe=l[0].source&&$t(l),Ge=ye(Object.entries(l[1])),re=[];for(let U=0;U<Ge.length;U+=1)re[U]=vt(ht(l,Ge,U));const rn=U=>E(re[U],1,1,()=>{re[U]=null});return me=new Yt({props:{post:l[0]}}),{c(){e=C("div"),n=C("img"),s=P(),r=C("h1"),o=se("Post "),i=C("b"),a=se("#"),c=se(u),f=P(),p=C("div"),L(w.$$.fragment),_=P(),v=C("span"),v.textContent=B,$=P(),h=C("span"),y=se(b),G=P(),z=C("span"),z.textContent=V,I=P(),L(O.$$.fragment),D=P(),H=C("span"),H.textContent=T,Z=P(),L(Q.$$.fragment),q=P(),ee=C("div"),L(W.$$.fragment),J=P(),ne=C("span"),ne.textContent=te,be=P(),L(Ee.$$.fragment),je=P(),Se=C("span"),Se.textContent=xe,et=P(),L(Te.$$.fragment),tt=P(),oe&&oe.c(),We=P(),K=C("div");for(let U=0;U<re.length;U+=1)re[U].c();X=P(),he=C("h3"),he.textContent=Ae,Pe=P(),L(me.$$.fragment),this.h()},l(U){e=S(U,"DIV",{class:!0});var Y=R(e);n=S(Y,"IMG",{class:!0,src:!0,alt:!0}),s=N(Y),r=S(Y,"H1",{class:!0});var Ne=R(r);o=le(Ne,"Post "),i=S(Ne,"B",{});var Je=R(i);a=le(Je,"#"),c=le(Je,u),Je.forEach(m),Ne.forEach(m),f=N(Y),p=S(Y,"DIV",{class:!0});var ge=R(p);j(w.$$.fragment,ge),_=N(ge),v=S(ge,"SPAN",{"data-svelte-h":!0}),ue(v)!=="svelte-7hh8jk"&&(v.textContent=B),$=N(ge),h=S(ge,"SPAN",{});var nt=R(h);y=le(nt,b),nt.forEach(m),G=N(ge),z=S(ge,"SPAN",{"data-svelte-h":!0}),ue(z)!=="svelte-7hh8jk"&&(z.textContent=V),I=N(ge),j(O.$$.fragment,ge),D=N(ge),H=S(ge,"SPAN",{"data-svelte-h":!0}),ue(H)!=="svelte-7hh8jk"&&(H.textContent=T),Z=N(ge),j(Q.$$.fragment,ge),ge.forEach(m),q=N(Y),ee=S(Y,"DIV",{class:!0});var $e=R(ee);j(W.$$.fragment,$e),J=N($e),ne=S($e,"SPAN",{"data-svelte-h":!0}),ue(ne)!=="svelte-7hh8jk"&&(ne.textContent=te),be=N($e),j(Ee.$$.fragment,$e),je=N($e),Se=S($e,"SPAN",{"data-svelte-h":!0}),ue(Se)!=="svelte-7hh8jk"&&(Se.textContent=xe),et=N($e),j(Te.$$.fragment,$e),tt=N($e),oe&&oe.l($e),$e.forEach(m),We=N(Y),K=S(Y,"DIV",{});var Fe=R(K);for(let Qe=0;Qe<re.length;Qe+=1)re[Qe].l(Fe);X=N(Fe),he=S(Fe,"H3",{class:!0,"data-svelte-h":!0}),ue(he)!=="svelte-kc6sae"&&(he.textContent=Ae),Pe=N(Fe),j(me.$$.fragment,Fe),Fe.forEach(m),Y.forEach(m),this.h()},h(){g(n,"class","preview svelte-1tsjp7g"),we(n.src,t=l[2])||g(n,"src",t),g(n,"alt","preview"),g(r,"class","svelte-1tsjp7g"),g(p,"class","flex-row svelte-1tsjp7g"),g(ee,"class","flex-row svelte-1tsjp7g"),g(he,"class","svelte-1tsjp7g"),g(e,"class","details svelte-1tsjp7g")},m(U,Y){A(U,e,Y),d(e,n),d(e,s),d(e,r),d(r,o),d(r,i),d(i,a),d(i,c),d(e,f),d(e,p),F(w,p,null),d(p,_),d(p,v),d(p,$),d(p,h),d(h,y),d(p,G),d(p,z),d(p,I),F(O,p,null),d(p,D),d(p,H),d(p,Z),F(Q,p,null),d(e,q),d(e,ee),F(W,ee,null),d(ee,J),d(ee,ne),d(ee,be),F(Ee,ee,null),d(ee,je),d(ee,Se),d(ee,et),F(Te,ee,null),d(ee,tt),oe&&oe.m(ee,null),d(e,We),d(e,K);for(let Ne=0;Ne<re.length;Ne+=1)re[Ne]&&re[Ne].m(K,null);d(K,X),d(K,he),d(K,Pe),F(me,K,null),Re=!0},p(U,[Y]){(!Re||Y&4&&!we(n.src,t=U[2]))&&g(n,"src",t),(!Re||Y&1)&&u!==(u=U[0].id+"")&&Ce(c,u);const Ne={};Y&1&&(Ne.value=U[0].rating),w.$set(Ne),(!Re||Y&1)&&b!==(b=U[0].type.toUpperCase()+"")&&Ce(y,b);const Je={};Y&1&&(Je.value=U[0].score),O.$set(Je);const ge={};Y&1&&(ge.value=U[0].change),Q.$set(ge);const nt={};Y&9&&(nt.url="/post?id="+U[0].id+"&src="+encodeURIComponent(U[3])),W.$set(nt);const $e={};Y&1&&($e.source="https://rule34.xxx/index.php?page=post&s=view&id="+U[0].id),Ee.$set($e);const Fe={};if(Y&8&&(Fe.url=U[3]),Te.$set(Fe),U[0].source?oe?(oe.p(U,Y),Y&1&&k(oe,1)):(oe=$t(U),oe.c(),k(oe,1),oe.m(ee,null)):oe&&(_e(),E(oe,1,1,()=>{oe=null}),pe()),Y&2){Ge=ye(Object.entries(U[1]));let ve;for(ve=0;ve<Ge.length;ve+=1){const ut=ht(U,Ge,ve);re[ve]?(re[ve].p(ut,Y),k(re[ve],1)):(re[ve]=vt(ut),re[ve].c(),k(re[ve],1),re[ve].m(K,X))}for(_e(),ve=Ge.length;ve<re.length;ve+=1)rn(ve);pe()}const Qe={};Y&1&&(Qe.post=U[0]),me.$set(Qe)},i(U){if(!Re){k(w.$$.fragment,U),k(O.$$.fragment,U),k(Q.$$.fragment,U),k(W.$$.fragment,U),k(Ee.$$.fragment,U),k(Te.$$.fragment,U),k(oe);for(let Y=0;Y<Ge.length;Y+=1)k(re[Y]);k(me.$$.fragment,U),Re=!0}},o(U){E(w.$$.fragment,U),E(O.$$.fragment,U),E(Q.$$.fragment,U),E(W.$$.fragment,U),E(Ee.$$.fragment,U),E(Te.$$.fragment,U),E(oe),re=re.filter(Boolean);for(let Y=0;Y<re.length;Y+=1)E(re[Y]);E(me.$$.fragment,U),Re=!1},d(U){U&&m(e),M(w),M(O),M(Q),M(W),M(Ee),M(Te),oe&&oe.d(),Ke(re,U),M(me)}}}function as(l,e,n){let t,s,r,{post:o}=e;return l.$$set=i=>{"post"in i&&n(0,o=i.post)},l.$$.update=()=>{l.$$.dirty&1&&n(3,t=o.file_url),l.$$.dirty&1&&n(2,s=o.sample_url),l.$$.dirty&1&&n(1,r=o.tags.reduce((i,a)=>(i[a.type]===void 0&&(i[a.type]=[]),i[a.type].push(a),i),{}))},[o,r,s,t]}class cs extends ae{constructor(e){super(),ce(this,e,as,is,ie,{post:0})}}const Ye=new IntersectionObserver(l=>{for(const e of l)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function us(l){const e=l.slice(),n=En(e[0].file_url,e[0].sample_url,e[0].preview_url);e[5]=n;const t=e[5].animated;return e[6]=t,e}function fs(l){const e=l.slice(),n=Xt(e[0].file_url,e[0].sample_url,e[0].preview_url);e[5]=n;const t=e[5].animated;e[6]=t;const s=e[5].static;return e[7]=s,e}function _s(l){const e=l.slice(),n=e[0].sample_url;return e[4]=n,e}function ps(l){let e,n,t,s;return{c(){e=C("img"),this.h()},l(r){e=S(r,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){we(e.src,n=l[6])||g(e,"src",n),g(e,"alt",t="[GIF] post #"+l[0].id),g(e,"title",s="[GIF] post #"+l[0].id),g(e,"class","svelte-lra0af")},m(r,o){A(r,e,o)},p(r,o){o&1&&!we(e.src,n=r[6])&&g(e,"src",n),o&1&&t!==(t="[GIF] post #"+r[0].id)&&g(e,"alt",t),o&1&&s!==(s="[GIF] post #"+r[0].id)&&g(e,"title",s)},d(r){r&&m(e)}}}function bt(l){let e,n,t,s;return{c(){e=C("video"),this.h()},l(r){e=S(r,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),R(e).forEach(m),this.h()},h(){we(e.src,n=l[6])||g(e,"src",n),g(e,"poster",t=l[7]),e.loop=!0,g(e,"title",s="[VIDEO] post #"+l[0].id),e.controls=!0,g(e,"preload","metadata"),e.autoplay=!0,g(e,"class","svelte-lra0af")},m(r,o){A(r,e,o),l[2](e)},p(r,o){o&1&&!we(e.src,n=r[6])&&g(e,"src",n),o&1&&t!==(t=r[7])&&g(e,"poster",t),o&1&&s!==(s="[VIDEO] post #"+r[0].id)&&g(e,"title",s)},d(r){r&&m(e),l[2](null)}}}function kt(l){let e,n,t,s;return{c(){e=C("img"),this.h()},l(r){e=S(r,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){we(e.src,n=l[4])||g(e,"src",n),g(e,"alt",t="[IMAGE] post #"+l[0].id),g(e,"title",s="[IMAGE] post #"+l[0].id),g(e,"class","svelte-lra0af")},m(r,o){A(r,e,o)},p(r,o){o&1&&!we(e.src,n=r[4])&&g(e,"src",n),o&1&&t!==(t="[IMAGE] post #"+r[0].id)&&g(e,"alt",t),o&1&&s!==(s="[IMAGE] post #"+r[0].id)&&g(e,"title",s)},d(r){r&&m(e)}}}function gs(l){let e;function n(o,i){return o[0].type==="image"?kt:o[0].type==="video"?bt:ps}function t(o,i){return i===kt?_s(o):i===bt?fs(o):us(o)}let s=n(l),r=s(t(l,s));return{c(){e=C("div"),r.c()},l(o){e=S(o,"DIV",{});var i=R(e);r.l(i),i.forEach(m)},m(o,i){A(o,e,i),r.m(e,null)},p(o,[i]){s===(s=n(o))&&r?r.p(t(o,s),i):(r.d(1),r=s(t(o,s)),r&&(r.c(),r.m(e,null)))},i:x,o:x,d(o){o&&m(e),r.d()}}}function ds(l,e,n){let{post:t}=e,s;const r=i=>{t.type==="video"&&s&&(i.key==="ArrowLeft"&&(i.preventDefault(),i.stopPropagation(),n(1,s.currentTime=Math.max(0,s.currentTime-5),s)),i.key==="ArrowRight"&&(i.preventDefault(),i.stopPropagation(),n(1,s.currentTime=Math.min(s.duration,s.currentTime+5),s)))};rt(()=>{s&&(Ye==null||Ye.observe(s)),document.addEventListener("keydown",r)}),ot(()=>{s&&(Ye==null||Ye.unobserve(s)),document.removeEventListener("keydown",r)});function o(i){ke[i?"unshift":"push"](()=>{s=i,n(1,s)})}return l.$$set=i=>{"post"in i&&n(0,t=i.post)},[t,s,o]}class ms extends ae{constructor(e){super(),ce(this,e,ds,gs,ie,{post:0})}}function hs(l){let e,n,t;return{c(){e=C("img"),this.h()},l(s){e=S(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){we(e.src,n=l[2])||g(e,"src",n),g(e,"alt",t="post #"+l[0].id),g(e,"class","svelte-itxz72"),Ie(e,"top",l[1])},m(s,r){A(s,e,r)},p(s,[r]){r&4&&!we(e.src,n=s[2])&&g(e,"src",n),r&1&&t!==(t="post #"+s[0].id)&&g(e,"alt",t),r&2&&Ie(e,"top",s[1])},i:x,o:x,d(s){s&&m(e)}}}function $s(l,e,n){let t,{post:s}=e,{offset:r}=e;return l.$$set=o=>{"post"in o&&n(0,s=o.post),"offset"in o&&n(1,r=o.offset)},l.$$.update=()=>{l.$$.dirty&1&&n(2,t=Cn(s.sample_url)?s.preview_url:s.sample_url)},[s,r,t]}class sn extends ae{constructor(e){super(),ce(this,e,$s,hs,ie,{post:0,offset:1})}}const vs=()=>{const{subscribe:e,set:n}=Tn(Pn.FullscreenHintDone,!1,On,Nn);return{subscribe:e,set:n,reset:()=>n(!1)}},wt=vs();function yt(l,e,n){const t=l.slice();return t[17]=e[n],t[19]=n,t}function Et(l){let e,n;return e=new sn({props:{post:l[3],offset:l[6]}}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,s){const r={};s&8&&(r.post=t[3]),s&64&&(r.offset=t[6]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ct(l){let e,n;return e=new sn({props:{post:l[4],offset:l[7]}}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,s){const r={};s&16&&(r.post=t[4]),s&128&&(r.offset=t[7]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function St(l){let e,n=`${l[19]*100}vh`;return{c(){e=C("div"),this.h()},l(t){e=S(t,"DIV",{class:!0}),R(e).forEach(m),this.h()},h(){g(e,"class","pseudo snap-item svelte-ed0gda"),Ie(e,"top",n)},m(t,s){A(t,e,s)},p:x,d(t){t&&m(e)}}}function bs(l){let e,n,t,s,r,o,i,a,u,c,f,p,w,_=l[3]&&Et(l);s=new ms({props:{post:l[2]}}),o=new cs({props:{post:l[2]}});let v=l[4]&&Ct(l),B=ye({length:l[9].posts.length}),$=[];for(let h=0;h<B.length;h+=1)$[h]=St(yt(l,B,h));return c=new nn({props:{absoluteTop:l[9].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),c.$on("intersection",l[14]),{c(){e=C("div"),_&&_.c(),n=P(),t=C("div"),L(s.$$.fragment),r=P(),L(o.$$.fragment),i=P(),v&&v.c(),a=P();for(let h=0;h<$.length;h+=1)$[h].c();u=P(),L(c.$$.fragment),this.h()},l(h){e=S(h,"DIV",{class:!0});var b=R(e);_&&_.l(b),n=N(b),t=S(b,"DIV",{class:!0});var y=R(t);j(s.$$.fragment,y),r=N(y),j(o.$$.fragment,y),y.forEach(m),i=N(b),v&&v.l(b),a=N(b);for(let G=0;G<$.length;G+=1)$[G].l(b);u=N(b),j(c.$$.fragment,b),b.forEach(m),this.h()},h(){g(t,"class","screen snap-container horizontal current svelte-ed0gda"),De(t,"hint",!l[8]),Ie(t,"top",l[5]),g(e,"class","root screen snap-container svelte-ed0gda")},m(h,b){A(h,e,b),_&&_.m(e,null),d(e,n),d(e,t),F(s,t,null),d(t,r),F(o,t,null),l[13](t),d(e,i),v&&v.m(e,null),d(e,a);for(let y=0;y<$.length;y+=1)$[y]&&$[y].m(e,null);d(e,u),F(c,e,null),l[15](e),f=!0,p||(w=de(e,"scroll",l[11]),p=!0)},p(h,[b]){h[3]?_?(_.p(h,b),b&8&&k(_,1)):(_=Et(h),_.c(),k(_,1),_.m(e,n)):_&&(_e(),E(_,1,1,()=>{_=null}),pe());const y={};b&4&&(y.post=h[2]),s.$set(y);const G={};if(b&4&&(G.post=h[2]),o.$set(G),(!f||b&256)&&De(t,"hint",!h[8]),b&32&&Ie(t,"top",h[5]),h[4]?v?(v.p(h,b),b&16&&k(v,1)):(v=Ct(h),v.c(),k(v,1),v.m(e,a)):v&&(_e(),E(v,1,1,()=>{v=null}),pe()),b&512){B=ye({length:h[9].posts.length});let V;for(V=0;V<B.length;V+=1){const I=yt(h,B,V);$[V]?$[V].p(I,b):($[V]=St(I),$[V].c(),$[V].m(e,u))}for(;V<$.length;V+=1)$[V].d(1);$.length=B.length}const z={};b&512&&(z.absoluteTop=h[9].posts.length*100+"vh"),c.$set(z)},i(h){f||(k(_),k(s.$$.fragment,h),k(o.$$.fragment,h),k(v),k(c.$$.fragment,h),f=!0)},o(h){E(_),E(s.$$.fragment,h),E(o.$$.fragment,h),E(v),E(c.$$.fragment,h),f=!1},d(h){h&&m(e),_&&_.d(),M(s),M(o),l[13](null),v&&v.d(),Ke($,h),M(c),l[15](null),p=!1,w()}}}function ks(l,e,n){let t,s;fe(l,wt,y=>n(8,t=y)),fe(l,Ze,y=>n(9,s=y));let{index:r}=e,o,i,a=s.posts[r],u=r>0?s.posts[r-1]:void 0,c=r<s.posts.length-1?s.posts[r+1]:void 0,f=`${r*100}vh`,p=`${(r-1)*100}vh`,w=`${(r+1)*100}vh`;const _=Be(),v=y=>{requestAnimationFrame(()=>{const G=y.target,z=G.getBoundingClientRect().height,V=G.scrollTop/z,I=Math.round(V);I!=r&&(n(12,r=I),n(2,a=s.posts[r]),n(3,u=r>0?s.posts[r-1]:void 0),n(4,c=r<s.posts.length-1?s.posts[r+1]:void 0),n(5,f=`${r*100}vh`),n(6,p=`${(r-1)*100}vh`),n(7,w=`${(r+1)*100}vh`),i&&n(1,i.scrollLeft=0,i))})},B=y=>{y.key==="d"&&(y.preventDefault(),y.stopPropagation(),i.scrollLeft===0?i.scrollBy({left:o.clientWidth,top:0,behavior:"smooth"}):i.scrollBy({left:-o.clientWidth,top:0,behavior:"smooth"})),y.key==="ArrowUp"&&(y.preventDefault(),y.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(r-1),behavior:"smooth"})),y.key==="ArrowDown"&&(y.preventDefault(),y.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(r+1),behavior:"smooth"}))};rt(()=>{i&&(i.scrollIntoView(!0),n(1,i.scrollLeft=0,i)),document.addEventListener("keydown",B)}),ot(()=>{zt(wt,t=!0,t),document.removeEventListener("keydown",B)});function $(y){ke[y?"unshift":"push"](()=>{i=y,n(1,i)})}const h=()=>{_("endreached")};function b(y){ke[y?"unshift":"push"](()=>{o=y,n(0,o)})}return l.$$set=y=>{"index"in y&&n(12,r=y.index)},[o,i,a,u,c,f,p,w,t,s,_,v,r,$,h,b]}class ws extends ae{constructor(e){super(),ce(this,e,ks,bs,ie,{index:12})}}function ys(l){let e;return{c(){e=C("i"),this.h()},l(n){e=S(n,"I",{class:!0}),R(e).forEach(m),this.h()},h(){g(e,"class","codicon codicon-close")},m(n,t){A(n,e,t)},p:x,d(n){n&&m(e)}}}function Es(l){let e,n,t,s,r;function o(a){l[2](a)}let i={};return l[0]!==void 0&&(i.index=l[0]),e=new ws({props:i}),ke.push(()=>Ve(e,"index",o)),e.$on("endreached",l[3]),s=new vn({props:{class:"button-close",$$slots:{default:[ys]},$$scope:{ctx:l}}}),s.$on("click",l[1]),{c(){L(e.$$.fragment),t=P(),L(s.$$.fragment)},l(a){j(e.$$.fragment,a),t=N(a),j(s.$$.fragment,a)},m(a,u){F(e,a,u),A(a,t,u),F(s,a,u),r=!0},p(a,u){const c={};!n&&u&1&&(n=!0,c.index=a[0],Me(()=>n=!1)),e.$set(c);const f={};u&128&&(f.$$scope={dirty:u,ctx:a}),s.$set(f)},i(a){r||(k(e.$$.fragment,a),k(s.$$.fragment,a),r=!0)},o(a){E(e.$$.fragment,a),E(s.$$.fragment,a),r=!1},d(a){a&&m(t),M(e,a),M(s,a)}}}function Cs(l){let e,n;return e=new ls({props:{$$slots:{default:[Es]},$$scope:{ctx:l}}}),e.$on("close",l[1]),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,[s]){const r={};s&129&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ss(l,e,n){let{index:t}=e;const s=Be(),r=()=>{s("close",t)},o=c=>{c.key==="f"&&(c.preventDefault(),c.stopPropagation(),r())},i=()=>{var c,f;(((c=history.state)==null?void 0:c.fullscreen)===void 0||((f=history.state)==null?void 0:f.fullscreen)===!1)&&r()};rt(()=>{window.addEventListener("popstate",i),document.addEventListener("keydown",o)}),ot(()=>{window.removeEventListener("popstate",i),document.removeEventListener("keydown",o)});function a(c){t=c,n(0,t)}function u(c){Xe.call(this,l,c)}return l.$$set=c=>{"index"in c&&n(0,t=c.index)},[t,r,a,u]}class Is extends ae{constructor(e){super(),ce(this,e,Ss,Cs,ie,{index:0})}}function It(l){let e,n=l[0].type==="video"?"▶":"GIF",t;return{c(){e=C("span"),t=se(n),this.h()},l(s){e=S(s,"SPAN",{class:!0});var r=R(e);t=le(r,n),r.forEach(m),this.h()},h(){g(e,"class","type svelte-rfj0jo")},m(s,r){A(s,e,r),d(e,t)},p(s,r){r&1&&n!==(n=s[0].type==="video"?"▶":"GIF")&&Ce(t,n)},d(s){s&&m(e)}}}function Ds(l){let e,n,t,s,r,o,i=Oe(l[0].score)+"",a,u,c,f,p=l[0].type!=="image"&&It(l);return{c(){e=C("div"),n=C("img"),s=P(),p&&p.c(),r=P(),o=C("span"),a=se(i),this.h()},l(w){e=S(w,"DIV",{id:!0,class:!0,style:!0});var _=R(e);n=S(_,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),s=N(_),p&&p.l(_),r=N(_),o=S(_,"SPAN",{class:!0});var v=R(o);a=le(v,i),v.forEach(m),_.forEach(m),this.h()},h(){we(n.src,t=l[1])||g(n,"src",t),g(n,"alt","post"),g(n,"class","post-media svelte-rfj0jo"),g(n,"tabindex","-1"),g(n,"loading","lazy"),g(o,"class","score svelte-rfj0jo"),g(e,"id",u=st(l[0].id)),g(e,"class","post svelte-rfj0jo"),Ie(e,"grid-row","span "+l[2]),De(e,"open",open)},m(w,_){A(w,e,_),d(e,n),d(e,s),p&&p.m(e,null),d(e,r),d(e,o),d(o,a),c||(f=[de(e,"click",l[3]),de(e,"keydown",l[4])],c=!0)},p(w,[_]){_&2&&!we(n.src,t=w[1])&&g(n,"src",t),w[0].type!=="image"?p?p.p(w,_):(p=It(w),p.c(),p.m(e,r)):p&&(p.d(1),p=null),_&1&&i!==(i=Oe(w[0].score)+"")&&Ce(a,i),_&1&&u!==(u=st(w[0].id))&&g(e,"id",u),_&0&&De(e,"open",open)},i:x,o:x,d(w){w&&m(e),p&&p.d(),c=!1,lt(f)}}}let Dt=5;function Ts(l,e,n){let t,{post:s}=e,r=1/3,o=s.width/s.height,i=Math.max(Math.min(Math.round(Dt/o),Dt/r),2);console.log(i);const a=f=>f.endsWith(".jpg")||f.endsWith(".jpeg")||f.endsWith(".png")||f.endsWith(".webp");function u(f){Xe.call(this,l,f)}const c=f=>{var p;(xt(f)||f.key==="f")&&((p=f.target)==null||p.click())};return l.$$set=f=>{"post"in f&&n(0,s=f.post)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=a(s.sample_url)?s.sample_url:s.preview_url)},[s,t,i,u,c]}class Ps extends ae{constructor(e){super(),ce(this,e,Ts,Ds,ie,{post:0})}}function Tt(l,e,n){const t=l.slice();t[2]=e[n];const s=t[2].host.replace("www.","");t[3]=s;const r=t[1][t[3]]??t[1].default;return t[4]=r[0],t[5]=r[1],t}function Pt(l){let e,n,t=l[3]+"",s,r,o;return{c(){e=C("li"),n=C("a"),s=se(t),o=P(),this.h()},l(i){e=S(i,"LI",{});var a=R(e);n=S(a,"A",{href:!0,class:!0,style:!0});var u=R(n);s=le(u,t),u.forEach(m),o=N(a),a.forEach(m),this.h()},h(){g(n,"href",r=l[2].toString()),g(n,"class","codicon codicon-link-external svelte-1s08vnv"),Ie(n,"background-color",l[4]),Ie(n,"color",l[5])},m(i,a){A(i,e,a),d(e,n),d(n,s),d(e,o)},p(i,a){a&1&&t!==(t=i[3]+"")&&Ce(s,t),a&1&&r!==(r=i[2].toString())&&g(n,"href",r),a&1&&Ie(n,"background-color",i[4]),a&1&&Ie(n,"color",i[5])},d(i){i&&m(e)}}}function Ns(l){let e,n=ye(l[0]),t=[];for(let s=0;s<n.length;s+=1)t[s]=Pt(Tt(l,n,s));return{c(){e=C("ol");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=S(s,"OL",{class:!0});var r=R(e);for(let o=0;o<t.length;o+=1)t[o].l(r);r.forEach(m),this.h()},h(){g(e,"class","svelte-1s08vnv")},m(s,r){A(s,e,r);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(s,[r]){if(r&3){n=ye(s[0]);let o;for(o=0;o<n.length;o+=1){const i=Tt(s,n,o);t[o]?t[o].p(i,r):(t[o]=Pt(i),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},i:x,o:x,d(s){s&&m(e),Ke(t,s)}}}function Os(l,e,n){let{links:t}=e;const s={"kurosearch.com":["crimson","white"],"rule34.xxx":["#aae5a4","black"],"newgrounds.com":["#fda238","black"],"twitter.com":["rgb(29, 155, 240)","white"],"x.com":["rgb(29, 155, 240)","white"],"pornhub.com":["#f90","black"],"zone-archive.com":["#59396A","white"],"subscribestar.adult":["#ff4081","white"],"redgifs.com":["#E5194D","white"],default:["var(--background-2)","white"]};return l.$$set=r=>{"links"in r&&n(0,t=r.links)},[t,s]}class As extends ae{constructor(e){super(),ce(this,e,Os,Ns,ie,{links:0})}}function Nt(l){let e,n=Oe(l[0].comment_count)+"",t,s,r;return{c(){e=C("button"),t=se(n),this.h()},l(o){e=S(o,"BUTTON",{class:!0});var i=R(e);t=le(i,n),i.forEach(m),this.h()},h(){g(e,"class","codicon codicon-comment svelte-nhpj3u"),De(e,"active",l[1]==="comments")},m(o,i){A(o,e,i),d(e,t),s||(r=de(e,"click",l[5]),s=!0)},p(o,i){i&1&&n!==(n=Oe(o[0].comment_count)+"")&&Ce(t,n),i&2&&De(e,"active",o[1]==="comments")},d(o){o&&m(e),s=!1,r()}}}function Rs(l){let e,n,t,s,r="•",o,i,a,u,c,f,p=Oe(l[2])+"",w,_,v,B,$=Oe(l[0].tags.length)+"",h,b,y,G;n=new Jt({props:{value:l[0].change}}),i=new Wt({props:{value:l[0].score}});let z=l[0].comment_count&&Nt(l);return{c(){e=C("div"),L(n.$$.fragment),t=P(),s=C("span"),s.textContent=r,o=P(),L(i.$$.fragment),a=P(),u=C("span"),c=P(),f=C("button"),w=se(p),_=P(),z&&z.c(),v=P(),B=C("button"),h=se($),this.h()},l(V){e=S(V,"DIV",{class:!0});var I=R(e);j(n.$$.fragment,I),t=N(I),s=S(I,"SPAN",{"data-svelte-h":!0}),ue(s)!=="svelte-7hh8jk"&&(s.textContent=r),o=N(I),j(i.$$.fragment,I),a=N(I),u=S(I,"SPAN",{class:!0}),R(u).forEach(m),c=N(I),f=S(I,"BUTTON",{class:!0});var O=R(f);w=le(O,p),O.forEach(m),_=N(I),z&&z.l(I),v=N(I),B=S(I,"BUTTON",{class:!0});var D=R(B);h=le(D,$),D.forEach(m),I.forEach(m),this.h()},h(){g(u,"class","divider svelte-nhpj3u"),g(f,"class","codicon codicon-link svelte-nhpj3u"),De(f,"active",l[1]==="links"),g(B,"class","codicon codicon-tag svelte-nhpj3u"),De(B,"active",l[1]==="tags"),g(e,"class","summary svelte-nhpj3u")},m(V,I){A(V,e,I),F(n,e,null),d(e,t),d(e,s),d(e,o),F(i,e,null),d(e,a),d(e,u),d(e,c),d(e,f),d(f,w),d(e,_),z&&z.m(e,null),d(e,v),d(e,B),d(B,h),b=!0,y||(G=[de(f,"click",l[4]),de(B,"click",l[6])],y=!0)},p(V,[I]){const O={};I&1&&(O.value=V[0].change),n.$set(O);const D={};I&1&&(D.value=V[0].score),i.$set(D),(!b||I&4)&&p!==(p=Oe(V[2])+"")&&Ce(w,p),(!b||I&2)&&De(f,"active",V[1]==="links"),V[0].comment_count?z?z.p(V,I):(z=Nt(V),z.c(),z.m(e,v)):z&&(z.d(1),z=null),(!b||I&1)&&$!==($=Oe(V[0].tags.length)+"")&&Ce(h,$),(!b||I&2)&&De(B,"active",V[1]==="tags")},i(V){b||(k(n.$$.fragment,V),k(i.$$.fragment,V),b=!0)},o(V){E(n.$$.fragment,V),E(i.$$.fragment,V),b=!1},d(V){V&&m(e),M(n),M(i),z&&z.d(),y=!1,lt(G)}}}function Ls(l,e,n){const t=Be();let{post:s}=e,{active:r}=e,{links:o}=e;const i=()=>t("links"),a=()=>t("comments"),u=()=>t("tags");return l.$$set=c=>{"post"in c&&n(0,s=c.post),"active"in c&&n(1,r=c.active),"links"in c&&n(2,o=c.links)},[s,r,o,t,i,a,u]}class js extends ae{constructor(e){super(),ce(this,e,Ls,Rs,ie,{post:0,active:1,links:2})}}function Fs(l){let e,n='<i class="codicon codicon-screen-full"></i>',t,s;return{c(){e=C("button"),e.innerHTML=n,this.h()},l(r){e=S(r,"BUTTON",{type:!0,title:!0,class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-hnv5zq"&&(e.innerHTML=n),this.h()},h(){g(e,"type","button"),g(e,"title","Enter Fullscreen mode"),g(e,"class","svelte-txn4jo")},m(r,o){A(r,e,o),t||(s=de(e,"click",l[0]),t=!0)},p:x,i:x,o:x,d(r){r&&m(e),t=!1,s()}}}function Ms(l){function e(n){Xe.call(this,l,n)}return[e]}class Vs extends ae{constructor(e){super(),ce(this,e,Ms,Fs,ie,{})}}function Bs(l){const e=l.slice(),n=Xt(e[1].file_url,e[1].sample_url,e[1].preview_url);return e[11]=n,e}function zs(l){let e,n;return e=new Sn({props:{post:l[1]}}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,s){const r={};s&2&&(r.post=t[1]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Us(l){let e,n;return e=new In({props:{src:l[11].animated,poster:l[11].static,width:l[1].width,height:l[1].height,loop:l[2]||_t(l[1].tags)}}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,s){const r={};s&2&&(r.src=t[11].animated),s&2&&(r.poster=t[11].static),s&2&&(r.width=t[1].width),s&2&&(r.height=t[1].height),s&6&&(r.loop=t[2]||_t(t[1].tags)),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Gs(l){let e,n;return e=new Dn({props:{post:l[1]}}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,s){const r={};s&2&&(r.post=t[1]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Hs(l){let e,n;return e=new As({props:{links:l[5]}}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p:x,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function qs(l){let e,n;return e=new Yt({props:{post:l[1]}}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,s){const r={};s&2&&(r.post=t[1]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ks(l){let e,n;return e=new Zt({props:{tags:l[1].tags}}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,s){const r={};s&2&&(r.tags=t[1].tags),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ws(l){let e,n,t,s,r,o,i,a,u,c,f,p,w,_,v,B;const $=[Gs,Us,zs],h=[];function b(I,O){return I[1].type==="image"?0:I[1].type==="video"?1:2}function y(I,O){return O===1?Bs(I):I}t=b(l),s=h[t]=$[t](y(l,t)),o=new Vs({}),o.$on("click",l[6]),u=new js({props:{active:l[0],post:l[1],links:l[5].length}}),u.$on("tags",l[7]),u.$on("comments",l[8]),u.$on("links",l[9]);const G=[Ks,qs,Hs],z=[];function V(I,O){return I[0]==="tags"?0:I[0]==="comments"?1:I[0]==="links"?2:-1}return~(f=V(l))&&(p=z[f]=G[f](l)),{c(){e=C("div"),n=C("div"),s.c(),r=P(),L(o.$$.fragment),i=P(),a=C("div"),L(u.$$.fragment),c=P(),p&&p.c(),this.h()},l(I){e=S(I,"DIV",{id:!0,class:!0});var O=R(e);n=S(O,"DIV",{});var D=R(n);s.l(D),D.forEach(m),r=N(O),j(o.$$.fragment,O),i=N(O),a=S(O,"DIV",{class:!0});var H=R(a);j(u.$$.fragment,H),c=N(H),p&&p.l(H),H.forEach(m),O.forEach(m),this.h()},h(){g(a,"class","details svelte-iu0mgu"),g(e,"id",w=st(l[1].id)),g(e,"class","post svelte-iu0mgu"),De(e,"openTab",l[0])},m(I,O){A(I,e,O),d(e,n),h[t].m(n,null),d(e,r),F(o,e,null),d(e,i),d(e,a),F(u,a,null),d(a,c),~f&&z[f].m(a,null),_=!0,v||(B=de(e,"keydown",l[10]),v=!0)},p(I,[O]){let D=t;t=b(I),t===D?h[t].p(y(I,t),O):(_e(),E(h[D],1,1,()=>{h[D]=null}),pe(),s=h[t],s?s.p(y(I,t),O):(s=h[t]=$[t](y(I,t)),s.c()),k(s,1),s.m(n,null));const H={};O&1&&(H.active=I[0]),O&2&&(H.post=I[1]),u.$set(H);let T=f;f=V(I),f===T?~f&&z[f].p(I,O):(p&&(_e(),E(z[T],1,1,()=>{z[T]=null}),pe()),~f?(p=z[f],p?p.p(I,O):(p=z[f]=G[f](I),p.c()),k(p,1),p.m(a,null)):p=null),(!_||O&2&&w!==(w=st(I[1].id)))&&g(e,"id",w),(!_||O&1)&&De(e,"openTab",I[0])},i(I){_||(k(s),k(o.$$.fragment,I),k(u.$$.fragment,I),k(p),_=!0)},o(I){E(s),E(o.$$.fragment,I),E(u.$$.fragment,I),E(p),_=!1},d(I){I&&m(e),h[t].d(),M(o),M(u),~f&&z[f].d(),v=!1,B()}}}function Js(l,e,n){let t;fe(l,An,_=>n(2,t=_));const s=Be();let{post:r}=e,{openTab:o=void 0}=e;const i=_=>{o===_?n(0,o=void 0):n(0,o=_)},a=[new URL(`https://kurosearch.com/post?id=${r.id}&src=${encodeURIComponent(r.file_url)}`),new URL(`https://rule34.xxx/index.php?page=post&s=view&id=${r.id}`),...r.source.split(" ").filter(_=>Rn(_)).map(_=>new URL(_))],u=()=>s("fullscreen"),c=()=>i("tags"),f=()=>i("comments"),p=()=>i("links"),w=_=>{_.key==="f"&&s("fullscreen")};return l.$$set=_=>{"post"in _&&n(1,r=_.post),"openTab"in _&&n(0,o=_.openTab)},[o,r,t,s,i,a,u,c,f,p,w]}class Qs extends ae{constructor(e){super(),ce(this,e,Js,Ws,ie,{post:1,openTab:0})}}function Ot(l,e,n){const t=l.slice();return t[5]=e[n][0],t[6]=e[n][1],t}function At(l){let e,n,t,s=!1,r,o,i,a=l[6]+"",u,c,f,p,w;return f=_n(l[4][0]),{c(){e=C("input"),o=P(),i=C("label"),u=se(a),this.h()},l(_){e=S(_,"INPUT",{type:!0,name:!0,id:!0,class:!0}),o=N(_),i=S(_,"LABEL",{for:!0,class:!0});var v=R(i);u=le(v,a),v.forEach(m),this.h()},h(){g(e,"type","radio"),g(e,"name",n="group-"+l[1]),e.__value=t=l[5],Ue(e,e.__value),g(e,"id",r=l[1]+"-"+l[5]),g(e,"class","svelte-16oxivo"),g(i,"for",c=l[1]+"-"+l[5]),g(i,"class","svelte-16oxivo"),f.p(e)},m(_,v){A(_,e,v),e.checked=e.__value===l[0],A(_,o,v),A(_,i,v),d(i,u),p||(w=de(e,"change",l[3]),p=!0)},p(_,v){v&2&&n!==(n="group-"+_[1])&&g(e,"name",n),v&4&&t!==(t=_[5])&&(e.__value=t,Ue(e,e.__value),s=!0),v&6&&r!==(r=_[1]+"-"+_[5])&&g(e,"id",r),(s||v&5)&&(e.checked=e.__value===_[0]),v&4&&a!==(a=_[6]+"")&&Ce(u,a),v&6&&c!==(c=_[1]+"-"+_[5])&&g(i,"for",c)},d(_){_&&(m(e),m(o),m(i)),f.r(),p=!1,w()}}}function Ys(l){let e,n,t=ye(Object.entries(l[2])),s=[];for(let r=0;r<t.length;r+=1)s[r]=At(Ot(l,t,r));return{c(){e=C("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"DIV",{id:!0,role:!0,class:!0});var o=R(e);for(let i=0;i<s.length;i+=1)s[i].l(o);o.forEach(m),this.h()},h(){g(e,"id",n="group-"+l[1]),g(e,"role","radiogroup"),g(e,"class","svelte-16oxivo")},m(r,o){A(r,e,o);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null)},p(r,[o]){if(o&7){t=ye(Object.entries(r[2]));let i;for(i=0;i<t.length;i+=1){const a=Ot(r,t,i);s[i]?s[i].p(a,o):(s[i]=At(a),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}o&2&&n!==(n="group-"+r[1])&&g(e,"id",n)},i:x,o:x,d(r){r&&m(e),Ke(s,r)}}}function Zs(l,e,n){let{name:t}=e,{value:s}=e,{options:r}=e;const o=[[]];function i(){s=this.__value,n(0,s)}return l.$$set=a=>{"name"in a&&n(1,t=a.name),"value"in a&&n(0,s=a.value),"options"in a&&n(2,r=a.options)},[s,t,r,i,o]}class Xs extends ae{constructor(e){super(),ce(this,e,Zs,Ys,ie,{name:1,value:0,options:2})}}function xs(l){let e;return{c(){e=se("Done")},l(n){e=le(n,"Done")},m(n,t){A(n,e,t)},d(n){n&&m(e)}}}function el(l){let e;return{c(){e=se("Reset")},l(n){e=le(n,"Reset")},m(n,t){A(n,e,t)},d(n){n&&m(e)}}}function tl(l){let e,n,t="Sorting and Filtering",s,r,o,i="Sorting",a,u,c,f,p,w,_,v,B,$,h="Filtering by Score",b,y,G,z,V,I,O,D,H="Filtering by Rating",T,Z,Q,q,ee,W,J,ne,te,be;function Ee(K){l[6](K)}let je={options:ll};l[3].direction!==void 0&&(je.value=l[3].direction),c=new bn({props:je}),ke.push(()=>Ve(c,"value",Ee));function Se(K){l[7](K)}let xe={options:sl};l[3].property!==void 0&&(xe.value=l[3].property),w=new Mn({props:xe}),ke.push(()=>Ve(w,"value",Se));function et(K){l[8](K)}let Te={options:rl};l[2].scoreComparator!==void 0&&(Te.value=l[2].scoreComparator),G=new Vn({props:Te}),ke.push(()=>Ve(G,"value",et));function tt(K){l[10](K)}let We={name:"rating",options:ln};return l[2].rating!==void 0&&(We.value=l[2].rating),Z=new Xs({props:We}),ke.push(()=>Ve(Z,"value",tt)),ee=new qe({props:{title:"Return to searching.",$$slots:{default:[xs]},$$scope:{ctx:l}}}),ee.$on("click",l[11]),J=new qe({props:{title:"Reset sort and filter.",type:"secondary",$$slots:{default:[el]},$$scope:{ctx:l}}}),J.$on("click",l[5]),{c(){e=C("div"),n=C("h3"),n.textContent=t,s=P(),r=C("div"),o=C("b"),o.textContent=i,a=P(),u=C("div"),L(c.$$.fragment),p=P(),L(w.$$.fragment),v=P(),B=C("div"),$=C("b"),$.textContent=h,b=P(),y=C("div"),L(G.$$.fragment),V=P(),I=C("input"),O=P(),D=C("b"),D.textContent=H,T=P(),L(Z.$$.fragment),q=P(),L(ee.$$.fragment),W=P(),L(J.$$.fragment),this.h()},l(K){e=S(K,"DIV",{class:!0});var X=R(e);n=S(X,"H3",{"data-svelte-h":!0}),ue(n)!=="svelte-15zouq3"&&(n.textContent=t),s=N(X),r=S(X,"DIV",{});var he=R(r);o=S(he,"B",{class:!0,"data-svelte-h":!0}),ue(o)!=="svelte-ekzpgg"&&(o.textContent=i),a=N(he),u=S(he,"DIV",{class:!0});var Ae=R(u);j(c.$$.fragment,Ae),p=N(Ae),j(w.$$.fragment,Ae),Ae.forEach(m),he.forEach(m),v=N(X),B=S(X,"DIV",{});var Pe=R(B);$=S(Pe,"B",{class:!0,"data-svelte-h":!0}),ue($)!=="svelte-1flca3"&&($.textContent=h),b=N(Pe),y=S(Pe,"DIV",{class:!0});var me=R(y);j(G.$$.fragment,me),V=N(me),I=S(me,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),me.forEach(m),Pe.forEach(m),O=N(X),D=S(X,"B",{class:!0,"data-svelte-h":!0}),ue(D)!=="svelte-1evbw58"&&(D.textContent=H),T=N(X),j(Z.$$.fragment,X),q=N(X),j(ee.$$.fragment,X),W=N(X),j(J.$$.fragment,X),X.forEach(m),this.h()},h(){g(o,"class","svelte-seh1z8"),g(u,"class","row svelte-seh1z8"),g($,"class","svelte-seh1z8"),g(I,"type","number"),g(I,"min",0),g(I,"max",1e5),g(I,"step",1),g(I,"class","svelte-seh1z8"),g(y,"class","row svelte-seh1z8"),g(D,"class","svelte-seh1z8"),g(e,"class","container svelte-seh1z8")},m(K,X){A(K,e,X),d(e,n),d(e,s),d(e,r),d(r,o),d(r,a),d(r,u),F(c,u,null),d(u,p),F(w,u,null),d(e,v),d(e,B),d(B,$),d(B,b),d(B,y),F(G,y,null),d(y,V),d(y,I),Ue(I,l[1]),d(e,O),d(e,D),d(e,T),F(Z,e,null),d(e,q),F(ee,e,null),d(e,W),F(J,e,null),ne=!0,te||(be=[de(I,"input",l[9]),de(I,"keyup",l[4])],te=!0)},p(K,X){const he={};!f&&X&8&&(f=!0,he.value=K[3].direction,Me(()=>f=!1)),c.$set(he);const Ae={};!_&&X&8&&(_=!0,Ae.value=K[3].property,Me(()=>_=!1)),w.$set(Ae);const Pe={};!z&&X&4&&(z=!0,Pe.value=K[2].scoreComparator,Me(()=>z=!1)),G.$set(Pe),X&2&&Ut(I.value)!==K[1]&&Ue(I,K[1]);const me={};!Q&&X&4&&(Q=!0,me.value=K[2].rating,Me(()=>Q=!1)),Z.$set(me);const Re={};X&16384&&(Re.$$scope={dirty:X,ctx:K}),ee.$set(Re);const oe={};X&16384&&(oe.$$scope={dirty:X,ctx:K}),J.$set(oe)},i(K){ne||(k(c.$$.fragment,K),k(w.$$.fragment,K),k(G.$$.fragment,K),k(Z.$$.fragment,K),k(ee.$$.fragment,K),k(J.$$.fragment,K),ne=!0)},o(K){E(c.$$.fragment,K),E(w.$$.fragment,K),E(G.$$.fragment,K),E(Z.$$.fragment,K),E(ee.$$.fragment,K),E(J.$$.fragment,K),ne=!1},d(K){K&&m(e),M(c),M(w),M(G),M(Z),M(ee),M(J),te=!1,lt(be)}}}function nl(l){let e,n,t;function s(o){l[12](o)}let r={$$slots:{default:[tl]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.dialog=l[0]),e=new Gt({props:r}),ke.push(()=>Ve(e,"dialog",s)),e.$on("close",l[13]),{c(){L(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,i){F(e,o,i),t=!0},p(o,[i]){const a={};i&16399&&(a.$$scope={dirty:i,ctx:o}),!n&&i&1&&(n=!0,a.dialog=o[0],Me(()=>n=!1)),e.$set(a)},i(o){t||(k(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}const ln=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),sl=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),ll=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),rl=Object.freeze({">=":"≥","<=":"≤"});function ol(l,e,n){let t,s;fe(l,ze,$=>n(2,t=$)),fe(l,He,$=>n(3,s=$));let{dialog:r}=e,o;const i=$=>{var h;return xt($)&&((h=$.target)==null?void 0:h.blur())},a=()=>{He.reset(),ze.reset(),n(1,o=t.scoreValue)};function u($){l.$$.not_equal(s.direction,$)&&(s.direction=$,He.set(s))}function c($){l.$$.not_equal(s.property,$)&&(s.property=$,He.set(s))}function f($){l.$$.not_equal(t.scoreComparator,$)&&(t.scoreComparator=$,ze.set(t))}function p(){o=Ut(this.value),n(1,o),n(2,t)}function w($){l.$$.not_equal(t.rating,$)&&(t.rating=$,ze.set(t))}const _=()=>r.close();function v($){r=$,n(0,r)}function B($){Xe.call(this,l,$)}return l.$$set=$=>{"dialog"in $&&n(0,r=$.dialog)},l.$$.update=()=>{if(l.$$.dirty&6){o===void 0&&n(1,o=t.scoreValue);let $=Number(o);isNaN($)||zt(ze,t.scoreValue=$,t)}},[r,o,t,s,i,a,u,c,f,p,w,_,v,B]}class il extends ae{constructor(e){super(),ce(this,e,ol,nl,ie,{dialog:0})}}function al(l){let e,n,t,s,r,o,i,a,u,c,f,p,w,_,v,B;function $(b){l[9](b)}let h={};return l[2]!==void 0&&(h.dialog=l[2]),p=new il({props:h}),ke.push(()=>Ve(p,"dialog",$)),p.$on("close",l[10]),{c(){e=C("button"),n=C("i"),t=P(),s=C("span"),r=se(l[5]),o=P(),i=C("i"),a=P(),u=C("span"),c=se(l[4]),f=P(),L(p.$$.fragment),this.h()},l(b){e=S(b,"BUTTON",{class:!0});var y=R(e);n=S(y,"I",{class:!0}),R(n).forEach(m),t=N(y),s=S(y,"SPAN",{class:!0});var G=R(s);r=le(G,l[5]),G.forEach(m),o=N(y),i=S(y,"I",{class:!0}),R(i).forEach(m),a=N(y),u=S(y,"SPAN",{class:!0});var z=R(u);c=le(z,l[4]),z.forEach(m),y.forEach(m),f=N(b),j(p.$$.fragment,b),this.h()},h(){g(n,"class","codicon codicon-filter svelte-1ujuzt8"),g(s,"class","svelte-1ujuzt8"),g(i,"class","codicon codicon-arrow-swap svelte-1ujuzt8"),g(u,"class","svelte-1ujuzt8"),g(e,"class","svelte-1ujuzt8")},m(b,y){A(b,e,y),d(e,n),d(e,t),d(e,s),d(s,r),d(e,o),d(e,i),d(e,a),d(e,u),d(u,c),A(b,f,y),F(p,b,y),_=!0,v||(B=de(e,"click",l[8]),v=!0)},p(b,[y]){(!_||y&32)&&Ce(r,b[5]),(!_||y&16)&&Ce(c,b[4]);const G={};!w&&y&4&&(w=!0,G.dialog=b[2],Me(()=>w=!1)),p.$set(G)},i(b){_||(k(p.$$.fragment,b),_=!0)},o(b){E(p.$$.fragment,b),_=!1},d(b){b&&(m(e),m(f)),M(p,b),v=!1,B()}}}const cl=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),ul=(l,e,n)=>{let t=l==="all"?void 0:ln[l],s=e===0&&n===">="?void 0:`Score${n}${Oe(e)}`;return[t,s].filter(r=>r!==void 0).join(",")||"All"};function fl(l,e,n){let t,s,r,o;fe(l,He,_=>n(0,r=_)),fe(l,ze,_=>n(1,o=_));const i=Be(),a=(_,v)=>JSON.stringify(Object.assign({},_,v));let u,c="";const f=()=>{n(3,c=a(r,o)),u.showModal(),Ht("dialog")};function p(_){u=_,n(2,u)}const w=()=>{a(r,o)!==c&&i("sortfilterupdate")};return l.$$.update=()=>{l.$$.dirty&2&&n(5,t=ul(o.rating,o.scoreValue,o.scoreComparator)),l.$$.dirty&1&&n(4,s=cl[r.property][r.direction])},[r,o,u,c,s,t,i,a,f,p,w]}class _l extends ae{constructor(e){super(),ce(this,e,fl,al,ie,{})}}function Rt(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function Lt(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function pl(l){let e,n,t=ye(l[1].posts),s=[];for(let o=0;o<t.length;o+=1)s[o]=jt(Rt(l,t,o));const r=o=>E(s[o],1,1,()=>{s[o]=null});return{c(){e=C("ol");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=S(o,"OL",{class:!0,style:!0});var i=R(e);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(m),this.h()},h(){g(e,"class","multi-column svelte-1sp0f1c"),Ie(e,"--nr-columns",l[2])},m(o,i){A(o,e,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);n=!0},p(o,i){if(i&3){t=ye(o[1].posts);let a;for(a=0;a<t.length;a+=1){const u=Rt(o,t,a);s[a]?(s[a].p(u,i),k(s[a],1)):(s[a]=jt(u),s[a].c(),k(s[a],1),s[a].m(e,null))}for(_e(),a=t.length;a<s.length;a+=1)r(a);pe()}(!n||i&4)&&Ie(e,"--nr-columns",o[2])},i(o){if(!n){for(let i=0;i<t.length;i+=1)k(s[i]);n=!0}},o(o){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)E(s[i]);n=!1},d(o){o&&m(e),Ke(s,o)}}}function gl(l){let e,n,t=ye(l[1].posts),s=[];for(let o=0;o<t.length;o+=1)s[o]=Ft(Lt(l,t,o));const r=o=>E(s[o],1,1,()=>{s[o]=null});return{c(){e=C("ol");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=S(o,"OL",{class:!0});var i=R(e);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(m),this.h()},h(){g(e,"class","single-column svelte-1sp0f1c")},m(o,i){A(o,e,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);n=!0},p(o,i){if(i&3){t=ye(o[1].posts);let a;for(a=0;a<t.length;a+=1){const u=Lt(o,t,a);s[a]?(s[a].p(u,i),k(s[a],1)):(s[a]=Ft(u),s[a].c(),k(s[a],1),s[a].m(e,null))}for(_e(),a=t.length;a<s.length;a+=1)r(a);pe()}},i(o){if(!n){for(let i=0;i<t.length;i+=1)k(s[i]);n=!0}},o(o){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)E(s[i]);n=!1},d(o){o&&m(e),Ke(s,o)}}}function jt(l){let e,n;function t(){return l[6](l[10])}return e=new Ps({props:{post:l[8]}}),e.$on("click",t),{c(){L(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,r){F(e,s,r),n=!0},p(s,r){l=s;const o={};r&2&&(o.post=l[8]),e.$set(o)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Ft(l){let e,n;function t(){return l[5](l[10])}return e=new Qs({props:{post:l[8]}}),e.$on("fullscreen",t),{c(){L(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,r){F(e,s,r),n=!0},p(s,r){l=s;const o={};r&2&&(o.post=l[8]),e.$set(o)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Mt(l){let e,n;return e=new Is({props:{index:l[0]}}),e.$on("close",l[3]),e.$on("endreached",l[7]),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,s){const r={};s&1&&(r.index=t[0]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function dl(l){let e,n,t=Oe(l[1].postCount)+"",s,r,o,i,a,u,c,f,p,w;i=new _l({}),i.$on("sortfilterupdate",l[4]);const _=[gl,pl],v=[];function B(h,b){return h[2]==="1"?0:1}u=B(l),c=v[u]=_[u](l);let $=l[0]!==void 0&&Mt(l);return{c(){e=C("div"),n=C("span"),s=se(t),r=se(" posts"),o=P(),L(i.$$.fragment),a=P(),c.c(),f=P(),$&&$.c(),p=Le(),this.h()},l(h){e=S(h,"DIV",{class:!0});var b=R(e);n=S(b,"SPAN",{});var y=R(n);s=le(y,t),r=le(y," posts"),y.forEach(m),o=N(b),j(i.$$.fragment,b),b.forEach(m),a=N(h),c.l(h),f=N(h),$&&$.l(h),p=Le(),this.h()},h(){g(e,"class","svelte-1sp0f1c")},m(h,b){A(h,e,b),d(e,n),d(n,s),d(n,r),d(e,o),F(i,e,null),A(h,a,b),v[u].m(h,b),A(h,f,b),$&&$.m(h,b),A(h,p,b),w=!0},p(h,[b]){(!w||b&2)&&t!==(t=Oe(h[1].postCount)+"")&&Ce(s,t);let y=u;u=B(h),u===y?v[u].p(h,b):(_e(),E(v[y],1,1,()=>{v[y]=null}),pe(),c=v[u],c?c.p(h,b):(c=v[u]=_[u](h),c.c()),k(c,1),c.m(f.parentNode,f)),h[0]!==void 0?$?($.p(h,b),b&1&&k($,1)):($=Mt(h),$.c(),k($,1),$.m(p.parentNode,p)):$&&(_e(),E($,1,1,()=>{$=null}),pe())},i(h){w||(k(i.$$.fragment,h),k(c),k($),w=!0)},o(h){E(i.$$.fragment,h),E(c),E($),w=!1},d(h){h&&(m(e),m(a),m(f),m(p)),M(i),v[u].d(h),$&&$.d(h)}}}function ml(l,e,n){let t,s;fe(l,Ze,f=>n(1,t=f)),fe(l,qt,f=>n(2,s=f));let r;const o=f=>{var _;const p=t.posts[f.detail],w=st(p.id);(_=document.getElementById(w))==null||_.scrollIntoView(),n(0,r=void 0)};function i(f){Xe.call(this,l,f)}const a=f=>{n(0,r=f)},u=f=>{n(0,r=f)};function c(f){Xe.call(this,l,f)}return l.$$.update=()=>{var f;l.$$.dirty&1&&(r!==void 0?history.pushState({...history.state,fullscreen:!0},""):(f=history.state)!=null&&f.fullscreen&&history.back())},[r,t,s,o,i,a,u,c]}class hl extends ae{constructor(e){super(),ce(this,e,ml,dl,ie,{})}}function $l(l){let e;return{c(){e=se("Reset Filter")},l(n){e=le(n,"Reset Filter")},m(n,t){A(n,e,t)},d(n){n&&m(e)}}}function vl(l){let e,n,t,s,r="We couldn't find any posts matching your tags. Sorry...",o,i,a;return i=new qe({props:{title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[$l]},$$scope:{ctx:l}}}),i.$on("click",l[1]),{c(){e=C("img"),t=P(),s=C("p"),s.textContent=r,o=P(),L(i.$$.fragment),this.h()},l(u){e=S(u,"IMG",{src:!0,alt:!0,class:!0}),t=N(u),s=S(u,"P",{"data-svelte-h":!0}),ue(s)!=="svelte-1utxj3w"&&(s.textContent=r),o=N(u),j(i.$$.fragment,u),this.h()},h(){we(e.src,n=Kt+"/assets/shironeko-confused.png")||g(e,"src",n),g(e,"alt","Nothing here..."),g(e,"class","svelte-1bb5e7g")},m(u,c){A(u,e,c),A(u,t,c),A(u,s,c),A(u,o,c),F(i,u,c),a=!0},p(u,[c]){const f={};c&4&&(f.$$scope={dirty:c,ctx:u}),i.$set(f)},i(u){a||(k(i.$$.fragment,u),a=!0)},o(u){E(i.$$.fragment,u),a=!1},d(u){u&&(m(e),m(t),m(s),m(o)),M(i,u)}}}function bl(l){const e=Be();return[e,()=>{He.reset(),ze.reset(),e("sortfilterupdate")}]}class kl extends ae{constructor(e){super(),ce(this,e,bl,vl,ie,{})}}function wl(l){const e=l-1;return e*e*e+1}function yl(l,{delay:e=0,duration:n=400,easing:t=wl,x:s=0,y:r=0,opacity:o=0}={}){const i=getComputedStyle(l),a=+i.opacity,u=i.transform==="none"?"":i.transform,c=a*(1-o),[f,p]=ft(s),[w,_]=ft(r);return{delay:e,duration:n,easing:t,css:(v,B)=>`
			transform: ${u} translate(${(1-v)*f}${p}, ${(1-v)*w}${_});
			opacity: ${a-c*B}`}}function El(l){let e;return{c(){e=se("Ok")},l(n){e=le(n,"Ok")},m(n,t){A(n,e,t)},d(n){n&&m(e)}}}function Cl(l){let e,n,t,s="This website uses cookies.",r,o,i,a;return o=new qe({props:{title:"Accept cookies",$$slots:{default:[El]},$$scope:{ctx:l}}}),o.$on("click",l[0]),{c(){e=C("section"),n=C("div"),t=C("span"),t.textContent=s,r=P(),L(o.$$.fragment),this.h()},l(u){e=S(u,"SECTION",{class:!0});var c=R(e);n=S(c,"DIV",{class:!0});var f=R(n);t=S(f,"SPAN",{"data-svelte-h":!0}),ue(t)!=="svelte-2018sg"&&(t.textContent=s),r=N(f),j(o.$$.fragment,f),f.forEach(m),c.forEach(m),this.h()},h(){g(n,"class","svelte-76nt2a"),g(e,"class","svelte-76nt2a")},m(u,c){A(u,e,c),d(e,n),d(n,t),d(n,r),F(o,n,null),a=!0},p(u,[c]){const f={};c&2&&(f.$$scope={dirty:c,ctx:u}),o.$set(f)},i(u){a||(k(o.$$.fragment,u),i&&i.end(1),a=!0)},o(u){E(o.$$.fragment,u),u&&(i=gn(e,yl,{y:200,duration:200})),a=!1},d(u){u&&m(e),M(o),u&&i&&i.end()}}}function Sl(l){return[()=>tn.set(!0)]}class Il extends ae{constructor(e){super(),ce(this,e,Sl,Cl,ie,{})}}const{document:ct}=dn;function Dl(l){let e;return{c(){e=se("Search")},l(n){e=le(n,"Search")},m(n,t){A(n,e,t)},i:x,o:x,d(n){n&&m(e)}}}function Tl(l){let e,n;return e=new en({}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Pl(l){let e,n,t,s;const r=[Tl,Dl],o=[];function i(a,u){return a[0]?0:1}return e=i(l),n=o[e]=r[e](l),{c(){n.c(),t=Le()},l(a){n.l(a),t=Le()},m(a,u){o[e].m(a,u),A(a,t,u),s=!0},p(a,u){let c=e;e=i(a),e!==c&&(_e(),E(o[c],1,1,()=>{o[c]=null}),pe(),n=o[e],n||(n=o[e]=r[e](a),n.c()),k(n,1),n.m(t.parentNode,t))},i(a){s||(k(n),s=!0)},o(a){E(n),s=!1},d(a){a&&m(t),o[e].d(a)}}}function Nl(l){let e,n,t,s,r,o;const i=[Rl,Al],a=[];function u(c,f){return c[3].postCount===0?0:1}return n=u(l),t=a[n]=i[n](l),r=new zn({}),{c(){e=C("section"),t.c(),s=P(),L(r.$$.fragment),this.h()},l(c){e=S(c,"SECTION",{class:!0});var f=R(e);t.l(f),f.forEach(m),s=N(c),j(r.$$.fragment,c),this.h()},h(){g(e,"class","svelte-v6wq8y")},m(c,f){A(c,e,f),a[n].m(e,null),A(c,s,f),F(r,c,f),o=!0},p(c,f){let p=n;n=u(c),n===p?a[n].p(c,f):(_e(),E(a[p],1,1,()=>{a[p]=null}),pe(),t=a[n],t?t.p(c,f):(t=a[n]=i[n](c),t.c()),k(t,1),t.m(e,null))},i(c){o||(k(t),k(r.$$.fragment,c),o=!0)},o(c){E(t),E(r.$$.fragment,c),o=!1},d(c){c&&(m(e),m(s)),a[n].d(),M(r,c)}}}function Ol(l){let e,n;return e=new Xn({props:{error:l[1]}}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p(t,s){const r={};s&2&&(r.error=t[1]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Al(l){let e,n,t,s,r,o;e=new hl({}),e.$on("sortfilterupdate",l[10]),e.$on("endreached",l[11]);const i=[jl,Ll],a=[];function u(c,f){return c[3].posts.length===c[3].postCount?0:1}return t=u(l),s=a[t]=i[t](l),{c(){L(e.$$.fragment),n=P(),s.c(),r=Le()},l(c){j(e.$$.fragment,c),n=N(c),s.l(c),r=Le()},m(c,f){F(e,c,f),A(c,n,f),a[t].m(c,f),A(c,r,f),o=!0},p(c,f){let p=t;t=u(c),t===p?a[t].p(c,f):(_e(),E(a[p],1,1,()=>{a[p]=null}),pe(),s=a[t],s?s.p(c,f):(s=a[t]=i[t](c),s.c()),k(s,1),s.m(r.parentNode,r))},i(c){o||(k(e.$$.fragment,c),k(s),o=!0)},o(c){E(e.$$.fragment,c),E(s),o=!1},d(c){c&&(m(n),m(r)),M(e,c),a[t].d(c)}}}function Rl(l){let e,n;return e=new kl({}),e.$on("sortfilterupdate",l[10]),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p:x,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ll(l){let e,n,t,s;return e=new nn({props:{absoluteTop:void 0,rootMargin:1e3/Number(l[7])+"px"}}),e.$on("intersection",l[11]),t=new qe({props:{title:"Load more posts",$$slots:{default:[Vl]},$$scope:{ctx:l}}}),t.$on("click",l[11]),{c(){L(e.$$.fragment),n=P(),L(t.$$.fragment)},l(r){j(e.$$.fragment,r),n=N(r),j(t.$$.fragment,r)},m(r,o){F(e,r,o),A(r,n,o),F(t,r,o),s=!0},p(r,o){const i={};o&128&&(i.rootMargin=1e3/Number(r[7])+"px"),e.$set(i);const a={};o&33554433&&(a.$$scope={dirty:o,ctx:r}),t.$set(a)},i(r){s||(k(e.$$.fragment,r),k(t.$$.fragment,r),s=!0)},o(r){E(e.$$.fragment,r),E(t.$$.fragment,r),s=!1},d(r){r&&m(n),M(e,r),M(t,r)}}}function jl(l){let e,n;return e=new es({}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},p:x,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Fl(l){let e;return{c(){e=se("Load more")},l(n){e=le(n,"Load more")},m(n,t){A(n,e,t)},i:x,o:x,d(n){n&&m(e)}}}function Ml(l){let e,n;return e=new en({}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Vl(l){let e,n,t,s;const r=[Ml,Fl],o=[];function i(a,u){return a[0]?0:1}return e=i(l),n=o[e]=r[e](l),{c(){n.c(),t=Le()},l(a){n.l(a),t=Le()},m(a,u){o[e].m(a,u),A(a,t,u),s=!0},p(a,u){let c=e;e=i(a),e!==c&&(_e(),E(o[c],1,1,()=>{o[c]=null}),pe(),n=o[e],n||(n=o[e]=r[e](a),n.c()),k(n,1),n.m(t.parentNode,t))},i(a){s||(k(n),s=!0)},o(a){E(n),s=!1},d(a){a&&m(t),o[e].d(a)}}}function Vt(l){let e,n;return e=new Il({}),{c(){L(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,s){F(e,t,s),n=!0},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Bl(l){let e,n,t,s,r,o,i,a,u,c,f,p,w,_,v,B,$,h,b;s=new hn({}),o=new Bn({props:{placeholder:"Search for tags",fetchSuggestions:l[9]}}),o.$on("pick",l[12]),a=new qe({props:{id:"btn-search",title:"Search with the tags above",$$slots:{default:[Pl]},$$scope:{ctx:l}}}),a.$on("click",l[10]),c=new $n({props:{tags:[...l[5],...l[4]]}}),c.$on("click",l[13]),c.$on("contextmenu",l[14]),c.$on("createSupertag",l[15]);const y=[Ol,Nl],G=[];function z(D,H){return D[1]?0:D[3].requested?1:-1}~(p=z(l))&&(w=G[p]=y[p](l));function V(D){l[16](D)}let I={tags:l[5]};l[2]!==void 0&&(I.dialog=l[2]),v=new Qn({props:I}),ke.push(()=>Ve(v,"dialog",V)),v.$on("submit",l[17]);let O=!l[8]&&Vt();return{c(){e=C("meta"),n=P(),t=C("section"),L(s.$$.fragment),r=P(),L(o.$$.fragment),i=P(),L(a.$$.fragment),u=P(),L(c.$$.fragment),f=P(),w&&w.c(),_=P(),L(v.$$.fragment),$=P(),O&&O.c(),h=Le(),this.h()},l(D){const H=pn("svelte-7jdp3v",ct.head);e=S(H,"META",{name:!0,content:!0}),H.forEach(m),n=N(D),t=S(D,"SECTION",{id:!0,class:!0});var T=R(t);j(s.$$.fragment,T),r=N(T),j(o.$$.fragment,T),i=N(T),j(a.$$.fragment,T),u=N(T),j(c.$$.fragment,T),T.forEach(m),f=N(D),w&&w.l(D),_=N(D),j(v.$$.fragment,D),$=N(D),O&&O.l(D),h=Le(),this.h()},h(){ct.title="kurosearch - Rule34 Hentai",g(e,"name","description"),g(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience."),g(t,"id","search"),g(t,"class","svelte-v6wq8y")},m(D,H){d(ct.head,e),A(D,n,H),A(D,t,H),F(s,t,null),d(t,r),F(o,t,null),d(t,i),F(a,t,null),d(t,u),F(c,t,null),A(D,f,H),~p&&G[p].m(D,H),A(D,_,H),F(v,D,H),A(D,$,H),O&&O.m(D,H),A(D,h,H),b=!0},p(D,[H]){const T={};H&33554433&&(T.$$scope={dirty:H,ctx:D}),a.$set(T);const Z={};H&48&&(Z.tags=[...D[5],...D[4]]),c.$set(Z);let Q=p;p=z(D),p===Q?~p&&G[p].p(D,H):(w&&(_e(),E(G[Q],1,1,()=>{G[Q]=null}),pe()),~p?(w=G[p],w?w.p(D,H):(w=G[p]=y[p](D),w.c()),k(w,1),w.m(_.parentNode,_)):w=null);const q={};H&32&&(q.tags=D[5]),!B&&H&4&&(B=!0,q.dialog=D[2],Me(()=>B=!1)),v.$set(q),D[8]?O&&(_e(),E(O,1,1,()=>{O=null}),pe()):O?H&256&&k(O,1):(O=Vt(),O.c(),k(O,1),O.m(h.parentNode,h))},i(D){b||(k(s.$$.fragment,D),k(o.$$.fragment,D),k(a.$$.fragment,D),k(c.$$.fragment,D),k(w),k(v.$$.fragment,D),k(O),b=!0)},o(D){E(s.$$.fragment,D),E(o.$$.fragment,D),E(a.$$.fragment,D),E(c.$$.fragment,D),E(w),E(v.$$.fragment,D),E(O),b=!1},d(D){D&&(m(n),m(t),m(f),m(_),m($),m(h)),m(e),M(s),M(o),M(a),M(c),~p&&G[p].d(D),M(v,D),O&&O.d(D)}}}function zl(l,e,n){let t,s,r,o,i,a,u,c,f;fe(l,Ze,T=>n(3,t=T)),fe(l,at,T=>n(4,s=T)),fe(l,ze,T=>n(19,r=T)),fe(l,He,T=>n(20,o=T)),fe(l,Hn,T=>n(21,i=T)),fe(l,it,T=>n(5,a=T)),fe(l,pt,T=>n(6,u=T)),fe(l,qt,T=>n(7,c=T)),fe(l,tn,T=>n(8,f=T)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let p=!1,w,_,v=0;const B=async T=>{const Z=await Ln(T);return[...u.items.filter(({name:q})=>q.toLowerCase().includes(T.toLowerCase())).map(q=>({label:q.name,count:q.tags.length,type:"supertag"})),...Z]},$=()=>new Fn().withPid(t.pageCount).withTags(a).withBlockedContent(i).withSortProperty(o.property).withSortDirection(o.direction).withScoreValue(r.scoreValue).withScoreComparator(r.scoreComparator).withRating(r.rating).withSupertags(s),h=async T=>{if(!p){n(1,w=void 0),n(0,p=!0);try{const Z=t.pageCount;await T(),Un(Z).catch(()=>{})}catch(Z){n(1,w=Z),console.warn(Z)}finally{n(0,p=!1)}}},b=async()=>{Ze.reset(),v=0,h(async()=>{const[T,Z]=await $().getPageAndCount();Ze.addPage(T,Z)})},y=async()=>{h(async()=>{const T=await $().getPage();Ze.addPage(T)})},G=T=>{var Z,Q;if((T.key==="/"||T.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&((Z=document.getElementById("searchbar"))==null||Z.focus(),T.preventDefault(),T.stopPropagation()),T.ctrlKey&&T.key==="Enter"&&(T.preventDefault(),T.stopPropagation(),b()),T.ctrlKey&&T.key==="m"&&((Q=document.getElementById("select-modifier"))==null||Q.click()),T.ctrlKey&&T.key==="ArrowDown"){const q=document.getElementsByClassName("post-media");q[v].focus(),v=Math.min(v+1,Math.max(0,q.length-1))}T.ctrlKey&&T.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[v].focus(),v=Math.max(v-1,0))};rt(async()=>{document.addEventListener("keydown",G),t.postCount===0&&b()}),ot(()=>{document.removeEventListener("keydown",G)});const z=async T=>{const Z=T.detail;if(Z.type==="supertag"){const Q=u.items.find(q=>q.name===Z.label);if(!Q){console.warn("Supertag not present.");return}at.addOrReplace(Q)}else{const Q=await jn(T.detail.label);it.addOrReplace({name:T.detail.label,modifier:T.detail.modifier,count:T.detail.count,type:(Q==null?void 0:Q.type)??"tag"})}},V=T=>"description"in T.detail?at.removeByName(T.detail.name):it.removeByName(T.detail.name),I=T=>{"description"in T.detail||(T.detail.modifier=Gn(T.detail.modifier),it.addOrReplace(T.detail))},O=()=>{_.showModal(),Ht("dialog")};function D(T){_=T,n(2,_)}return[p,w,_,t,s,a,u,c,f,B,b,y,z,V,I,O,D,T=>pt.add(T.detail)]}class dr extends ae{constructor(e){super(),ce(this,e,zl,Bl,ie,{})}}export{dr as component};
