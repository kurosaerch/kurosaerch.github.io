import{s as fe,p as ke,D as Fe,E as je,f as E,a as N,g as S,h as O,y as oe,c as T,d as h,j as g,r as jt,i as A,u as d,F as We,G as Ie,H as Ye,I as ct,l as ie,m as ae,v as X,J as we,w as tn,K as nn,z as sn,A as ln,B as rn,o as rt,L as ot,n as Le,e as De,k as Be,C as ge,M as nt,N as at,O as on,P as zt,Q as pt,x as an}from"../chunks/scheduler.19d3c358.js";import{S as pe,i as _e,f as Re,b as R,d as V,m as M,a as b,t as y,e as L,g as ce,c as ue,h as cn}from"../chunks/index.2b8f9697.js";import{g as un}from"../chunks/globals.7f7f1b26.js";import{e as Pe}from"../chunks/each.e59479a4.js";import{D as Gt,r as Ut}from"../chunks/result-columns-store.9e2a8a54.js";import{T as Qe}from"../chunks/TextButton.789ba0e4.js";import{D as fn}from"../chunks/DetailedTag.af294f99.js";import{K as pn,A as _n}from"../chunks/ActiveTagList.cca65c7d.js";import{b as qt}from"../chunks/paths.4b2d2a5d.js";import{f as st}from"../chunks/format-tag.7e313273.js";import{r as Je,a as ut}from"../chunks/active-supertags-store.1f2d7477.js";import{I as Ht,R as dn}from"../chunks/ModifierSelect.1c655e2c.js";import{h as _t,u as gn}from"../chunks/await_block.6b55c79b.js";import{L as Kt}from"../chunks/LoadingAnimation.54d99227.js";import{R as mn,S as hn,a as $n,K as vn,E as Wt,b as bn,g as dt,P as kn,C as wn,c as yn,d as Jt,i as Cn,e as Qt,D as En,G as Sn,V as In,f as gt,I as Dn}from"../chunks/Details.90f947ba.js";import{a as Pn}from"../chunks/always-loop-store.b24079c8.js";import{f as Me,s as ze,S as Nn}from"../chunks/search-builder.bb8840aa.js";import{S as mt}from"../chunks/Select.b276bd9e.js";import{R as Tn}from"../chunks/RotatingTextSelect.11b9001f.js";import{S as An}from"../chunks/Searchbar.edbd7ee8.js";import{S as On}from"../chunks/ScrollUpButton.74dfd914.js";import{g as Fn,a as Rn}from"../chunks/tags.49324235.js";import{l as Vn}from"../chunks/analytics.b280da65.js";import{n as Mn,s as ht}from"../chunks/supertags-store.6b070b5e.js";import{a as it}from"../chunks/active-tags-store.c78264f4.js";import{b as Ln}from"../chunks/blocked-content-store.510169cf.js";import{c as Yt}from"../chunks/cookies-accepted-store.069f6bf8.js";function $t(l,e,n){const t=l.slice();return t[11]=e[n],t}function vt(l){let e,n;return e=new fn({props:{tag:l[11]}}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&8&&(o.tag=t[11]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Bn(l){let e;return{c(){e=ie("Create supertag")},l(n){e=ae(n,"Create supertag")},m(n,t){A(n,e,t)},d(n){n&&h(e)}}}function jn(l){let e,n,t="Create Supertag",s,o,r,a,i,c="Name",u,_,f,w,m,$="Description",P,p,v,k,C,G="Tags",te,J,Y,H,D,U,I,x,K=Pe(l[3]),F=[];for(let B=0;B<K.length;B+=1)F[B]=vt($t(l,K,B));const le=B=>y(F[B],1,1,()=>{F[B]=null});return D=new Qe({props:{title:l[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!l[4],$$slots:{default:[Bn]},$$scope:{ctx:l}}}),D.$on("click",l[9]),{c(){e=E("section"),n=E("h3"),n.textContent=t,s=N(),o=E("button"),r=N(),a=E("div"),i=E("label"),i.textContent=c,u=N(),_=E("input"),f=N(),w=E("div"),m=E("label"),m.textContent=$,P=N(),p=E("input"),v=N(),k=E("div"),C=E("span"),C.textContent=G,te=N(),J=E("ol");for(let B=0;B<F.length;B+=1)F[B].c();Y=N(),H=E("div"),R(D.$$.fragment),this.h()},l(B){e=S(B,"SECTION",{class:!0});var j=O(e);n=S(j,"H3",{"data-svelte-h":!0}),oe(n)!=="svelte-ho1cwx"&&(n.textContent=t),s=T(j),o=S(j,"BUTTON",{class:!0}),O(o).forEach(h),r=T(j),a=S(j,"DIV",{class:!0});var ne=O(a);i=S(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),oe(i)!=="svelte-10k8a68"&&(i.textContent=c),u=T(ne),_=S(ne,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),ne.forEach(h),f=T(j),w=S(j,"DIV",{class:!0});var Q=O(w);m=S(Q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),oe(m)!=="svelte-14n9kp6"&&(m.textContent=$),P=T(Q),p=S(Q,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),Q.forEach(h),v=T(j),k=S(j,"DIV",{class:!0});var me=O(k);C=S(me,"SPAN",{class:!0,"data-svelte-h":!0}),oe(C)!=="svelte-7hjyox"&&(C.textContent=G),te=T(me),J=S(me,"OL",{class:!0});var he=O(J);for(let Ee=0;Ee<F.length;Ee+=1)F[Ee].l(he);he.forEach(h),me.forEach(h),Y=T(j),H=S(j,"DIV",{class:!0});var Oe=O(H);V(D.$$.fragment,Oe),Oe.forEach(h),j.forEach(h),this.h()},h(){g(o,"class",jt("codicon codicon-close")+" svelte-1x6vc81"),g(i,"for","supertag-name"),g(i,"class","svelte-1x6vc81"),g(_,"type","text"),g(_,"placeholder","Descriptive name"),g(_,"id","supertag-name"),g(_,"class","svelte-1x6vc81"),g(a,"class","svelte-1x6vc81"),g(m,"for","supertag-description"),g(m,"class","svelte-1x6vc81"),g(p,"type","text"),g(p,"placeholder","Short description"),g(p,"id","supertag-description"),g(p,"class","svelte-1x6vc81"),g(w,"class","svelte-1x6vc81"),g(C,"class","svelte-1x6vc81"),g(J,"class","svelte-1x6vc81"),g(k,"class","svelte-1x6vc81"),g(H,"class","last svelte-1x6vc81"),g(e,"class","svelte-1x6vc81")},m(B,j){A(B,e,j),d(e,n),d(e,s),d(e,o),d(e,r),d(e,a),d(a,i),d(a,u),d(a,_),We(_,l[0]),d(e,f),d(e,w),d(w,m),d(w,P),d(w,p),We(p,l[2]),d(e,v),d(e,k),d(k,C),d(k,te),d(k,J);for(let ne=0;ne<F.length;ne+=1)F[ne]&&F[ne].m(J,null);d(e,Y),d(e,H),M(D,H,null),U=!0,I||(x=[Ie(o,"click",l[6]),Ie(_,"input",l[7]),Ie(p,"input",l[8])],I=!0)},p(B,j){if(j&1&&_.value!==B[0]&&We(_,B[0]),j&4&&p.value!==B[2]&&We(p,B[2]),j&8){K=Pe(B[3]);let Q;for(Q=0;Q<K.length;Q+=1){const me=$t(B,K,Q);F[Q]?(F[Q].p(me,j),b(F[Q],1)):(F[Q]=vt(me),F[Q].c(),b(F[Q],1),F[Q].m(J,null))}for(ce(),Q=K.length;Q<F.length;Q+=1)le(Q);ue()}const ne={};j&16&&(ne.title=B[4]?"Click to create supertag":"Enter a valid name to continue"),j&16&&(ne.disabled=!B[4]),j&16384&&(ne.$$scope={dirty:j,ctx:B}),D.$set(ne)},i(B){if(!U){for(let j=0;j<K.length;j+=1)b(F[j]);b(D.$$.fragment,B),U=!0}},o(B){F=F.filter(Boolean);for(let j=0;j<F.length;j+=1)y(F[j]);y(D.$$.fragment,B),U=!1},d(B){B&&h(e),Ye(F,B),L(D),I=!1,ct(x)}}}function zn(l){let e,n,t;function s(r){l[10](r)}let o={$$slots:{default:[jn]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.dialog=l[1]),e=new Gt({props:o}),ke.push(()=>Re(e,"dialog",s)),e.$on("close",l[6]),{c(){R(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],Fe(()=>n=!1)),e.$set(i)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){L(e,r)}}}function Gn(l,e,n){let t,{dialog:s}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=je(),c=()=>s.close();function u(){o=this.value,n(0,o)}function _(){r=this.value,n(2,r)}const f=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:m,name:$})=>({modifier:m,name:$}))}),c()};function w(m){s=m,n(1,s)}return l.$$set=m=>{"dialog"in m&&n(1,s=m.dialog),"name"in m&&n(0,o=m.name),"description"in m&&n(2,r=m.description),"tags"in m&&n(3,a=m.tags)},l.$$.update=()=>{l.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,s,r,a,t,i,c,u,_,f,w]}class Un extends pe{constructor(e){super(),_e(this,e,Gn,zn,fe,{dialog:1,name:0,description:2,tags:3})}}function qn(l){let e,n,t,s,o,r,a,i,c,u;return{c(){e=E("div"),n=E("div"),t=E("i"),s=N(),o=E("div"),r=E("h3"),a=ie(l[0]),i=N(),c=E("span"),u=ie(l[2]),this.h()},l(_){e=S(_,"DIV",{class:!0});var f=O(e);n=S(f,"DIV",{class:!0});var w=O(n);t=S(w,"I",{class:!0}),O(t).forEach(h),w.forEach(h),s=T(f),o=S(f,"DIV",{});var m=O(o);r=S(m,"H3",{class:!0});var $=O(r);a=ae($,l[0]),$.forEach(h),i=T(m),c=S(m,"SPAN",{});var P=O(c);u=ae(P,l[2]),P.forEach(h),m.forEach(h),f.forEach(h),this.h()},h(){g(t,"class",jt(l[1])+" svelte-1yohziu"),g(n,"class","icon svelte-1yohziu"),g(r,"class","svelte-1yohziu"),g(e,"class","error svelte-1yohziu")},m(_,f){A(_,e,f),d(e,n),d(n,t),d(e,s),d(e,o),d(o,r),d(r,a),d(o,i),d(o,c),d(c,u)},p:X,i:X,o:X,d(_){_&&h(e)}}}function Hn(l,e,n){let{error:t}=e,s=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return l.$$set=a=>{"error"in a&&n(3,t=a.error)},[s,o,r,t]}class Kn extends pe{constructor(e){super(),_e(this,e,Hn,qn,fe,{error:3})}}function Wn(l){let e,n,t,s,o="You have seen everything there is to see...";return{c(){e=E("img"),t=N(),s=E("p"),s.textContent=o,this.h()},l(r){e=S(r,"IMG",{src:!0,alt:!0,class:!0}),t=T(r),s=S(r,"P",{"data-svelte-h":!0}),oe(s)!=="svelte-1i75mtf"&&(s.textContent=o),this.h()},h(){we(e.src,n=qt+"/assets/shironeko-x.png")||g(e,"src",n),g(e,"alt","No more results to load"),g(e,"class","svelte-1pkma0d")},m(r,a){A(r,e,a),A(r,t,a),A(r,s,a)},p:X,i:X,o:X,d(r){r&&(h(e),h(t),h(s))}}}class Jn extends pe{constructor(e){super(),_e(this,e,null,Wn,fe,{})}}const lt=l=>`post_${l}`;function Qn(l){let e,n,t,s;const o=l[3].default,r=tn(o,l,l[2],null);return{c(){e=E("div"),r&&r.c(),this.h()},l(a){e=S(a,"DIV",{role:!0,tabindex:!0,class:!0});var i=O(e);r&&r.l(i),i.forEach(h),this.h()},h(){g(e,"role","none"),g(e,"tabindex","-1"),g(e,"class","svelte-6sy8qz")},m(a,i){A(a,e,i),r&&r.m(e,null),l[4](e),n=!0,t||(s=[Ie(e,"click",nn(Yn)),Ie(e,"keydown",l[1])],t=!0)},p(a,[i]){r&&r.p&&(!n||i&4)&&sn(r,o,a,a[2],n?rn(o,a[2],i,null):ln(a[2]),null)},i(a){n||(b(r,a),n=!0)},o(a){y(r,a),n=!1},d(a){a&&h(e),r&&r.d(a),l[4](null),t=!1,ct(s)}}}const Yn=()=>{};function Zn(l,e,n){let{$$slots:t={},$$scope:s}=e;const o=je(),r=()=>o("close"),a=_=>{_.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let c;rt(async()=>{c.focus(),document.addEventListener("fullscreenchange",i);try{await c.requestFullscreen()}catch{}}),ot(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function u(_){ke[_?"unshift":"push"](()=>{c=_,n(0,c)})}return l.$$set=_=>{"$$scope"in _&&n(2,s=_.$$scope)},[c,a,s,t,u]}class Xn extends pe{constructor(e){super(),_e(this,e,Zn,Qn,fe,{})}}function xn(l){let e,n;return{c(){e=E("div"),this.h()},l(t){e=S(t,"DIV",{style:!0}),O(e).forEach(h),this.h()},h(){g(e,"style",n=l[0]?`position:absolute;top:${l[0]};`:void 0)},m(t,s){A(t,e,s),l[3](e)},p(t,[s]){s&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&g(e,"style",n)},i:X,o:X,d(t){t&&h(e),l[3](null)}}}function es(l,e,n){let{rootMargin:t}=e,{absoluteTop:s}=e;const o=je(),r=new IntersectionObserver(c=>{c[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(c){ke[c?"unshift":"push"](()=>{a=c,n(1,a)})}return l.$$set=c=>{"rootMargin"in c&&n(2,t=c.rootMargin),"absoluteTop"in c&&n(0,s=c.absoluteTop)},l.$$.update=()=>{l.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[s,a,t,i]}class Zt extends pe{constructor(e){super(),_e(this,e,es,xn,fe,{rootMargin:2,absoluteTop:0})}}function bt(l,e,n){const t=l.slice();return t[5]=e[n],t}function kt(l,e,n){const t=l.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function wt(l){let e,n="•",t,s,o;return s=new Wt({props:{source:l[0].source}}),{c(){e=E("span"),e.textContent=n,t=N(),R(s.$$.fragment)},l(r){e=S(r,"SPAN",{"data-svelte-h":!0}),oe(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=T(r),V(s.$$.fragment,r)},m(r,a){A(r,e,a),A(r,t,a),M(s,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),s.$set(i)},i(r){o||(b(s.$$.fragment,r),o=!0)},o(r){y(s.$$.fragment,r),o=!1},d(r){r&&(h(e),h(t)),L(s,r)}}}function yt(l){let e,n=l[8]+"",t,s,o,r;return o=new kn({props:{tags:l[9]}}),{c(){e=E("h3"),t=ie(n),s=N(),R(o.$$.fragment),this.h()},l(a){e=S(a,"H3",{class:!0});var i=O(e);t=ae(i,n),i.forEach(h),s=T(a),V(o.$$.fragment,a),this.h()},h(){g(e,"class","svelte-1kekodt")},m(a,i){A(a,e,i),d(e,t),A(a,s,i),M(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[8]+"")&&Le(t,n);const c={};i&2&&(c.tags=a[9]),o.$set(c)},i(a){r||(b(o.$$.fragment,a),r=!0)},o(a){y(o.$$.fragment,a),r=!1},d(a){a&&(h(e),h(s)),L(o,a)}}}function ts(l){return{c:X,l:X,m:X,p:X,i:X,o:X,d:X}}function ns(l){let e,n,t,s;const o=[ls,ss],r=[];function a(i,c){return i[4].length>0?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=De()},l(i){n.l(i),t=De()},m(i,c){r[e].m(i,c),A(i,t,c),s=!0},p(i,c){let u=e;e=a(i),e===u?r[e].p(i,c):(ce(),y(r[u],1,1,()=>{r[u]=null}),ue(),n=r[e],n?n.p(i,c):(n=r[e]=o[e](i),n.c()),b(n,1),n.m(t.parentNode,t))},i(i){s||(b(n),s=!0)},o(i){y(n),s=!1},d(i){i&&h(t),r[e].d(i)}}}function ss(l){let e,n="Comments for this post are not available";return{c(){e=E("span"),e.textContent=n,this.h()},l(t){e=S(t,"SPAN",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-4t2lxe"&&(e.textContent=n),this.h()},h(){g(e,"class","no-comments svelte-1kekodt")},m(t,s){A(t,e,s)},p:X,i:X,o:X,d(t){t&&h(e)}}}function ls(l){let e,n,t=Pe(l[4]),s=[];for(let r=0;r<t.length;r+=1)s[r]=Ct(bt(l,t,r));const o=r=>y(s[r],1,1,()=>{s[r]=null});return{c(){e=E("ul");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"UL",{class:!0});var a=O(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(h),this.h()},h(){g(e,"class","comments svelte-1kekodt")},m(r,a){A(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&1){t=Pe(r[4]);let i;for(i=0;i<t.length;i+=1){const c=bt(r,t,i);s[i]?(s[i].p(c,a),b(s[i],1)):(s[i]=Ct(c),s[i].c(),b(s[i],1),s[i].m(e,null))}for(ce(),i=t.length;i<s.length;i+=1)o(i);ue()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)b(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)y(s[a]);n=!1},d(r){r&&h(e),Ye(s,r)}}}function Ct(l){let e,n;return e=new wn({props:{comment:l[5]}}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&1&&(o.comment=t[5]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function rs(l){let e,n;return e=new Kt({}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p:X,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function os(l){let e,n,t,s,o,r,a,i,c=l[0].id+"",u,_,f,w,m,$,P="•",p,v,k=l[0].type.toUpperCase()+"",C,G,te,J="•",Y,H,D,U,I="•",x,K,F,le,B,j,ne,Q="•",me,he,Oe,Ee,Ze="•",Xe,Ne,xe,Ge,Ve,Ue,z,Z,Ae="Comments",Te,Se,$e;w=new mn({props:{value:l[0].rating}}),H=new hn({props:{value:l[0].score}}),K=new $n({props:{value:l[0].change}}),B=new vn({props:{url:"/post?id="+l[0].id+"&src="+encodeURIComponent(l[3])}}),he=new Wt({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id}}),Ne=new bn({props:{url:l[3]}});let ee=l[0].source&&wt(l),ye=Pe(Object.entries(l[1])),se=[];for(let W=0;W<ye.length;W+=1)se[W]=yt(kt(l,ye,W));const en=W=>y(se[W],1,1,()=>{se[W]=null});let ve={ctx:l,current:null,token:null,hasCatch:!1,pending:rs,then:ns,catch:ts,value:4,blocks:[,,,]};return _t(Se=dt(l[0].id),ve),{c(){e=E("div"),n=E("img"),s=N(),o=E("h1"),r=ie("Post "),a=E("b"),i=ie("#"),u=ie(c),_=N(),f=E("div"),R(w.$$.fragment),m=N(),$=E("span"),$.textContent=P,p=N(),v=E("span"),C=ie(k),G=N(),te=E("span"),te.textContent=J,Y=N(),R(H.$$.fragment),D=N(),U=E("span"),U.textContent=I,x=N(),R(K.$$.fragment),F=N(),le=E("div"),R(B.$$.fragment),j=N(),ne=E("span"),ne.textContent=Q,me=N(),R(he.$$.fragment),Oe=N(),Ee=E("span"),Ee.textContent=Ze,Xe=N(),R(Ne.$$.fragment),xe=N(),ee&&ee.c(),Ge=N(),Ve=E("div");for(let W=0;W<se.length;W+=1)se[W].c();Ue=N(),z=E("div"),Z=E("h3"),Z.textContent=Ae,Te=N(),ve.block.c(),this.h()},l(W){e=S(W,"DIV",{class:!0});var q=O(e);n=S(q,"IMG",{class:!0,src:!0,alt:!0}),s=T(q),o=S(q,"H1",{class:!0});var Ce=O(o);r=ae(Ce,"Post "),a=S(Ce,"B",{});var qe=O(a);i=ae(qe,"#"),u=ae(qe,c),qe.forEach(h),Ce.forEach(h),_=T(q),f=S(q,"DIV",{class:!0});var de=O(f);V(w.$$.fragment,de),m=T(de),$=S(de,"SPAN",{"data-svelte-h":!0}),oe($)!=="svelte-7hh8jk"&&($.textContent=P),p=T(de),v=S(de,"SPAN",{});var et=O(v);C=ae(et,k),et.forEach(h),G=T(de),te=S(de,"SPAN",{"data-svelte-h":!0}),oe(te)!=="svelte-7hh8jk"&&(te.textContent=J),Y=T(de),V(H.$$.fragment,de),D=T(de),U=S(de,"SPAN",{"data-svelte-h":!0}),oe(U)!=="svelte-7hh8jk"&&(U.textContent=I),x=T(de),V(K.$$.fragment,de),de.forEach(h),F=T(q),le=S(q,"DIV",{class:!0});var be=O(le);V(B.$$.fragment,be),j=T(be),ne=S(be,"SPAN",{"data-svelte-h":!0}),oe(ne)!=="svelte-7hh8jk"&&(ne.textContent=Q),me=T(be),V(he.$$.fragment,be),Oe=T(be),Ee=S(be,"SPAN",{"data-svelte-h":!0}),oe(Ee)!=="svelte-7hh8jk"&&(Ee.textContent=Ze),Xe=T(be),V(Ne.$$.fragment,be),xe=T(be),ee&&ee.l(be),be.forEach(h),Ge=T(q),Ve=S(q,"DIV",{});var tt=O(Ve);for(let He=0;He<se.length;He+=1)se[He].l(tt);tt.forEach(h),Ue=T(q),z=S(q,"DIV",{});var re=O(z);Z=S(re,"H3",{class:!0,"data-svelte-h":!0}),oe(Z)!=="svelte-kc6sae"&&(Z.textContent=Ae),Te=T(re),ve.block.l(re),re.forEach(h),q.forEach(h),this.h()},h(){g(n,"class","preview svelte-1kekodt"),we(n.src,t=l[2])||g(n,"src",t),g(n,"alt","preview"),g(o,"class","svelte-1kekodt"),g(f,"class","flex-row svelte-1kekodt"),g(le,"class","flex-row svelte-1kekodt"),g(Z,"class","svelte-1kekodt"),g(e,"class","details svelte-1kekodt")},m(W,q){A(W,e,q),d(e,n),d(e,s),d(e,o),d(o,r),d(o,a),d(a,i),d(a,u),d(e,_),d(e,f),M(w,f,null),d(f,m),d(f,$),d(f,p),d(f,v),d(v,C),d(f,G),d(f,te),d(f,Y),M(H,f,null),d(f,D),d(f,U),d(f,x),M(K,f,null),d(e,F),d(e,le),M(B,le,null),d(le,j),d(le,ne),d(le,me),M(he,le,null),d(le,Oe),d(le,Ee),d(le,Xe),M(Ne,le,null),d(le,xe),ee&&ee.m(le,null),d(e,Ge),d(e,Ve);for(let Ce=0;Ce<se.length;Ce+=1)se[Ce]&&se[Ce].m(Ve,null);d(e,Ue),d(e,z),d(z,Z),d(z,Te),ve.block.m(z,ve.anchor=null),ve.mount=()=>z,ve.anchor=null,$e=!0},p(W,[q]){l=W,(!$e||q&4&&!we(n.src,t=l[2]))&&g(n,"src",t),(!$e||q&1)&&c!==(c=l[0].id+"")&&Le(u,c);const Ce={};q&1&&(Ce.value=l[0].rating),w.$set(Ce),(!$e||q&1)&&k!==(k=l[0].type.toUpperCase()+"")&&Le(C,k);const qe={};q&1&&(qe.value=l[0].score),H.$set(qe);const de={};q&1&&(de.value=l[0].change),K.$set(de);const et={};q&9&&(et.url="/post?id="+l[0].id+"&src="+encodeURIComponent(l[3])),B.$set(et);const be={};q&1&&(be.source="https://rule34.xxx/index.php?page=post&s=view&id="+l[0].id),he.$set(be);const tt={};if(q&8&&(tt.url=l[3]),Ne.$set(tt),l[0].source?ee?(ee.p(l,q),q&1&&b(ee,1)):(ee=wt(l),ee.c(),b(ee,1),ee.m(le,null)):ee&&(ce(),y(ee,1,1,()=>{ee=null}),ue()),q&2){ye=Pe(Object.entries(l[1]));let re;for(re=0;re<ye.length;re+=1){const He=kt(l,ye,re);se[re]?(se[re].p(He,q),b(se[re],1)):(se[re]=yt(He),se[re].c(),b(se[re],1),se[re].m(Ve,null))}for(ce(),re=ye.length;re<se.length;re+=1)en(re);ue()}ve.ctx=l,q&1&&Se!==(Se=dt(l[0].id))&&_t(Se,ve)||gn(ve,l,q)},i(W){if(!$e){b(w.$$.fragment,W),b(H.$$.fragment,W),b(K.$$.fragment,W),b(B.$$.fragment,W),b(he.$$.fragment,W),b(Ne.$$.fragment,W),b(ee);for(let q=0;q<ye.length;q+=1)b(se[q]);b(ve.block),$e=!0}},o(W){y(w.$$.fragment,W),y(H.$$.fragment,W),y(K.$$.fragment,W),y(B.$$.fragment,W),y(he.$$.fragment,W),y(Ne.$$.fragment,W),y(ee),se=se.filter(Boolean);for(let q=0;q<se.length;q+=1)y(se[q]);for(let q=0;q<3;q+=1){const Ce=ve.blocks[q];y(Ce)}$e=!1},d(W){W&&h(e),L(w),L(H),L(K),L(B),L(he),L(Ne),ee&&ee.d(),Ye(se,W),ve.block.d(),ve.token=null,ve=null}}}function is(l,e,n){let t,s,o,{post:r}=e;return l.$$set=a=>{"post"in a&&n(0,r=a.post)},l.$$.update=()=>{l.$$.dirty&1&&n(3,t=r.file_url),l.$$.dirty&1&&n(2,s=r.sample_url),l.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,s,t]}class as extends pe{constructor(e){super(),_e(this,e,is,os,fe,{post:0})}}const Ke=new IntersectionObserver(l=>{for(const e of l)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function cs(l){const e=l.slice(),n=yn(e[0].file_url,e[0].sample_url,e[0].preview_url);e[5]=n;const t=e[5].animated;return e[6]=t,e}function us(l){const e=l.slice(),n=Jt(e[0].file_url,e[0].sample_url,e[0].preview_url);e[5]=n;const t=e[5].animated;e[6]=t;const s=e[5].static;return e[7]=s,e}function fs(l){const e=l.slice(),n=e[0].sample_url;return e[4]=n,e}function ps(l){let e,n,t,s;return{c(){e=E("img"),this.h()},l(o){e=S(o,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){we(e.src,n=l[6])||g(e,"src",n),g(e,"alt",t="[GIF] post #"+l[0].id),g(e,"title",s="[GIF] post #"+l[0].id),g(e,"class","svelte-1cjgn2p")},m(o,r){A(o,e,r)},p(o,r){r&1&&!we(e.src,n=o[6])&&g(e,"src",n),r&1&&t!==(t="[GIF] post #"+o[0].id)&&g(e,"alt",t),r&1&&s!==(s="[GIF] post #"+o[0].id)&&g(e,"title",s)},d(o){o&&h(e)}}}function Et(l){let e,n,t,s;return{c(){e=E("video"),this.h()},l(o){e=S(o,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),O(e).forEach(h),this.h()},h(){we(e.src,n=l[6])||g(e,"src",n),g(e,"poster",t=l[7]),e.loop=!0,g(e,"title",s="[VIDEO] post #"+l[0].id),e.controls=!0,g(e,"preload","metadata"),e.autoplay=!0,g(e,"class","svelte-1cjgn2p")},m(o,r){A(o,e,r),l[2](e)},p(o,r){r&1&&!we(e.src,n=o[6])&&g(e,"src",n),r&1&&t!==(t=o[7])&&g(e,"poster",t),r&1&&s!==(s="[VIDEO] post #"+o[0].id)&&g(e,"title",s)},d(o){o&&h(e),l[2](null)}}}function St(l){let e,n,t,s;return{c(){e=E("img"),this.h()},l(o){e=S(o,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){we(e.src,n=l[4])||g(e,"src",n),g(e,"alt",t="[IMAGE] post #"+l[0].id),g(e,"title",s="[IMAGE] post #"+l[0].id),g(e,"class","svelte-1cjgn2p")},m(o,r){A(o,e,r)},p(o,r){r&1&&!we(e.src,n=o[4])&&g(e,"src",n),r&1&&t!==(t="[IMAGE] post #"+o[0].id)&&g(e,"alt",t),r&1&&s!==(s="[IMAGE] post #"+o[0].id)&&g(e,"title",s)},d(o){o&&h(e)}}}function _s(l){let e;function n(r,a){return r[0].type==="image"?St:r[0].type==="video"?Et:ps}function t(r,a){return a===St?fs(r):a===Et?us(r):cs(r)}let s=n(l),o=s(t(l,s));return{c(){o.c(),e=De()},l(r){o.l(r),e=De()},m(r,a){o.m(r,a),A(r,e,a)},p(r,[a]){s===(s=n(r))&&o?o.p(t(r,s),a):(o.d(1),o=s(t(r,s)),o&&(o.c(),o.m(e.parentNode,e)))},i:X,o:X,d(r){r&&h(e),o.d(r)}}}function ds(l,e,n){let{post:t}=e,s;const o=a=>{t.type==="video"&&s&&(a.key==="ArrowLeft"&&(a.preventDefault(),a.stopPropagation(),n(1,s.currentTime=Math.max(0,s.currentTime-5),s)),a.key==="ArrowRight"&&(a.preventDefault(),a.stopPropagation(),n(1,s.currentTime=Math.min(s.duration,s.currentTime+5),s)))};rt(()=>{s&&(Ke==null||Ke.observe(s)),document.addEventListener("keydown",o)}),ot(()=>{s&&(Ke==null||Ke.unobserve(s)),document.removeEventListener("keydown",o)});function r(a){ke[a?"unshift":"push"](()=>{s=a,n(1,s)})}return l.$$set=a=>{"post"in a&&n(0,t=a.post)},[t,s,r]}class gs extends pe{constructor(e){super(),_e(this,e,ds,_s,fe,{post:0})}}function ms(l){let e,n,t;return{c(){e=E("img"),this.h()},l(s){e=S(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){we(e.src,n=l[2])||g(e,"src",n),g(e,"alt",t="post #"+l[0].id),g(e,"class","svelte-itxz72"),Be(e,"top",l[1])},m(s,o){A(s,e,o)},p(s,[o]){o&4&&!we(e.src,n=s[2])&&g(e,"src",n),o&1&&t!==(t="post #"+s[0].id)&&g(e,"alt",t),o&2&&Be(e,"top",s[1])},i:X,o:X,d(s){s&&h(e)}}}function hs(l,e,n){let t,{post:s}=e,{offset:o}=e;return l.$$set=r=>{"post"in r&&n(0,s=r.post),"offset"in r&&n(1,o=r.offset)},l.$$.update=()=>{l.$$.dirty&1&&n(2,t=Cn(s.sample_url)?s.preview_url:s.sample_url)},[s,o,t]}class Xt extends pe{constructor(e){super(),_e(this,e,hs,ms,fe,{post:0,offset:1})}}function It(l,e,n){const t=l.slice();return t[17]=e[n],t[19]=n,t}function Dt(l){let e,n;return e=new Xt({props:{post:l[3],offset:l[6]}}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&8&&(o.post=t[3]),s&64&&(o.offset=t[6]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Pt(l){let e,n;return e=new Xt({props:{post:l[4],offset:l[7]}}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&16&&(o.post=t[4]),s&128&&(o.offset=t[7]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Nt(l){let e,n=`${l[19]*100}vh`;return{c(){e=E("div"),this.h()},l(t){e=S(t,"DIV",{class:!0}),O(e).forEach(h),this.h()},h(){g(e,"class","pseudo snap-item svelte-3khu3"),Be(e,"top",n)},m(t,s){A(t,e,s)},p:X,d(t){t&&h(e)}}}function $s(l){let e,n,t,s,o,r,a,i,c,u,_,f,w,m=l[3]&&Dt(l);s=new gs({props:{post:l[2]}}),r=new as({props:{post:l[2]}});let $=l[4]&&Pt(l),P=Pe({length:l[8].posts.length}),p=[];for(let v=0;v<P.length;v+=1)p[v]=Nt(It(l,P,v));return u=new Zt({props:{absoluteTop:l[8].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),u.$on("intersection",l[13]),{c(){e=E("div"),m&&m.c(),n=N(),t=E("div"),R(s.$$.fragment),o=N(),R(r.$$.fragment),a=N(),$&&$.c(),i=N();for(let v=0;v<p.length;v+=1)p[v].c();c=N(),R(u.$$.fragment),this.h()},l(v){e=S(v,"DIV",{class:!0});var k=O(e);m&&m.l(k),n=T(k),t=S(k,"DIV",{class:!0});var C=O(t);V(s.$$.fragment,C),o=T(C),V(r.$$.fragment,C),C.forEach(h),a=T(k),$&&$.l(k),i=T(k);for(let G=0;G<p.length;G+=1)p[G].l(k);c=T(k),V(u.$$.fragment,k),k.forEach(h),this.h()},h(){g(t,"class","screen snap-container horizontal current svelte-3khu3"),Be(t,"top",l[5]),g(e,"class","root screen snap-container svelte-3khu3")},m(v,k){A(v,e,k),m&&m.m(e,null),d(e,n),d(e,t),M(s,t,null),d(t,o),M(r,t,null),l[12](t),d(e,a),$&&$.m(e,null),d(e,i);for(let C=0;C<p.length;C+=1)p[C]&&p[C].m(e,null);d(e,c),M(u,e,null),l[14](e),_=!0,f||(w=Ie(e,"scroll",l[10]),f=!0)},p(v,[k]){v[3]?m?(m.p(v,k),k&8&&b(m,1)):(m=Dt(v),m.c(),b(m,1),m.m(e,n)):m&&(ce(),y(m,1,1,()=>{m=null}),ue());const C={};k&4&&(C.post=v[2]),s.$set(C);const G={};if(k&4&&(G.post=v[2]),r.$set(G),k&32&&Be(t,"top",v[5]),v[4]?$?($.p(v,k),k&16&&b($,1)):($=Pt(v),$.c(),b($,1),$.m(e,i)):$&&(ce(),y($,1,1,()=>{$=null}),ue()),k&256){P=Pe({length:v[8].posts.length});let J;for(J=0;J<P.length;J+=1){const Y=It(v,P,J);p[J]?p[J].p(Y,k):(p[J]=Nt(Y),p[J].c(),p[J].m(e,c))}for(;J<p.length;J+=1)p[J].d(1);p.length=P.length}const te={};k&256&&(te.absoluteTop=v[8].posts.length*100+"vh"),u.$set(te)},i(v){_||(b(m),b(s.$$.fragment,v),b(r.$$.fragment,v),b($),b(u.$$.fragment,v),_=!0)},o(v){y(m),y(s.$$.fragment,v),y(r.$$.fragment,v),y($),y(u.$$.fragment,v),_=!1},d(v){v&&h(e),m&&m.d(),L(s),L(r),l[12](null),$&&$.d(),Ye(p,v),L(u),l[14](null),f=!1,w()}}}function vs(l,e,n){let t;ge(l,Je,C=>n(8,t=C));let{index:s}=e,o,r,a=t.posts[s],i=s>0?t.posts[s-1]:void 0,c=s<t.posts.length-1?t.posts[s+1]:void 0,u=`${s*100}vh`,_=`${(s-1)*100}vh`,f=`${(s+1)*100}vh`;const w=je(),m=()=>{r&&(r.scrollIntoView(),n(1,r.scrollLeft=0,r))},$=C=>{const G=C.target,te=G.getBoundingClientRect().height,J=G.scrollTop/te,Y=Math.round(J);Y!=s&&requestAnimationFrame(()=>{n(11,s=Y),n(2,a=t.posts[s]),n(3,i=s>0?t.posts[s-1]:void 0),n(4,c=s<t.posts.length-1?t.posts[s+1]:void 0),n(5,u=`${s*100}vh`),n(6,_=`${(s-1)*100}vh`),n(7,f=`${(s+1)*100}vh`),r&&n(1,r.scrollLeft=0,r)})},P=C=>{C.key==="d"&&(C.preventDefault(),C.stopPropagation(),r.scrollLeft===0?r.scrollBy({left:o.clientWidth,top:0,behavior:"smooth"}):r.scrollBy({left:-o.clientWidth,top:0,behavior:"smooth"})),C.key==="ArrowUp"&&(C.preventDefault(),C.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(s-1),behavior:"smooth"})),C.key==="ArrowDown"&&(C.preventDefault(),C.stopPropagation(),o.scrollTo({left:0,top:o.clientHeight*(s+1),behavior:"smooth"}))};rt(()=>{document.addEventListener("keydown",P),m()}),ot(()=>{document.removeEventListener("keydown",P)});function p(C){ke[C?"unshift":"push"](()=>{r=C,n(1,r)})}const v=()=>{w("endreached")};function k(C){ke[C?"unshift":"push"](()=>{o=C,n(0,o)})}return l.$$set=C=>{"index"in C&&n(11,s=C.index)},[o,r,a,i,c,u,_,f,t,w,$,s,p,v,k]}class bs extends pe{constructor(e){super(),_e(this,e,vs,$s,fe,{index:11})}}function ks(l){let e;return{c(){e=E("i"),this.h()},l(n){e=S(n,"I",{class:!0}),O(e).forEach(h),this.h()},h(){g(e,"class","codicon codicon-close")},m(n,t){A(n,e,t)},p:X,d(n){n&&h(e)}}}function ws(l){let e,n,t,s,o;function r(i){l[2](i)}let a={};return l[0]!==void 0&&(a.index=l[0]),e=new bs({props:a}),ke.push(()=>Re(e,"index",r)),e.$on("endreached",l[3]),s=new Ht({props:{class:"button-close",$$slots:{default:[ks]},$$scope:{ctx:l}}}),s.$on("click",l[1]),{c(){R(e.$$.fragment),t=N(),R(s.$$.fragment)},l(i){V(e.$$.fragment,i),t=T(i),V(s.$$.fragment,i)},m(i,c){M(e,i,c),A(i,t,c),M(s,i,c),o=!0},p(i,c){const u={};!n&&c&1&&(n=!0,u.index=i[0],Fe(()=>n=!1)),e.$set(u);const _={};c&128&&(_.$$scope={dirty:c,ctx:i}),s.$set(_)},i(i){o||(b(e.$$.fragment,i),b(s.$$.fragment,i),o=!0)},o(i){y(e.$$.fragment,i),y(s.$$.fragment,i),o=!1},d(i){i&&h(t),L(e,i),L(s,i)}}}function ys(l){let e,n;return e=new Xn({props:{$$slots:{default:[ws]},$$scope:{ctx:l}}}),e.$on("close",l[1]),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,[s]){const o={};s&129&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Cs(l,e,n){let{index:t}=e;const s=je(),o=()=>{s("close",t)},r=u=>{u.key==="f"&&(u.preventDefault(),u.stopPropagation(),o())},a=()=>{var u,_;(((u=history.state)==null?void 0:u.fullscreen)===void 0||((_=history.state)==null?void 0:_.fullscreen)===!1)&&o()};rt(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),ot(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(u){t=u,n(0,t)}function c(u){nt.call(this,l,u)}return l.$$set=u=>{"index"in u&&n(0,t=u.index)},[t,o,i,c]}class Es extends pe{constructor(e){super(),_e(this,e,Cs,ys,fe,{index:0})}}function Tt(l){let e,n=l[0].type==="video"?"▶":"GIF",t;return{c(){e=E("span"),t=ie(n),this.h()},l(s){e=S(s,"SPAN",{class:!0});var o=O(e);t=ae(o,n),o.forEach(h),this.h()},h(){g(e,"class","type svelte-1213alg")},m(s,o){A(s,e,o),d(e,t)},p(s,o){o&1&&n!==(n=s[0].type==="video"?"▶":"GIF")&&Le(t,n)},d(s){s&&h(e)}}}function Ss(l){let e,n,t,s,o,r=st(l[0].score)+"",a,i,c,u,_,f=l[0].type!=="image"&&Tt(l);return{c(){e=E("div"),n=E("img"),s=N(),o=E("span"),a=ie(r),i=N(),f&&f.c(),this.h()},l(w){e=S(w,"DIV",{id:!0,class:!0,style:!0});var m=O(e);n=S(m,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),s=T(m),o=S(m,"SPAN",{class:!0});var $=O(o);a=ae($,r),$.forEach(h),i=T(m),f&&f.l(m),m.forEach(h),this.h()},h(){we(n.src,t=l[1])||g(n,"src",t),g(n,"alt","post"),g(n,"class","post-media svelte-1213alg"),g(n,"tabindex","-1"),g(n,"loading","lazy"),g(o,"class","score svelte-1213alg"),g(e,"id",c=lt(l[0].id)),g(e,"class","post svelte-1213alg"),Be(e,"grid-row","span "+l[2]),at(e,"open",open)},m(w,m){A(w,e,m),d(e,n),d(e,s),d(e,o),d(o,a),d(e,i),f&&f.m(e,null),u||(_=[Ie(e,"click",l[3]),Ie(e,"keydown",l[4])],u=!0)},p(w,[m]){m&2&&!we(n.src,t=w[1])&&g(n,"src",t),m&1&&r!==(r=st(w[0].score)+"")&&Le(a,r),w[0].type!=="image"?f?f.p(w,m):(f=Tt(w),f.c(),f.m(e,null)):f&&(f.d(1),f=null),m&1&&c!==(c=lt(w[0].id))&&g(e,"id",c),m&0&&at(e,"open",open)},i:X,o:X,d(w){w&&h(e),f&&f.d(),u=!1,ct(_)}}}let At=3;function Is(l,e,n){let t,{post:s}=e,o=Math.min(Math.round(s.height/s.width)*At,At*3);const r=c=>c.endsWith(".jpg")||c.endsWith(".jpeg")||c.endsWith(".png")||c.endsWith(".webp");function a(c){nt.call(this,l,c)}const i=c=>{var u;(Qt(c)||c.key==="f")&&((u=c.target)==null||u.click())};return l.$$set=c=>{"post"in c&&n(0,s=c.post)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=r(s.sample_url)?s.sample_url:s.preview_url)},[s,t,o,a,i]}class Ds extends pe{constructor(e){super(),_e(this,e,Is,Ss,fe,{post:0})}}function Ps(l){const e=l.slice(),n=Jt(e[1].file_url,e[1].sample_url,e[1].preview_url);e[7]=n;const t=e[7].animated;e[8]=t;const s=e[7].static;return e[9]=s,e}function Ns(l){let e,n;return e=new Sn({props:{post:l[1]}}),e.$on("click",l[4]),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ts(l){let e,n;return e=new In({props:{src:l[8],poster:l[9],width:l[1].width,height:l[1].height,loop:l[2]||gt(l[1].tags)}}),e.$on("click",l[4]),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.src=t[8]),s&2&&(o.poster=t[9]),s&2&&(o.width=t[1].width),s&2&&(o.height=t[1].height),s&6&&(o.loop=t[2]||gt(t[1].tags)),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function As(l){let e,n;return e=new Dn({props:{post:l[1],open:l[0]}}),e.$on("click",l[4]),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),s&1&&(o.open=t[0]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Os(l){let e;return{c(){e=E("i"),this.h()},l(n){e=S(n,"I",{class:!0}),O(e).forEach(h),this.h()},h(){g(e,"class","codicon codicon-screen-full")},m(n,t){A(n,e,t)},p:X,d(n){n&&h(e)}}}function Ot(l){let e,n;return e=new En({props:{post:l[1]}}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.post=t[1]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Fs(l){let e,n,t,s,o,r,a,i,c,u;const _=[As,Ts,Ns],f=[];function w(P,p){return P[1].type==="image"?0:P[1].type==="video"?1:2}function m(P,p){return p===1?Ps(P):P}n=w(l),t=f[n]=_[n](m(l,n)),o=new Ht({props:{class:"button-fullscreen","aria-label":"Enter Fullscreen mode",$$slots:{default:[Os]},$$scope:{ctx:l}}}),o.$on("click",l[5]);let $=l[0]&&Ot(l);return{c(){e=E("div"),t.c(),s=N(),R(o.$$.fragment),r=N(),$&&$.c(),this.h()},l(P){e=S(P,"DIV",{id:!0,class:!0});var p=O(e);t.l(p),s=T(p),V(o.$$.fragment,p),r=T(p),$&&$.l(p),p.forEach(h),this.h()},h(){g(e,"id",a=lt(l[1].id)),g(e,"class","post svelte-pwgq1f"),at(e,"open",l[0])},m(P,p){A(P,e,p),f[n].m(e,null),d(e,s),M(o,e,null),d(e,r),$&&$.m(e,null),i=!0,c||(u=Ie(e,"keydown",l[6]),c=!0)},p(P,[p]){let v=n;n=w(P),n===v?f[n].p(m(P,n),p):(ce(),y(f[v],1,1,()=>{f[v]=null}),ue(),t=f[n],t?t.p(m(P,n),p):(t=f[n]=_[n](m(P,n)),t.c()),b(t,1),t.m(e,s));const k={};p&1024&&(k.$$scope={dirty:p,ctx:P}),o.$set(k),P[0]?$?($.p(P,p),p&1&&b($,1)):($=Ot(P),$.c(),b($,1),$.m(e,null)):$&&(ce(),y($,1,1,()=>{$=null}),ue()),(!i||p&2&&a!==(a=lt(P[1].id)))&&g(e,"id",a),(!i||p&1)&&at(e,"open",P[0])},i(P){i||(b(t),b(o.$$.fragment,P),b($),i=!0)},o(P){y(t),y(o.$$.fragment,P),y($),i=!1},d(P){P&&h(e),f[n].d(),L(o),$&&$.d(),c=!1,u()}}}function Rs(l,e,n){let t;ge(l,Pn,u=>n(2,t=u));const s=je(),o=()=>n(0,a=!a);let{post:r}=e,{open:a=!1}=e;const i=()=>s("fullscreen"),c=u=>{u.key==="f"&&s("fullscreen")};return l.$$set=u=>{"post"in u&&n(1,r=u.post),"open"in u&&n(0,a=u.open)},[a,r,t,s,o,i,c]}class Vs extends pe{constructor(e){super(),_e(this,e,Rs,Fs,fe,{post:1,open:0})}}function Ms(l){let e;return{c(){e=ie("Done")},l(n){e=ae(n,"Done")},m(n,t){A(n,e,t)},d(n){n&&h(e)}}}function Ls(l){let e;return{c(){e=ie("Reset")},l(n){e=ae(n,"Reset")},m(n,t){A(n,e,t)},d(n){n&&h(e)}}}function Bs(l){let e,n,t="Sorting and Filtering",s,o,r,a="Sorting",i,c,u,_,f,w,m,$,P,p,v="Filtering by Score",k,C,G,te,J,Y,H,D,U,I="Filtering by Rating",x,K,F,le,B,j,ne,Q,me,he,Oe;function Ee(z){l[6](z)}let Ze={options:Gs};l[3].direction!==void 0&&(Ze.value=l[3].direction),u=new dn({props:Ze}),ke.push(()=>Re(u,"value",Ee));function Xe(z){l[7](z)}let Ne={options:zs};l[3].property!==void 0&&(Ne.value=l[3].property),w=new mt({props:Ne}),ke.push(()=>Re(w,"value",Xe));function xe(z){l[8](z)}let Ge={options:Us};l[2].scoreComparator!==void 0&&(Ge.value=l[2].scoreComparator),G=new Tn({props:Ge}),ke.push(()=>Re(G,"value",xe));function Ve(z){l[10](z)}let Ue={options:xt};return l[2].rating!==void 0&&(Ue.value=l[2].rating),F=new mt({props:Ue}),ke.push(()=>Re(F,"value",Ve)),j=new Qe({props:{title:"Return to searching.",$$slots:{default:[Ms]},$$scope:{ctx:l}}}),j.$on("click",l[11]),Q=new Qe({props:{title:"Reset sort and filter.",type:"secondary",$$slots:{default:[Ls]},$$scope:{ctx:l}}}),Q.$on("click",l[5]),{c(){e=E("div"),n=E("h3"),n.textContent=t,s=N(),o=E("div"),r=E("b"),r.textContent=a,i=N(),c=E("div"),R(u.$$.fragment),f=N(),R(w.$$.fragment),$=N(),P=E("div"),p=E("b"),p.textContent=v,k=N(),C=E("div"),R(G.$$.fragment),J=N(),Y=E("input"),H=N(),D=E("div"),U=E("b"),U.textContent=I,x=N(),K=E("div"),R(F.$$.fragment),B=N(),R(j.$$.fragment),ne=N(),R(Q.$$.fragment),this.h()},l(z){e=S(z,"DIV",{class:!0});var Z=O(e);n=S(Z,"H3",{"data-svelte-h":!0}),oe(n)!=="svelte-15zouq3"&&(n.textContent=t),s=T(Z),o=S(Z,"DIV",{});var Ae=O(o);r=S(Ae,"B",{class:!0,"data-svelte-h":!0}),oe(r)!=="svelte-ekzpgg"&&(r.textContent=a),i=T(Ae),c=S(Ae,"DIV",{class:!0});var Te=O(c);V(u.$$.fragment,Te),f=T(Te),V(w.$$.fragment,Te),Te.forEach(h),Ae.forEach(h),$=T(Z),P=S(Z,"DIV",{});var Se=O(P);p=S(Se,"B",{class:!0,"data-svelte-h":!0}),oe(p)!=="svelte-1flca3"&&(p.textContent=v),k=T(Se),C=S(Se,"DIV",{class:!0});var $e=O(C);V(G.$$.fragment,$e),J=T($e),Y=S($e,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),$e.forEach(h),Se.forEach(h),H=T(Z),D=S(Z,"DIV",{});var ee=O(D);U=S(ee,"B",{class:!0,"data-svelte-h":!0}),oe(U)!=="svelte-1evbw58"&&(U.textContent=I),x=T(ee),K=S(ee,"DIV",{class:!0});var ye=O(K);V(F.$$.fragment,ye),ye.forEach(h),ee.forEach(h),B=T(Z),V(j.$$.fragment,Z),ne=T(Z),V(Q.$$.fragment,Z),Z.forEach(h),this.h()},h(){g(r,"class","svelte-kdg2ou"),g(c,"class","row svelte-kdg2ou"),g(p,"class","svelte-kdg2ou"),g(Y,"type","number"),g(Y,"min",0),g(Y,"max",1e5),g(Y,"step",1),g(Y,"class","svelte-kdg2ou"),g(C,"class","row svelte-kdg2ou"),g(U,"class","svelte-kdg2ou"),g(K,"class","row svelte-kdg2ou"),g(e,"class","container svelte-kdg2ou")},m(z,Z){A(z,e,Z),d(e,n),d(e,s),d(e,o),d(o,r),d(o,i),d(o,c),M(u,c,null),d(c,f),M(w,c,null),d(e,$),d(e,P),d(P,p),d(P,k),d(P,C),M(G,C,null),d(C,J),d(C,Y),We(Y,l[1]),d(e,H),d(e,D),d(D,U),d(D,x),d(D,K),M(F,K,null),d(e,B),M(j,e,null),d(e,ne),M(Q,e,null),me=!0,he||(Oe=[Ie(Y,"input",l[9]),Ie(Y,"keyup",l[4])],he=!0)},p(z,Z){const Ae={};!_&&Z&8&&(_=!0,Ae.value=z[3].direction,Fe(()=>_=!1)),u.$set(Ae);const Te={};!m&&Z&8&&(m=!0,Te.value=z[3].property,Fe(()=>m=!1)),w.$set(Te);const Se={};!te&&Z&4&&(te=!0,Se.value=z[2].scoreComparator,Fe(()=>te=!1)),G.$set(Se),Z&2&&zt(Y.value)!==z[1]&&We(Y,z[1]);const $e={};!le&&Z&4&&(le=!0,$e.value=z[2].rating,Fe(()=>le=!1)),F.$set($e);const ee={};Z&16384&&(ee.$$scope={dirty:Z,ctx:z}),j.$set(ee);const ye={};Z&16384&&(ye.$$scope={dirty:Z,ctx:z}),Q.$set(ye)},i(z){me||(b(u.$$.fragment,z),b(w.$$.fragment,z),b(G.$$.fragment,z),b(F.$$.fragment,z),b(j.$$.fragment,z),b(Q.$$.fragment,z),me=!0)},o(z){y(u.$$.fragment,z),y(w.$$.fragment,z),y(G.$$.fragment,z),y(F.$$.fragment,z),y(j.$$.fragment,z),y(Q.$$.fragment,z),me=!1},d(z){z&&h(e),L(u),L(w),L(G),L(F),L(j),L(Q),he=!1,ct(Oe)}}}function js(l){let e,n,t;function s(r){l[12](r)}let o={$$slots:{default:[Bs]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.dialog=l[0]),e=new Gt({props:o}),ke.push(()=>Re(e,"dialog",s)),e.$on("close",l[13]),{c(){R(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,[a]){const i={};a&16399&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],Fe(()=>n=!1)),e.$set(i)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){L(e,r)}}}const xt=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),zs=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),Gs=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),Us=Object.freeze({">=":"≥","<=":"≤"});function qs(l,e,n){let t,s;ge(l,Me,p=>n(2,t=p)),ge(l,ze,p=>n(3,s=p));let{dialog:o}=e,r;const a=p=>{var v;return Qt(p)&&((v=p.target)==null?void 0:v.blur())},i=()=>{ze.reset(),Me.reset(),n(1,r=t.scoreValue)};function c(p){l.$$.not_equal(s.direction,p)&&(s.direction=p,ze.set(s))}function u(p){l.$$.not_equal(s.property,p)&&(s.property=p,ze.set(s))}function _(p){l.$$.not_equal(t.scoreComparator,p)&&(t.scoreComparator=p,Me.set(t))}function f(){r=zt(this.value),n(1,r),n(2,t)}function w(p){l.$$.not_equal(t.rating,p)&&(t.rating=p,Me.set(t))}const m=()=>o.close();function $(p){o=p,n(0,o)}function P(p){nt.call(this,l,p)}return l.$$set=p=>{"dialog"in p&&n(0,o=p.dialog)},l.$$.update=()=>{if(l.$$.dirty&6){r===void 0&&n(1,r=t.scoreValue);let p=Number(r);isNaN(p)||on(Me,t.scoreValue=p,t)}},[o,r,t,s,a,i,c,u,_,f,w,m,$,P]}class Hs extends pe{constructor(e){super(),_e(this,e,qs,js,fe,{dialog:0})}}function Ks(l){let e,n,t,s,o,r,a,i,c,u,_,f,w,m,$,P;function p(k){l[9](k)}let v={};return l[2]!==void 0&&(v.dialog=l[2]),f=new Hs({props:v}),ke.push(()=>Re(f,"dialog",p)),f.$on("close",l[10]),{c(){e=E("button"),n=E("i"),t=N(),s=E("span"),o=ie(l[5]),r=N(),a=E("i"),i=N(),c=E("span"),u=ie(l[4]),_=N(),R(f.$$.fragment),this.h()},l(k){e=S(k,"BUTTON",{class:!0});var C=O(e);n=S(C,"I",{class:!0}),O(n).forEach(h),t=T(C),s=S(C,"SPAN",{});var G=O(s);o=ae(G,l[5]),G.forEach(h),r=T(C),a=S(C,"I",{class:!0}),O(a).forEach(h),i=T(C),c=S(C,"SPAN",{});var te=O(c);u=ae(te,l[4]),te.forEach(h),C.forEach(h),_=T(k),V(f.$$.fragment,k),this.h()},h(){g(n,"class","codicon codicon-filter svelte-a4zz3f"),g(a,"class","codicon codicon-arrow-swap svelte-a4zz3f"),g(e,"class","svelte-a4zz3f")},m(k,C){A(k,e,C),d(e,n),d(e,t),d(e,s),d(s,o),d(e,r),d(e,a),d(e,i),d(e,c),d(c,u),A(k,_,C),M(f,k,C),m=!0,$||(P=Ie(e,"click",l[8]),$=!0)},p(k,[C]){(!m||C&32)&&Le(o,k[5]),(!m||C&16)&&Le(u,k[4]);const G={};!w&&C&4&&(w=!0,G.dialog=k[2],Fe(()=>w=!1)),f.$set(G)},i(k){m||(b(f.$$.fragment,k),m=!0)},o(k){y(f.$$.fragment,k),m=!1},d(k){k&&(h(e),h(_)),L(f,k),$=!1,P()}}}const Ws=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),Js=(l,e,n)=>{let t=l==="all"?void 0:xt[l],s=e===0&&n===">="?void 0:`Score${n}${st(e)}`;return[t,s].filter(o=>o!==void 0).join(",")||"All"};function Qs(l,e,n){let t,s,o,r;ge(l,ze,m=>n(0,o=m)),ge(l,Me,m=>n(1,r=m));const a=je(),i=(m,$)=>JSON.stringify(Object.assign({},m,$));let c,u="";const _=()=>{n(3,u=i(o,r)),c.showModal()};function f(m){c=m,n(2,c)}const w=()=>{i(o,r)!==u&&a("sortfilterupdate")};return l.$$.update=()=>{l.$$.dirty&2&&n(5,t=Js(r.rating,r.scoreValue,r.scoreComparator)),l.$$.dirty&1&&n(4,s=Ws[o.property][o.direction])},[o,r,c,u,s,t,a,i,_,f,w]}class Ys extends pe{constructor(e){super(),_e(this,e,Qs,Ks,fe,{})}}function Ft(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function Rt(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function Zs(l){let e,n,t=Pe(l[1].posts),s=[];for(let r=0;r<t.length;r+=1)s[r]=Vt(Ft(l,t,r));const o=r=>y(s[r],1,1,()=>{s[r]=null});return{c(){e=E("section");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"SECTION",{class:!0,style:!0});var a=O(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(h),this.h()},h(){g(e,"class","multi-column svelte-wypqh"),Be(e,"grid-template-columns","repeat("+l[2]+", 1fr)")},m(r,a){A(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&3){t=Pe(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Ft(r,t,i);s[i]?(s[i].p(c,a),b(s[i],1)):(s[i]=Vt(c),s[i].c(),b(s[i],1),s[i].m(e,null))}for(ce(),i=t.length;i<s.length;i+=1)o(i);ue()}(!n||a&4)&&Be(e,"grid-template-columns","repeat("+r[2]+", 1fr)")},i(r){if(!n){for(let a=0;a<t.length;a+=1)b(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)y(s[a]);n=!1},d(r){r&&h(e),Ye(s,r)}}}function Xs(l){let e,n,t=Pe(l[1].posts),s=[];for(let r=0;r<t.length;r+=1)s[r]=Mt(Rt(l,t,r));const o=r=>y(s[r],1,1,()=>{s[r]=null});return{c(){e=E("section");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"SECTION",{class:!0});var a=O(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(h),this.h()},h(){g(e,"class","single-column svelte-wypqh")},m(r,a){A(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);n=!0},p(r,a){if(a&3){t=Pe(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Rt(r,t,i);s[i]?(s[i].p(c,a),b(s[i],1)):(s[i]=Mt(c),s[i].c(),b(s[i],1),s[i].m(e,null))}for(ce(),i=t.length;i<s.length;i+=1)o(i);ue()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)b(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)y(s[a]);n=!1},d(r){r&&h(e),Ye(s,r)}}}function Vt(l){let e,n;function t(){return l[6](l[10])}return e=new Ds({props:{post:l[8]}}),e.$on("click",t),{c(){R(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,o){M(e,s,o),n=!0},p(s,o){l=s;const r={};o&2&&(r.post=l[8]),e.$set(r)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){L(e,s)}}}function Mt(l){let e,n;function t(){return l[5](l[10])}return e=new Vs({props:{post:l[8]}}),e.$on("fullscreen",t),{c(){R(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,o){M(e,s,o),n=!0},p(s,o){l=s;const r={};o&2&&(r.post=l[8]),e.$set(r)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){L(e,s)}}}function Lt(l){let e,n;return e=new Es({props:{index:l[0]}}),e.$on("close",l[3]),e.$on("endreached",l[7]),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&1&&(o.index=t[0]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function xs(l){let e,n,t=st(l[1].postCount)+"",s,o,r,a,i,c,u,_,f,w;a=new Ys({}),a.$on("sortfilterupdate",l[4]);const m=[Xs,Zs],$=[];function P(v,k){return v[2]==="1"?0:1}c=P(l),u=$[c]=m[c](l);let p=l[0]!==void 0&&Lt(l);return{c(){e=E("div"),n=E("span"),s=ie(t),o=ie(" posts"),r=N(),R(a.$$.fragment),i=N(),u.c(),_=N(),p&&p.c(),f=De(),this.h()},l(v){e=S(v,"DIV",{class:!0});var k=O(e);n=S(k,"SPAN",{});var C=O(n);s=ae(C,t),o=ae(C," posts"),C.forEach(h),r=T(k),V(a.$$.fragment,k),k.forEach(h),i=T(v),u.l(v),_=T(v),p&&p.l(v),f=De(),this.h()},h(){g(e,"class","svelte-wypqh")},m(v,k){A(v,e,k),d(e,n),d(n,s),d(n,o),d(e,r),M(a,e,null),A(v,i,k),$[c].m(v,k),A(v,_,k),p&&p.m(v,k),A(v,f,k),w=!0},p(v,[k]){(!w||k&2)&&t!==(t=st(v[1].postCount)+"")&&Le(s,t);let C=c;c=P(v),c===C?$[c].p(v,k):(ce(),y($[C],1,1,()=>{$[C]=null}),ue(),u=$[c],u?u.p(v,k):(u=$[c]=m[c](v),u.c()),b(u,1),u.m(_.parentNode,_)),v[0]!==void 0?p?(p.p(v,k),k&1&&b(p,1)):(p=Lt(v),p.c(),b(p,1),p.m(f.parentNode,f)):p&&(ce(),y(p,1,1,()=>{p=null}),ue())},i(v){w||(b(a.$$.fragment,v),b(u),b(p),w=!0)},o(v){y(a.$$.fragment,v),y(u),y(p),w=!1},d(v){v&&(h(e),h(i),h(_),h(f)),L(a),$[c].d(v),p&&p.d(v)}}}function el(l,e,n){let t,s;ge(l,Je,_=>n(1,t=_)),ge(l,Ut,_=>n(2,s=_));let o;const r=_=>{var m;const f=t.posts[_.detail],w=lt(f.id);(m=document.getElementById(w))==null||m.scrollIntoView(),n(0,o=void 0)};function a(_){nt.call(this,l,_)}const i=_=>{n(0,o=_)},c=_=>{n(0,o=_)};function u(_){nt.call(this,l,_)}return l.$$.update=()=>{var _;l.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(_=history.state)!=null&&_.fullscreen&&history.back())},[o,t,s,r,a,i,c,u]}class tl extends pe{constructor(e){super(),_e(this,e,el,xs,fe,{})}}function nl(l){let e;return{c(){e=ie("Reset Filter")},l(n){e=ae(n,"Reset Filter")},m(n,t){A(n,e,t)},d(n){n&&h(e)}}}function sl(l){let e,n,t,s,o="We couldn't find any posts matching your tags. Sorry...",r,a,i;return a=new Qe({props:{title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[nl]},$$scope:{ctx:l}}}),a.$on("click",l[1]),{c(){e=E("img"),t=N(),s=E("p"),s.textContent=o,r=N(),R(a.$$.fragment),this.h()},l(c){e=S(c,"IMG",{src:!0,alt:!0,class:!0}),t=T(c),s=S(c,"P",{"data-svelte-h":!0}),oe(s)!=="svelte-1utxj3w"&&(s.textContent=o),r=T(c),V(a.$$.fragment,c),this.h()},h(){we(e.src,n=qt+"/assets/shironeko-confused.png")||g(e,"src",n),g(e,"alt","Nothing here..."),g(e,"class","svelte-1bb5e7g")},m(c,u){A(c,e,u),A(c,t,u),A(c,s,u),A(c,r,u),M(a,c,u),i=!0},p(c,[u]){const _={};u&4&&(_.$$scope={dirty:u,ctx:c}),a.$set(_)},i(c){i||(b(a.$$.fragment,c),i=!0)},o(c){y(a.$$.fragment,c),i=!1},d(c){c&&(h(e),h(t),h(s),h(r)),L(a,c)}}}function ll(l){const e=je();return[e,()=>{ze.reset(),Me.reset(),e("sortfilterupdate")}]}class rl extends pe{constructor(e){super(),_e(this,e,ll,sl,fe,{})}}function ol(l){const e=l-1;return e*e*e+1}function il(l,{delay:e=0,duration:n=400,easing:t=ol,x:s=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(l),i=+a.opacity,c=a.transform==="none"?"":a.transform,u=i*(1-r),[_,f]=pt(s),[w,m]=pt(o);return{delay:e,duration:n,easing:t,css:($,P)=>`
			transform: ${c} translate(${(1-$)*_}${f}, ${(1-$)*w}${m});
			opacity: ${i-u*P}`}}function al(l){let e;return{c(){e=ie("Ok")},l(n){e=ae(n,"Ok")},m(n,t){A(n,e,t)},d(n){n&&h(e)}}}function cl(l){let e,n,t="This site uses cookies",s,o,r,a;return o=new Qe({props:{title:"Accept cookies",$$slots:{default:[al]},$$scope:{ctx:l}}}),o.$on("click",l[0]),{c(){e=E("div"),n=E("span"),n.textContent=t,s=N(),R(o.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var c=O(e);n=S(c,"SPAN",{"data-svelte-h":!0}),oe(n)!=="svelte-17tpe0c"&&(n.textContent=t),s=T(c),V(o.$$.fragment,c),c.forEach(h),this.h()},h(){g(e,"class","svelte-20j44m")},m(i,c){A(i,e,c),d(e,n),d(e,s),M(o,e,null),a=!0},p(i,[c]){const u={};c&2&&(u.$$scope={dirty:c,ctx:i}),o.$set(u)},i(i){a||(b(o.$$.fragment,i),r&&r.end(1),a=!0)},o(i){y(o.$$.fragment,i),i&&(r=cn(e,il,{y:200,duration:200})),a=!1},d(i){i&&h(e),L(o),i&&r&&r.end()}}}function ul(l){return[()=>Yt.set(!0)]}class fl extends pe{constructor(e){super(),_e(this,e,ul,cl,fe,{})}}const{document:ft}=un;function pl(l){let e;return{c(){e=ie("Search")},l(n){e=ae(n,"Search")},m(n,t){A(n,e,t)},i:X,o:X,d(n){n&&h(e)}}}function _l(l){let e,n;return e=new Kt({}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function dl(l){let e,n,t,s;const o=[_l,pl],r=[];function a(i,c){return i[0]?0:1}return e=a(l),n=r[e]=o[e](l),{c(){n.c(),t=De()},l(i){n.l(i),t=De()},m(i,c){r[e].m(i,c),A(i,t,c),s=!0},p(i,c){let u=e;e=a(i),e!==u&&(ce(),y(r[u],1,1,()=>{r[u]=null}),ue(),n=r[e],n||(n=r[e]=o[e](i),n.c()),b(n,1),n.m(t.parentNode,t))},i(i){s||(b(n),s=!0)},o(i){y(n),s=!1},d(i){i&&h(t),r[e].d(i)}}}function gl(l){let e,n,t,s,o,r;const a=[$l,hl],i=[];function c(u,_){return u[3].postCount===0?0:1}return n=c(l),t=i[n]=a[n](l),o=new On({}),{c(){e=E("section"),t.c(),s=N(),R(o.$$.fragment),this.h()},l(u){e=S(u,"SECTION",{class:!0});var _=O(e);t.l(_),_.forEach(h),s=T(u),V(o.$$.fragment,u),this.h()},h(){g(e,"class","svelte-nujk24")},m(u,_){A(u,e,_),i[n].m(e,null),A(u,s,_),M(o,u,_),r=!0},p(u,_){let f=n;n=c(u),n===f?i[n].p(u,_):(ce(),y(i[f],1,1,()=>{i[f]=null}),ue(),t=i[n],t?t.p(u,_):(t=i[n]=a[n](u),t.c()),b(t,1),t.m(e,null))},i(u){r||(b(t),b(o.$$.fragment,u),r=!0)},o(u){y(t),y(o.$$.fragment,u),r=!1},d(u){u&&(h(e),h(s)),i[n].d(),L(o,u)}}}function ml(l){let e,n;return e=new Kn({props:{error:l[1]}}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&2&&(o.error=t[1]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function hl(l){let e,n,t,s,o,r;e=new tl({}),e.$on("sortfilterupdate",l[10]),e.$on("endreached",l[11]);const a=[bl,vl],i=[];function c(u,_){return u[3].posts.length===u[3].postCount?0:1}return t=c(l),s=i[t]=a[t](l),{c(){R(e.$$.fragment),n=N(),s.c(),o=De()},l(u){V(e.$$.fragment,u),n=T(u),s.l(u),o=De()},m(u,_){M(e,u,_),A(u,n,_),i[t].m(u,_),A(u,o,_),r=!0},p(u,_){let f=t;t=c(u),t===f?i[t].p(u,_):(ce(),y(i[f],1,1,()=>{i[f]=null}),ue(),s=i[t],s?s.p(u,_):(s=i[t]=a[t](u),s.c()),b(s,1),s.m(o.parentNode,o))},i(u){r||(b(e.$$.fragment,u),b(s),r=!0)},o(u){y(e.$$.fragment,u),y(s),r=!1},d(u){u&&(h(n),h(o)),L(e,u),i[t].d(u)}}}function $l(l){let e,n;return e=new rl({}),e.$on("sortfilterupdate",l[10]),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p:X,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function vl(l){let e,n;return e=new Zt({props:{absoluteTop:void 0,rootMargin:1e3/Number(l[7])+"px"}}),e.$on("intersection",l[11]),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const o={};s&128&&(o.rootMargin=1e3/Number(t[7])+"px"),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function bl(l){let e,n;return e=new Jn({}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p:X,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Bt(l){let e,n;return e=new fl({}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function kl(l){let e,n,t,s,o,r,a,i,c,u,_,f,w,m,$,P,p,v,k;s=new pn({}),r=new An({props:{placeholder:"Search for tags",fetchSuggestions:l[9]}}),r.$on("pick",l[12]),i=new Qe({props:{title:"Search with the tags above",$$slots:{default:[dl]},$$scope:{ctx:l}}}),i.$on("click",l[10]),u=new _n({props:{tags:[...l[5],...l[4]]}}),u.$on("click",l[13]),u.$on("contextmenu",l[14]),u.$on("createSupertag",l[15]);const C=[ml,gl],G=[];function te(D,U){return D[1]?0:D[3].requested?1:-1}~(f=te(l))&&(w=G[f]=C[f](l));function J(D){l[16](D)}let Y={tags:l[5]};l[2]!==void 0&&(Y.dialog=l[2]),$=new Un({props:Y}),ke.push(()=>Re($,"dialog",J)),$.$on("submit",l[17]);let H=!l[8]&&Bt();return{c(){e=E("meta"),n=N(),t=E("section"),R(s.$$.fragment),o=N(),R(r.$$.fragment),a=N(),R(i.$$.fragment),c=N(),R(u.$$.fragment),_=N(),w&&w.c(),m=N(),R($.$$.fragment),p=N(),H&&H.c(),v=De(),this.h()},l(D){const U=an("svelte-7jdp3v",ft.head);e=S(U,"META",{name:!0,content:!0}),U.forEach(h),n=T(D),t=S(D,"SECTION",{id:!0,class:!0});var I=O(t);V(s.$$.fragment,I),o=T(I),V(r.$$.fragment,I),a=T(I),V(i.$$.fragment,I),c=T(I),V(u.$$.fragment,I),I.forEach(h),_=T(D),w&&w.l(D),m=T(D),V($.$$.fragment,D),p=T(D),H&&H.l(D),v=De(),this.h()},h(){ft.title="kurosearch - Rule34 Hentai",g(e,"name","description"),g(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience."),g(t,"id","search"),g(t,"class","svelte-nujk24")},m(D,U){d(ft.head,e),A(D,n,U),A(D,t,U),M(s,t,null),d(t,o),M(r,t,null),d(t,a),M(i,t,null),d(t,c),M(u,t,null),A(D,_,U),~f&&G[f].m(D,U),A(D,m,U),M($,D,U),A(D,p,U),H&&H.m(D,U),A(D,v,U),k=!0},p(D,[U]){const I={};U&33554433&&(I.$$scope={dirty:U,ctx:D}),i.$set(I);const x={};U&48&&(x.tags=[...D[5],...D[4]]),u.$set(x);let K=f;f=te(D),f===K?~f&&G[f].p(D,U):(w&&(ce(),y(G[K],1,1,()=>{G[K]=null}),ue()),~f?(w=G[f],w?w.p(D,U):(w=G[f]=C[f](D),w.c()),b(w,1),w.m(m.parentNode,m)):w=null);const F={};U&32&&(F.tags=D[5]),!P&&U&4&&(P=!0,F.dialog=D[2],Fe(()=>P=!1)),$.$set(F),D[8]?H&&(ce(),y(H,1,1,()=>{H=null}),ue()):H?U&256&&b(H,1):(H=Bt(),H.c(),b(H,1),H.m(v.parentNode,v))},i(D){k||(b(s.$$.fragment,D),b(r.$$.fragment,D),b(i.$$.fragment,D),b(u.$$.fragment,D),b(w),b($.$$.fragment,D),b(H),k=!0)},o(D){y(s.$$.fragment,D),y(r.$$.fragment,D),y(i.$$.fragment,D),y(u.$$.fragment,D),y(w),y($.$$.fragment,D),y(H),k=!1},d(D){D&&(h(n),h(t),h(_),h(m),h(p),h(v)),h(e),L(s),L(r),L(i),L(u),~f&&G[f].d(D),L($,D),H&&H.d(D)}}}function wl(l,e,n){let t,s,o,r,a,i,c,u,_;ge(l,Je,I=>n(3,t=I)),ge(l,ut,I=>n(4,s=I)),ge(l,Me,I=>n(19,o=I)),ge(l,ze,I=>n(20,r=I)),ge(l,Ln,I=>n(21,a=I)),ge(l,it,I=>n(5,i=I)),ge(l,ht,I=>n(6,c=I)),ge(l,Ut,I=>n(7,u=I)),ge(l,Yt,I=>n(8,_=I)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let f=!1,w,m,$=0;const P=async I=>{const x=await Fn(I);return[...c.items.filter(({name:F})=>F.toLowerCase().includes(I.toLowerCase())).map(F=>({label:F.name,count:F.tags.length,type:"supertag"})),...x]},p=()=>new Nn().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(s),v=async I=>{if(!f){n(1,w=void 0),n(0,f=!0);try{const x=t.pageCount;await I(),Vn(x).catch(()=>{})}catch(x){n(1,w=x),console.warn(x)}finally{n(0,f=!1)}}},k=async()=>{Je.reset(),$=0,v(async()=>{const[I,x]=await p().getPageAndCount();Je.addPage(I,x)})},C=async()=>{v(async()=>{const I=await p().getPage();Je.addPage(I)})},G=I=>{var x,K;if((I.key==="/"||I.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&((x=document.getElementById("searchbar"))==null||x.focus(),I.preventDefault(),I.stopPropagation()),I.ctrlKey&&I.key==="Enter"&&(I.preventDefault(),I.stopPropagation(),k()),I.ctrlKey&&I.key==="m"&&((K=document.getElementById("select-modifier"))==null||K.click()),I.ctrlKey&&I.key==="ArrowDown"){const F=document.getElementsByClassName("post-media");F[$].focus(),$=Math.min($+1,Math.max(0,F.length-1))}I.ctrlKey&&I.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[$].focus(),$=Math.max($-1,0))};rt(async()=>{document.addEventListener("keydown",G),t.postCount===0&&k()}),ot(()=>{document.removeEventListener("keydown",G)});const te=async I=>{const x=I.detail;if(x.type==="supertag"){const K=c.items.find(F=>F.name===x.label);if(!K){console.warn("Supertag not present.");return}ut.addOrReplace(K)}else{const K=await Rn(I.detail.label);it.addOrReplace({name:I.detail.label,modifier:I.detail.modifier,count:I.detail.count,type:(K==null?void 0:K.type)??"tag"})}},J=I=>"description"in I.detail?ut.removeByName(I.detail.name):it.removeByName(I.detail.name),Y=I=>{"description"in I.detail||(I.detail.modifier=Mn(I.detail.modifier),it.addOrReplace(I.detail))},H=()=>m.showModal();function D(I){m=I,n(2,m)}return[f,w,m,t,s,i,c,u,_,P,k,C,te,J,Y,H,D,I=>ht.add(I.detail)]}class Yl extends pe{constructor(e){super(),_e(this,e,wl,kl,fe,{})}}export{Yl as component};
