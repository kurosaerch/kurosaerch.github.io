import{s as le,f as S,g as C,y as pe,j as _,i as N,v as Q,d as m,p as $e,E as Pe,F as Me,a as T,h as j,c as L,u as g,G as He,H as te,I as Qe,J as Ge,l as ce,m as ue,r as un,K as Se,L as ut,o as tt,M as nt,w as fn,A as pn,B as _n,C as dn,n as De,N as et,O as Ie,P as mn,Q as gn,e as Re,D as fe,R as hn,k as Fe,z as Ee,S as $n,T as gt,U as vn,x as bn}from"../chunks/scheduler.d22bc004.js";import{S as re,i as oe,f as Ne,b as M,d as B,m as q,a as v,t as w,e as U,g as de,c as me,r as kn,h as wn}from"../chunks/index.c60e7740.js";import{g as yn}from"../chunks/globals.7f7f1b26.js";import{b as _t}from"../chunks/paths.ae0c957a.js";import{e as Ce}from"../chunks/each.e59479a4.js";import{D as Wt,r as Kt,a as Jt}from"../chunks/result-columns-store.542671be.js";import{T as ze}from"../chunks/TextButton.47f0a2a9.js";import{D as En}from"../chunks/DetailedTag.423ea64b.js";import{K as Sn,A as Cn}from"../chunks/ActiveTagList.35bfd21f.js";import{r as Ke,a as ft}from"../chunks/active-supertags-store.c3229fc7.js";import{I as Qt,R as In}from"../chunks/ModifierSelect.7ab32c9e.js";import{R as Dn,S as Yt,a as Zt,E as Xt,b as Tn,C as xt,P as en,g as tn,c as Ln,i as Pn,d as Nn,G as Fn,V as Rn,e as ht,I as An}from"../chunks/Gif.5a27d7ba.js";import{h as $t,u as jn}from"../chunks/await_block.7529a0a6.js";import{a as nn,b as Vn,c as sn,N as On}from"../chunks/NumberInput.c6d33d76.js";import{L as dt}from"../chunks/LoadingAnimation.ffe18522.js";import{h as Mn,i as Bn,a as qn}from"../chunks/always-loop-store.ff2f7347.js";import{p as Un,S as Hn,b as zn,a as Gn}from"../chunks/store-keys.50fe4a71.js";import{f as Oe}from"../chunks/format-tag.7e313273.js";import{i as Wn,g as Kn,a as Jn}from"../chunks/tags.49324235.js";import{s as Je,f as Ue,S as Qn}from"../chunks/search-builder.9b713100.js";import{a as it}from"../chunks/active-tags-store.c00d78fb.js";import{S as Yn}from"../chunks/Searchbar.9aa5388e.js";import{S as Zn}from"../chunks/ScrollUpButton.82d41709.js";import{l as Xn}from"../chunks/analytics.b280da65.js";import{n as xn,s as vt}from"../chunks/supertags-store.5c880e20.js";import{b as es}from"../chunks/blocked-content-store.b44405cc.js";import{S as ts}from"../chunks/Select.ab71254c.js";import{R as ns}from"../chunks/RotatingTextSelect.0996226b.js";function ss(s){let e,n=`<a href="https://www.twitch.tv/helheim_lynx" class="svelte-1x73wwy"><img id="happy" src="${_t}/assets/lynxy-chibi.webp" alt="Helheim Lynx" class="svelte-1x73wwy"/></a>`;return{c(){e=S("div"),e.innerHTML=n,this.h()},l(t){e=C(t,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1bog0zt"&&(e.innerHTML=n),this.h()},h(){_(e,"class","svelte-1x73wwy")},m(t,l){N(t,e,l)},p:Q,i:Q,o:Q,d(t){t&&m(e)}}}class ls extends re{constructor(e){super(),oe(this,e,null,ss,le,{})}}function bt(s,e,n){const t=s.slice();return t[11]=e[n],t}function kt(s){let e,n;return e=new En({props:{tag:s[11]}}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.tag=t[11]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function rs(s){let e;return{c(){e=ce("Create supertag")},l(n){e=ue(n,"Create supertag")},m(n,t){N(n,e,t)},d(n){n&&m(e)}}}function os(s){let e,n,t="Create Supertag",l,o,r,a,i,c="Name",u,f,p,h,d,$="Description",y,I,A,P,k,H="Tags",V,G,b,D,z,Y,Z,F,X=Ce(s[3]),O=[];for(let R=0;R<X.length;R+=1)O[R]=kt(bt(s,X,R));const E=R=>w(O[R],1,1,()=>{O[R]=null});return z=new ze({props:{title:s[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!s[4],$$slots:{default:[rs]},$$scope:{ctx:s}}}),z.$on("click",s[9]),{c(){e=S("section"),n=S("h3"),n.textContent=t,l=T(),o=S("button"),r=T(),a=S("div"),i=S("label"),i.textContent=c,u=T(),f=S("input"),p=T(),h=S("div"),d=S("label"),d.textContent=$,y=T(),I=S("input"),A=T(),P=S("div"),k=S("span"),k.textContent=H,V=T(),G=S("ol");for(let R=0;R<O.length;R+=1)O[R].c();b=T(),D=S("div"),M(z.$$.fragment),this.h()},l(R){e=C(R,"SECTION",{class:!0});var W=j(e);n=C(W,"H3",{"data-svelte-h":!0}),pe(n)!=="svelte-ho1cwx"&&(n.textContent=t),l=L(W),o=C(W,"BUTTON",{type:!0,class:!0}),j(o).forEach(m),r=L(W),a=C(W,"DIV",{class:!0});var ne=j(a);i=C(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),pe(i)!=="svelte-10k8a68"&&(i.textContent=c),u=L(ne),f=C(ne,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),ne.forEach(m),p=L(W),h=C(W,"DIV",{class:!0});var x=j(h);d=C(x,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),pe(d)!=="svelte-14n9kp6"&&(d.textContent=$),y=L(x),I=C(x,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),x.forEach(m),A=L(W),P=C(W,"DIV",{class:!0});var _e=j(P);k=C(_e,"SPAN",{class:!0,"data-svelte-h":!0}),pe(k)!=="svelte-7hjyox"&&(k.textContent=H),V=L(_e),G=C(_e,"OL",{class:!0});var ge=j(G);for(let Te=0;Te<O.length;Te+=1)O[Te].l(ge);ge.forEach(m),_e.forEach(m),b=L(W),D=C(W,"DIV",{class:!0});var Be=j(D);B(z.$$.fragment,Be),Be.forEach(m),W.forEach(m),this.h()},h(){_(o,"type","button"),_(o,"class","codicon codicon-close svelte-1x6vc81"),_(i,"for","supertag-name"),_(i,"class","svelte-1x6vc81"),_(f,"type","text"),_(f,"placeholder","Descriptive name"),_(f,"id","supertag-name"),_(f,"class","svelte-1x6vc81"),_(a,"class","svelte-1x6vc81"),_(d,"for","supertag-description"),_(d,"class","svelte-1x6vc81"),_(I,"type","text"),_(I,"placeholder","Short description"),_(I,"id","supertag-description"),_(I,"class","svelte-1x6vc81"),_(h,"class","svelte-1x6vc81"),_(k,"class","svelte-1x6vc81"),_(G,"class","svelte-1x6vc81"),_(P,"class","svelte-1x6vc81"),_(D,"class","last svelte-1x6vc81"),_(e,"class","svelte-1x6vc81")},m(R,W){N(R,e,W),g(e,n),g(e,l),g(e,o),g(e,r),g(e,a),g(a,i),g(a,u),g(a,f),He(f,s[0]),g(e,p),g(e,h),g(h,d),g(h,y),g(h,I),He(I,s[2]),g(e,A),g(e,P),g(P,k),g(P,V),g(P,G);for(let ne=0;ne<O.length;ne+=1)O[ne]&&O[ne].m(G,null);g(e,b),g(e,D),q(z,D,null),Y=!0,Z||(F=[te(o,"click",s[6]),te(f,"input",s[7]),te(I,"input",s[8])],Z=!0)},p(R,W){if(W&1&&f.value!==R[0]&&He(f,R[0]),W&4&&I.value!==R[2]&&He(I,R[2]),W&8){X=Ce(R[3]);let x;for(x=0;x<X.length;x+=1){const _e=bt(R,X,x);O[x]?(O[x].p(_e,W),v(O[x],1)):(O[x]=kt(_e),O[x].c(),v(O[x],1),O[x].m(G,null))}for(de(),x=X.length;x<O.length;x+=1)E(x);me()}const ne={};W&16&&(ne.title=R[4]?"Click to create supertag":"Enter a valid name to continue"),W&16&&(ne.disabled=!R[4]),W&16384&&(ne.$$scope={dirty:W,ctx:R}),z.$set(ne)},i(R){if(!Y){for(let W=0;W<X.length;W+=1)v(O[W]);v(z.$$.fragment,R),Y=!0}},o(R){O=O.filter(Boolean);for(let W=0;W<O.length;W+=1)w(O[W]);w(z.$$.fragment,R),Y=!1},d(R){R&&m(e),Qe(O,R),U(z),Z=!1,Ge(F)}}}function is(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[os]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.dialog=s[1]),e=new Wt({props:o}),$e.push(()=>Ne(e,"dialog",l)),e.$on("close",s[6]),{c(){M(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,a){q(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],Pe(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function as(s,e,n){let t,{dialog:l}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=Me(),c=()=>l.close();function u(){o=this.value,n(0,o)}function f(){r=this.value,n(2,r)}const p=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:d,name:$})=>({modifier:d,name:$}))}),c()};function h(d){l=d,n(1,l)}return s.$$set=d=>{"dialog"in d&&n(1,l=d.dialog),"name"in d&&n(0,o=d.name),"description"in d&&n(2,r=d.description),"tags"in d&&n(3,a=d.tags)},s.$$.update=()=>{s.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,l,r,a,t,i,c,u,f,p,h]}class cs extends re{constructor(e){super(),oe(this,e,as,is,le,{dialog:1,name:0,description:2,tags:3})}}function us(s){let e,n,t,l,o,r,a,i,c,u;return{c(){e=S("div"),n=S("div"),t=S("i"),l=T(),o=S("div"),r=S("h3"),a=ce(s[0]),i=T(),c=S("span"),u=ce(s[2]),this.h()},l(f){e=C(f,"DIV",{class:!0});var p=j(e);n=C(p,"DIV",{class:!0});var h=j(n);t=C(h,"I",{class:!0}),j(t).forEach(m),h.forEach(m),l=L(p),o=C(p,"DIV",{});var d=j(o);r=C(d,"H3",{class:!0});var $=j(r);a=ue($,s[0]),$.forEach(m),i=L(d),c=C(d,"SPAN",{});var y=j(c);u=ue(y,s[2]),y.forEach(m),d.forEach(m),p.forEach(m),this.h()},h(){_(t,"class",un(s[1])+" svelte-1yohziu"),_(n,"class","icon svelte-1yohziu"),_(r,"class","svelte-1yohziu"),_(e,"class","error svelte-1yohziu")},m(f,p){N(f,e,p),g(e,n),g(n,t),g(e,l),g(e,o),g(o,r),g(r,a),g(o,i),g(o,c),g(c,u)},p:Q,i:Q,o:Q,d(f){f&&m(e)}}}function fs(s,e,n){let{error:t}=e,l=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return s.$$set=a=>{"error"in a&&n(3,t=a.error)},[l,o,r,t]}class ps extends re{constructor(e){super(),oe(this,e,fs,us,le,{error:3})}}function _s(s){let e,n,t,l,o="You have seen everything there is to see...";return{c(){e=S("img"),t=T(),l=S("p"),l.textContent=o,this.h()},l(r){e=C(r,"IMG",{src:!0,alt:!0,class:!0}),t=L(r),l=C(r,"P",{"data-svelte-h":!0}),pe(l)!=="svelte-1i75mtf"&&(l.textContent=o),this.h()},h(){Se(e.src,n=_t+"/assets/shironeko-x.png")||_(e,"src",n),_(e,"alt","No more results to load"),_(e,"class","svelte-1pkma0d")},m(r,a){N(r,e,a),N(r,t,a),N(r,l,a)},p:Q,i:Q,o:Q,d(r){r&&(m(e),m(t),m(l))}}}class ds extends re{constructor(e){super(),oe(this,e,null,_s,le,{})}}const at=s=>`post_${s}`;function wt(s){let e;const n=s[4].default,t=fn(n,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8)&&pn(t,n,l,l[3],e?dn(n,l[3],o,null):_n(l[3]),null)},i(l){e||(v(t,l),e=!0)},o(l){w(t,l),e=!1},d(l){t&&t.d(l)}}}function ms(s){let e,n,t,l,o=s[1]&&wt(s);return{c(){e=S("div"),o&&o.c(),this.h()},l(r){e=C(r,"DIV",{role:!0,tabindex:!0,class:!0});var a=j(e);o&&o.l(a),a.forEach(m),this.h()},h(){_(e,"role","none"),_(e,"tabindex","-1"),_(e,"class","svelte-6sy8qz")},m(r,a){N(r,e,a),o&&o.m(e,null),s[5](e),n=!0,t||(l=[te(e,"click",ut(gs)),te(e,"keydown",s[2])],t=!0)},p(r,[a]){r[1]?o?(o.p(r,a),a&2&&v(o,1)):(o=wt(r),o.c(),v(o,1),o.m(e,null)):o&&(de(),w(o,1,1,()=>{o=null}),me())},i(r){n||(v(o),n=!0)},o(r){w(o),n=!1},d(r){r&&m(e),o&&o.d(),s[5](null),t=!1,Ge(l)}}}const gs=()=>{};function hs(s,e,n){let{$$slots:t={},$$scope:l}=e;const o=Me(),r=()=>o("close"),a=p=>{p.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let c,u=!1;tt(async()=>{c.focus(),document.addEventListener("fullscreenchange",i);try{await c.requestFullscreen()}catch{}n(1,u=!0)}),nt(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function f(p){$e[p?"unshift":"push"](()=>{c=p,n(0,c)})}return s.$$set=p=>{"$$scope"in p&&n(3,l=p.$$scope)},[c,u,a,l,t,f]}class $s extends re{constructor(e){super(),oe(this,e,hs,ms,le,{})}}function vs(s){let e,n;return{c(){e=S("div"),this.h()},l(t){e=C(t,"DIV",{style:!0}),j(e).forEach(m),this.h()},h(){_(e,"style",n=s[0]?`position:absolute;top:${s[0]};`:void 0)},m(t,l){N(t,e,l),s[3](e)},p(t,[l]){l&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&_(e,"style",n)},i:Q,o:Q,d(t){t&&m(e),s[3](null)}}}function bs(s,e,n){let{rootMargin:t}=e,{absoluteTop:l}=e;const o=Me(),r=new IntersectionObserver(c=>{c[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(c){$e[c?"unshift":"push"](()=>{a=c,n(1,a)})}return s.$$set=c=>{"rootMargin"in c&&n(2,t=c.rootMargin),"absoluteTop"in c&&n(0,l=c.absoluteTop)},s.$$.update=()=>{s.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[l,a,t,i]}class ln extends re{constructor(e){super(),oe(this,e,bs,vs,le,{rootMargin:2,absoluteTop:0})}}function ks(s){let e,n;return{c(){e=S("a"),n=ce("Open"),this.h()},l(t){e=C(t,"A",{href:!0,target:!0,class:!0});var l=j(e);n=ue(l,"Open"),l.forEach(m),this.h()},h(){_(e,"href",s[0]),_(e,"target","_newtab"),_(e,"class","codicon codicon-link-external svelte-10flxu9")},m(t,l){N(t,e,l),g(e,n)},p(t,[l]){l&1&&_(e,"href",t[0])},i:Q,o:Q,d(t){t&&m(e)}}}function ws(s,e,n){let{url:t}=e;return s.$$set=l=>{"url"in l&&n(0,t=l.url)},[t]}class ys extends re{constructor(e){super(),oe(this,e,ws,ks,le,{url:0})}}function yt(s,e,n){const t=s.slice();return t[4]=e[n][0],t[5]=e[n][1],t}function Et(s){let e,n="•",t,l,o;return l=new Xt({props:{source:s[0].source}}),{c(){e=S("span"),e.textContent=n,t=T(),M(l.$$.fragment)},l(r){e=C(r,"SPAN",{"data-svelte-h":!0}),pe(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=L(r),B(l.$$.fragment,r)},m(r,a){N(r,e,a),N(r,t,a),q(l,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),l.$set(i)},i(r){o||(v(l.$$.fragment,r),o=!0)},o(r){w(l.$$.fragment,r),o=!1},d(r){r&&(m(e),m(t)),U(l,r)}}}function St(s){let e,n=s[4]+"",t,l,o,r;return o=new en({props:{tags:s[5]}}),{c(){e=S("h3"),t=ce(n),l=T(),M(o.$$.fragment),this.h()},l(a){e=C(a,"H3",{class:!0});var i=j(e);t=ue(i,n),i.forEach(m),l=L(a),B(o.$$.fragment,a),this.h()},h(){_(e,"class","svelte-1tsjp7g")},m(a,i){N(a,e,i),g(e,t),N(a,l,i),q(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[4]+"")&&De(t,n);const c={};i&2&&(c.tags=a[5]),o.$set(c)},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){w(o.$$.fragment,a),r=!1},d(a){a&&(m(e),m(l)),U(o,a)}}}function Es(s){let e,n,t,l,o,r,a,i,c=s[0].id+"",u,f,p,h,d,$,y="•",I,A,P=s[0].type.toUpperCase()+"",k,H,V,G="•",b,D,z,Y,Z="•",F,X,O,E,R,W,ne,x="•",_e,ge,Be,Te,st="•",lt,Ae,rt,Ye,Le,We,J,ie="Comments",je,ve,be;h=new Dn({props:{value:s[0].rating}}),D=new Yt({props:{value:s[0].score}}),X=new Zt({props:{value:s[0].change}}),R=new ys({props:{url:"/post?id="+s[0].id+"&src="+encodeURIComponent(s[3])}}),ge=new Xt({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+s[0].id}}),Ae=new Tn({props:{url:s[3]}});let se=s[0].source&&Et(s),ke=Ce(Object.entries(s[1])),ae=[];for(let K=0;K<ke.length;K+=1)ae[K]=St(yt(s,ke,K));const ct=K=>w(ae[K],1,1,()=>{ae[K]=null});return ve=new xt({props:{post:s[0]}}),{c(){e=S("div"),n=S("img"),l=T(),o=S("h1"),r=ce("Post "),a=S("b"),i=ce("#"),u=ce(c),f=T(),p=S("div"),M(h.$$.fragment),d=T(),$=S("span"),$.textContent=y,I=T(),A=S("span"),k=ce(P),H=T(),V=S("span"),V.textContent=G,b=T(),M(D.$$.fragment),z=T(),Y=S("span"),Y.textContent=Z,F=T(),M(X.$$.fragment),O=T(),E=S("div"),M(R.$$.fragment),W=T(),ne=S("span"),ne.textContent=x,_e=T(),M(ge.$$.fragment),Be=T(),Te=S("span"),Te.textContent=st,lt=T(),M(Ae.$$.fragment),rt=T(),se&&se.c(),Ye=T(),Le=S("div");for(let K=0;K<ae.length;K+=1)ae[K].c();We=T(),J=S("h3"),J.textContent=ie,je=T(),M(ve.$$.fragment),this.h()},l(K){e=C(K,"DIV",{class:!0});var ee=j(e);n=C(ee,"IMG",{class:!0,src:!0,alt:!0}),l=L(ee),o=C(ee,"H1",{class:!0});var Ve=j(o);r=ue(Ve,"Post "),a=C(Ve,"B",{});var Ze=j(a);i=ue(Ze,"#"),u=ue(Ze,c),Ze.forEach(m),Ve.forEach(m),f=L(ee),p=C(ee,"DIV",{class:!0});var he=j(p);B(h.$$.fragment,he),d=L(he),$=C(he,"SPAN",{"data-svelte-h":!0}),pe($)!=="svelte-7hh8jk"&&($.textContent=y),I=L(he),A=C(he,"SPAN",{});var ot=j(A);k=ue(ot,P),ot.forEach(m),H=L(he),V=C(he,"SPAN",{"data-svelte-h":!0}),pe(V)!=="svelte-7hh8jk"&&(V.textContent=G),b=L(he),B(D.$$.fragment,he),z=L(he),Y=C(he,"SPAN",{"data-svelte-h":!0}),pe(Y)!=="svelte-7hh8jk"&&(Y.textContent=Z),F=L(he),B(X.$$.fragment,he),he.forEach(m),O=L(ee),E=C(ee,"DIV",{class:!0});var we=j(E);B(R.$$.fragment,we),W=L(we),ne=C(we,"SPAN",{"data-svelte-h":!0}),pe(ne)!=="svelte-7hh8jk"&&(ne.textContent=x),_e=L(we),B(ge.$$.fragment,we),Be=L(we),Te=C(we,"SPAN",{"data-svelte-h":!0}),pe(Te)!=="svelte-7hh8jk"&&(Te.textContent=st),lt=L(we),B(Ae.$$.fragment,we),rt=L(we),se&&se.l(we),we.forEach(m),Ye=L(ee),Le=C(ee,"DIV",{});var qe=j(Le);for(let Xe=0;Xe<ae.length;Xe+=1)ae[Xe].l(qe);We=L(qe),J=C(qe,"H3",{class:!0,"data-svelte-h":!0}),pe(J)!=="svelte-kc6sae"&&(J.textContent=ie),je=L(qe),B(ve.$$.fragment,qe),qe.forEach(m),ee.forEach(m),this.h()},h(){_(n,"class","preview svelte-1tsjp7g"),Se(n.src,t=s[2])||_(n,"src",t),_(n,"alt","preview"),_(o,"class","svelte-1tsjp7g"),_(p,"class","flex-row svelte-1tsjp7g"),_(E,"class","flex-row svelte-1tsjp7g"),_(J,"class","svelte-1tsjp7g"),_(e,"class","details svelte-1tsjp7g")},m(K,ee){N(K,e,ee),g(e,n),g(e,l),g(e,o),g(o,r),g(o,a),g(a,i),g(a,u),g(e,f),g(e,p),q(h,p,null),g(p,d),g(p,$),g(p,I),g(p,A),g(A,k),g(p,H),g(p,V),g(p,b),q(D,p,null),g(p,z),g(p,Y),g(p,F),q(X,p,null),g(e,O),g(e,E),q(R,E,null),g(E,W),g(E,ne),g(E,_e),q(ge,E,null),g(E,Be),g(E,Te),g(E,lt),q(Ae,E,null),g(E,rt),se&&se.m(E,null),g(e,Ye),g(e,Le);for(let Ve=0;Ve<ae.length;Ve+=1)ae[Ve]&&ae[Ve].m(Le,null);g(Le,We),g(Le,J),g(Le,je),q(ve,Le,null),be=!0},p(K,[ee]){(!be||ee&4&&!Se(n.src,t=K[2]))&&_(n,"src",t),(!be||ee&1)&&c!==(c=K[0].id+"")&&De(u,c);const Ve={};ee&1&&(Ve.value=K[0].rating),h.$set(Ve),(!be||ee&1)&&P!==(P=K[0].type.toUpperCase()+"")&&De(k,P);const Ze={};ee&1&&(Ze.value=K[0].score),D.$set(Ze);const he={};ee&1&&(he.value=K[0].change),X.$set(he);const ot={};ee&9&&(ot.url="/post?id="+K[0].id+"&src="+encodeURIComponent(K[3])),R.$set(ot);const we={};ee&1&&(we.source="https://rule34.xxx/index.php?page=post&s=view&id="+K[0].id),ge.$set(we);const qe={};if(ee&8&&(qe.url=K[3]),Ae.$set(qe),K[0].source?se?(se.p(K,ee),ee&1&&v(se,1)):(se=Et(K),se.c(),v(se,1),se.m(E,null)):se&&(de(),w(se,1,1,()=>{se=null}),me()),ee&2){ke=Ce(Object.entries(K[1]));let ye;for(ye=0;ye<ke.length;ye+=1){const mt=yt(K,ke,ye);ae[ye]?(ae[ye].p(mt,ee),v(ae[ye],1)):(ae[ye]=St(mt),ae[ye].c(),v(ae[ye],1),ae[ye].m(Le,We))}for(de(),ye=ke.length;ye<ae.length;ye+=1)ct(ye);me()}const Xe={};ee&1&&(Xe.post=K[0]),ve.$set(Xe)},i(K){if(!be){v(h.$$.fragment,K),v(D.$$.fragment,K),v(X.$$.fragment,K),v(R.$$.fragment,K),v(ge.$$.fragment,K),v(Ae.$$.fragment,K),v(se);for(let ee=0;ee<ke.length;ee+=1)v(ae[ee]);v(ve.$$.fragment,K),be=!0}},o(K){w(h.$$.fragment,K),w(D.$$.fragment,K),w(X.$$.fragment,K),w(R.$$.fragment,K),w(ge.$$.fragment,K),w(Ae.$$.fragment,K),w(se),ae=ae.filter(Boolean);for(let ee=0;ee<ae.length;ee+=1)w(ae[ee]);w(ve.$$.fragment,K),be=!1},d(K){K&&m(e),U(h),U(D),U(X),U(R),U(ge),U(Ae),se&&se.d(),Qe(ae,K),U(ve)}}}function Ss(s,e,n){let t,l,o,{post:r}=e;return s.$$set=a=>{"post"in a&&n(0,r=a.post)},s.$$.update=()=>{s.$$.dirty&1&&n(3,t=r.file_url),s.$$.dirty&1&&n(2,l=r.sample_url),s.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,l,t]}class Cs extends re{constructor(e){super(),oe(this,e,Ss,Es,le,{post:0})}}const xe=new IntersectionObserver(s=>{for(const e of s)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function Is(s){let e,n,t,l;return{c(){e=S("div"),n=S("input"),this.h()},l(o){e=C(o,"DIV",{class:!0});var r=j(e);n=C(r,"INPUT",{type:!0,step:!0,max:!0,class:!0}),r.forEach(m),this.h()},h(){_(n,"type","range"),_(n,"step","0.001"),_(n,"max",s[1]),_(n,"class","svelte-dfxj87"),_(e,"class","svelte-dfxj87")},m(o,r){N(o,e,r),g(e,n),He(n,s[0]),t||(l=[te(n,"change",s[5]),te(n,"input",s[5]),te(n,"scroll",ut(et(s[4]))),te(e,"click",ut(et(s[2]))),te(e,"scroll",ut(et(s[3])))],t=!0)},p(o,[r]){r&2&&_(n,"max",o[1]),r&1&&He(n,o[0])},i:Q,o:Q,d(o){o&&m(e),t=!1,Ge(l)}}}function Ds(s,e,n){let{value:t}=e,{max:l}=e;function o(c){Ie.call(this,s,c)}function r(c){Ie.call(this,s,c)}function a(c){Ie.call(this,s,c)}function i(){t=mn(this.value),n(0,t)}return s.$$set=c=>{"value"in c&&n(0,t=c.value),"max"in c&&n(1,l=c.max)},[t,l,o,r,a,i]}class rn extends re{constructor(e){super(),oe(this,e,Ds,Is,le,{value:0,max:1})}}function Ts(s){let e,n,t,l=!1,o,r=!0,a,i,c,u,f,p;function h(){cancelAnimationFrame(o),e.paused||(o=kn(h),l=!0),s[10].call(e)}function d(y){s[13](y)}let $={max:s[4]};return s[2]!==void 0&&($.value=s[2]),i=new rn({props:$}),$e.push(()=>Ne(i,"value",d)),{c(){e=S("video"),a=T(),M(i.$$.fragment),this.h()},l(y){e=C(y,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),j(e).forEach(m),a=L(y),B(i.$$.fragment,y),this.h()},h(){Se(e.src,n=s[6])||_(e,"src",n),_(e,"poster",s[5]),_(e,"title",t="[VIDEO] post #"+s[0].id),_(e,"preload","metadata"),e.autoplay=!0,_(e,"class","svelte-uwd1jt"),s[4]===void 0&&gn(()=>s[12].call(e))},m(y,I){N(y,e,I),s[9](e),N(y,a,I),q(i,y,I),u=!0,f||(p=[te(e,"timeupdate",h),te(e,"play",s[11]),te(e,"pause",s[11]),te(e,"durationchange",s[12]),te(e,"click",Ls),te(e,"ended",s[8]),te(e,"contextmenu",et(Ps))],f=!0)},p(y,[I]){(!u||I&64&&!Se(e.src,n=y[6]))&&_(e,"src",n),(!u||I&32)&&_(e,"poster",y[5]),(!u||I&1&&t!==(t="[VIDEO] post #"+y[0].id))&&_(e,"title",t),!l&&I&4&&!isNaN(y[2])&&(e.currentTime=y[2]),l=!1,I&8&&r!==(r=y[3])&&e[r?"pause":"play"]();const A={};I&16&&(A.max=y[4]),!c&&I&4&&(c=!0,A.value=y[2],Pe(()=>c=!1)),i.$set(A)},i(y){u||(v(i.$$.fragment,y),u=!0)},o(y){w(i.$$.fragment,y),u=!1},d(y){y&&(m(e),m(a)),s[9](null),U(i,y),f=!1,Ge(p)}}}const Ls=s=>s.target.paused?s.target.play():s.target.pause(),Ps=()=>{};function Ns(s,e,n){let t,l,o,{post:r}=e,a,i=0,c=!1,u;const f=A=>{a&&(A.key==="ArrowLeft"&&(A.preventDefault(),A.stopPropagation(),n(1,a.currentTime=Math.max(0,a.currentTime-5),a)),A.key==="ArrowRight"&&(A.preventDefault(),A.stopPropagation(),n(1,a.currentTime=Math.min(a.duration,a.currentTime+5),a)),A.key==="Space"&&(A.preventDefault(),A.stopPropagation(),n(3,c=!c)))};tt(()=>{a&&(xe==null||xe.observe(a)),document.addEventListener("keydown",f)}),nt(()=>{a&&(xe==null||xe.unobserve(a)),document.removeEventListener("keydown",f)});function p(A){Ie.call(this,s,A)}function h(A){$e[A?"unshift":"push"](()=>{a=A,n(1,a)})}function d(){i=this.currentTime,n(2,i)}function $(){c=this.paused,n(3,c)}function y(){u=this.duration,n(4,u)}function I(A){i=A,n(2,i)}return s.$$set=A=>{"post"in A&&n(0,r=A.post)},s.$$.update=()=>{s.$$.dirty&1&&n(7,t=tn(r.file_url,r.sample_url,r.preview_url)),s.$$.dirty&128&&n(6,l=t.animated),s.$$.dirty&128&&n(5,o=t.static)},[r,a,i,c,u,o,l,t,p,h,d,$,y,I]}class Fs extends re{constructor(e){super(),oe(this,e,Ns,Ts,le,{post:0})}}function Rs(s){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function As(s){let e,n,t,l,o,r;return{c(){e=S("img"),this.h()},l(a){e=C(a,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){Se(e.src,n=s[2])||_(e,"src",n),_(e,"alt",t="["+s[0].type+"] post #"+s[0].id),_(e,"title",l="["+s[0].type+"] post #"+s[0].id),_(e,"class","svelte-jlq3re")},m(a,i){N(a,e,i),o||(r=[te(e,"contextmenu",et(Ms)),te(e,"click",s[6]),hn(s[7].call(null,e))],o=!0)},p(a,i){i&4&&!Se(e.src,n=a[2])&&_(e,"src",n),i&1&&t!==(t="["+a[0].type+"] post #"+a[0].id)&&_(e,"alt",t),i&1&&l!==(l="["+a[0].type+"] post #"+a[0].id)&&_(e,"title",l)},i:Q,o:Q,d(a){a&&m(e),o=!1,Ge(r)}}}function js(s){let e,n,t,l,o,r,a,i,c,u;return a=new dt({}),{c(){e=S("img"),o=T(),r=S("div"),M(a.$$.fragment),this.h()},l(f){e=C(f,"IMG",{src:!0,alt:!0,title:!0,class:!0}),o=L(f),r=C(f,"DIV",{class:!0});var p=j(r);B(a.$$.fragment,p),p.forEach(m),this.h()},h(){Se(e.src,n=s[3])||_(e,"src",n),_(e,"alt",t="["+s[0].type+"] post #"+s[0].id),_(e,"title",l="["+s[0].type+"] post #"+s[0].id),_(e,"class","svelte-jlq3re"),_(r,"class","svelte-jlq3re")},m(f,p){N(f,e,p),N(f,o,p),N(f,r,p),q(a,r,null),i=!0,c||(u=[te(e,"contextmenu",et(Os)),te(e,"click",s[6])],c=!0)},p(f,p){(!i||p&8&&!Se(e.src,n=f[3]))&&_(e,"src",n),(!i||p&1&&t!==(t="["+f[0].type+"] post #"+f[0].id))&&_(e,"alt",t),(!i||p&1&&l!==(l="["+f[0].type+"] post #"+f[0].id))&&_(e,"title",l)},i(f){i||(v(a.$$.fragment,f),i=!0)},o(f){w(a.$$.fragment,f),i=!1},d(f){f&&(m(e),m(o),m(r)),U(a),c=!1,Ge(u)}}}function Ct(s){let e,n,t;function l(r){s[10](r)}let o={max:s[5]};return s[1]!==void 0&&(o.value=s[1]),e=new rn({props:o}),$e.push(()=>Ne(e,"value",l)),{c(){M(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,a){q(e,r,a),t=!0},p(r,a){const i={};a&32&&(i.max=r[5]),!n&&a&2&&(n=!0,i.value=r[1],Pe(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function Vs(s){let e,n,t,l,o={ctx:s,current:null,token:null,hasCatch:!1,pending:js,then:As,catch:Rs,value:21,blocks:[,,,]};$t(e=s[8](s[2]),o);let r=s[4]&&Ct(s);return{c(){o.block.c(),n=T(),r&&r.c(),t=Re()},l(a){o.block.l(a),n=L(a),r&&r.l(a),t=Re()},m(a,i){o.block.m(a,o.anchor=i),o.mount=()=>n.parentNode,o.anchor=n,N(a,n,i),r&&r.m(a,i),N(a,t,i),l=!0},p(a,[i]){s=a,o.ctx=s,i&4&&e!==(e=s[8](s[2]))&&$t(e,o)||jn(o,s,i),s[4]?r?(r.p(s,i),i&16&&v(r,1)):(r=Ct(s),r.c(),v(r,1),r.m(t.parentNode,t)):r&&(de(),w(r,1,1,()=>{r=null}),me())},i(a){l||(v(o.block),v(r),l=!0)},o(a){for(let i=0;i<3;i+=1){const c=o.blocks[i];w(c)}w(r),l=!1},d(a){a&&(m(n),m(t)),o.block.d(a),o.token=null,o=null,r&&r.d(a)}}}const Os=()=>{},Ms=()=>{};function Bs(s,e,n){let t,l,o,r;fe(s,nn,b=>n(4,o=b)),fe(s,Vn,b=>n(5,r=b));const a=Me();let{post:i}=e,{postId:c=-1}=e;const u=(b,D,z,Y)=>{if(b==="gif"){const Z=Ln(D,z,Y);return[Z.static,Z.animated]}return Mn?[z,D]:[Y,z]};let f=0,p=Date.now(),h=Date.now(),d,$=!0,y;const I=()=>{h=Date.now(),d=h-p,p=h,$||n(1,f+=d/1e3),f>=r&&(a("ended"),n(1,f=0)),y=requestAnimationFrame(I)},A=()=>{$=!$},P=b=>{(b.code==="Space"||b.key==="k")&&(b.preventDefault(),b.stopPropagation(),$=!$)},k=new IntersectionObserver(b=>{for(const D of b)D.target&&($=!D.isIntersecting)},{rootMargin:"0px",threshold:.5}),H=b=>(k==null||k.observe(b),{destroy(){k==null||k.unobserve(b)}});tt(()=>{o&&(y=requestAnimationFrame(I),document.addEventListener("keydown",P))}),nt(()=>{cancelAnimationFrame(y),document.removeEventListener("keydown",P)});const V=b=>new Promise(D=>{$=!0;let z=new Image;z.onload=Y=>{D(Y),$=!1},z.src=b});function G(b){f=b,n(1,f),n(0,i),n(9,c)}return s.$$set=b=>{"post"in b&&n(0,i=b.post),"postId"in b&&n(9,c=b.postId)},s.$$.update=()=>{s.$$.dirty&1&&n(3,[t,l]=u(i.type,i.file_url,i.sample_url,i.preview_url),t,(n(2,l),n(0,i))),s.$$.dirty&513&&i.id!==c&&(n(9,c=i.id),n(1,f=0))},[i,f,l,t,o,r,A,H,V,c,G]}class qs extends re{constructor(e){super(),oe(this,e,Bs,Vs,le,{post:0,postId:9})}}function Us(s){let e,n;return e=new qs({props:{post:s[0]}}),e.$on("ended",s[2]),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Hs(s){let e,n;return e=new Fs({props:{post:s[0]}}),e.$on("ended",s[1]),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function zs(s){let e,n,t,l;const o=[Hs,Us],r=[];function a(i,c){return i[0].type==="video"?0:1}return n=a(s),t=r[n]=o[n](s),{c(){e=S("div"),t.c(),this.h()},l(i){e=C(i,"DIV",{class:!0});var c=j(e);t.l(c),c.forEach(m),this.h()},h(){_(e,"class","svelte-acjk3s")},m(i,c){N(i,e,c),r[n].m(e,null),l=!0},p(i,[c]){let u=n;n=a(i),n===u?r[n].p(i,c):(de(),w(r[u],1,1,()=>{r[u]=null}),me(),t=r[n],t?t.p(i,c):(t=r[n]=o[n](i),t.c()),v(t,1),t.m(e,null))},i(i){l||(v(t),l=!0)},o(i){w(t),l=!1},d(i){i&&m(e),r[n].d()}}}function Gs(s,e,n){let{post:t}=e;function l(r){Ie.call(this,s,r)}function o(r){Ie.call(this,s,r)}return s.$$set=r=>{"post"in r&&n(0,t=r.post)},[t,l,o]}class Ws extends re{constructor(e){super(),oe(this,e,Gs,zs,le,{post:0})}}function Ks(s){let e,n,t;return{c(){e=S("img"),this.h()},l(l){e=C(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Se(e.src,n=s[2])||_(e,"src",n),_(e,"alt",t="post #"+s[0].id),_(e,"class","svelte-itxz72"),Fe(e,"top",s[1])},m(l,o){N(l,e,o)},p(l,[o]){o&4&&!Se(e.src,n=l[2])&&_(e,"src",n),o&1&&t!==(t="post #"+l[0].id)&&_(e,"alt",t),o&2&&Fe(e,"top",l[1])},i:Q,o:Q,d(l){l&&m(e)}}}function Js(s,e,n){let t,{post:l}=e,{offset:o}=e;return s.$$set=r=>{"post"in r&&n(0,l=r.post),"offset"in r&&n(1,o=r.offset)},s.$$.update=()=>{s.$$.dirty&1&&n(2,t=Pn(l.sample_url)?l.preview_url:l.sample_url)},[l,o,t]}class on extends re{constructor(e){super(),oe(this,e,Js,Ks,le,{post:0,offset:1})}}const Qs=()=>{const{subscribe:e,set:n}=Un(Hn.FullscreenHintDone,!1,Gn,zn);return{subscribe:e,set:n,reset:()=>n(!1)}},It=Qs();function Dt(s,e,n){const t=s.slice();return t[22]=e[n],t[24]=n,t}function Tt(s){let e,n;return e=new on({props:{post:s[7],offset:s[4]}}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.post=t[7]),l&16&&(o.offset=t[4]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Ys(s){let e;return{c(){e=S("i"),this.h()},l(n){e=C(n,"I",{class:!0}),j(e).forEach(m),this.h()},h(){_(e,"class","codicon codicon-tag")},m(n,t){N(n,e,t)},p:Q,d(n){n&&m(e)}}}function Lt(s){let e,n;return e=new on({props:{post:s[6],offset:s[3]}}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.post=t[6]),l&8&&(o.offset=t[3]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Pt(s){let e,n=`${s[24]*100}vh`;return{c(){e=S("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),j(e).forEach(m),this.h()},h(){_(e,"class","pseudo snap-item svelte-2epggd"),Fe(e,"top",n)},m(t,l){N(t,e,l)},p:Q,d(t){t&&m(e)}}}function Zs(s){let e,n,t,l,o,r,a,i,c,u,f,p,h,d,$,y=s[7]&&Tt(s);l=new Ws({props:{post:s[8]}}),l.$on("ended",s[11]),r=new Cs({props:{post:s[8]}}),i=new Qt({props:{class:"details-button",$$slots:{default:[Ys]},$$scope:{ctx:s}}}),i.$on("click",s[14]);let I=s[6]&&Lt(s),A=Ce({length:s[0].posts.length}),P=[];for(let k=0;k<A.length;k+=1)P[k]=Pt(Dt(s,A,k));return p=new ln({props:{absoluteTop:s[0].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),p.$on("intersection",s[16]),{c(){e=S("div"),y&&y.c(),n=T(),t=S("div"),M(l.$$.fragment),o=T(),M(r.$$.fragment),a=T(),M(i.$$.fragment),c=T(),I&&I.c(),u=T();for(let k=0;k<P.length;k+=1)P[k].c();f=T(),M(p.$$.fragment),this.h()},l(k){e=C(k,"DIV",{class:!0});var H=j(e);y&&y.l(H),n=L(H),t=C(H,"DIV",{class:!0});var V=j(t);B(l.$$.fragment,V),o=L(V),B(r.$$.fragment,V),a=L(V),B(i.$$.fragment,V),V.forEach(m),c=L(H),I&&I.l(H),u=L(H);for(let G=0;G<P.length;G+=1)P[G].l(H);f=L(H),B(p.$$.fragment,H),H.forEach(m),this.h()},h(){_(t,"class","screen snap-container horizontal current svelte-2epggd"),Ee(t,"hint",!s[9]),Fe(t,"top",s[5]),_(e,"class","root screen snap-container svelte-2epggd")},m(k,H){N(k,e,H),y&&y.m(e,null),g(e,n),g(e,t),q(l,t,null),g(t,o),q(r,t,null),g(t,a),q(i,t,null),s[15](t),g(e,c),I&&I.m(e,null),g(e,u);for(let V=0;V<P.length;V+=1)P[V]&&P[V].m(e,null);g(e,f),q(p,e,null),s[17](e),h=!0,d||($=te(e,"scroll",s[12]),d=!0)},p(k,[H]){k[7]?y?(y.p(k,H),H&128&&v(y,1)):(y=Tt(k),y.c(),v(y,1),y.m(e,n)):y&&(de(),w(y,1,1,()=>{y=null}),me());const V={};H&256&&(V.post=k[8]),l.$set(V);const G={};H&256&&(G.post=k[8]),r.$set(G);const b={};if(H&33554432&&(b.$$scope={dirty:H,ctx:k}),i.$set(b),(!h||H&512)&&Ee(t,"hint",!k[9]),H&32&&Fe(t,"top",k[5]),k[6]?I?(I.p(k,H),H&64&&v(I,1)):(I=Lt(k),I.c(),v(I,1),I.m(e,u)):I&&(de(),w(I,1,1,()=>{I=null}),me()),H&1){A=Ce({length:k[0].posts.length});let z;for(z=0;z<A.length;z+=1){const Y=Dt(k,A,z);P[z]?P[z].p(Y,H):(P[z]=Pt(Y),P[z].c(),P[z].m(e,f))}for(;z<P.length;z+=1)P[z].d(1);P.length=A.length}const D={};H&1&&(D.absoluteTop=k[0].posts.length*100+"vh"),p.$set(D)},i(k){h||(v(y),v(l.$$.fragment,k),v(r.$$.fragment,k),v(i.$$.fragment,k),v(I),v(p.$$.fragment,k),h=!0)},o(k){w(y),w(l.$$.fragment,k),w(r.$$.fragment,k),w(i.$$.fragment,k),w(I),w(p.$$.fragment,k),h=!1},d(k){k&&m(e),y&&y.d(),U(l),U(r),U(i),s[15](null),I&&I.d(),Qe(P,k),U(p),s[17](null),d=!1,$()}}}function Xs(s,e,n){let t,l,o,r,a,i,c,u,f;fe(s,It,D=>n(9,c=D)),fe(s,nn,D=>n(18,u=D)),fe(s,Ke,D=>n(0,f=D));const p=Me();let{index:h}=e,d,$;const y=()=>{d.scrollTo({left:0,top:d.clientHeight*(h-1),behavior:"smooth"})},I=()=>{d.scrollTo({left:0,top:d.clientHeight*(h+1),behavior:"smooth"})},A=()=>{u&&I()},P=D=>{requestAnimationFrame(()=>{const z=D.target,Y=z.getBoundingClientRect().height,Z=z.scrollTop/Y,F=Math.round(Z);F!=h&&(n(13,h=F),$&&n(2,$.scrollLeft=0,$))})},k=D=>{D.key==="d"&&(D.preventDefault(),D.stopPropagation(),$.scrollLeft===0?$.scrollBy({left:d.clientWidth,top:0,behavior:"smooth"}):$.scrollBy({left:-d.clientWidth,top:0,behavior:"smooth"})),D.key==="ArrowUp"&&(D.preventDefault(),D.stopPropagation(),y()),D.key==="ArrowDown"&&(D.preventDefault(),D.stopPropagation(),I())};tt(()=>{$&&($.scrollIntoView(!0),n(2,$.scrollLeft=0,$)),document.addEventListener("keydown",k)}),nt(()=>{$n(It,c=!0,c),document.removeEventListener("keydown",k)});const H=()=>$.scrollBy({left:d.clientWidth,top:0,behavior:"smooth"});function V(D){$e[D?"unshift":"push"](()=>{$=D,n(2,$)})}const G=()=>p("endreached");function b(D){$e[D?"unshift":"push"](()=>{d=D,n(1,d)})}return s.$$set=D=>{"index"in D&&n(13,h=D.index)},s.$$.update=()=>{s.$$.dirty&8193&&n(8,t=f.posts[h]),s.$$.dirty&8193&&n(7,l=h>0?f.posts[h-1]:void 0),s.$$.dirty&8193&&n(6,o=h<f.posts.length-1?f.posts[h+1]:void 0),s.$$.dirty&8192&&n(5,r=`${h*100}vh`),s.$$.dirty&8192&&n(4,a=`${(h-1)*100}vh`),s.$$.dirty&8192&&n(3,i=`${(h+1)*100}vh`)},[f,d,$,i,a,r,o,l,t,c,p,A,P,h,H,V,G,b]}class xs extends re{constructor(e){super(),oe(this,e,Xs,Zs,le,{index:13})}}function el(s){let e;return{c(){e=S("i"),this.h()},l(n){e=C(n,"I",{class:!0}),j(e).forEach(m),this.h()},h(){_(e,"class","codicon codicon-close")},m(n,t){N(n,e,t)},p:Q,d(n){n&&m(e)}}}function tl(s){let e,n,t,l,o;function r(i){s[2](i)}let a={};return s[0]!==void 0&&(a.index=s[0]),e=new xs({props:a}),$e.push(()=>Ne(e,"index",r)),e.$on("endreached",s[3]),l=new Qt({props:{class:"button-close",$$slots:{default:[el]},$$scope:{ctx:s}}}),l.$on("click",s[1]),{c(){M(e.$$.fragment),t=T(),M(l.$$.fragment)},l(i){B(e.$$.fragment,i),t=L(i),B(l.$$.fragment,i)},m(i,c){q(e,i,c),N(i,t,c),q(l,i,c),o=!0},p(i,c){const u={};!n&&c&1&&(n=!0,u.index=i[0],Pe(()=>n=!1)),e.$set(u);const f={};c&128&&(f.$$scope={dirty:c,ctx:i}),l.$set(f)},i(i){o||(v(e.$$.fragment,i),v(l.$$.fragment,i),o=!0)},o(i){w(e.$$.fragment,i),w(l.$$.fragment,i),o=!1},d(i){i&&m(t),U(e,i),U(l,i)}}}function nl(s){let e,n;return e=new $s({props:{$$slots:{default:[tl]},$$scope:{ctx:s}}}),e.$on("close",s[1]),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,[l]){const o={};l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function sl(s,e,n){let{index:t}=e;const l=Me(),o=()=>{l("close",t)},r=u=>{u.key==="f"&&(u.preventDefault(),u.stopPropagation(),o())},a=()=>{var u,f;(((u=history.state)==null?void 0:u.fullscreen)===void 0||((f=history.state)==null?void 0:f.fullscreen)===!1)&&o()};tt(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),nt(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(u){t=u,n(0,t)}function c(u){Ie.call(this,s,u)}return s.$$set=u=>{"index"in u&&n(0,t=u.index)},[t,o,i,c]}class ll extends re{constructor(e){super(),oe(this,e,sl,nl,le,{index:0})}}function Nt(s){let e,n=s[0].type==="video"?"▶":"GIF",t;return{c(){e=S("span"),t=ce(n),this.h()},l(l){e=C(l,"SPAN",{class:!0});var o=j(e);t=ue(o,n),o.forEach(m),this.h()},h(){_(e,"class","type svelte-rfj0jo")},m(l,o){N(l,e,o),g(e,t)},p(l,o){o&1&&n!==(n=l[0].type==="video"?"▶":"GIF")&&De(t,n)},d(l){l&&m(e)}}}function rl(s){let e,n,t,l,o,r,a=Oe(s[0].score)+"",i,c,u,f,p=s[0].type!=="image"&&Nt(s);return{c(){e=S("div"),n=S("img"),l=T(),p&&p.c(),o=T(),r=S("span"),i=ce(a),this.h()},l(h){e=C(h,"DIV",{id:!0,class:!0,style:!0});var d=j(e);n=C(d,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),l=L(d),p&&p.l(d),o=L(d),r=C(d,"SPAN",{class:!0});var $=j(r);i=ue($,a),$.forEach(m),d.forEach(m),this.h()},h(){Se(n.src,t=s[1])||_(n,"src",t),_(n,"alt","post"),_(n,"class","post-media svelte-rfj0jo"),_(n,"tabindex","-1"),_(n,"loading","lazy"),_(r,"class","score svelte-rfj0jo"),_(e,"id",c=at(s[0].id)),_(e,"class","post svelte-rfj0jo"),Fe(e,"grid-row","span "+s[2]),Ee(e,"open",open)},m(h,d){N(h,e,d),g(e,n),g(e,l),p&&p.m(e,null),g(e,o),g(e,r),g(r,i),u||(f=[te(e,"click",s[3]),te(e,"keydown",s[4])],u=!0)},p(h,[d]){d&2&&!Se(n.src,t=h[1])&&_(n,"src",t),h[0].type!=="image"?p?p.p(h,d):(p=Nt(h),p.c(),p.m(e,o)):p&&(p.d(1),p=null),d&1&&a!==(a=Oe(h[0].score)+"")&&De(i,a),d&1&&c!==(c=at(h[0].id))&&_(e,"id",c),d&0&&Ee(e,"open",open)},i:Q,o:Q,d(h){h&&m(e),p&&p.d(),u=!1,Ge(f)}}}let Ft=5;function ol(s,e,n){let t,{post:l}=e,o=1/3,r=Nn(l.width,l.height),a=Math.max(Math.min(Math.round(Ft/r),Ft/o),2);const i=f=>f.endsWith(".jpg")||f.endsWith(".jpeg")||f.endsWith(".png")||f.endsWith(".webp");function c(f){Ie.call(this,s,f)}const u=f=>{var p;(Bn(f)||f.key==="f")&&((p=f.target)==null||p.click())};return s.$$set=f=>{"post"in f&&n(0,l=f.post)},s.$$.update=()=>{s.$$.dirty&1&&n(1,t=i(l.sample_url)?l.sample_url:l.preview_url)},[l,t,a,c,u]}class il extends re{constructor(e){super(),oe(this,e,ol,rl,le,{post:0})}}function Rt(s,e,n){const t=s.slice();t[2]=e[n];const l=t[2].host.replace("www.","");t[3]=l;const o=t[1][t[3]]??t[1].default;t[4]=o[0],t[5]=o[1];const r=t[3].includes("api-cdn")?"File":t[3];return t[6]=r,t}function At(s){let e,n,t=s[6]+"",l,o,r,a;return{c(){e=S("li"),n=S("a"),l=ce(t),a=T(),this.h()},l(i){e=C(i,"LI",{});var c=j(e);n=C(c,"A",{href:!0,class:!0,style:!0});var u=j(n);l=ue(u,t),u.forEach(m),a=L(c),c.forEach(m),this.h()},h(){_(n,"href",o=s[2].toString()),_(n,"class",r="codicon codicon-link-external "+s[5]+" svelte-f59j30"),Fe(n,"background-color",s[4]),Fe(n,"color",s[5])},m(i,c){N(i,e,c),g(e,n),g(n,l),g(e,a)},p(i,c){c&1&&t!==(t=i[6]+"")&&De(l,t),c&1&&o!==(o=i[2].toString())&&_(n,"href",o),c&1&&r!==(r="codicon codicon-link-external "+i[5]+" svelte-f59j30")&&_(n,"class",r),c&1&&Fe(n,"background-color",i[4]),c&1&&Fe(n,"color",i[5])},d(i){i&&m(e)}}}function al(s){let e,n=Ce(s[0]),t=[];for(let l=0;l<n.length;l+=1)t[l]=At(Rt(s,n,l));return{c(){e=S("ol");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=C(l,"OL",{class:!0});var o=j(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){_(e,"class","svelte-f59j30")},m(l,o){N(l,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(l,[o]){if(o&3){n=Ce(l[0]);let r;for(r=0;r<n.length;r+=1){const a=Rt(l,n,r);t[r]?t[r].p(a,o):(t[r]=At(a),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:Q,o:Q,d(l){l&&m(e),Qe(t,l)}}}function cl(s,e,n){let{links:t}=e;const l={"kurosearch.com":["crimson","white"],"rule34.xxx":["#aae5a4","black"],"newgrounds.com":["#fda238","black"],"twitter.com":["rgb(29, 155, 240)","white"],"x.com":["rgb(29, 155, 240)","white"],"pornhub.com":["#f90","black"],"zone-archive.com":["#59396A","white"],"subscribestar.adult":["#ff4081","white"],"redgifs.com":["#E5194D","white"],"deviantart.com":["#00c787","black"],default:["var(--background-2)","white"]};return s.$$set=o=>{"links"in o&&n(0,t=o.links)},[t,l]}class ul extends re{constructor(e){super(),oe(this,e,cl,al,le,{links:0})}}function jt(s){let e,n=Oe(s[0].comment_count)+"",t,l,o;return{c(){e=S("button"),t=ce(n),this.h()},l(r){e=C(r,"BUTTON",{type:!0,class:!0});var a=j(e);t=ue(a,n),a.forEach(m),this.h()},h(){_(e,"type","button"),_(e,"class","codicon codicon-comment svelte-nhpj3u"),Ee(e,"active",s[1]==="comments")},m(r,a){N(r,e,a),g(e,t),l||(o=te(e,"click",s[5]),l=!0)},p(r,a){a&1&&n!==(n=Oe(r[0].comment_count)+"")&&De(t,n),a&2&&Ee(e,"active",r[1]==="comments")},d(r){r&&m(e),l=!1,o()}}}function fl(s){let e,n,t,l,o="•",r,a,i,c,u,f,p=Oe(s[2])+"",h,d,$,y,I=Oe(s[0].tags.length)+"",A,P,k,H;n=new Zt({props:{value:s[0].change}}),a=new Yt({props:{value:s[0].score}});let V=s[0].comment_count&&jt(s);return{c(){e=S("div"),M(n.$$.fragment),t=T(),l=S("span"),l.textContent=o,r=T(),M(a.$$.fragment),i=T(),c=S("span"),u=T(),f=S("button"),h=ce(p),d=T(),V&&V.c(),$=T(),y=S("button"),A=ce(I),this.h()},l(G){e=C(G,"DIV",{class:!0});var b=j(e);B(n.$$.fragment,b),t=L(b),l=C(b,"SPAN",{"data-svelte-h":!0}),pe(l)!=="svelte-7hh8jk"&&(l.textContent=o),r=L(b),B(a.$$.fragment,b),i=L(b),c=C(b,"SPAN",{class:!0}),j(c).forEach(m),u=L(b),f=C(b,"BUTTON",{type:!0,class:!0});var D=j(f);h=ue(D,p),D.forEach(m),d=L(b),V&&V.l(b),$=L(b),y=C(b,"BUTTON",{type:!0,class:!0});var z=j(y);A=ue(z,I),z.forEach(m),b.forEach(m),this.h()},h(){_(c,"class","divider svelte-nhpj3u"),_(f,"type","button"),_(f,"class","codicon codicon-link svelte-nhpj3u"),Ee(f,"active",s[1]==="links"),_(y,"type","button"),_(y,"class","codicon codicon-tag svelte-nhpj3u"),Ee(y,"active",s[1]==="tags"),_(e,"class","summary svelte-nhpj3u")},m(G,b){N(G,e,b),q(n,e,null),g(e,t),g(e,l),g(e,r),q(a,e,null),g(e,i),g(e,c),g(e,u),g(e,f),g(f,h),g(e,d),V&&V.m(e,null),g(e,$),g(e,y),g(y,A),P=!0,k||(H=[te(f,"click",s[4]),te(y,"click",s[6])],k=!0)},p(G,[b]){const D={};b&1&&(D.value=G[0].change),n.$set(D);const z={};b&1&&(z.value=G[0].score),a.$set(z),(!P||b&4)&&p!==(p=Oe(G[2])+"")&&De(h,p),(!P||b&2)&&Ee(f,"active",G[1]==="links"),G[0].comment_count?V?V.p(G,b):(V=jt(G),V.c(),V.m(e,$)):V&&(V.d(1),V=null),(!P||b&1)&&I!==(I=Oe(G[0].tags.length)+"")&&De(A,I),(!P||b&2)&&Ee(y,"active",G[1]==="tags")},i(G){P||(v(n.$$.fragment,G),v(a.$$.fragment,G),P=!0)},o(G){w(n.$$.fragment,G),w(a.$$.fragment,G),P=!1},d(G){G&&m(e),U(n),U(a),V&&V.d(),k=!1,Ge(H)}}}function pl(s,e,n){const t=Me();let{post:l}=e,{active:o}=e,{links:r}=e;const a=()=>t("links"),i=()=>t("comments"),c=()=>t("tags");return s.$$set=u=>{"post"in u&&n(0,l=u.post),"active"in u&&n(1,o=u.active),"links"in u&&n(2,r=u.links)},[l,o,r,t,a,i,c]}class _l extends re{constructor(e){super(),oe(this,e,pl,fl,le,{post:0,active:1,links:2})}}function dl(s){let e,n='<i class="codicon codicon-screen-full"></i>',t,l;return{c(){e=S("button"),e.innerHTML=n,this.h()},l(o){e=C(o,"BUTTON",{type:!0,title:!0,class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-hnv5zq"&&(e.innerHTML=n),this.h()},h(){_(e,"type","button"),_(e,"title","Enter Fullscreen mode"),_(e,"class","svelte-txn4jo")},m(o,r){N(o,e,r),t||(l=te(e,"click",s[0]),t=!0)},p:Q,i:Q,o:Q,d(o){o&&m(e),t=!1,l()}}}function ml(s){function e(n){Ie.call(this,s,n)}return[e]}class gl extends re{constructor(e){super(),oe(this,e,ml,dl,le,{})}}function hl(s){const e=s.slice(),n=tn(e[1].file_url,e[1].sample_url,e[1].preview_url);return e[11]=n,e}function $l(s){let e,n;return e=new Fn({props:{post:s[1]}}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function vl(s){let e,n;return e=new Rn({props:{src:s[11].animated,poster:s[11].static,width:s[1].width,height:s[1].height,loop:s[2]||ht(s[1].tags)}}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.src=t[11].animated),l&2&&(o.poster=t[11].static),l&2&&(o.width=t[1].width),l&2&&(o.height=t[1].height),l&6&&(o.loop=t[2]||ht(t[1].tags)),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function bl(s){let e,n;return e=new An({props:{post:s[1]}}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function kl(s){let e,n;return e=new ul({props:{links:s[5]}}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p:Q,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wl(s){let e,n;return e=new xt({props:{post:s[1]}}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function yl(s){let e,n;return e=new en({props:{tags:s[1].tags}}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.tags=t[1].tags),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function El(s){let e,n,t,l,o,r,a,i,c,u,f,p,h,d,$,y;const I=[bl,vl,$l],A=[];function P(b,D){return b[1].type==="image"?0:b[1].type==="video"?1:2}function k(b,D){return D===1?hl(b):b}t=P(s),l=A[t]=I[t](k(s,t)),r=new gl({}),r.$on("click",s[6]),c=new _l({props:{active:s[0],post:s[1],links:s[5].length}}),c.$on("tags",s[7]),c.$on("comments",s[8]),c.$on("links",s[9]);const H=[yl,wl,kl],V=[];function G(b,D){return b[0]==="tags"?0:b[0]==="comments"?1:b[0]==="links"?2:-1}return~(f=G(s))&&(p=V[f]=H[f](s)),{c(){e=S("div"),n=S("div"),l.c(),o=T(),M(r.$$.fragment),a=T(),i=S("div"),M(c.$$.fragment),u=T(),p&&p.c(),this.h()},l(b){e=C(b,"DIV",{id:!0,class:!0});var D=j(e);n=C(D,"DIV",{});var z=j(n);l.l(z),z.forEach(m),o=L(D),B(r.$$.fragment,D),a=L(D),i=C(D,"DIV",{class:!0});var Y=j(i);B(c.$$.fragment,Y),u=L(Y),p&&p.l(Y),Y.forEach(m),D.forEach(m),this.h()},h(){_(i,"class","details svelte-iu0mgu"),_(e,"id",h=at(s[1].id)),_(e,"class","post svelte-iu0mgu"),Ee(e,"openTab",s[0])},m(b,D){N(b,e,D),g(e,n),A[t].m(n,null),g(e,o),q(r,e,null),g(e,a),g(e,i),q(c,i,null),g(i,u),~f&&V[f].m(i,null),d=!0,$||(y=te(e,"keydown",s[10]),$=!0)},p(b,[D]){let z=t;t=P(b),t===z?A[t].p(k(b,t),D):(de(),w(A[z],1,1,()=>{A[z]=null}),me(),l=A[t],l?l.p(k(b,t),D):(l=A[t]=I[t](k(b,t)),l.c()),v(l,1),l.m(n,null));const Y={};D&1&&(Y.active=b[0]),D&2&&(Y.post=b[1]),c.$set(Y);let Z=f;f=G(b),f===Z?~f&&V[f].p(b,D):(p&&(de(),w(V[Z],1,1,()=>{V[Z]=null}),me()),~f?(p=V[f],p?p.p(b,D):(p=V[f]=H[f](b),p.c()),v(p,1),p.m(i,null)):p=null),(!d||D&2&&h!==(h=at(b[1].id)))&&_(e,"id",h),(!d||D&1)&&Ee(e,"openTab",b[0])},i(b){d||(v(l),v(r.$$.fragment,b),v(c.$$.fragment,b),v(p),d=!0)},o(b){w(l),w(r.$$.fragment,b),w(c.$$.fragment,b),w(p),d=!1},d(b){b&&m(e),A[t].d(),U(r),U(c),~f&&V[f].d(),$=!1,y()}}}function Sl(s,e,n){let t;fe(s,qn,d=>n(2,t=d));const l=Me();let{post:o}=e,{openTab:r=void 0}=e;const a=d=>{n(0,r=r===d?void 0:d)},i=[new URL(`https://kurosearch.com/post?id=${o.id}&src=${encodeURIComponent(o.file_url)}`),new URL(`https://rule34.xxx/index.php?page=post&s=view&id=${o.id}`),new URL(o.file_url),...o.source?o.source.split(" ").filter(d=>Wn(d)).map(d=>new URL(d)):[]],c=()=>l("fullscreen"),u=()=>a("tags"),f=()=>a("comments"),p=()=>a("links"),h=d=>{d.key==="f"&&l("fullscreen")};return s.$$set=d=>{"post"in d&&n(1,o=d.post),"openTab"in d&&n(0,r=d.openTab)},[r,o,t,l,a,i,c,u,f,p,h]}class Cl extends re{constructor(e){super(),oe(this,e,Sl,El,le,{post:1,openTab:0})}}function Vt(s,e,n){const t=s.slice();return t[7]=e[n],t[9]=n,t}function Ot(s,e,n){const t=s.slice();return t[7]=e[n],t[9]=n,t}function Il(s){let e,n,t=Ce(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Mt(Vt(s,t,r));const o=r=>w(l[r],1,1,()=>{l[r]=null});return{c(){e=S("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=C(r,"OL",{class:!0,style:!0});var a=j(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(m),this.h()},h(){_(e,"class","multi-column svelte-1nfzeed"),Fe(e,"--nr-columns",s[2])},m(r,a){N(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=Ce(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Vt(r,t,i);l[i]?(l[i].p(c,a),v(l[i],1)):(l[i]=Mt(c),l[i].c(),v(l[i],1),l[i].m(e,null))}for(de(),i=t.length;i<l.length;i+=1)o(i);me()}(!n||a&4)&&Fe(e,"--nr-columns",r[2])},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)w(l[a]);n=!1},d(r){r&&m(e),Qe(l,r)}}}function Dl(s){let e,n,t=Ce(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Bt(Ot(s,t,r));const o=r=>w(l[r],1,1,()=>{l[r]=null});return{c(){e=S("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=C(r,"OL",{class:!0});var a=j(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(m),this.h()},h(){_(e,"class","single-column svelte-1nfzeed")},m(r,a){N(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=Ce(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Ot(r,t,i);l[i]?(l[i].p(c,a),v(l[i],1)):(l[i]=Bt(c),l[i].c(),v(l[i],1),l[i].m(e,null))}for(de(),i=t.length;i<l.length;i+=1)o(i);me()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)v(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)w(l[a]);n=!1},d(r){r&&m(e),Qe(l,r)}}}function Mt(s){let e,n;function t(){return s[5](s[9])}return e=new il({props:{post:s[7]}}),e.$on("click",t),{c(){M(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,o){q(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[7]),e.$set(r)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){w(e.$$.fragment,l),n=!1},d(l){U(e,l)}}}function Bt(s){let e,n;function t(){return s[4](s[9])}return e=new Cl({props:{post:s[7]}}),e.$on("fullscreen",t),{c(){M(e.$$.fragment)},l(l){B(e.$$.fragment,l)},m(l,o){q(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[7]),e.$set(r)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){w(e.$$.fragment,l),n=!1},d(l){U(e,l)}}}function qt(s){let e,n;return e=new ll({props:{index:s[0]}}),e.$on("close",s[3]),e.$on("endreached",s[6]),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.index=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Tl(s){let e,n,t,l,o;const r=[Dl,Il],a=[];function i(u,f){return u[2]==="1"?0:1}e=i(s),n=a[e]=r[e](s);let c=s[0]!==void 0&&qt(s);return{c(){n.c(),t=T(),c&&c.c(),l=Re()},l(u){n.l(u),t=L(u),c&&c.l(u),l=Re()},m(u,f){a[e].m(u,f),N(u,t,f),c&&c.m(u,f),N(u,l,f),o=!0},p(u,[f]){let p=e;e=i(u),e===p?a[e].p(u,f):(de(),w(a[p],1,1,()=>{a[p]=null}),me(),n=a[e],n?n.p(u,f):(n=a[e]=r[e](u),n.c()),v(n,1),n.m(t.parentNode,t)),u[0]!==void 0?c?(c.p(u,f),f&1&&v(c,1)):(c=qt(u),c.c(),v(c,1),c.m(l.parentNode,l)):c&&(de(),w(c,1,1,()=>{c=null}),me())},i(u){o||(v(n),v(c),o=!0)},o(u){w(n),w(c),o=!1},d(u){u&&(m(t),m(l)),a[e].d(u),c&&c.d(u)}}}function Ll(s,e,n){let t,l;fe(s,Ke,u=>n(1,t=u)),fe(s,Kt,u=>n(2,l=u));let o;const r=u=>{var h;const f=t.posts[u.detail],p=at(f.id);(h=document.getElementById(p))==null||h.scrollIntoView(),n(0,o=void 0)},a=u=>{n(0,o=u)},i=u=>{n(0,o=u)};function c(u){Ie.call(this,s,u)}return s.$$.update=()=>{var u;s.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(u=history.state)!=null&&u.fullscreen&&history.back())},[o,t,l,r,a,i,c]}class Pl extends re{constructor(e){super(),oe(this,e,Ll,Tl,le,{})}}function Nl(s){let e;return{c(){e=ce("Reset Filter")},l(n){e=ue(n,"Reset Filter")},m(n,t){N(n,e,t)},d(n){n&&m(e)}}}function Fl(s){let e;return{c(){e=ce("Reset Tags")},l(n){e=ue(n,"Reset Tags")},m(n,t){N(n,e,t)},d(n){n&&m(e)}}}function Rl(s){let e,n,t,l,o="We couldn't find any posts matching your tags. Sorry...",r,a,i,c,u,f;return i=new ze({props:{title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[Nl]},$$scope:{ctx:s}}}),i.$on("click",s[1]),u=new ze({props:{title:"Tag combinations that are too specific will not yield results.",$$slots:{default:[Fl]},$$scope:{ctx:s}}}),u.$on("click",s[2]),{c(){e=S("img"),t=T(),l=S("p"),l.textContent=o,r=T(),a=S("div"),M(i.$$.fragment),c=T(),M(u.$$.fragment),this.h()},l(p){e=C(p,"IMG",{src:!0,alt:!0,class:!0}),t=L(p),l=C(p,"P",{"data-svelte-h":!0}),pe(l)!=="svelte-1utxj3w"&&(l.textContent=o),r=L(p),a=C(p,"DIV",{class:!0});var h=j(a);B(i.$$.fragment,h),c=L(h),B(u.$$.fragment,h),h.forEach(m),this.h()},h(){Se(e.src,n=_t+"/assets/shironeko-confused.png")||_(e,"src",n),_(e,"alt","Nothing here..."),_(e,"class","svelte-1oxspdj"),_(a,"class","svelte-1oxspdj")},m(p,h){N(p,e,h),N(p,t,h),N(p,l,h),N(p,r,h),N(p,a,h),q(i,a,null),g(a,c),q(u,a,null),f=!0},p(p,[h]){const d={};h&8&&(d.$$scope={dirty:h,ctx:p}),i.$set(d);const $={};h&8&&($.$$scope={dirty:h,ctx:p}),u.$set($)},i(p){f||(v(i.$$.fragment,p),v(u.$$.fragment,p),f=!0)},o(p){w(i.$$.fragment,p),w(u.$$.fragment,p),f=!1},d(p){p&&(m(e),m(t),m(l),m(r),m(a)),U(i),U(u)}}}function Al(s){const e=Me();return[e,()=>{Je.reset(),Ue.reset(),e("sortfilterupdate")},()=>{it.reset(),ft.reset()}]}class jl extends re{constructor(e){super(),oe(this,e,Al,Rl,le,{})}}function Vl(s){const e=s-1;return e*e*e+1}function Ol(s,{delay:e=0,duration:n=400,easing:t=Vl,x:l=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(s),i=+a.opacity,c=a.transform==="none"?"":a.transform,u=i*(1-r),[f,p]=gt(l),[h,d]=gt(o);return{delay:e,duration:n,easing:t,css:($,y)=>`
			transform: ${c} translate(${(1-$)*f}${p}, ${(1-$)*h}${d});
			opacity: ${i-u*y}`}}function Ml(s){let e;return{c(){e=ce("Ok")},l(n){e=ue(n,"Ok")},m(n,t){N(n,e,t)},d(n){n&&m(e)}}}function Bl(s){let e,n,t,l="This website uses cookies.",o,r,a,i;return r=new ze({props:{title:"Accept cookies",$$slots:{default:[Ml]},$$scope:{ctx:s}}}),r.$on("click",s[0]),{c(){e=S("section"),n=S("div"),t=S("span"),t.textContent=l,o=T(),M(r.$$.fragment),this.h()},l(c){e=C(c,"SECTION",{class:!0});var u=j(e);n=C(u,"DIV",{class:!0});var f=j(n);t=C(f,"SPAN",{"data-svelte-h":!0}),pe(t)!=="svelte-2018sg"&&(t.textContent=l),o=L(f),B(r.$$.fragment,f),f.forEach(m),u.forEach(m),this.h()},h(){_(n,"class","svelte-76nt2a"),_(e,"class","svelte-76nt2a")},m(c,u){N(c,e,u),g(e,n),g(n,t),g(n,o),q(r,n,null),i=!0},p(c,[u]){const f={};u&2&&(f.$$scope={dirty:u,ctx:c}),r.$set(f)},i(c){i||(v(r.$$.fragment,c),a&&a.end(1),i=!0)},o(c){w(r.$$.fragment,c),c&&(a=wn(e,Ol,{y:200,duration:200})),i=!1},d(c){c&&m(e),U(r),c&&a&&a.end()}}}function ql(s){return[()=>sn.set(!0)]}class Ul extends re{constructor(e){super(),oe(this,e,ql,Bl,le,{})}}function Ut(s,e,n){const t=s.slice();return t[5]=e[n][0],t[6]=e[n][1],t}function Ht(s){let e,n,t,l=!1,o,r,a,i=s[6]+"",c,u,f,p,h;return f=vn(s[4][0]),{c(){e=S("input"),r=T(),a=S("label"),c=ce(i),this.h()},l(d){e=C(d,"INPUT",{type:!0,name:!0,id:!0,class:!0}),r=L(d),a=C(d,"LABEL",{for:!0,class:!0});var $=j(a);c=ue($,i),$.forEach(m),this.h()},h(){_(e,"type","radio"),_(e,"name",n="group-"+s[1]),e.__value=t=s[5],He(e,e.__value),_(e,"id",o=s[1]+"-"+s[5]),_(e,"class","svelte-16oxivo"),_(a,"for",u=s[1]+"-"+s[5]),_(a,"class","svelte-16oxivo"),f.p(e)},m(d,$){N(d,e,$),e.checked=e.__value===s[0],N(d,r,$),N(d,a,$),g(a,c),p||(h=te(e,"change",s[3]),p=!0)},p(d,$){$&2&&n!==(n="group-"+d[1])&&_(e,"name",n),$&4&&t!==(t=d[5])&&(e.__value=t,He(e,e.__value),l=!0),$&6&&o!==(o=d[1]+"-"+d[5])&&_(e,"id",o),(l||$&5)&&(e.checked=e.__value===d[0]),$&4&&i!==(i=d[6]+"")&&De(c,i),$&6&&u!==(u=d[1]+"-"+d[5])&&_(a,"for",u)},d(d){d&&(m(e),m(r),m(a)),f.r(),p=!1,h()}}}function Hl(s){let e,n,t=Ce(Object.entries(s[2])),l=[];for(let o=0;o<t.length;o+=1)l[o]=Ht(Ut(s,t,o));return{c(){e=S("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=C(o,"DIV",{id:!0,role:!0,class:!0});var r=j(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){_(e,"id",n="group-"+s[1]),_(e,"role","radiogroup"),_(e,"class","svelte-16oxivo")},m(o,r){N(o,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(o,[r]){if(r&7){t=Ce(Object.entries(o[2]));let a;for(a=0;a<t.length;a+=1){const i=Ut(o,t,a);l[a]?l[a].p(i,r):(l[a]=Ht(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}r&2&&n!==(n="group-"+o[1])&&_(e,"id",n)},i:Q,o:Q,d(o){o&&m(e),Qe(l,o)}}}function zl(s,e,n){let{name:t}=e,{value:l}=e,{options:o}=e;const r=[[]];function a(){l=this.__value,n(0,l)}return s.$$set=i=>{"name"in i&&n(1,t=i.name),"value"in i&&n(0,l=i.value),"options"in i&&n(2,o=i.options)},[l,t,o,a,r]}class Gl extends re{constructor(e){super(),oe(this,e,zl,Hl,le,{name:1,value:0,options:2})}}const Wl=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),an=Object.freeze({">=":"≥","<=":"≤"}),cn=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),Kl=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),Jl=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),Ql=(s,e)=>s===0&&e===">="?void 0:`Score ${an[e]} ${Oe(s)}`,Yl=s=>s==="all"?void 0:cn[s],Zl=(s,e,n)=>{let t=Yl(s),l=Ql(e,n);return[t,l].filter(o=>o!==void 0).join(",")||"All"},Xl=(s,e)=>Wl[s][e];function xl(s){let e;return{c(){e=ce("Done")},l(n){e=ue(n,"Done")},m(n,t){N(n,e,t)},d(n){n&&m(e)}}}function er(s){let e;return{c(){e=ce("Reset")},l(n){e=ue(n,"Reset")},m(n,t){N(n,e,t)},d(n){n&&m(e)}}}function tr(s){let e,n,t="Sorting and Filtering",l,o,r,a="Sorting",i,c,u,f,p,h,d,$,y,I,A="Filtering by Score",P,k,H,V,G,b,D,z,Y,Z,F="Rating",X,O,E,R,W,ne,x,_e;function ge(J){s[4](J)}let Be={options:Jl};s[1].direction!==void 0&&(Be.value=s[1].direction),u=new In({props:Be}),$e.push(()=>Ne(u,"value",ge));function Te(J){s[5](J)}let st={options:Kl};s[1].property!==void 0&&(st.value=s[1].property),h=new ts({props:st}),$e.push(()=>Ne(h,"value",Te));function lt(J){s[6](J)}let Ae={options:an};s[2].scoreComparator!==void 0&&(Ae.value=s[2].scoreComparator),H=new ns({props:Ae}),$e.push(()=>Ne(H,"value",lt));function rt(J){s[7](J)}let Ye={min:0,max:1e4,step:1};s[2].scoreValue!==void 0&&(Ye.value=s[2].scoreValue),b=new On({props:Ye}),$e.push(()=>Ne(b,"value",rt));function Le(J){s[8](J)}let We={name:"rating",options:cn};return s[2].rating!==void 0&&(We.value=s[2].rating),O=new Gl({props:We}),$e.push(()=>Ne(O,"value",Le)),W=new ze({props:{title:"Return to searching",$$slots:{default:[xl]},$$scope:{ctx:s}}}),W.$on("click",s[9]),x=new ze({props:{title:"Reset sort and filter",type:"secondary",$$slots:{default:[er]},$$scope:{ctx:s}}}),x.$on("click",s[3]),{c(){e=S("div"),n=S("h3"),n.textContent=t,l=T(),o=S("div"),r=S("b"),r.textContent=a,i=T(),c=S("div"),M(u.$$.fragment),p=T(),M(h.$$.fragment),$=T(),y=S("div"),I=S("b"),I.textContent=A,P=T(),k=S("div"),M(H.$$.fragment),G=T(),M(b.$$.fragment),z=T(),Y=S("div"),Z=S("b"),Z.textContent=F,X=T(),M(O.$$.fragment),R=T(),M(W.$$.fragment),ne=T(),M(x.$$.fragment),this.h()},l(J){e=C(J,"DIV",{class:!0});var ie=j(e);n=C(ie,"H3",{"data-svelte-h":!0}),pe(n)!=="svelte-15zouq3"&&(n.textContent=t),l=L(ie),o=C(ie,"DIV",{});var je=j(o);r=C(je,"B",{class:!0,"data-svelte-h":!0}),pe(r)!=="svelte-ekzpgg"&&(r.textContent=a),i=L(je),c=C(je,"DIV",{class:!0});var ve=j(c);B(u.$$.fragment,ve),p=L(ve),B(h.$$.fragment,ve),ve.forEach(m),je.forEach(m),$=L(ie),y=C(ie,"DIV",{});var be=j(y);I=C(be,"B",{class:!0,"data-svelte-h":!0}),pe(I)!=="svelte-1flca3"&&(I.textContent=A),P=L(be),k=C(be,"DIV",{class:!0});var se=j(k);B(H.$$.fragment,se),G=L(se),B(b.$$.fragment,se),se.forEach(m),be.forEach(m),z=L(ie),Y=C(ie,"DIV",{});var ke=j(Y);Z=C(ke,"B",{class:!0,"data-svelte-h":!0}),pe(Z)!=="svelte-1lwyn2b"&&(Z.textContent=F),X=L(ke),B(O.$$.fragment,ke),ke.forEach(m),R=L(ie),B(W.$$.fragment,ie),ne=L(ie),B(x.$$.fragment,ie),ie.forEach(m),this.h()},h(){_(r,"class","svelte-fm5hcv"),_(c,"class","row svelte-fm5hcv"),_(I,"class","svelte-fm5hcv"),_(k,"class","row svelte-fm5hcv"),_(Z,"class","svelte-fm5hcv"),_(e,"class","container svelte-fm5hcv")},m(J,ie){N(J,e,ie),g(e,n),g(e,l),g(e,o),g(o,r),g(o,i),g(o,c),q(u,c,null),g(c,p),q(h,c,null),g(e,$),g(e,y),g(y,I),g(y,P),g(y,k),q(H,k,null),g(k,G),q(b,k,null),g(e,z),g(e,Y),g(Y,Z),g(Y,X),q(O,Y,null),g(e,R),q(W,e,null),g(e,ne),q(x,e,null),_e=!0},p(J,ie){const je={};!f&&ie&2&&(f=!0,je.value=J[1].direction,Pe(()=>f=!1)),u.$set(je);const ve={};!d&&ie&2&&(d=!0,ve.value=J[1].property,Pe(()=>d=!1)),h.$set(ve);const be={};!V&&ie&4&&(V=!0,be.value=J[2].scoreComparator,Pe(()=>V=!1)),H.$set(be);const se={};!D&&ie&4&&(D=!0,se.value=J[2].scoreValue,Pe(()=>D=!1)),b.$set(se);const ke={};!E&&ie&4&&(E=!0,ke.value=J[2].rating,Pe(()=>E=!1)),O.$set(ke);const ae={};ie&4096&&(ae.$$scope={dirty:ie,ctx:J}),W.$set(ae);const ct={};ie&4096&&(ct.$$scope={dirty:ie,ctx:J}),x.$set(ct)},i(J){_e||(v(u.$$.fragment,J),v(h.$$.fragment,J),v(H.$$.fragment,J),v(b.$$.fragment,J),v(O.$$.fragment,J),v(W.$$.fragment,J),v(x.$$.fragment,J),_e=!0)},o(J){w(u.$$.fragment,J),w(h.$$.fragment,J),w(H.$$.fragment,J),w(b.$$.fragment,J),w(O.$$.fragment,J),w(W.$$.fragment,J),w(x.$$.fragment,J),_e=!1},d(J){J&&m(e),U(u),U(h),U(H),U(b),U(O),U(W),U(x)}}}function nr(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[tr]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.dialog=s[0]),e=new Wt({props:o}),$e.push(()=>Ne(e,"dialog",l)),e.$on("close",s[11]),{c(){M(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,a){q(e,r,a),t=!0},p(r,[a]){const i={};a&4103&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],Pe(()=>n=!1)),e.$set(i)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){w(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function sr(s,e,n){let t,l;fe(s,Je,$=>n(1,t=$)),fe(s,Ue,$=>n(2,l=$));let{dialog:o}=e;const r=()=>{Je.reset(),Ue.reset()};function a($){s.$$.not_equal(t.direction,$)&&(t.direction=$,Je.set(t))}function i($){s.$$.not_equal(t.property,$)&&(t.property=$,Je.set(t))}function c($){s.$$.not_equal(l.scoreComparator,$)&&(l.scoreComparator=$,Ue.set(l))}function u($){s.$$.not_equal(l.scoreValue,$)&&(l.scoreValue=$,Ue.set(l))}function f($){s.$$.not_equal(l.rating,$)&&(l.rating=$,Ue.set(l))}const p=()=>o.close();function h($){o=$,n(0,o)}function d($){Ie.call(this,s,$)}return s.$$set=$=>{"dialog"in $&&n(0,o=$.dialog)},[o,t,l,r,a,i,c,u,f,p,h,d]}class lr extends re{constructor(e){super(),oe(this,e,sr,nr,le,{dialog:0})}}function rr(s){let e,n,t,l,o,r,a,i,c,u,f,p,h,d,$,y;function I(P){s[9](P)}let A={};return s[2]!==void 0&&(A.dialog=s[2]),p=new lr({props:A}),$e.push(()=>Ne(p,"dialog",I)),p.$on("close",s[10]),{c(){e=S("button"),n=S("i"),t=T(),l=S("span"),o=ce(s[5]),r=T(),a=S("i"),i=T(),c=S("span"),u=ce(s[4]),f=T(),M(p.$$.fragment),this.h()},l(P){e=C(P,"BUTTON",{type:!0,class:!0});var k=j(e);n=C(k,"I",{class:!0}),j(n).forEach(m),t=L(k),l=C(k,"SPAN",{class:!0});var H=j(l);o=ue(H,s[5]),H.forEach(m),r=L(k),a=C(k,"I",{class:!0}),j(a).forEach(m),i=L(k),c=C(k,"SPAN",{class:!0});var V=j(c);u=ue(V,s[4]),V.forEach(m),k.forEach(m),f=L(P),B(p.$$.fragment,P),this.h()},h(){_(n,"class","codicon codicon-filter svelte-3ooqm6"),_(l,"class","svelte-3ooqm6"),_(a,"class","codicon codicon-arrow-swap svelte-3ooqm6"),_(c,"class","svelte-3ooqm6"),_(e,"type","button"),_(e,"class","svelte-3ooqm6")},m(P,k){N(P,e,k),g(e,n),g(e,t),g(e,l),g(l,o),g(e,r),g(e,a),g(e,i),g(e,c),g(c,u),N(P,f,k),q(p,P,k),d=!0,$||(y=te(e,"click",s[8]),$=!0)},p(P,[k]){(!d||k&32)&&De(o,P[5]),(!d||k&16)&&De(u,P[4]);const H={};!h&&k&4&&(h=!0,H.dialog=P[2],Pe(()=>h=!1)),p.$set(H)},i(P){d||(v(p.$$.fragment,P),d=!0)},o(P){w(p.$$.fragment,P),d=!1},d(P){P&&(m(e),m(f)),U(p,P),$=!1,y()}}}function or(s,e,n){let t,l,o,r;fe(s,Je,d=>n(0,o=d)),fe(s,Ue,d=>n(1,r=d));const a=Me(),i=(d,$)=>JSON.stringify(Object.assign({},d,$));let c,u="";const f=()=>{n(3,u=i(o,r)),c.showModal(),Jt("dialog")};function p(d){c=d,n(2,c)}const h=()=>{i(o,r)!==u&&a("sortfilterupdate")};return s.$$.update=()=>{s.$$.dirty&2&&n(5,t=Zl(r.rating,r.scoreValue,r.scoreComparator)),s.$$.dirty&1&&n(4,l=Xl(o.property,o.direction))},[o,r,c,u,l,t,a,i,f,p,h]}class ir extends re{constructor(e){super(),oe(this,e,or,rr,le,{})}}function ar(s){let e,n,t=Oe(s[1].postCount)+"",l,o,r,a,i;return a=new ir({}),a.$on("sortfilterupdate",s[2]),{c(){e=S("div"),n=S("span"),l=ce(t),o=ce(" posts"),r=T(),M(a.$$.fragment),this.h()},l(c){e=C(c,"DIV",{class:!0});var u=j(e);n=C(u,"SPAN",{class:!0});var f=j(n);l=ue(f,t),o=ue(f," posts"),f.forEach(m),r=L(u),B(a.$$.fragment,u),u.forEach(m),this.h()},h(){_(n,"class","svelte-1f1ky2c"),Ee(n,"loading",s[0]),_(e,"class","svelte-1f1ky2c")},m(c,u){N(c,e,u),g(e,n),g(n,l),g(n,o),g(e,r),q(a,e,null),i=!0},p(c,[u]){(!i||u&2)&&t!==(t=Oe(c[1].postCount)+"")&&De(l,t),(!i||u&1)&&Ee(n,"loading",c[0])},i(c){i||(v(a.$$.fragment,c),i=!0)},o(c){w(a.$$.fragment,c),i=!1},d(c){c&&m(e),U(a)}}}function cr(s,e,n){let t;fe(s,Ke,r=>n(1,t=r));let{loading:l}=e;function o(r){Ie.call(this,s,r)}return s.$$set=r=>{"loading"in r&&n(0,l=r.loading)},[l,t,o]}class ur extends re{constructor(e){super(),oe(this,e,cr,ar,le,{loading:0})}}const{document:pt}=yn;function fr(s){let e;return{c(){e=ce("Search")},l(n){e=ue(n,"Search")},m(n,t){N(n,e,t)},i:Q,o:Q,d(n){n&&m(e)}}}function pr(s){let e,n;return e=new dt({}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function _r(s){let e,n,t,l;const o=[pr,fr],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Re()},l(i){n.l(i),t=Re()},m(i,c){r[e].m(i,c),N(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(de(),w(r[u],1,1,()=>{r[u]=null}),me(),n=r[e],n||(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){l||(v(n),l=!0)},o(i){w(n),l=!1},d(i){i&&m(t),r[e].d(i)}}}function dr(s){let e,n,t,l,o,r;const a=[hr,gr],i=[];function c(u,f){return u[3].postCount===0?0:1}return n=c(s),t=i[n]=a[n](s),o=new Zn({}),{c(){e=S("section"),t.c(),l=T(),M(o.$$.fragment),this.h()},l(u){e=C(u,"SECTION",{class:!0});var f=j(e);t.l(f),f.forEach(m),l=L(u),B(o.$$.fragment,u),this.h()},h(){_(e,"class","svelte-3qywmu")},m(u,f){N(u,e,f),i[n].m(e,null),N(u,l,f),q(o,u,f),r=!0},p(u,f){let p=n;n=c(u),n===p?i[n].p(u,f):(de(),w(i[p],1,1,()=>{i[p]=null}),me(),t=i[n],t?t.p(u,f):(t=i[n]=a[n](u),t.c()),v(t,1),t.m(e,null))},i(u){r||(v(t),v(o.$$.fragment,u),r=!0)},o(u){w(t),w(o.$$.fragment,u),r=!1},d(u){u&&(m(e),m(l)),i[n].d(),U(o,u)}}}function mr(s){let e,n;return e=new ps({props:{error:s[1]}}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.error=t[1]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function gr(s){let e,n,t,l,o,r;e=new Pl({}),e.$on("sortfilterupdate",s[10]),e.$on("endreached",s[11]);const a=[vr,$r],i=[];function c(u,f){return u[3].posts.length===u[3].postCount?0:1}return t=c(s),l=i[t]=a[t](s),{c(){M(e.$$.fragment),n=T(),l.c(),o=Re()},l(u){B(e.$$.fragment,u),n=L(u),l.l(u),o=Re()},m(u,f){q(e,u,f),N(u,n,f),i[t].m(u,f),N(u,o,f),r=!0},p(u,f){let p=t;t=c(u),t===p?i[t].p(u,f):(de(),w(i[p],1,1,()=>{i[p]=null}),me(),l=i[t],l?l.p(u,f):(l=i[t]=a[t](u),l.c()),v(l,1),l.m(o.parentNode,o))},i(u){r||(v(e.$$.fragment,u),v(l),r=!0)},o(u){w(e.$$.fragment,u),w(l),r=!1},d(u){u&&(m(n),m(o)),U(e,u),i[t].d(u)}}}function hr(s){let e,n;return e=new jl({}),e.$on("sortfilterupdate",s[10]),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p:Q,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function $r(s){let e,n,t,l;return e=new ln({props:{absoluteTop:void 0,rootMargin:1e3/Number(s[7])+"px"}}),e.$on("intersection",s[11]),t=new ze({props:{title:"Load more posts",$$slots:{default:[wr]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){M(e.$$.fragment),n=T(),M(t.$$.fragment)},l(o){B(e.$$.fragment,o),n=L(o),B(t.$$.fragment,o)},m(o,r){q(e,o,r),N(o,n,r),q(t,o,r),l=!0},p(o,r){const a={};r&128&&(a.rootMargin=1e3/Number(o[7])+"px"),e.$set(a);const i={};r&67108865&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){l||(v(e.$$.fragment,o),v(t.$$.fragment,o),l=!0)},o(o){w(e.$$.fragment,o),w(t.$$.fragment,o),l=!1},d(o){o&&m(n),U(e,o),U(t,o)}}}function vr(s){let e,n;return e=new ds({}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p:Q,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function br(s){let e;return{c(){e=ce("Load more")},l(n){e=ue(n,"Load more")},m(n,t){N(n,e,t)},i:Q,o:Q,d(n){n&&m(e)}}}function kr(s){let e,n;return e=new dt({}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wr(s){let e,n,t,l;const o=[kr,br],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Re()},l(i){n.l(i),t=Re()},m(i,c){r[e].m(i,c),N(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(de(),w(r[u],1,1,()=>{r[u]=null}),me(),n=r[e],n||(n=r[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){l||(v(n),l=!0)},o(i){w(n),l=!1},d(i){i&&m(t),r[e].d(i)}}}function zt(s){let e;return{c(){e=S("div"),this.h()},l(n){e=C(n,"DIV",{class:!0}),j(e).forEach(m),this.h()},h(){_(e,"class","svelte-3qywmu")},m(n,t){N(n,e,t)},d(n){n&&m(e)}}}function Gt(s){let e,n;return e=new Ul({}),{c(){M(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function yr(s){let e,n,t,l,o,r,a,i,c,u,f,p,h,d,$,y,I,A,P,k,H,V,G,b;t=new ls({}),r=new Sn({}),i=new Yn({props:{placeholder:"Search for tags",fetchSuggestions:s[9]}}),i.$on("pick",s[12]),u=new ze({props:{id:"btn-search",title:"Search with the tags above",$$slots:{default:[_r]},$$scope:{ctx:s}}}),u.$on("click",s[10]),p=new Cn({props:{tags:[...s[5],...s[4]]}}),p.$on("click",s[13]),p.$on("contextmenu",s[14]),p.$on("createSupertag",s[15]),d=new ur({props:{loading:s[0]}}),d.$on("sortfilterupdate",s[16]);const D=[mr,dr],z=[];function Y(E,R){return E[1]?0:E[3].requested?1:-1}~(y=Y(s))&&(I=z[y]=D[y](s));let Z=s[0]&&zt();function F(E){s[17](E)}let X={tags:s[5]};s[2]!==void 0&&(X.dialog=s[2]),k=new cs({props:X}),$e.push(()=>Ne(k,"dialog",F)),k.$on("submit",s[18]);let O=!s[8]&&Gt();return{c(){e=S("meta"),n=T(),M(t.$$.fragment),l=T(),o=S("section"),M(r.$$.fragment),a=T(),M(i.$$.fragment),c=T(),M(u.$$.fragment),f=T(),M(p.$$.fragment),h=T(),M(d.$$.fragment),$=T(),I&&I.c(),A=T(),Z&&Z.c(),P=T(),M(k.$$.fragment),V=T(),O&&O.c(),G=Re(),this.h()},l(E){const R=bn("svelte-7jdp3v",pt.head);e=C(R,"META",{name:!0,content:!0}),R.forEach(m),n=L(E),B(t.$$.fragment,E),l=L(E),o=C(E,"SECTION",{id:!0,class:!0});var W=j(o);B(r.$$.fragment,W),a=L(W),B(i.$$.fragment,W),c=L(W),B(u.$$.fragment,W),f=L(W),B(p.$$.fragment,W),W.forEach(m),h=L(E),B(d.$$.fragment,E),$=L(E),I&&I.l(E),A=L(E),Z&&Z.l(E),P=L(E),B(k.$$.fragment,E),V=L(E),O&&O.l(E),G=Re(),this.h()},h(){pt.title="kurosearch - Rule34 Hentai",_(e,"name","description"),_(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience."),_(o,"id","search"),_(o,"class","svelte-3qywmu")},m(E,R){g(pt.head,e),N(E,n,R),q(t,E,R),N(E,l,R),N(E,o,R),q(r,o,null),g(o,a),q(i,o,null),g(o,c),q(u,o,null),g(o,f),q(p,o,null),N(E,h,R),q(d,E,R),N(E,$,R),~y&&z[y].m(E,R),N(E,A,R),Z&&Z.m(E,R),N(E,P,R),q(k,E,R),N(E,V,R),O&&O.m(E,R),N(E,G,R),b=!0},p(E,[R]){const W={};R&67108865&&(W.$$scope={dirty:R,ctx:E}),u.$set(W);const ne={};R&48&&(ne.tags=[...E[5],...E[4]]),p.$set(ne);const x={};R&1&&(x.loading=E[0]),d.$set(x);let _e=y;y=Y(E),y===_e?~y&&z[y].p(E,R):(I&&(de(),w(z[_e],1,1,()=>{z[_e]=null}),me()),~y?(I=z[y],I?I.p(E,R):(I=z[y]=D[y](E),I.c()),v(I,1),I.m(A.parentNode,A)):I=null),E[0]?Z||(Z=zt(),Z.c(),Z.m(P.parentNode,P)):Z&&(Z.d(1),Z=null);const ge={};R&32&&(ge.tags=E[5]),!H&&R&4&&(H=!0,ge.dialog=E[2],Pe(()=>H=!1)),k.$set(ge),E[8]?O&&(de(),w(O,1,1,()=>{O=null}),me()):O?R&256&&v(O,1):(O=Gt(),O.c(),v(O,1),O.m(G.parentNode,G))},i(E){b||(v(t.$$.fragment,E),v(r.$$.fragment,E),v(i.$$.fragment,E),v(u.$$.fragment,E),v(p.$$.fragment,E),v(d.$$.fragment,E),v(I),v(k.$$.fragment,E),v(O),b=!0)},o(E){w(t.$$.fragment,E),w(r.$$.fragment,E),w(i.$$.fragment,E),w(u.$$.fragment,E),w(p.$$.fragment,E),w(d.$$.fragment,E),w(I),w(k.$$.fragment,E),w(O),b=!1},d(E){E&&(m(n),m(l),m(o),m(h),m($),m(A),m(P),m(V),m(G)),m(e),U(t,E),U(r),U(i),U(u),U(p),U(d,E),~y&&z[y].d(E),Z&&Z.d(E),U(k,E),O&&O.d(E)}}}function Er(s,e,n){let t,l,o,r,a,i,c,u,f;fe(s,Ke,F=>n(3,t=F)),fe(s,ft,F=>n(4,l=F)),fe(s,Ue,F=>n(20,o=F)),fe(s,Je,F=>n(21,r=F)),fe(s,es,F=>n(22,a=F)),fe(s,it,F=>n(5,i=F)),fe(s,vt,F=>n(6,c=F)),fe(s,Kt,F=>n(7,u=F)),fe(s,sn,F=>n(8,f=F)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let p=!1,h,d,$=0;const y=async F=>{const X=await Kn(F);return[...c.items.filter(({name:E})=>E.toLowerCase().includes(F.toLowerCase())).map(E=>({label:E.name,count:E.tags.length,type:"supertag"})),...X]},I=()=>new Qn().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(l),A=async F=>{if(!p){n(1,h=void 0),n(0,p=!0);try{const X=t.pageCount;await F(),Xn(X).catch(()=>{})}catch(X){n(1,h=X),console.warn(X)}finally{n(0,p=!1)}}},P=async()=>{Ke.reset(),$=0,A(async()=>{const[F,X]=await I().getPageAndCount();Ke.addPage(F,X)})},k=async()=>{A(async()=>{const F=await I().getPage();Ke.addPage(F)})},H=F=>{var X,O;if((F.key==="/"||F.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&((X=document.getElementById("searchbar"))==null||X.focus(),F.preventDefault(),F.stopPropagation()),F.ctrlKey&&F.key==="Enter"&&(F.preventDefault(),F.stopPropagation(),P()),F.ctrlKey&&F.key==="m"&&((O=document.getElementById("select-modifier"))==null||O.click()),F.ctrlKey&&F.key==="ArrowDown"){const E=document.getElementsByClassName("post-media");E[$].focus(),$=Math.min($+1,Math.max(0,E.length-1))}F.ctrlKey&&F.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[$].focus(),$=Math.max($-1,0))};tt(async()=>{document.addEventListener("keydown",H),t.postCount===0&&P()}),nt(()=>{document.removeEventListener("keydown",H)});const V=async F=>{const X=F.detail;if(X.type==="supertag"){const O=c.items.find(E=>E.name===X.label);if(!O){console.warn("Supertag not present.");return}ft.addOrReplace(O)}else{const O=await Jn(F.detail.label);it.addOrReplace({name:F.detail.label,modifier:F.detail.modifier,count:F.detail.count,type:(O==null?void 0:O.type)??"tag"})}},G=F=>"description"in F.detail?ft.removeByName(F.detail.name):it.removeByName(F.detail.name),b=F=>{"description"in F.detail||(F.detail.modifier=xn(F.detail.modifier),it.addOrReplace(F.detail))},D=()=>{d.showModal(),Jt("dialog")};function z(F){Ie.call(this,s,F)}function Y(F){d=F,n(2,d)}return[p,h,d,t,l,i,c,u,f,y,P,k,V,G,b,D,z,Y,F=>vt.add(F.detail)]}class xr extends re{constructor(e){super(),oe(this,e,Er,yr,le,{})}}export{xr as component};
