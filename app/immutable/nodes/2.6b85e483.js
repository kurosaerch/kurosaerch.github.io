import{s as ie,f as D,g as T,y as pe,j as d,i as F,v as Y,d as m,p as ge,E as Te,F as Me,a as P,h as j,c as N,u as $,G as He,H as ee,I as Je,J as Ge,l as re,m as oe,r as cn,K as ye,L as ut,o as tt,M as nt,w as un,A as fn,B as pn,C as _n,n as Ce,N as et,O as Fe,P as dn,Q as mn,e as je,D as fe,R as gn,k as Pe,z as Ne,S as hn,T as $n,U as gt,x as vn}from"../chunks/scheduler.dde44db2.js";import{S as ae,i as ce,f as Le,b as A,d as R,m as V,a as b,t as E,e as O,g as _e,c as de,r as bn,h as kn}from"../chunks/index.06d635fc.js";import{g as wn}from"../chunks/globals.7f7f1b26.js";import{b as _t}from"../chunks/paths.d18fab71.js";import{e as Ee}from"../chunks/each.e59479a4.js";import{D as Gt,a as Wt,r as Kt}from"../chunks/result-columns-store.85d217e0.js";import{T as ze}from"../chunks/TextButton.b6facf2a.js";import{D as yn}from"../chunks/DetailedTag.a292c1b1.js";import{K as En,A as Sn}from"../chunks/ActiveTagList.f10241a2.js";import{f as Oe}from"../chunks/format-tag.7e313273.js";import{r as xe,a as ft}from"../chunks/active-supertags-store.d344077e.js";import{I as Jt,R as Cn}from"../chunks/ModifierSelect.179b41c4.js";import{R as In,S as Qt,a as Yt,E as Zt,b as Dn,C as Xt,P as xt,g as en,c as Tn,i as Ln,G as Pn,V as Nn,d as ht,I as Fn}from"../chunks/Gif.5c991e90.js";import{h as $t,u as jn}from"../chunks/await_block.7e2093da.js";import{a as tn,b as An,N as Rn,c as nn}from"../chunks/cookies-accepted-store.34e64c5e.js";import{L as dt}from"../chunks/LoadingAnimation.d49ba910.js";import{h as Vn,i as On,a as Mn}from"../chunks/always-loop-store.a63e82dc.js";import{p as Bn,S as qn,b as Un,a as Hn}from"../chunks/store-keys.54c229ef.js";import{i as zn,g as Gn,a as Wn}from"../chunks/tags.49324235.js";import{s as Ke,f as Ue,S as Kn}from"../chunks/search-builder.597435ed.js";import{S as Jn}from"../chunks/Select.323cfefa.js";import{R as Qn}from"../chunks/RotatingTextSelect.5ab4c4cb.js";import{a as it}from"../chunks/active-tags-store.6065be3c.js";import{S as Yn}from"../chunks/Searchbar.3faf3a61.js";import{S as Zn}from"../chunks/ScrollUpButton.b1410250.js";import{l as Xn}from"../chunks/analytics.b280da65.js";import{n as xn,s as vt}from"../chunks/supertags-store.12d2d578.js";import{b as es}from"../chunks/blocked-content-store.0d78bdaf.js";function ts(s){let e,n=`<a href="https://www.twitch.tv/helheim_lynx" class="svelte-148r0g8"><img id="happy" src="${_t}/assets/lynxy-chibi.webp" alt="Helheim Lynx" class="svelte-148r0g8"/></a>`;return{c(){e=D("div"),e.innerHTML=n,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1bog0zt"&&(e.innerHTML=n),this.h()},h(){d(e,"class","svelte-148r0g8")},m(t,l){F(t,e,l)},p:Y,i:Y,o:Y,d(t){t&&m(e)}}}class ns extends ae{constructor(e){super(),ce(this,e,null,ts,ie,{})}}function bt(s,e,n){const t=s.slice();return t[11]=e[n],t}function kt(s){let e,n;return e=new yn({props:{tag:s[11]}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.tag=t[11]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function ss(s){let e;return{c(){e=re("Create supertag")},l(n){e=oe(n,"Create supertag")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function ls(s){let e,n,t="Create Supertag",l,o,r,a,i,c="Name",u,f,p,v,_,g="Description",S,y,C,I,k,M="Tags",B,q,w,L,H,U,h,z,Z=Ee(s[3]),G=[];for(let K=0;K<Z.length;K+=1)G[K]=kt(bt(s,Z,K));const ne=K=>E(G[K],1,1,()=>{G[K]=null});return H=new ze({props:{title:s[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!s[4],$$slots:{default:[ss]},$$scope:{ctx:s}}}),H.$on("click",s[9]),{c(){e=D("section"),n=D("h3"),n.textContent=t,l=P(),o=D("button"),r=P(),a=D("div"),i=D("label"),i.textContent=c,u=P(),f=D("input"),p=P(),v=D("div"),_=D("label"),_.textContent=g,S=P(),y=D("input"),C=P(),I=D("div"),k=D("span"),k.textContent=M,B=P(),q=D("ol");for(let K=0;K<G.length;K+=1)G[K].c();w=P(),L=D("div"),A(H.$$.fragment),this.h()},l(K){e=T(K,"SECTION",{class:!0});var Q=j(e);n=T(Q,"H3",{"data-svelte-h":!0}),pe(n)!=="svelte-ho1cwx"&&(n.textContent=t),l=N(Q),o=T(Q,"BUTTON",{type:!0,class:!0}),j(o).forEach(m),r=N(Q),a=T(Q,"DIV",{class:!0});var ue=j(a);i=T(ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),pe(i)!=="svelte-10k8a68"&&(i.textContent=c),u=N(ue),f=T(ue,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),ue.forEach(m),p=N(Q),v=T(Q,"DIV",{class:!0});var x=j(v);_=T(x,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),pe(_)!=="svelte-14n9kp6"&&(_.textContent=g),S=N(x),y=T(x,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),x.forEach(m),C=N(Q),I=T(Q,"DIV",{class:!0});var he=j(I);k=T(he,"SPAN",{class:!0,"data-svelte-h":!0}),pe(k)!=="svelte-7hjyox"&&(k.textContent=M),B=N(he),q=T(he,"OL",{class:!0});var Se=j(q);for(let Ie=0;Ie<G.length;Ie+=1)G[Ie].l(Se);Se.forEach(m),he.forEach(m),w=N(Q),L=T(Q,"DIV",{class:!0});var Be=j(L);R(H.$$.fragment,Be),Be.forEach(m),Q.forEach(m),this.h()},h(){d(o,"type","button"),d(o,"class","codicon codicon-close svelte-1x6vc81"),d(i,"for","supertag-name"),d(i,"class","svelte-1x6vc81"),d(f,"type","text"),d(f,"placeholder","Descriptive name"),d(f,"id","supertag-name"),d(f,"class","svelte-1x6vc81"),d(a,"class","svelte-1x6vc81"),d(_,"for","supertag-description"),d(_,"class","svelte-1x6vc81"),d(y,"type","text"),d(y,"placeholder","Short description"),d(y,"id","supertag-description"),d(y,"class","svelte-1x6vc81"),d(v,"class","svelte-1x6vc81"),d(k,"class","svelte-1x6vc81"),d(q,"class","svelte-1x6vc81"),d(I,"class","svelte-1x6vc81"),d(L,"class","last svelte-1x6vc81"),d(e,"class","svelte-1x6vc81")},m(K,Q){F(K,e,Q),$(e,n),$(e,l),$(e,o),$(e,r),$(e,a),$(a,i),$(a,u),$(a,f),He(f,s[0]),$(e,p),$(e,v),$(v,_),$(v,S),$(v,y),He(y,s[2]),$(e,C),$(e,I),$(I,k),$(I,B),$(I,q);for(let ue=0;ue<G.length;ue+=1)G[ue]&&G[ue].m(q,null);$(e,w),$(e,L),V(H,L,null),U=!0,h||(z=[ee(o,"click",s[6]),ee(f,"input",s[7]),ee(y,"input",s[8])],h=!0)},p(K,Q){if(Q&1&&f.value!==K[0]&&He(f,K[0]),Q&4&&y.value!==K[2]&&He(y,K[2]),Q&8){Z=Ee(K[3]);let x;for(x=0;x<Z.length;x+=1){const he=bt(K,Z,x);G[x]?(G[x].p(he,Q),b(G[x],1)):(G[x]=kt(he),G[x].c(),b(G[x],1),G[x].m(q,null))}for(_e(),x=Z.length;x<G.length;x+=1)ne(x);de()}const ue={};Q&16&&(ue.title=K[4]?"Click to create supertag":"Enter a valid name to continue"),Q&16&&(ue.disabled=!K[4]),Q&16384&&(ue.$$scope={dirty:Q,ctx:K}),H.$set(ue)},i(K){if(!U){for(let Q=0;Q<Z.length;Q+=1)b(G[Q]);b(H.$$.fragment,K),U=!0}},o(K){G=G.filter(Boolean);for(let Q=0;Q<G.length;Q+=1)E(G[Q]);E(H.$$.fragment,K),U=!1},d(K){K&&m(e),Je(G,K),O(H),h=!1,Ge(z)}}}function rs(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[ls]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.dialog=s[1]),e=new Gt({props:o}),ge.push(()=>Le(e,"dialog",l)),e.$on("close",s[6]),{c(){A(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,a){V(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],Te(()=>n=!1)),e.$set(i)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function os(s,e,n){let t,{dialog:l}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=Me(),c=()=>l.close();function u(){o=this.value,n(0,o)}function f(){r=this.value,n(2,r)}const p=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:_,name:g})=>({modifier:_,name:g}))}),c()};function v(_){l=_,n(1,l)}return s.$$set=_=>{"dialog"in _&&n(1,l=_.dialog),"name"in _&&n(0,o=_.name),"description"in _&&n(2,r=_.description),"tags"in _&&n(3,a=_.tags)},s.$$.update=()=>{s.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,l,r,a,t,i,c,u,f,p,v]}class is extends ae{constructor(e){super(),ce(this,e,os,rs,ie,{dialog:1,name:0,description:2,tags:3})}}function as(s){let e,n,t,l,o,r,a,i,c,u;return{c(){e=D("div"),n=D("div"),t=D("i"),l=P(),o=D("div"),r=D("h3"),a=re(s[0]),i=P(),c=D("span"),u=re(s[2]),this.h()},l(f){e=T(f,"DIV",{class:!0});var p=j(e);n=T(p,"DIV",{class:!0});var v=j(n);t=T(v,"I",{class:!0}),j(t).forEach(m),v.forEach(m),l=N(p),o=T(p,"DIV",{});var _=j(o);r=T(_,"H3",{class:!0});var g=j(r);a=oe(g,s[0]),g.forEach(m),i=N(_),c=T(_,"SPAN",{});var S=j(c);u=oe(S,s[2]),S.forEach(m),_.forEach(m),p.forEach(m),this.h()},h(){d(t,"class",cn(s[1])+" svelte-1yohziu"),d(n,"class","icon svelte-1yohziu"),d(r,"class","svelte-1yohziu"),d(e,"class","error svelte-1yohziu")},m(f,p){F(f,e,p),$(e,n),$(n,t),$(e,l),$(e,o),$(o,r),$(r,a),$(o,i),$(o,c),$(c,u)},p:Y,i:Y,o:Y,d(f){f&&m(e)}}}function cs(s,e,n){let{error:t}=e,l=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return s.$$set=a=>{"error"in a&&n(3,t=a.error)},[l,o,r,t]}class us extends ae{constructor(e){super(),ce(this,e,cs,as,ie,{error:3})}}function fs(s){let e,n,t,l,o="You have seen everything there is to see...";return{c(){e=D("img"),t=P(),l=D("p"),l.textContent=o,this.h()},l(r){e=T(r,"IMG",{src:!0,alt:!0,class:!0}),t=N(r),l=T(r,"P",{"data-svelte-h":!0}),pe(l)!=="svelte-1i75mtf"&&(l.textContent=o),this.h()},h(){ye(e.src,n=_t+"/assets/shironeko-x.png")||d(e,"src",n),d(e,"alt","No more results to load"),d(e,"class","svelte-1pkma0d")},m(r,a){F(r,e,a),F(r,t,a),F(r,l,a)},p:Y,i:Y,o:Y,d(r){r&&(m(e),m(t),m(l))}}}class ps extends ae{constructor(e){super(),ce(this,e,null,fs,ie,{})}}const at=s=>`post_${s}`;function wt(s){let e;const n=s[4].default,t=un(n,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8)&&fn(t,n,l,l[3],e?_n(n,l[3],o,null):pn(l[3]),null)},i(l){e||(b(t,l),e=!0)},o(l){E(t,l),e=!1},d(l){t&&t.d(l)}}}function _s(s){let e,n,t,l,o=s[1]&&wt(s);return{c(){e=D("div"),o&&o.c(),this.h()},l(r){e=T(r,"DIV",{role:!0,tabindex:!0,class:!0});var a=j(e);o&&o.l(a),a.forEach(m),this.h()},h(){d(e,"role","none"),d(e,"tabindex","-1"),d(e,"class","svelte-6sy8qz")},m(r,a){F(r,e,a),o&&o.m(e,null),s[5](e),n=!0,t||(l=[ee(e,"click",ut(ds)),ee(e,"keydown",s[2])],t=!0)},p(r,[a]){r[1]?o?(o.p(r,a),a&2&&b(o,1)):(o=wt(r),o.c(),b(o,1),o.m(e,null)):o&&(_e(),E(o,1,1,()=>{o=null}),de())},i(r){n||(b(o),n=!0)},o(r){E(o),n=!1},d(r){r&&m(e),o&&o.d(),s[5](null),t=!1,Ge(l)}}}const ds=()=>{};function ms(s,e,n){let{$$slots:t={},$$scope:l}=e;const o=Me(),r=()=>o("close"),a=p=>{p.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let c,u=!1;tt(async()=>{c.focus(),document.addEventListener("fullscreenchange",i);try{await c.requestFullscreen()}catch{}n(1,u=!0)}),nt(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function f(p){ge[p?"unshift":"push"](()=>{c=p,n(0,c)})}return s.$$set=p=>{"$$scope"in p&&n(3,l=p.$$scope)},[c,u,a,l,t,f]}class gs extends ae{constructor(e){super(),ce(this,e,ms,_s,ie,{})}}function hs(s){let e,n;return{c(){e=D("div"),this.h()},l(t){e=T(t,"DIV",{style:!0}),j(e).forEach(m),this.h()},h(){d(e,"style",n=s[0]?`position:absolute;top:${s[0]};`:void 0)},m(t,l){F(t,e,l),s[3](e)},p(t,[l]){l&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&d(e,"style",n)},i:Y,o:Y,d(t){t&&m(e),s[3](null)}}}function $s(s,e,n){let{rootMargin:t}=e,{absoluteTop:l}=e;const o=Me(),r=new IntersectionObserver(c=>{c[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(c){ge[c?"unshift":"push"](()=>{a=c,n(1,a)})}return s.$$set=c=>{"rootMargin"in c&&n(2,t=c.rootMargin),"absoluteTop"in c&&n(0,l=c.absoluteTop)},s.$$.update=()=>{s.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[l,a,t,i]}class sn extends ae{constructor(e){super(),ce(this,e,$s,hs,ie,{rootMargin:2,absoluteTop:0})}}function vs(s){let e,n;return{c(){e=D("a"),n=re("Open"),this.h()},l(t){e=T(t,"A",{href:!0,target:!0,class:!0});var l=j(e);n=oe(l,"Open"),l.forEach(m),this.h()},h(){d(e,"href",s[0]),d(e,"target","_newtab"),d(e,"class","codicon codicon-link-external svelte-10flxu9")},m(t,l){F(t,e,l),$(e,n)},p(t,[l]){l&1&&d(e,"href",t[0])},i:Y,o:Y,d(t){t&&m(e)}}}function bs(s,e,n){let{url:t}=e;return s.$$set=l=>{"url"in l&&n(0,t=l.url)},[t]}class ks extends ae{constructor(e){super(),ce(this,e,bs,vs,ie,{url:0})}}function yt(s,e,n){const t=s.slice();return t[4]=e[n][0],t[5]=e[n][1],t}function Et(s){let e,n="•",t,l,o;return l=new Zt({props:{source:s[0].source}}),{c(){e=D("span"),e.textContent=n,t=P(),A(l.$$.fragment)},l(r){e=T(r,"SPAN",{"data-svelte-h":!0}),pe(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=N(r),R(l.$$.fragment,r)},m(r,a){F(r,e,a),F(r,t,a),V(l,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),l.$set(i)},i(r){o||(b(l.$$.fragment,r),o=!0)},o(r){E(l.$$.fragment,r),o=!1},d(r){r&&(m(e),m(t)),O(l,r)}}}function St(s){let e,n=s[4]+"",t,l,o,r;return o=new xt({props:{tags:s[5]}}),{c(){e=D("h3"),t=re(n),l=P(),A(o.$$.fragment),this.h()},l(a){e=T(a,"H3",{class:!0});var i=j(e);t=oe(i,n),i.forEach(m),l=N(a),R(o.$$.fragment,a),this.h()},h(){d(e,"class","svelte-1tsjp7g")},m(a,i){F(a,e,i),$(e,t),F(a,l,i),V(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[4]+"")&&Ce(t,n);const c={};i&2&&(c.tags=a[5]),o.$set(c)},i(a){r||(b(o.$$.fragment,a),r=!0)},o(a){E(o.$$.fragment,a),r=!1},d(a){a&&(m(e),m(l)),O(o,a)}}}function ws(s){let e,n,t,l,o,r,a,i,c=s[0].id+"",u,f,p,v,_,g,S="•",y,C,I=s[0].type.toUpperCase()+"",k,M,B,q="•",w,L,H,U,h="•",z,Z,G,ne,K,Q,ue,x="•",he,Se,Be,Ie,st="•",lt,Ae,rt,Qe,De,We,J,se="Comments",Re,$e,ve;v=new In({props:{value:s[0].rating}}),L=new Qt({props:{value:s[0].score}}),Z=new Yt({props:{value:s[0].change}}),K=new ks({props:{url:"/post?id="+s[0].id+"&src="+encodeURIComponent(s[3])}}),Se=new Zt({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+s[0].id}}),Ae=new Dn({props:{url:s[3]}});let te=s[0].source&&Et(s),be=Ee(Object.entries(s[1])),le=[];for(let W=0;W<be.length;W+=1)le[W]=St(yt(s,be,W));const ct=W=>E(le[W],1,1,()=>{le[W]=null});return $e=new Xt({props:{post:s[0]}}),{c(){e=D("div"),n=D("img"),l=P(),o=D("h1"),r=re("Post "),a=D("b"),i=re("#"),u=re(c),f=P(),p=D("div"),A(v.$$.fragment),_=P(),g=D("span"),g.textContent=S,y=P(),C=D("span"),k=re(I),M=P(),B=D("span"),B.textContent=q,w=P(),A(L.$$.fragment),H=P(),U=D("span"),U.textContent=h,z=P(),A(Z.$$.fragment),G=P(),ne=D("div"),A(K.$$.fragment),Q=P(),ue=D("span"),ue.textContent=x,he=P(),A(Se.$$.fragment),Be=P(),Ie=D("span"),Ie.textContent=st,lt=P(),A(Ae.$$.fragment),rt=P(),te&&te.c(),Qe=P(),De=D("div");for(let W=0;W<le.length;W+=1)le[W].c();We=P(),J=D("h3"),J.textContent=se,Re=P(),A($e.$$.fragment),this.h()},l(W){e=T(W,"DIV",{class:!0});var X=j(e);n=T(X,"IMG",{class:!0,src:!0,alt:!0}),l=N(X),o=T(X,"H1",{class:!0});var Ve=j(o);r=oe(Ve,"Post "),a=T(Ve,"B",{});var Ye=j(a);i=oe(Ye,"#"),u=oe(Ye,c),Ye.forEach(m),Ve.forEach(m),f=N(X),p=T(X,"DIV",{class:!0});var me=j(p);R(v.$$.fragment,me),_=N(me),g=T(me,"SPAN",{"data-svelte-h":!0}),pe(g)!=="svelte-7hh8jk"&&(g.textContent=S),y=N(me),C=T(me,"SPAN",{});var ot=j(C);k=oe(ot,I),ot.forEach(m),M=N(me),B=T(me,"SPAN",{"data-svelte-h":!0}),pe(B)!=="svelte-7hh8jk"&&(B.textContent=q),w=N(me),R(L.$$.fragment,me),H=N(me),U=T(me,"SPAN",{"data-svelte-h":!0}),pe(U)!=="svelte-7hh8jk"&&(U.textContent=h),z=N(me),R(Z.$$.fragment,me),me.forEach(m),G=N(X),ne=T(X,"DIV",{class:!0});var ke=j(ne);R(K.$$.fragment,ke),Q=N(ke),ue=T(ke,"SPAN",{"data-svelte-h":!0}),pe(ue)!=="svelte-7hh8jk"&&(ue.textContent=x),he=N(ke),R(Se.$$.fragment,ke),Be=N(ke),Ie=T(ke,"SPAN",{"data-svelte-h":!0}),pe(Ie)!=="svelte-7hh8jk"&&(Ie.textContent=st),lt=N(ke),R(Ae.$$.fragment,ke),rt=N(ke),te&&te.l(ke),ke.forEach(m),Qe=N(X),De=T(X,"DIV",{});var qe=j(De);for(let Ze=0;Ze<le.length;Ze+=1)le[Ze].l(qe);We=N(qe),J=T(qe,"H3",{class:!0,"data-svelte-h":!0}),pe(J)!=="svelte-kc6sae"&&(J.textContent=se),Re=N(qe),R($e.$$.fragment,qe),qe.forEach(m),X.forEach(m),this.h()},h(){d(n,"class","preview svelte-1tsjp7g"),ye(n.src,t=s[2])||d(n,"src",t),d(n,"alt","preview"),d(o,"class","svelte-1tsjp7g"),d(p,"class","flex-row svelte-1tsjp7g"),d(ne,"class","flex-row svelte-1tsjp7g"),d(J,"class","svelte-1tsjp7g"),d(e,"class","details svelte-1tsjp7g")},m(W,X){F(W,e,X),$(e,n),$(e,l),$(e,o),$(o,r),$(o,a),$(a,i),$(a,u),$(e,f),$(e,p),V(v,p,null),$(p,_),$(p,g),$(p,y),$(p,C),$(C,k),$(p,M),$(p,B),$(p,w),V(L,p,null),$(p,H),$(p,U),$(p,z),V(Z,p,null),$(e,G),$(e,ne),V(K,ne,null),$(ne,Q),$(ne,ue),$(ne,he),V(Se,ne,null),$(ne,Be),$(ne,Ie),$(ne,lt),V(Ae,ne,null),$(ne,rt),te&&te.m(ne,null),$(e,Qe),$(e,De);for(let Ve=0;Ve<le.length;Ve+=1)le[Ve]&&le[Ve].m(De,null);$(De,We),$(De,J),$(De,Re),V($e,De,null),ve=!0},p(W,[X]){(!ve||X&4&&!ye(n.src,t=W[2]))&&d(n,"src",t),(!ve||X&1)&&c!==(c=W[0].id+"")&&Ce(u,c);const Ve={};X&1&&(Ve.value=W[0].rating),v.$set(Ve),(!ve||X&1)&&I!==(I=W[0].type.toUpperCase()+"")&&Ce(k,I);const Ye={};X&1&&(Ye.value=W[0].score),L.$set(Ye);const me={};X&1&&(me.value=W[0].change),Z.$set(me);const ot={};X&9&&(ot.url="/post?id="+W[0].id+"&src="+encodeURIComponent(W[3])),K.$set(ot);const ke={};X&1&&(ke.source="https://rule34.xxx/index.php?page=post&s=view&id="+W[0].id),Se.$set(ke);const qe={};if(X&8&&(qe.url=W[3]),Ae.$set(qe),W[0].source?te?(te.p(W,X),X&1&&b(te,1)):(te=Et(W),te.c(),b(te,1),te.m(ne,null)):te&&(_e(),E(te,1,1,()=>{te=null}),de()),X&2){be=Ee(Object.entries(W[1]));let we;for(we=0;we<be.length;we+=1){const mt=yt(W,be,we);le[we]?(le[we].p(mt,X),b(le[we],1)):(le[we]=St(mt),le[we].c(),b(le[we],1),le[we].m(De,We))}for(_e(),we=be.length;we<le.length;we+=1)ct(we);de()}const Ze={};X&1&&(Ze.post=W[0]),$e.$set(Ze)},i(W){if(!ve){b(v.$$.fragment,W),b(L.$$.fragment,W),b(Z.$$.fragment,W),b(K.$$.fragment,W),b(Se.$$.fragment,W),b(Ae.$$.fragment,W),b(te);for(let X=0;X<be.length;X+=1)b(le[X]);b($e.$$.fragment,W),ve=!0}},o(W){E(v.$$.fragment,W),E(L.$$.fragment,W),E(Z.$$.fragment,W),E(K.$$.fragment,W),E(Se.$$.fragment,W),E(Ae.$$.fragment,W),E(te),le=le.filter(Boolean);for(let X=0;X<le.length;X+=1)E(le[X]);E($e.$$.fragment,W),ve=!1},d(W){W&&m(e),O(v),O(L),O(Z),O(K),O(Se),O(Ae),te&&te.d(),Je(le,W),O($e)}}}function ys(s,e,n){let t,l,o,{post:r}=e;return s.$$set=a=>{"post"in a&&n(0,r=a.post)},s.$$.update=()=>{s.$$.dirty&1&&n(3,t=r.file_url),s.$$.dirty&1&&n(2,l=r.sample_url),s.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,l,t]}class Es extends ae{constructor(e){super(),ce(this,e,ys,ws,ie,{post:0})}}const Xe=new IntersectionObserver(s=>{for(const e of s)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function Ss(s){let e,n,t,l;return{c(){e=D("div"),n=D("input"),this.h()},l(o){e=T(o,"DIV",{class:!0});var r=j(e);n=T(r,"INPUT",{type:!0,step:!0,max:!0,class:!0}),r.forEach(m),this.h()},h(){d(n,"type","range"),d(n,"step","0.001"),d(n,"max",s[1]),d(n,"class","svelte-dfxj87"),d(e,"class","svelte-dfxj87")},m(o,r){F(o,e,r),$(e,n),He(n,s[0]),t||(l=[ee(n,"change",s[5]),ee(n,"input",s[5]),ee(n,"scroll",ut(et(s[4]))),ee(e,"click",ut(et(s[2]))),ee(e,"scroll",ut(et(s[3])))],t=!0)},p(o,[r]){r&2&&d(n,"max",o[1]),r&1&&He(n,o[0])},i:Y,o:Y,d(o){o&&m(e),t=!1,Ge(l)}}}function Cs(s,e,n){let{value:t}=e,{max:l}=e;function o(c){Fe.call(this,s,c)}function r(c){Fe.call(this,s,c)}function a(c){Fe.call(this,s,c)}function i(){t=dn(this.value),n(0,t)}return s.$$set=c=>{"value"in c&&n(0,t=c.value),"max"in c&&n(1,l=c.max)},[t,l,o,r,a,i]}class ln extends ae{constructor(e){super(),ce(this,e,Cs,Ss,ie,{value:0,max:1})}}function Is(s){let e,n,t,l=!1,o,r=!0,a,i,c,u,f,p;function v(){cancelAnimationFrame(o),e.paused||(o=bn(v),l=!0),s[10].call(e)}function _(S){s[13](S)}let g={max:s[4]};return s[2]!==void 0&&(g.value=s[2]),i=new ln({props:g}),ge.push(()=>Le(i,"value",_)),{c(){e=D("video"),a=P(),A(i.$$.fragment),this.h()},l(S){e=T(S,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),j(e).forEach(m),a=N(S),R(i.$$.fragment,S),this.h()},h(){ye(e.src,n=s[6])||d(e,"src",n),d(e,"poster",s[5]),d(e,"title",t="[VIDEO] post #"+s[0].id),d(e,"preload","metadata"),e.autoplay=!0,d(e,"class","svelte-uwd1jt"),s[4]===void 0&&mn(()=>s[12].call(e))},m(S,y){F(S,e,y),s[9](e),F(S,a,y),V(i,S,y),u=!0,f||(p=[ee(e,"timeupdate",v),ee(e,"play",s[11]),ee(e,"pause",s[11]),ee(e,"durationchange",s[12]),ee(e,"click",Ds),ee(e,"ended",s[8]),ee(e,"contextmenu",et(Ts))],f=!0)},p(S,[y]){(!u||y&64&&!ye(e.src,n=S[6]))&&d(e,"src",n),(!u||y&32)&&d(e,"poster",S[5]),(!u||y&1&&t!==(t="[VIDEO] post #"+S[0].id))&&d(e,"title",t),!l&&y&4&&!isNaN(S[2])&&(e.currentTime=S[2]),l=!1,y&8&&r!==(r=S[3])&&e[r?"pause":"play"]();const C={};y&16&&(C.max=S[4]),!c&&y&4&&(c=!0,C.value=S[2],Te(()=>c=!1)),i.$set(C)},i(S){u||(b(i.$$.fragment,S),u=!0)},o(S){E(i.$$.fragment,S),u=!1},d(S){S&&(m(e),m(a)),s[9](null),O(i,S),f=!1,Ge(p)}}}const Ds=s=>s.target.paused?s.target.play():s.target.pause(),Ts=()=>{};function Ls(s,e,n){let t,l,o,{post:r}=e,a,i=0,c=!1,u;const f=C=>{a&&(C.key==="ArrowLeft"&&(C.preventDefault(),C.stopPropagation(),n(1,a.currentTime=Math.max(0,a.currentTime-5),a)),C.key==="ArrowRight"&&(C.preventDefault(),C.stopPropagation(),n(1,a.currentTime=Math.min(a.duration,a.currentTime+5),a)),C.key==="Space"&&(C.preventDefault(),C.stopPropagation(),n(3,c=!c)))};tt(()=>{a&&(Xe==null||Xe.observe(a)),document.addEventListener("keydown",f)}),nt(()=>{a&&(Xe==null||Xe.unobserve(a)),document.removeEventListener("keydown",f)});function p(C){Fe.call(this,s,C)}function v(C){ge[C?"unshift":"push"](()=>{a=C,n(1,a)})}function _(){i=this.currentTime,n(2,i)}function g(){c=this.paused,n(3,c)}function S(){u=this.duration,n(4,u)}function y(C){i=C,n(2,i)}return s.$$set=C=>{"post"in C&&n(0,r=C.post)},s.$$.update=()=>{s.$$.dirty&1&&n(7,t=en(r.file_url,r.sample_url,r.preview_url)),s.$$.dirty&128&&n(6,l=t.animated),s.$$.dirty&128&&n(5,o=t.static)},[r,a,i,c,u,o,l,t,p,v,_,g,S,y]}class Ps extends ae{constructor(e){super(),ce(this,e,Ls,Is,ie,{post:0})}}function Ns(s){return{c:Y,l:Y,m:Y,p:Y,i:Y,o:Y,d:Y}}function Fs(s){let e,n,t,l,o,r;return{c(){e=D("img"),this.h()},l(a){e=T(a,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){ye(e.src,n=s[2])||d(e,"src",n),d(e,"alt",t="["+s[0].type+"] post #"+s[0].id),d(e,"title",l="["+s[0].type+"] post #"+s[0].id),d(e,"class","svelte-jlq3re")},m(a,i){F(a,e,i),o||(r=[ee(e,"contextmenu",et(Vs)),ee(e,"click",s[6]),gn(s[7].call(null,e))],o=!0)},p(a,i){i&4&&!ye(e.src,n=a[2])&&d(e,"src",n),i&1&&t!==(t="["+a[0].type+"] post #"+a[0].id)&&d(e,"alt",t),i&1&&l!==(l="["+a[0].type+"] post #"+a[0].id)&&d(e,"title",l)},i:Y,o:Y,d(a){a&&m(e),o=!1,Ge(r)}}}function js(s){let e,n,t,l,o,r,a,i,c,u;return a=new dt({}),{c(){e=D("img"),o=P(),r=D("div"),A(a.$$.fragment),this.h()},l(f){e=T(f,"IMG",{src:!0,alt:!0,title:!0,class:!0}),o=N(f),r=T(f,"DIV",{class:!0});var p=j(r);R(a.$$.fragment,p),p.forEach(m),this.h()},h(){ye(e.src,n=s[3])||d(e,"src",n),d(e,"alt",t="["+s[0].type+"] post #"+s[0].id),d(e,"title",l="["+s[0].type+"] post #"+s[0].id),d(e,"class","svelte-jlq3re"),d(r,"class","svelte-jlq3re")},m(f,p){F(f,e,p),F(f,o,p),F(f,r,p),V(a,r,null),i=!0,c||(u=[ee(e,"contextmenu",et(Rs)),ee(e,"click",s[6])],c=!0)},p(f,p){(!i||p&8&&!ye(e.src,n=f[3]))&&d(e,"src",n),(!i||p&1&&t!==(t="["+f[0].type+"] post #"+f[0].id))&&d(e,"alt",t),(!i||p&1&&l!==(l="["+f[0].type+"] post #"+f[0].id))&&d(e,"title",l)},i(f){i||(b(a.$$.fragment,f),i=!0)},o(f){E(a.$$.fragment,f),i=!1},d(f){f&&(m(e),m(o),m(r)),O(a),c=!1,Ge(u)}}}function Ct(s){let e,n,t;function l(r){s[10](r)}let o={max:s[5]};return s[1]!==void 0&&(o.value=s[1]),e=new ln({props:o}),ge.push(()=>Le(e,"value",l)),{c(){A(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,a){V(e,r,a),t=!0},p(r,a){const i={};a&32&&(i.max=r[5]),!n&&a&2&&(n=!0,i.value=r[1],Te(()=>n=!1)),e.$set(i)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function As(s){let e,n,t,l,o={ctx:s,current:null,token:null,hasCatch:!1,pending:js,then:Fs,catch:Ns,value:21,blocks:[,,,]};$t(e=s[8](s[2]),o);let r=s[4]&&Ct(s);return{c(){o.block.c(),n=P(),r&&r.c(),t=je()},l(a){o.block.l(a),n=N(a),r&&r.l(a),t=je()},m(a,i){o.block.m(a,o.anchor=i),o.mount=()=>n.parentNode,o.anchor=n,F(a,n,i),r&&r.m(a,i),F(a,t,i),l=!0},p(a,[i]){s=a,o.ctx=s,i&4&&e!==(e=s[8](s[2]))&&$t(e,o)||jn(o,s,i),s[4]?r?(r.p(s,i),i&16&&b(r,1)):(r=Ct(s),r.c(),b(r,1),r.m(t.parentNode,t)):r&&(_e(),E(r,1,1,()=>{r=null}),de())},i(a){l||(b(o.block),b(r),l=!0)},o(a){for(let i=0;i<3;i+=1){const c=o.blocks[i];E(c)}E(r),l=!1},d(a){a&&(m(n),m(t)),o.block.d(a),o.token=null,o=null,r&&r.d(a)}}}const Rs=()=>{},Vs=()=>{};function Os(s,e,n){let t,l,o,r;fe(s,tn,w=>n(4,o=w)),fe(s,An,w=>n(5,r=w));const a=Me();let{post:i}=e,{postId:c=-1}=e;const u=(w,L,H,U)=>{if(w==="gif"){const h=Tn(L,H,U);return[h.static,h.animated]}return Vn?[H,L]:[U,H]};let f=0,p=Date.now(),v=Date.now(),_,g=!0,S;const y=()=>{v=Date.now(),_=v-p,p=v,g||n(1,f+=_/1e3),f>=r&&(a("ended"),n(1,f=0)),S=requestAnimationFrame(y)},C=()=>{g=!g},I=w=>{(w.code==="Space"||w.key==="k")&&(w.preventDefault(),w.stopPropagation(),g=!g)},k=new IntersectionObserver(w=>{for(const L of w)L.target&&(g=!L.isIntersecting)},{rootMargin:"0px",threshold:.5}),M=w=>(k==null||k.observe(w),{destroy(){k==null||k.unobserve(w)}});tt(()=>{o&&(S=requestAnimationFrame(y),document.addEventListener("keydown",I))}),nt(()=>{cancelAnimationFrame(S),document.removeEventListener("keydown",I)});const B=w=>new Promise(L=>{g=!0;let H=new Image;H.onload=U=>{L(U),g=!1},H.src=w});function q(w){f=w,n(1,f),n(0,i),n(9,c)}return s.$$set=w=>{"post"in w&&n(0,i=w.post),"postId"in w&&n(9,c=w.postId)},s.$$.update=()=>{s.$$.dirty&1&&n(3,[t,l]=u(i.type,i.file_url,i.sample_url,i.preview_url),t,(n(2,l),n(0,i))),s.$$.dirty&513&&i.id!==c&&(n(9,c=i.id),n(1,f=0))},[i,f,l,t,o,r,C,M,B,c,q]}class Ms extends ae{constructor(e){super(),ce(this,e,Os,As,ie,{post:0,postId:9})}}function Bs(s){let e,n;return e=new Ms({props:{post:s[0]}}),e.$on("ended",s[2]),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function qs(s){let e,n;return e=new Ps({props:{post:s[0]}}),e.$on("ended",s[1]),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function Us(s){let e,n,t,l;const o=[qs,Bs],r=[];function a(i,c){return i[0].type==="video"?0:1}return n=a(s),t=r[n]=o[n](s),{c(){e=D("div"),t.c(),this.h()},l(i){e=T(i,"DIV",{class:!0});var c=j(e);t.l(c),c.forEach(m),this.h()},h(){d(e,"class","svelte-acjk3s")},m(i,c){F(i,e,c),r[n].m(e,null),l=!0},p(i,[c]){let u=n;n=a(i),n===u?r[n].p(i,c):(_e(),E(r[u],1,1,()=>{r[u]=null}),de(),t=r[n],t?t.p(i,c):(t=r[n]=o[n](i),t.c()),b(t,1),t.m(e,null))},i(i){l||(b(t),l=!0)},o(i){E(t),l=!1},d(i){i&&m(e),r[n].d()}}}function Hs(s,e,n){let{post:t}=e;function l(r){Fe.call(this,s,r)}function o(r){Fe.call(this,s,r)}return s.$$set=r=>{"post"in r&&n(0,t=r.post)},[t,l,o]}class zs extends ae{constructor(e){super(),ce(this,e,Hs,Us,ie,{post:0})}}function Gs(s){let e,n,t;return{c(){e=D("img"),this.h()},l(l){e=T(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ye(e.src,n=s[2])||d(e,"src",n),d(e,"alt",t="post #"+s[0].id),d(e,"class","svelte-itxz72"),Pe(e,"top",s[1])},m(l,o){F(l,e,o)},p(l,[o]){o&4&&!ye(e.src,n=l[2])&&d(e,"src",n),o&1&&t!==(t="post #"+l[0].id)&&d(e,"alt",t),o&2&&Pe(e,"top",l[1])},i:Y,o:Y,d(l){l&&m(e)}}}function Ws(s,e,n){let t,{post:l}=e,{offset:o}=e;return s.$$set=r=>{"post"in r&&n(0,l=r.post),"offset"in r&&n(1,o=r.offset)},s.$$.update=()=>{s.$$.dirty&1&&n(2,t=Ln(l.sample_url)?l.preview_url:l.sample_url)},[l,o,t]}class rn extends ae{constructor(e){super(),ce(this,e,Ws,Gs,ie,{post:0,offset:1})}}const Ks=()=>{const{subscribe:e,set:n}=Bn(qn.FullscreenHintDone,!1,Hn,Un);return{subscribe:e,set:n,reset:()=>n(!1)}},It=Ks();function Dt(s,e,n){const t=s.slice();return t[22]=e[n],t[24]=n,t}function Tt(s){let e,n;return e=new rn({props:{post:s[7],offset:s[4]}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.post=t[7]),l&16&&(o.offset=t[4]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function Js(s){let e;return{c(){e=D("i"),this.h()},l(n){e=T(n,"I",{class:!0}),j(e).forEach(m),this.h()},h(){d(e,"class","codicon codicon-tag")},m(n,t){F(n,e,t)},p:Y,d(n){n&&m(e)}}}function Lt(s){let e,n;return e=new rn({props:{post:s[6],offset:s[3]}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.post=t[6]),l&8&&(o.offset=t[3]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function Pt(s){let e,n=`${s[24]*100}vh`;return{c(){e=D("div"),this.h()},l(t){e=T(t,"DIV",{class:!0}),j(e).forEach(m),this.h()},h(){d(e,"class","pseudo snap-item svelte-2epggd"),Pe(e,"top",n)},m(t,l){F(t,e,l)},p:Y,d(t){t&&m(e)}}}function Qs(s){let e,n,t,l,o,r,a,i,c,u,f,p,v,_,g,S=s[7]&&Tt(s);l=new zs({props:{post:s[8]}}),l.$on("ended",s[11]),r=new Es({props:{post:s[8]}}),i=new Jt({props:{class:"details-button",$$slots:{default:[Js]},$$scope:{ctx:s}}}),i.$on("click",s[14]);let y=s[6]&&Lt(s),C=Ee({length:s[0].posts.length}),I=[];for(let k=0;k<C.length;k+=1)I[k]=Pt(Dt(s,C,k));return p=new sn({props:{absoluteTop:s[0].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),p.$on("intersection",s[16]),{c(){e=D("div"),S&&S.c(),n=P(),t=D("div"),A(l.$$.fragment),o=P(),A(r.$$.fragment),a=P(),A(i.$$.fragment),c=P(),y&&y.c(),u=P();for(let k=0;k<I.length;k+=1)I[k].c();f=P(),A(p.$$.fragment),this.h()},l(k){e=T(k,"DIV",{class:!0});var M=j(e);S&&S.l(M),n=N(M),t=T(M,"DIV",{class:!0});var B=j(t);R(l.$$.fragment,B),o=N(B),R(r.$$.fragment,B),a=N(B),R(i.$$.fragment,B),B.forEach(m),c=N(M),y&&y.l(M),u=N(M);for(let q=0;q<I.length;q+=1)I[q].l(M);f=N(M),R(p.$$.fragment,M),M.forEach(m),this.h()},h(){d(t,"class","screen snap-container horizontal current svelte-2epggd"),Ne(t,"hint",!s[9]),Pe(t,"top",s[5]),d(e,"class","root screen snap-container svelte-2epggd")},m(k,M){F(k,e,M),S&&S.m(e,null),$(e,n),$(e,t),V(l,t,null),$(t,o),V(r,t,null),$(t,a),V(i,t,null),s[15](t),$(e,c),y&&y.m(e,null),$(e,u);for(let B=0;B<I.length;B+=1)I[B]&&I[B].m(e,null);$(e,f),V(p,e,null),s[17](e),v=!0,_||(g=ee(e,"scroll",s[12]),_=!0)},p(k,[M]){k[7]?S?(S.p(k,M),M&128&&b(S,1)):(S=Tt(k),S.c(),b(S,1),S.m(e,n)):S&&(_e(),E(S,1,1,()=>{S=null}),de());const B={};M&256&&(B.post=k[8]),l.$set(B);const q={};M&256&&(q.post=k[8]),r.$set(q);const w={};if(M&33554432&&(w.$$scope={dirty:M,ctx:k}),i.$set(w),(!v||M&512)&&Ne(t,"hint",!k[9]),M&32&&Pe(t,"top",k[5]),k[6]?y?(y.p(k,M),M&64&&b(y,1)):(y=Lt(k),y.c(),b(y,1),y.m(e,u)):y&&(_e(),E(y,1,1,()=>{y=null}),de()),M&1){C=Ee({length:k[0].posts.length});let H;for(H=0;H<C.length;H+=1){const U=Dt(k,C,H);I[H]?I[H].p(U,M):(I[H]=Pt(U),I[H].c(),I[H].m(e,f))}for(;H<I.length;H+=1)I[H].d(1);I.length=C.length}const L={};M&1&&(L.absoluteTop=k[0].posts.length*100+"vh"),p.$set(L)},i(k){v||(b(S),b(l.$$.fragment,k),b(r.$$.fragment,k),b(i.$$.fragment,k),b(y),b(p.$$.fragment,k),v=!0)},o(k){E(S),E(l.$$.fragment,k),E(r.$$.fragment,k),E(i.$$.fragment,k),E(y),E(p.$$.fragment,k),v=!1},d(k){k&&m(e),S&&S.d(),O(l),O(r),O(i),s[15](null),y&&y.d(),Je(I,k),O(p),s[17](null),_=!1,g()}}}function Ys(s,e,n){let t,l,o,r,a,i,c,u,f;fe(s,It,L=>n(9,c=L)),fe(s,tn,L=>n(18,u=L)),fe(s,xe,L=>n(0,f=L));const p=Me();let{index:v}=e,_,g;const S=()=>{_.scrollTo({left:0,top:_.clientHeight*(v-1),behavior:"smooth"})},y=()=>{_.scrollTo({left:0,top:_.clientHeight*(v+1),behavior:"smooth"})},C=()=>{u&&y()},I=L=>{requestAnimationFrame(()=>{const H=L.target,U=H.getBoundingClientRect().height,h=H.scrollTop/U,z=Math.round(h);z!=v&&(n(13,v=z),g&&n(2,g.scrollLeft=0,g))})},k=L=>{L.key==="d"&&(L.preventDefault(),L.stopPropagation(),g.scrollLeft===0?g.scrollBy({left:_.clientWidth,top:0,behavior:"smooth"}):g.scrollBy({left:-_.clientWidth,top:0,behavior:"smooth"})),L.key==="ArrowUp"&&(L.preventDefault(),L.stopPropagation(),S()),L.key==="ArrowDown"&&(L.preventDefault(),L.stopPropagation(),y())};tt(()=>{g&&(g.scrollIntoView(!0),n(2,g.scrollLeft=0,g)),document.addEventListener("keydown",k)}),nt(()=>{hn(It,c=!0,c),document.removeEventListener("keydown",k)});const M=()=>g.scrollBy({left:_.clientWidth,top:0,behavior:"smooth"});function B(L){ge[L?"unshift":"push"](()=>{g=L,n(2,g)})}const q=()=>p("endreached");function w(L){ge[L?"unshift":"push"](()=>{_=L,n(1,_)})}return s.$$set=L=>{"index"in L&&n(13,v=L.index)},s.$$.update=()=>{s.$$.dirty&8193&&n(8,t=f.posts[v]),s.$$.dirty&8193&&n(7,l=v>0?f.posts[v-1]:void 0),s.$$.dirty&8193&&n(6,o=v<f.posts.length-1?f.posts[v+1]:void 0),s.$$.dirty&8192&&n(5,r=`${v*100}vh`),s.$$.dirty&8192&&n(4,a=`${(v-1)*100}vh`),s.$$.dirty&8192&&n(3,i=`${(v+1)*100}vh`)},[f,_,g,i,a,r,o,l,t,c,p,C,I,v,M,B,q,w]}class Zs extends ae{constructor(e){super(),ce(this,e,Ys,Qs,ie,{index:13})}}function Xs(s){let e;return{c(){e=D("i"),this.h()},l(n){e=T(n,"I",{class:!0}),j(e).forEach(m),this.h()},h(){d(e,"class","codicon codicon-close")},m(n,t){F(n,e,t)},p:Y,d(n){n&&m(e)}}}function xs(s){let e,n,t,l,o;function r(i){s[2](i)}let a={};return s[0]!==void 0&&(a.index=s[0]),e=new Zs({props:a}),ge.push(()=>Le(e,"index",r)),e.$on("endreached",s[3]),l=new Jt({props:{class:"button-close",$$slots:{default:[Xs]},$$scope:{ctx:s}}}),l.$on("click",s[1]),{c(){A(e.$$.fragment),t=P(),A(l.$$.fragment)},l(i){R(e.$$.fragment,i),t=N(i),R(l.$$.fragment,i)},m(i,c){V(e,i,c),F(i,t,c),V(l,i,c),o=!0},p(i,c){const u={};!n&&c&1&&(n=!0,u.index=i[0],Te(()=>n=!1)),e.$set(u);const f={};c&128&&(f.$$scope={dirty:c,ctx:i}),l.$set(f)},i(i){o||(b(e.$$.fragment,i),b(l.$$.fragment,i),o=!0)},o(i){E(e.$$.fragment,i),E(l.$$.fragment,i),o=!1},d(i){i&&m(t),O(e,i),O(l,i)}}}function el(s){let e,n;return e=new gs({props:{$$slots:{default:[xs]},$$scope:{ctx:s}}}),e.$on("close",s[1]),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,[l]){const o={};l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function tl(s,e,n){let{index:t}=e;const l=Me(),o=()=>{l("close",t)},r=u=>{u.key==="f"&&(u.preventDefault(),u.stopPropagation(),o())},a=()=>{var u,f;(((u=history.state)==null?void 0:u.fullscreen)===void 0||((f=history.state)==null?void 0:f.fullscreen)===!1)&&o()};tt(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),nt(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(u){t=u,n(0,t)}function c(u){Fe.call(this,s,u)}return s.$$set=u=>{"index"in u&&n(0,t=u.index)},[t,o,i,c]}class nl extends ae{constructor(e){super(),ce(this,e,tl,el,ie,{index:0})}}function Nt(s){let e,n=s[0].type==="video"?"▶":"GIF",t;return{c(){e=D("span"),t=re(n),this.h()},l(l){e=T(l,"SPAN",{class:!0});var o=j(e);t=oe(o,n),o.forEach(m),this.h()},h(){d(e,"class","type svelte-rfj0jo")},m(l,o){F(l,e,o),$(e,t)},p(l,o){o&1&&n!==(n=l[0].type==="video"?"▶":"GIF")&&Ce(t,n)},d(l){l&&m(e)}}}function sl(s){let e,n,t,l,o,r,a=Oe(s[0].score)+"",i,c,u,f,p=s[0].type!=="image"&&Nt(s);return{c(){e=D("div"),n=D("img"),l=P(),p&&p.c(),o=P(),r=D("span"),i=re(a),this.h()},l(v){e=T(v,"DIV",{id:!0,class:!0,style:!0});var _=j(e);n=T(_,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),l=N(_),p&&p.l(_),o=N(_),r=T(_,"SPAN",{class:!0});var g=j(r);i=oe(g,a),g.forEach(m),_.forEach(m),this.h()},h(){ye(n.src,t=s[1])||d(n,"src",t),d(n,"alt","post"),d(n,"class","post-media svelte-rfj0jo"),d(n,"tabindex","-1"),d(n,"loading","lazy"),d(r,"class","score svelte-rfj0jo"),d(e,"id",c=at(s[0].id)),d(e,"class","post svelte-rfj0jo"),Pe(e,"grid-row","span "+s[2]),Ne(e,"open",open)},m(v,_){F(v,e,_),$(e,n),$(e,l),p&&p.m(e,null),$(e,o),$(e,r),$(r,i),u||(f=[ee(e,"click",s[3]),ee(e,"keydown",s[4])],u=!0)},p(v,[_]){_&2&&!ye(n.src,t=v[1])&&d(n,"src",t),v[0].type!=="image"?p?p.p(v,_):(p=Nt(v),p.c(),p.m(e,o)):p&&(p.d(1),p=null),_&1&&a!==(a=Oe(v[0].score)+"")&&Ce(i,a),_&1&&c!==(c=at(v[0].id))&&d(e,"id",c),_&0&&Ne(e,"open",open)},i:Y,o:Y,d(v){v&&m(e),p&&p.d(),u=!1,Ge(f)}}}let Ft=5;function ll(s,e,n){let t,{post:l}=e,o=1/3,r=l.width/l.height,a=Math.max(Math.min(Math.round(Ft/r),Ft/o),2);const i=f=>f.endsWith(".jpg")||f.endsWith(".jpeg")||f.endsWith(".png")||f.endsWith(".webp");function c(f){Fe.call(this,s,f)}const u=f=>{var p;(On(f)||f.key==="f")&&((p=f.target)==null||p.click())};return s.$$set=f=>{"post"in f&&n(0,l=f.post)},s.$$.update=()=>{s.$$.dirty&1&&n(1,t=i(l.sample_url)?l.sample_url:l.preview_url)},[l,t,a,c,u]}class rl extends ae{constructor(e){super(),ce(this,e,ll,sl,ie,{post:0})}}function jt(s,e,n){const t=s.slice();t[2]=e[n];const l=t[2].host.replace("www.","");t[3]=l;const o=t[1][t[3]]??t[1].default;t[4]=o[0],t[5]=o[1];const r=t[3].includes("api-cdn")?"File":t[3];return t[6]=r,t}function At(s){let e,n,t=s[6]+"",l,o,r,a;return{c(){e=D("li"),n=D("a"),l=re(t),a=P(),this.h()},l(i){e=T(i,"LI",{});var c=j(e);n=T(c,"A",{href:!0,class:!0,style:!0});var u=j(n);l=oe(u,t),u.forEach(m),a=N(c),c.forEach(m),this.h()},h(){d(n,"href",o=s[2].toString()),d(n,"class",r="codicon codicon-link-external "+s[5]+" svelte-f59j30"),Pe(n,"background-color",s[4]),Pe(n,"color",s[5])},m(i,c){F(i,e,c),$(e,n),$(n,l),$(e,a)},p(i,c){c&1&&t!==(t=i[6]+"")&&Ce(l,t),c&1&&o!==(o=i[2].toString())&&d(n,"href",o),c&1&&r!==(r="codicon codicon-link-external "+i[5]+" svelte-f59j30")&&d(n,"class",r),c&1&&Pe(n,"background-color",i[4]),c&1&&Pe(n,"color",i[5])},d(i){i&&m(e)}}}function ol(s){let e,n=Ee(s[0]),t=[];for(let l=0;l<n.length;l+=1)t[l]=At(jt(s,n,l));return{c(){e=D("ol");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=T(l,"OL",{class:!0});var o=j(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){d(e,"class","svelte-f59j30")},m(l,o){F(l,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(l,[o]){if(o&3){n=Ee(l[0]);let r;for(r=0;r<n.length;r+=1){const a=jt(l,n,r);t[r]?t[r].p(a,o):(t[r]=At(a),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:Y,o:Y,d(l){l&&m(e),Je(t,l)}}}function il(s,e,n){let{links:t}=e;const l={"kurosearch.com":["crimson","white"],"rule34.xxx":["#aae5a4","black"],"newgrounds.com":["#fda238","black"],"twitter.com":["rgb(29, 155, 240)","white"],"x.com":["rgb(29, 155, 240)","white"],"pornhub.com":["#f90","black"],"zone-archive.com":["#59396A","white"],"subscribestar.adult":["#ff4081","white"],"redgifs.com":["#E5194D","white"],"deviantart.com":["#00c787","black"],default:["var(--background-2)","white"]};return s.$$set=o=>{"links"in o&&n(0,t=o.links)},[t,l]}class al extends ae{constructor(e){super(),ce(this,e,il,ol,ie,{links:0})}}function Rt(s){let e,n=Oe(s[0].comment_count)+"",t,l,o;return{c(){e=D("button"),t=re(n),this.h()},l(r){e=T(r,"BUTTON",{type:!0,class:!0});var a=j(e);t=oe(a,n),a.forEach(m),this.h()},h(){d(e,"type","button"),d(e,"class","codicon codicon-comment svelte-nhpj3u"),Ne(e,"active",s[1]==="comments")},m(r,a){F(r,e,a),$(e,t),l||(o=ee(e,"click",s[5]),l=!0)},p(r,a){a&1&&n!==(n=Oe(r[0].comment_count)+"")&&Ce(t,n),a&2&&Ne(e,"active",r[1]==="comments")},d(r){r&&m(e),l=!1,o()}}}function cl(s){let e,n,t,l,o="•",r,a,i,c,u,f,p=Oe(s[2])+"",v,_,g,S,y=Oe(s[0].tags.length)+"",C,I,k,M;n=new Yt({props:{value:s[0].change}}),a=new Qt({props:{value:s[0].score}});let B=s[0].comment_count&&Rt(s);return{c(){e=D("div"),A(n.$$.fragment),t=P(),l=D("span"),l.textContent=o,r=P(),A(a.$$.fragment),i=P(),c=D("span"),u=P(),f=D("button"),v=re(p),_=P(),B&&B.c(),g=P(),S=D("button"),C=re(y),this.h()},l(q){e=T(q,"DIV",{class:!0});var w=j(e);R(n.$$.fragment,w),t=N(w),l=T(w,"SPAN",{"data-svelte-h":!0}),pe(l)!=="svelte-7hh8jk"&&(l.textContent=o),r=N(w),R(a.$$.fragment,w),i=N(w),c=T(w,"SPAN",{class:!0}),j(c).forEach(m),u=N(w),f=T(w,"BUTTON",{type:!0,class:!0});var L=j(f);v=oe(L,p),L.forEach(m),_=N(w),B&&B.l(w),g=N(w),S=T(w,"BUTTON",{type:!0,class:!0});var H=j(S);C=oe(H,y),H.forEach(m),w.forEach(m),this.h()},h(){d(c,"class","divider svelte-nhpj3u"),d(f,"type","button"),d(f,"class","codicon codicon-link svelte-nhpj3u"),Ne(f,"active",s[1]==="links"),d(S,"type","button"),d(S,"class","codicon codicon-tag svelte-nhpj3u"),Ne(S,"active",s[1]==="tags"),d(e,"class","summary svelte-nhpj3u")},m(q,w){F(q,e,w),V(n,e,null),$(e,t),$(e,l),$(e,r),V(a,e,null),$(e,i),$(e,c),$(e,u),$(e,f),$(f,v),$(e,_),B&&B.m(e,null),$(e,g),$(e,S),$(S,C),I=!0,k||(M=[ee(f,"click",s[4]),ee(S,"click",s[6])],k=!0)},p(q,[w]){const L={};w&1&&(L.value=q[0].change),n.$set(L);const H={};w&1&&(H.value=q[0].score),a.$set(H),(!I||w&4)&&p!==(p=Oe(q[2])+"")&&Ce(v,p),(!I||w&2)&&Ne(f,"active",q[1]==="links"),q[0].comment_count?B?B.p(q,w):(B=Rt(q),B.c(),B.m(e,g)):B&&(B.d(1),B=null),(!I||w&1)&&y!==(y=Oe(q[0].tags.length)+"")&&Ce(C,y),(!I||w&2)&&Ne(S,"active",q[1]==="tags")},i(q){I||(b(n.$$.fragment,q),b(a.$$.fragment,q),I=!0)},o(q){E(n.$$.fragment,q),E(a.$$.fragment,q),I=!1},d(q){q&&m(e),O(n),O(a),B&&B.d(),k=!1,Ge(M)}}}function ul(s,e,n){const t=Me();let{post:l}=e,{active:o}=e,{links:r}=e;const a=()=>t("links"),i=()=>t("comments"),c=()=>t("tags");return s.$$set=u=>{"post"in u&&n(0,l=u.post),"active"in u&&n(1,o=u.active),"links"in u&&n(2,r=u.links)},[l,o,r,t,a,i,c]}class fl extends ae{constructor(e){super(),ce(this,e,ul,cl,ie,{post:0,active:1,links:2})}}function pl(s){let e,n='<i class="codicon codicon-screen-full"></i>',t,l;return{c(){e=D("button"),e.innerHTML=n,this.h()},l(o){e=T(o,"BUTTON",{type:!0,title:!0,class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-hnv5zq"&&(e.innerHTML=n),this.h()},h(){d(e,"type","button"),d(e,"title","Enter Fullscreen mode"),d(e,"class","svelte-txn4jo")},m(o,r){F(o,e,r),t||(l=ee(e,"click",s[0]),t=!0)},p:Y,i:Y,o:Y,d(o){o&&m(e),t=!1,l()}}}function _l(s){function e(n){Fe.call(this,s,n)}return[e]}class dl extends ae{constructor(e){super(),ce(this,e,_l,pl,ie,{})}}function ml(s){const e=s.slice(),n=en(e[1].file_url,e[1].sample_url,e[1].preview_url);return e[11]=n,e}function gl(s){let e,n;return e=new Pn({props:{post:s[1]}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function hl(s){let e,n;return e=new Nn({props:{src:s[11].animated,poster:s[11].static,width:s[1].width,height:s[1].height,loop:s[2]||ht(s[1].tags)}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.src=t[11].animated),l&2&&(o.poster=t[11].static),l&2&&(o.width=t[1].width),l&2&&(o.height=t[1].height),l&6&&(o.loop=t[2]||ht(t[1].tags)),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function $l(s){let e,n;return e=new Fn({props:{post:s[1]}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function vl(s){let e,n;return e=new al({props:{links:s[5]}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p:Y,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function bl(s){let e,n;return e=new Xt({props:{post:s[1]}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function kl(s){let e,n;return e=new xt({props:{tags:s[1].tags}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.tags=t[1].tags),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function wl(s){let e,n,t,l,o,r,a,i,c,u,f,p,v,_,g,S;const y=[$l,hl,gl],C=[];function I(w,L){return w[1].type==="image"?0:w[1].type==="video"?1:2}function k(w,L){return L===1?ml(w):w}t=I(s),l=C[t]=y[t](k(s,t)),r=new dl({}),r.$on("click",s[6]),c=new fl({props:{active:s[0],post:s[1],links:s[5].length}}),c.$on("tags",s[7]),c.$on("comments",s[8]),c.$on("links",s[9]);const M=[kl,bl,vl],B=[];function q(w,L){return w[0]==="tags"?0:w[0]==="comments"?1:w[0]==="links"?2:-1}return~(f=q(s))&&(p=B[f]=M[f](s)),{c(){e=D("div"),n=D("div"),l.c(),o=P(),A(r.$$.fragment),a=P(),i=D("div"),A(c.$$.fragment),u=P(),p&&p.c(),this.h()},l(w){e=T(w,"DIV",{id:!0,class:!0});var L=j(e);n=T(L,"DIV",{});var H=j(n);l.l(H),H.forEach(m),o=N(L),R(r.$$.fragment,L),a=N(L),i=T(L,"DIV",{class:!0});var U=j(i);R(c.$$.fragment,U),u=N(U),p&&p.l(U),U.forEach(m),L.forEach(m),this.h()},h(){d(i,"class","details svelte-iu0mgu"),d(e,"id",v=at(s[1].id)),d(e,"class","post svelte-iu0mgu"),Ne(e,"openTab",s[0])},m(w,L){F(w,e,L),$(e,n),C[t].m(n,null),$(e,o),V(r,e,null),$(e,a),$(e,i),V(c,i,null),$(i,u),~f&&B[f].m(i,null),_=!0,g||(S=ee(e,"keydown",s[10]),g=!0)},p(w,[L]){let H=t;t=I(w),t===H?C[t].p(k(w,t),L):(_e(),E(C[H],1,1,()=>{C[H]=null}),de(),l=C[t],l?l.p(k(w,t),L):(l=C[t]=y[t](k(w,t)),l.c()),b(l,1),l.m(n,null));const U={};L&1&&(U.active=w[0]),L&2&&(U.post=w[1]),c.$set(U);let h=f;f=q(w),f===h?~f&&B[f].p(w,L):(p&&(_e(),E(B[h],1,1,()=>{B[h]=null}),de()),~f?(p=B[f],p?p.p(w,L):(p=B[f]=M[f](w),p.c()),b(p,1),p.m(i,null)):p=null),(!_||L&2&&v!==(v=at(w[1].id)))&&d(e,"id",v),(!_||L&1)&&Ne(e,"openTab",w[0])},i(w){_||(b(l),b(r.$$.fragment,w),b(c.$$.fragment,w),b(p),_=!0)},o(w){E(l),E(r.$$.fragment,w),E(c.$$.fragment,w),E(p),_=!1},d(w){w&&m(e),C[t].d(),O(r),O(c),~f&&B[f].d(),g=!1,S()}}}function yl(s,e,n){let t;fe(s,Mn,_=>n(2,t=_));const l=Me();let{post:o}=e,{openTab:r=void 0}=e;const a=_=>{n(0,r=r===_?void 0:_)},i=[new URL(`https://kurosearch.com/post?id=${o.id}&src=${encodeURIComponent(o.file_url)}`),new URL(`https://rule34.xxx/index.php?page=post&s=view&id=${o.id}`),new URL(o.file_url),...o.source.split(" ").filter(_=>zn(_)).map(_=>new URL(_))],c=()=>l("fullscreen"),u=()=>a("tags"),f=()=>a("comments"),p=()=>a("links"),v=_=>{_.key==="f"&&l("fullscreen")};return s.$$set=_=>{"post"in _&&n(1,o=_.post),"openTab"in _&&n(0,r=_.openTab)},[r,o,t,l,a,i,c,u,f,p,v]}class El extends ae{constructor(e){super(),ce(this,e,yl,wl,ie,{post:1,openTab:0})}}function Vt(s,e,n){const t=s.slice();return t[5]=e[n][0],t[6]=e[n][1],t}function Ot(s){let e,n,t,l=!1,o,r,a,i=s[6]+"",c,u,f,p,v;return f=$n(s[4][0]),{c(){e=D("input"),r=P(),a=D("label"),c=re(i),this.h()},l(_){e=T(_,"INPUT",{type:!0,name:!0,id:!0,class:!0}),r=N(_),a=T(_,"LABEL",{for:!0,class:!0});var g=j(a);c=oe(g,i),g.forEach(m),this.h()},h(){d(e,"type","radio"),d(e,"name",n="group-"+s[1]),e.__value=t=s[5],He(e,e.__value),d(e,"id",o=s[1]+"-"+s[5]),d(e,"class","svelte-16oxivo"),d(a,"for",u=s[1]+"-"+s[5]),d(a,"class","svelte-16oxivo"),f.p(e)},m(_,g){F(_,e,g),e.checked=e.__value===s[0],F(_,r,g),F(_,a,g),$(a,c),p||(v=ee(e,"change",s[3]),p=!0)},p(_,g){g&2&&n!==(n="group-"+_[1])&&d(e,"name",n),g&4&&t!==(t=_[5])&&(e.__value=t,He(e,e.__value),l=!0),g&6&&o!==(o=_[1]+"-"+_[5])&&d(e,"id",o),(l||g&5)&&(e.checked=e.__value===_[0]),g&4&&i!==(i=_[6]+"")&&Ce(c,i),g&6&&u!==(u=_[1]+"-"+_[5])&&d(a,"for",u)},d(_){_&&(m(e),m(r),m(a)),f.r(),p=!1,v()}}}function Sl(s){let e,n,t=Ee(Object.entries(s[2])),l=[];for(let o=0;o<t.length;o+=1)l[o]=Ot(Vt(s,t,o));return{c(){e=D("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=T(o,"DIV",{id:!0,role:!0,class:!0});var r=j(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){d(e,"id",n="group-"+s[1]),d(e,"role","radiogroup"),d(e,"class","svelte-16oxivo")},m(o,r){F(o,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(o,[r]){if(r&7){t=Ee(Object.entries(o[2]));let a;for(a=0;a<t.length;a+=1){const i=Vt(o,t,a);l[a]?l[a].p(i,r):(l[a]=Ot(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}r&2&&n!==(n="group-"+o[1])&&d(e,"id",n)},i:Y,o:Y,d(o){o&&m(e),Je(l,o)}}}function Cl(s,e,n){let{name:t}=e,{value:l}=e,{options:o}=e;const r=[[]];function a(){l=this.__value,n(0,l)}return s.$$set=i=>{"name"in i&&n(1,t=i.name),"value"in i&&n(0,l=i.value),"options"in i&&n(2,o=i.options)},[l,t,o,a,r]}class Il extends ae{constructor(e){super(),ce(this,e,Cl,Sl,ie,{name:1,value:0,options:2})}}const Dl=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),on=Object.freeze({">=":"≥","<=":"≤"}),an=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),Tl=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),Ll=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),Pl=(s,e)=>s===0&&e===">="?void 0:`Score ${on[e]} ${Oe(s)}`,Nl=s=>s==="all"?void 0:an[s],Fl=(s,e,n)=>{let t=Nl(s),l=Pl(e,n);return[t,l].filter(o=>o!==void 0).join(",")||"All"},jl=(s,e)=>Dl[s][e];function Al(s){let e;return{c(){e=re("Done")},l(n){e=oe(n,"Done")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Rl(s){let e;return{c(){e=re("Reset")},l(n){e=oe(n,"Reset")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Vl(s){let e,n,t="Sorting and Filtering",l,o,r,a="Sorting",i,c,u,f,p,v,_,g,S,y,C="Filtering by Score",I,k,M,B,q,w,L,H,U,h,z="Rating",Z,G,ne,K,Q,ue,x,he;function Se(J){s[4](J)}let Be={options:Ll};s[1].direction!==void 0&&(Be.value=s[1].direction),u=new Cn({props:Be}),ge.push(()=>Le(u,"value",Se));function Ie(J){s[5](J)}let st={options:Tl};s[1].property!==void 0&&(st.value=s[1].property),v=new Jn({props:st}),ge.push(()=>Le(v,"value",Ie));function lt(J){s[6](J)}let Ae={options:on};s[2].scoreComparator!==void 0&&(Ae.value=s[2].scoreComparator),M=new Qn({props:Ae}),ge.push(()=>Le(M,"value",lt));function rt(J){s[7](J)}let Qe={min:0,max:1e4,step:1};s[2].scoreValue!==void 0&&(Qe.value=s[2].scoreValue),w=new Rn({props:Qe}),ge.push(()=>Le(w,"value",rt));function De(J){s[8](J)}let We={name:"rating",options:an};return s[2].rating!==void 0&&(We.value=s[2].rating),G=new Il({props:We}),ge.push(()=>Le(G,"value",De)),Q=new ze({props:{title:"Return to searching",$$slots:{default:[Al]},$$scope:{ctx:s}}}),Q.$on("click",s[9]),x=new ze({props:{title:"Reset sort and filter",type:"secondary",$$slots:{default:[Rl]},$$scope:{ctx:s}}}),x.$on("click",s[3]),{c(){e=D("div"),n=D("h3"),n.textContent=t,l=P(),o=D("div"),r=D("b"),r.textContent=a,i=P(),c=D("div"),A(u.$$.fragment),p=P(),A(v.$$.fragment),g=P(),S=D("div"),y=D("b"),y.textContent=C,I=P(),k=D("div"),A(M.$$.fragment),q=P(),A(w.$$.fragment),H=P(),U=D("div"),h=D("b"),h.textContent=z,Z=P(),A(G.$$.fragment),K=P(),A(Q.$$.fragment),ue=P(),A(x.$$.fragment),this.h()},l(J){e=T(J,"DIV",{class:!0});var se=j(e);n=T(se,"H3",{"data-svelte-h":!0}),pe(n)!=="svelte-15zouq3"&&(n.textContent=t),l=N(se),o=T(se,"DIV",{});var Re=j(o);r=T(Re,"B",{class:!0,"data-svelte-h":!0}),pe(r)!=="svelte-ekzpgg"&&(r.textContent=a),i=N(Re),c=T(Re,"DIV",{class:!0});var $e=j(c);R(u.$$.fragment,$e),p=N($e),R(v.$$.fragment,$e),$e.forEach(m),Re.forEach(m),g=N(se),S=T(se,"DIV",{});var ve=j(S);y=T(ve,"B",{class:!0,"data-svelte-h":!0}),pe(y)!=="svelte-1flca3"&&(y.textContent=C),I=N(ve),k=T(ve,"DIV",{class:!0});var te=j(k);R(M.$$.fragment,te),q=N(te),R(w.$$.fragment,te),te.forEach(m),ve.forEach(m),H=N(se),U=T(se,"DIV",{});var be=j(U);h=T(be,"B",{class:!0,"data-svelte-h":!0}),pe(h)!=="svelte-1lwyn2b"&&(h.textContent=z),Z=N(be),R(G.$$.fragment,be),be.forEach(m),K=N(se),R(Q.$$.fragment,se),ue=N(se),R(x.$$.fragment,se),se.forEach(m),this.h()},h(){d(r,"class","svelte-fm5hcv"),d(c,"class","row svelte-fm5hcv"),d(y,"class","svelte-fm5hcv"),d(k,"class","row svelte-fm5hcv"),d(h,"class","svelte-fm5hcv"),d(e,"class","container svelte-fm5hcv")},m(J,se){F(J,e,se),$(e,n),$(e,l),$(e,o),$(o,r),$(o,i),$(o,c),V(u,c,null),$(c,p),V(v,c,null),$(e,g),$(e,S),$(S,y),$(S,I),$(S,k),V(M,k,null),$(k,q),V(w,k,null),$(e,H),$(e,U),$(U,h),$(U,Z),V(G,U,null),$(e,K),V(Q,e,null),$(e,ue),V(x,e,null),he=!0},p(J,se){const Re={};!f&&se&2&&(f=!0,Re.value=J[1].direction,Te(()=>f=!1)),u.$set(Re);const $e={};!_&&se&2&&(_=!0,$e.value=J[1].property,Te(()=>_=!1)),v.$set($e);const ve={};!B&&se&4&&(B=!0,ve.value=J[2].scoreComparator,Te(()=>B=!1)),M.$set(ve);const te={};!L&&se&4&&(L=!0,te.value=J[2].scoreValue,Te(()=>L=!1)),w.$set(te);const be={};!ne&&se&4&&(ne=!0,be.value=J[2].rating,Te(()=>ne=!1)),G.$set(be);const le={};se&4096&&(le.$$scope={dirty:se,ctx:J}),Q.$set(le);const ct={};se&4096&&(ct.$$scope={dirty:se,ctx:J}),x.$set(ct)},i(J){he||(b(u.$$.fragment,J),b(v.$$.fragment,J),b(M.$$.fragment,J),b(w.$$.fragment,J),b(G.$$.fragment,J),b(Q.$$.fragment,J),b(x.$$.fragment,J),he=!0)},o(J){E(u.$$.fragment,J),E(v.$$.fragment,J),E(M.$$.fragment,J),E(w.$$.fragment,J),E(G.$$.fragment,J),E(Q.$$.fragment,J),E(x.$$.fragment,J),he=!1},d(J){J&&m(e),O(u),O(v),O(M),O(w),O(G),O(Q),O(x)}}}function Ol(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[Vl]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.dialog=s[0]),e=new Gt({props:o}),ge.push(()=>Le(e,"dialog",l)),e.$on("close",s[11]),{c(){A(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,a){V(e,r,a),t=!0},p(r,[a]){const i={};a&4103&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],Te(()=>n=!1)),e.$set(i)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function Ml(s,e,n){let t,l;fe(s,Ke,g=>n(1,t=g)),fe(s,Ue,g=>n(2,l=g));let{dialog:o}=e;const r=()=>{Ke.reset(),Ue.reset()};function a(g){s.$$.not_equal(t.direction,g)&&(t.direction=g,Ke.set(t))}function i(g){s.$$.not_equal(t.property,g)&&(t.property=g,Ke.set(t))}function c(g){s.$$.not_equal(l.scoreComparator,g)&&(l.scoreComparator=g,Ue.set(l))}function u(g){s.$$.not_equal(l.scoreValue,g)&&(l.scoreValue=g,Ue.set(l))}function f(g){s.$$.not_equal(l.rating,g)&&(l.rating=g,Ue.set(l))}const p=()=>o.close();function v(g){o=g,n(0,o)}function _(g){Fe.call(this,s,g)}return s.$$set=g=>{"dialog"in g&&n(0,o=g.dialog)},[o,t,l,r,a,i,c,u,f,p,v,_]}class Bl extends ae{constructor(e){super(),ce(this,e,Ml,Ol,ie,{dialog:0})}}function ql(s){let e,n,t,l,o,r,a,i,c,u,f,p,v,_,g,S;function y(I){s[9](I)}let C={};return s[2]!==void 0&&(C.dialog=s[2]),p=new Bl({props:C}),ge.push(()=>Le(p,"dialog",y)),p.$on("close",s[10]),{c(){e=D("button"),n=D("i"),t=P(),l=D("span"),o=re(s[5]),r=P(),a=D("i"),i=P(),c=D("span"),u=re(s[4]),f=P(),A(p.$$.fragment),this.h()},l(I){e=T(I,"BUTTON",{type:!0,class:!0});var k=j(e);n=T(k,"I",{class:!0}),j(n).forEach(m),t=N(k),l=T(k,"SPAN",{class:!0});var M=j(l);o=oe(M,s[5]),M.forEach(m),r=N(k),a=T(k,"I",{class:!0}),j(a).forEach(m),i=N(k),c=T(k,"SPAN",{class:!0});var B=j(c);u=oe(B,s[4]),B.forEach(m),k.forEach(m),f=N(I),R(p.$$.fragment,I),this.h()},h(){d(n,"class","codicon codicon-filter svelte-3ooqm6"),d(l,"class","svelte-3ooqm6"),d(a,"class","codicon codicon-arrow-swap svelte-3ooqm6"),d(c,"class","svelte-3ooqm6"),d(e,"type","button"),d(e,"class","svelte-3ooqm6")},m(I,k){F(I,e,k),$(e,n),$(e,t),$(e,l),$(l,o),$(e,r),$(e,a),$(e,i),$(e,c),$(c,u),F(I,f,k),V(p,I,k),_=!0,g||(S=ee(e,"click",s[8]),g=!0)},p(I,[k]){(!_||k&32)&&Ce(o,I[5]),(!_||k&16)&&Ce(u,I[4]);const M={};!v&&k&4&&(v=!0,M.dialog=I[2],Te(()=>v=!1)),p.$set(M)},i(I){_||(b(p.$$.fragment,I),_=!0)},o(I){E(p.$$.fragment,I),_=!1},d(I){I&&(m(e),m(f)),O(p,I),g=!1,S()}}}function Ul(s,e,n){let t,l,o,r;fe(s,Ke,_=>n(0,o=_)),fe(s,Ue,_=>n(1,r=_));const a=Me(),i=(_,g)=>JSON.stringify(Object.assign({},_,g));let c,u="";const f=()=>{n(3,u=i(o,r)),c.showModal(),Wt("dialog")};function p(_){c=_,n(2,c)}const v=()=>{i(o,r)!==u&&a("sortfilterupdate")};return s.$$.update=()=>{s.$$.dirty&2&&n(5,t=Fl(r.rating,r.scoreValue,r.scoreComparator)),s.$$.dirty&1&&n(4,l=jl(o.property,o.direction))},[o,r,c,u,l,t,a,i,f,p,v]}class Hl extends ae{constructor(e){super(),ce(this,e,Ul,ql,ie,{})}}function Mt(s,e,n){const t=s.slice();return t[8]=e[n],t[10]=n,t}function Bt(s,e,n){const t=s.slice();return t[8]=e[n],t[10]=n,t}function zl(s){let e,n,t=Ee(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=qt(Mt(s,t,r));const o=r=>E(l[r],1,1,()=>{l[r]=null});return{c(){e=D("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=T(r,"OL",{class:!0,style:!0});var a=j(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(m),this.h()},h(){d(e,"class","multi-column svelte-1mohvmt"),Pe(e,"--nr-columns",s[2])},m(r,a){F(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=Ee(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Mt(r,t,i);l[i]?(l[i].p(c,a),b(l[i],1)):(l[i]=qt(c),l[i].c(),b(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);de()}(!n||a&4)&&Pe(e,"--nr-columns",r[2])},i(r){if(!n){for(let a=0;a<t.length;a+=1)b(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)E(l[a]);n=!1},d(r){r&&m(e),Je(l,r)}}}function Gl(s){let e,n,t=Ee(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Ut(Bt(s,t,r));const o=r=>E(l[r],1,1,()=>{l[r]=null});return{c(){e=D("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=T(r,"OL",{class:!0});var a=j(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(m),this.h()},h(){d(e,"class","single-column svelte-1mohvmt")},m(r,a){F(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=Ee(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Bt(r,t,i);l[i]?(l[i].p(c,a),b(l[i],1)):(l[i]=Ut(c),l[i].c(),b(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);de()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)b(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)E(l[a]);n=!1},d(r){r&&m(e),Je(l,r)}}}function qt(s){let e,n;function t(){return s[6](s[10])}return e=new rl({props:{post:s[8]}}),e.$on("click",t),{c(){A(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,o){V(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[8]),e.$set(r)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){E(e.$$.fragment,l),n=!1},d(l){O(e,l)}}}function Ut(s){let e,n;function t(){return s[5](s[10])}return e=new El({props:{post:s[8]}}),e.$on("fullscreen",t),{c(){A(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,o){V(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[8]),e.$set(r)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){E(e.$$.fragment,l),n=!1},d(l){O(e,l)}}}function Ht(s){let e,n;return e=new nl({props:{index:s[0]}}),e.$on("close",s[3]),e.$on("endreached",s[7]),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.index=t[0]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function Wl(s){let e,n,t=Oe(s[1].postCount)+"",l,o,r,a,i,c,u,f,p,v;a=new Hl({}),a.$on("sortfilterupdate",s[4]);const _=[Gl,zl],g=[];function S(C,I){return C[2]==="1"?0:1}c=S(s),u=g[c]=_[c](s);let y=s[0]!==void 0&&Ht(s);return{c(){e=D("div"),n=D("span"),l=re(t),o=re(" posts"),r=P(),A(a.$$.fragment),i=P(),u.c(),f=P(),y&&y.c(),p=je(),this.h()},l(C){e=T(C,"DIV",{class:!0});var I=j(e);n=T(I,"SPAN",{});var k=j(n);l=oe(k,t),o=oe(k," posts"),k.forEach(m),r=N(I),R(a.$$.fragment,I),I.forEach(m),i=N(C),u.l(C),f=N(C),y&&y.l(C),p=je(),this.h()},h(){d(e,"class","svelte-1mohvmt")},m(C,I){F(C,e,I),$(e,n),$(n,l),$(n,o),$(e,r),V(a,e,null),F(C,i,I),g[c].m(C,I),F(C,f,I),y&&y.m(C,I),F(C,p,I),v=!0},p(C,[I]){(!v||I&2)&&t!==(t=Oe(C[1].postCount)+"")&&Ce(l,t);let k=c;c=S(C),c===k?g[c].p(C,I):(_e(),E(g[k],1,1,()=>{g[k]=null}),de(),u=g[c],u?u.p(C,I):(u=g[c]=_[c](C),u.c()),b(u,1),u.m(f.parentNode,f)),C[0]!==void 0?y?(y.p(C,I),I&1&&b(y,1)):(y=Ht(C),y.c(),b(y,1),y.m(p.parentNode,p)):y&&(_e(),E(y,1,1,()=>{y=null}),de())},i(C){v||(b(a.$$.fragment,C),b(u),b(y),v=!0)},o(C){E(a.$$.fragment,C),E(u),E(y),v=!1},d(C){C&&(m(e),m(i),m(f),m(p)),O(a),g[c].d(C),y&&y.d(C)}}}function Kl(s,e,n){let t,l;fe(s,xe,f=>n(1,t=f)),fe(s,Kt,f=>n(2,l=f));let o;const r=f=>{var _;const p=t.posts[f.detail],v=at(p.id);(_=document.getElementById(v))==null||_.scrollIntoView(),n(0,o=void 0)};function a(f){Fe.call(this,s,f)}const i=f=>{n(0,o=f)},c=f=>{n(0,o=f)};function u(f){Fe.call(this,s,f)}return s.$$.update=()=>{var f;s.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(f=history.state)!=null&&f.fullscreen&&history.back())},[o,t,l,r,a,i,c,u]}class Jl extends ae{constructor(e){super(),ce(this,e,Kl,Wl,ie,{})}}function Ql(s){let e;return{c(){e=re("Reset Filter")},l(n){e=oe(n,"Reset Filter")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Yl(s){let e;return{c(){e=re("Reset Tags")},l(n){e=oe(n,"Reset Tags")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Zl(s){let e,n,t,l,o="We couldn't find any posts matching your tags. Sorry...",r,a,i,c,u,f;return i=new ze({props:{title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[Ql]},$$scope:{ctx:s}}}),i.$on("click",s[1]),u=new ze({props:{title:"Tag combinations that are too specific will not yield results.",$$slots:{default:[Yl]},$$scope:{ctx:s}}}),u.$on("click",s[2]),{c(){e=D("img"),t=P(),l=D("p"),l.textContent=o,r=P(),a=D("div"),A(i.$$.fragment),c=P(),A(u.$$.fragment),this.h()},l(p){e=T(p,"IMG",{src:!0,alt:!0,class:!0}),t=N(p),l=T(p,"P",{"data-svelte-h":!0}),pe(l)!=="svelte-1utxj3w"&&(l.textContent=o),r=N(p),a=T(p,"DIV",{class:!0});var v=j(a);R(i.$$.fragment,v),c=N(v),R(u.$$.fragment,v),v.forEach(m),this.h()},h(){ye(e.src,n=_t+"/assets/shironeko-confused.png")||d(e,"src",n),d(e,"alt","Nothing here..."),d(e,"class","svelte-1oxspdj"),d(a,"class","svelte-1oxspdj")},m(p,v){F(p,e,v),F(p,t,v),F(p,l,v),F(p,r,v),F(p,a,v),V(i,a,null),$(a,c),V(u,a,null),f=!0},p(p,[v]){const _={};v&8&&(_.$$scope={dirty:v,ctx:p}),i.$set(_);const g={};v&8&&(g.$$scope={dirty:v,ctx:p}),u.$set(g)},i(p){f||(b(i.$$.fragment,p),b(u.$$.fragment,p),f=!0)},o(p){E(i.$$.fragment,p),E(u.$$.fragment,p),f=!1},d(p){p&&(m(e),m(t),m(l),m(r),m(a)),O(i),O(u)}}}function Xl(s){const e=Me();return[e,()=>{Ke.reset(),Ue.reset(),e("sortfilterupdate")},()=>{it.reset(),ft.reset()}]}class xl extends ae{constructor(e){super(),ce(this,e,Xl,Zl,ie,{})}}function er(s){const e=s-1;return e*e*e+1}function tr(s,{delay:e=0,duration:n=400,easing:t=er,x:l=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(s),i=+a.opacity,c=a.transform==="none"?"":a.transform,u=i*(1-r),[f,p]=gt(l),[v,_]=gt(o);return{delay:e,duration:n,easing:t,css:(g,S)=>`
			transform: ${c} translate(${(1-g)*f}${p}, ${(1-g)*v}${_});
			opacity: ${i-u*S}`}}function nr(s){let e;return{c(){e=re("Ok")},l(n){e=oe(n,"Ok")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function sr(s){let e,n,t,l="This website uses cookies.",o,r,a,i;return r=new ze({props:{title:"Accept cookies",$$slots:{default:[nr]},$$scope:{ctx:s}}}),r.$on("click",s[0]),{c(){e=D("section"),n=D("div"),t=D("span"),t.textContent=l,o=P(),A(r.$$.fragment),this.h()},l(c){e=T(c,"SECTION",{class:!0});var u=j(e);n=T(u,"DIV",{class:!0});var f=j(n);t=T(f,"SPAN",{"data-svelte-h":!0}),pe(t)!=="svelte-2018sg"&&(t.textContent=l),o=N(f),R(r.$$.fragment,f),f.forEach(m),u.forEach(m),this.h()},h(){d(n,"class","svelte-76nt2a"),d(e,"class","svelte-76nt2a")},m(c,u){F(c,e,u),$(e,n),$(n,t),$(n,o),V(r,n,null),i=!0},p(c,[u]){const f={};u&2&&(f.$$scope={dirty:u,ctx:c}),r.$set(f)},i(c){i||(b(r.$$.fragment,c),a&&a.end(1),i=!0)},o(c){E(r.$$.fragment,c),c&&(a=kn(e,tr,{y:200,duration:200})),i=!1},d(c){c&&m(e),O(r),c&&a&&a.end()}}}function lr(s){return[()=>nn.set(!0)]}class rr extends ae{constructor(e){super(),ce(this,e,lr,sr,ie,{})}}const{document:pt}=wn;function or(s){let e;return{c(){e=re("Search")},l(n){e=oe(n,"Search")},m(n,t){F(n,e,t)},i:Y,o:Y,d(n){n&&m(e)}}}function ir(s){let e,n;return e=new dt({}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function ar(s){let e,n,t,l;const o=[ir,or],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=je()},l(i){n.l(i),t=je()},m(i,c){r[e].m(i,c),F(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(_e(),E(r[u],1,1,()=>{r[u]=null}),de(),n=r[e],n||(n=r[e]=o[e](i),n.c()),b(n,1),n.m(t.parentNode,t))},i(i){l||(b(n),l=!0)},o(i){E(n),l=!1},d(i){i&&m(t),r[e].d(i)}}}function cr(s){let e,n,t,l,o,r;const a=[pr,fr],i=[];function c(u,f){return u[3].postCount===0?0:1}return n=c(s),t=i[n]=a[n](s),o=new Zn({}),{c(){e=D("section"),t.c(),l=P(),A(o.$$.fragment),this.h()},l(u){e=T(u,"SECTION",{class:!0});var f=j(e);t.l(f),f.forEach(m),l=N(u),R(o.$$.fragment,u),this.h()},h(){d(e,"class","svelte-g1qpx4")},m(u,f){F(u,e,f),i[n].m(e,null),F(u,l,f),V(o,u,f),r=!0},p(u,f){let p=n;n=c(u),n===p?i[n].p(u,f):(_e(),E(i[p],1,1,()=>{i[p]=null}),de(),t=i[n],t?t.p(u,f):(t=i[n]=a[n](u),t.c()),b(t,1),t.m(e,null))},i(u){r||(b(t),b(o.$$.fragment,u),r=!0)},o(u){E(t),E(o.$$.fragment,u),r=!1},d(u){u&&(m(e),m(l)),i[n].d(),O(o,u)}}}function ur(s){let e,n;return e=new us({props:{error:s[1]}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.error=t[1]),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function fr(s){let e,n,t,l,o,r;e=new Jl({}),e.$on("sortfilterupdate",s[10]),e.$on("endreached",s[11]);const a=[dr,_r],i=[];function c(u,f){return u[3].posts.length===u[3].postCount?0:1}return t=c(s),l=i[t]=a[t](s),{c(){A(e.$$.fragment),n=P(),l.c(),o=je()},l(u){R(e.$$.fragment,u),n=N(u),l.l(u),o=je()},m(u,f){V(e,u,f),F(u,n,f),i[t].m(u,f),F(u,o,f),r=!0},p(u,f){let p=t;t=c(u),t===p?i[t].p(u,f):(_e(),E(i[p],1,1,()=>{i[p]=null}),de(),l=i[t],l?l.p(u,f):(l=i[t]=a[t](u),l.c()),b(l,1),l.m(o.parentNode,o))},i(u){r||(b(e.$$.fragment,u),b(l),r=!0)},o(u){E(e.$$.fragment,u),E(l),r=!1},d(u){u&&(m(n),m(o)),O(e,u),i[t].d(u)}}}function pr(s){let e,n;return e=new xl({}),e.$on("sortfilterupdate",s[10]),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p:Y,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function _r(s){let e,n,t,l;return e=new sn({props:{absoluteTop:void 0,rootMargin:1e3/Number(s[7])+"px"}}),e.$on("intersection",s[11]),t=new ze({props:{title:"Load more posts",$$slots:{default:[hr]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){A(e.$$.fragment),n=P(),A(t.$$.fragment)},l(o){R(e.$$.fragment,o),n=N(o),R(t.$$.fragment,o)},m(o,r){V(e,o,r),F(o,n,r),V(t,o,r),l=!0},p(o,r){const a={};r&128&&(a.rootMargin=1e3/Number(o[7])+"px"),e.$set(a);const i={};r&33554433&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){l||(b(e.$$.fragment,o),b(t.$$.fragment,o),l=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),l=!1},d(o){o&&m(n),O(e,o),O(t,o)}}}function dr(s){let e,n;return e=new ps({}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},p:Y,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function mr(s){let e;return{c(){e=re("Load more")},l(n){e=oe(n,"Load more")},m(n,t){F(n,e,t)},i:Y,o:Y,d(n){n&&m(e)}}}function gr(s){let e,n;return e=new dt({}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function hr(s){let e,n,t,l;const o=[gr,mr],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=je()},l(i){n.l(i),t=je()},m(i,c){r[e].m(i,c),F(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(_e(),E(r[u],1,1,()=>{r[u]=null}),de(),n=r[e],n||(n=r[e]=o[e](i),n.c()),b(n,1),n.m(t.parentNode,t))},i(i){l||(b(n),l=!0)},o(i){E(n),l=!1},d(i){i&&m(t),r[e].d(i)}}}function zt(s){let e,n;return e=new rr({}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){V(e,t,l),n=!0},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function $r(s){let e,n,t,l,o,r,a,i,c,u,f,p,v,_,g,S,y,C,I,k,M;t=new ns({}),r=new En({}),i=new Yn({props:{placeholder:"Search for tags",fetchSuggestions:s[9]}}),i.$on("pick",s[12]),u=new ze({props:{id:"btn-search",title:"Search with the tags above",$$slots:{default:[ar]},$$scope:{ctx:s}}}),u.$on("click",s[10]),p=new Sn({props:{tags:[...s[5],...s[4]]}}),p.$on("click",s[13]),p.$on("contextmenu",s[14]),p.$on("createSupertag",s[15]);const B=[ur,cr],q=[];function w(h,z){return h[1]?0:h[3].requested?1:-1}~(_=w(s))&&(g=q[_]=B[_](s));function L(h){s[16](h)}let H={tags:s[5]};s[2]!==void 0&&(H.dialog=s[2]),y=new is({props:H}),ge.push(()=>Le(y,"dialog",L)),y.$on("submit",s[17]);let U=!s[8]&&zt();return{c(){e=D("meta"),n=P(),A(t.$$.fragment),l=P(),o=D("section"),A(r.$$.fragment),a=P(),A(i.$$.fragment),c=P(),A(u.$$.fragment),f=P(),A(p.$$.fragment),v=P(),g&&g.c(),S=P(),A(y.$$.fragment),I=P(),U&&U.c(),k=je(),this.h()},l(h){const z=vn("svelte-7jdp3v",pt.head);e=T(z,"META",{name:!0,content:!0}),z.forEach(m),n=N(h),R(t.$$.fragment,h),l=N(h),o=T(h,"SECTION",{id:!0,class:!0});var Z=j(o);R(r.$$.fragment,Z),a=N(Z),R(i.$$.fragment,Z),c=N(Z),R(u.$$.fragment,Z),f=N(Z),R(p.$$.fragment,Z),Z.forEach(m),v=N(h),g&&g.l(h),S=N(h),R(y.$$.fragment,h),I=N(h),U&&U.l(h),k=je(),this.h()},h(){pt.title="kurosearch - Rule34 Hentai",d(e,"name","description"),d(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience."),d(o,"id","search"),d(o,"class","svelte-g1qpx4")},m(h,z){$(pt.head,e),F(h,n,z),V(t,h,z),F(h,l,z),F(h,o,z),V(r,o,null),$(o,a),V(i,o,null),$(o,c),V(u,o,null),$(o,f),V(p,o,null),F(h,v,z),~_&&q[_].m(h,z),F(h,S,z),V(y,h,z),F(h,I,z),U&&U.m(h,z),F(h,k,z),M=!0},p(h,[z]){const Z={};z&33554433&&(Z.$$scope={dirty:z,ctx:h}),u.$set(Z);const G={};z&48&&(G.tags=[...h[5],...h[4]]),p.$set(G);let ne=_;_=w(h),_===ne?~_&&q[_].p(h,z):(g&&(_e(),E(q[ne],1,1,()=>{q[ne]=null}),de()),~_?(g=q[_],g?g.p(h,z):(g=q[_]=B[_](h),g.c()),b(g,1),g.m(S.parentNode,S)):g=null);const K={};z&32&&(K.tags=h[5]),!C&&z&4&&(C=!0,K.dialog=h[2],Te(()=>C=!1)),y.$set(K),h[8]?U&&(_e(),E(U,1,1,()=>{U=null}),de()):U?z&256&&b(U,1):(U=zt(),U.c(),b(U,1),U.m(k.parentNode,k))},i(h){M||(b(t.$$.fragment,h),b(r.$$.fragment,h),b(i.$$.fragment,h),b(u.$$.fragment,h),b(p.$$.fragment,h),b(g),b(y.$$.fragment,h),b(U),M=!0)},o(h){E(t.$$.fragment,h),E(r.$$.fragment,h),E(i.$$.fragment,h),E(u.$$.fragment,h),E(p.$$.fragment,h),E(g),E(y.$$.fragment,h),E(U),M=!1},d(h){h&&(m(n),m(l),m(o),m(v),m(S),m(I),m(k)),m(e),O(t,h),O(r),O(i),O(u),O(p),~_&&q[_].d(h),O(y,h),U&&U.d(h)}}}function vr(s,e,n){let t,l,o,r,a,i,c,u,f;fe(s,xe,h=>n(3,t=h)),fe(s,ft,h=>n(4,l=h)),fe(s,Ue,h=>n(19,o=h)),fe(s,Ke,h=>n(20,r=h)),fe(s,es,h=>n(21,a=h)),fe(s,it,h=>n(5,i=h)),fe(s,vt,h=>n(6,c=h)),fe(s,Kt,h=>n(7,u=h)),fe(s,nn,h=>n(8,f=h)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let p=!1,v,_,g=0;const S=async h=>{const z=await Gn(h);return[...c.items.filter(({name:G})=>G.toLowerCase().includes(h.toLowerCase())).map(G=>({label:G.name,count:G.tags.length,type:"supertag"})),...z]},y=()=>new Kn().withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(l),C=async h=>{if(!p){n(1,v=void 0),n(0,p=!0);try{const z=t.pageCount;await h(),Xn(z).catch(()=>{})}catch(z){n(1,v=z),console.warn(z)}finally{n(0,p=!1)}}},I=async()=>{xe.reset(),g=0,C(async()=>{const[h,z]=await y().getPageAndCount();xe.addPage(h,z)})},k=async()=>{C(async()=>{const h=await y().getPage();xe.addPage(h)})},M=h=>{var z,Z;if((h.key==="/"||h.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&((z=document.getElementById("searchbar"))==null||z.focus(),h.preventDefault(),h.stopPropagation()),h.ctrlKey&&h.key==="Enter"&&(h.preventDefault(),h.stopPropagation(),I()),h.ctrlKey&&h.key==="m"&&((Z=document.getElementById("select-modifier"))==null||Z.click()),h.ctrlKey&&h.key==="ArrowDown"){const G=document.getElementsByClassName("post-media");G[g].focus(),g=Math.min(g+1,Math.max(0,G.length-1))}h.ctrlKey&&h.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[g].focus(),g=Math.max(g-1,0))};tt(async()=>{document.addEventListener("keydown",M),t.postCount===0&&I()}),nt(()=>{document.removeEventListener("keydown",M)});const B=async h=>{const z=h.detail;if(z.type==="supertag"){const Z=c.items.find(G=>G.name===z.label);if(!Z){console.warn("Supertag not present.");return}ft.addOrReplace(Z)}else{const Z=await Wn(h.detail.label);it.addOrReplace({name:h.detail.label,modifier:h.detail.modifier,count:h.detail.count,type:(Z==null?void 0:Z.type)??"tag"})}},q=h=>"description"in h.detail?ft.removeByName(h.detail.name):it.removeByName(h.detail.name),w=h=>{"description"in h.detail||(h.detail.modifier=xn(h.detail.modifier),it.addOrReplace(h.detail))},L=()=>{_.showModal(),Wt("dialog")};function H(h){_=h,n(2,_)}return[p,v,_,t,l,i,c,u,f,S,I,k,B,q,w,L,H,h=>vt.add(h.detail)]}class Jr extends ae{constructor(e){super(),ce(this,e,vr,$r,ie,{})}}export{Jr as component};
