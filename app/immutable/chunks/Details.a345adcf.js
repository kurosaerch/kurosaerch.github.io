import{v as C,s as X,f as w,g as S,h as P,d as _,j as u,M as z,i as D,u as p,F as V,H as Ae,o as je,P as Fe,N as Ue,p as ce,r as ze,O as Ge,R as Ne,S as Ce,I as Ee,k as Re,a as F,l as K,c as U,m as H,T as ht,E as We,Q as _t,n as ae,K as Te,L as gt,e as pe,G as at,C as dt,y as Se}from"./scheduler.0a29c992.js";import{S as Z,i as J,a as T,g as be,t as M,c as ve,f as De,b as ee,d as te,m as se,e as ne}from"./index.6d8df040.js";import{b as Ie}from"./paths.f0ebfb03.js";import{h as Ke,u as mt}from"./await_block.f127d874.js";import{e as Pe}from"./each.e59479a4.js";import{L as pt}from"./LoadingAnimation.91c05c4c.js";import{f as He}from"./format-tag.7e313273.js";import{i as bt}from"./tags.49324235.js";import{a as Le}from"./active-tags-store.a60398a6.js";import{S as vt}from"./SimpleTag.952bfde9.js";const yt=typeof window<"u";let kt=yt?s=>requestAnimationFrame(s):C;const it=s=>(s==null?void 0:s.key)===" ",rt=s=>(s==null?void 0:s.key)==="Enter",ot=s=>{var e,t;rt(s)&&((t=(e=s.target)==null?void 0:e.click)==null||t.call(e))},wt="1250px",Q=new IntersectionObserver(s=>{for(const e of s){const t=e.isIntersecting?e.target.getAttribute("data-src")??"":"";e.target.setAttribute("src",t)}},{rootMargin:wt});function St(s){let e,t,n,l,r,a,o,i,h;return{c(){e=w("div"),t=w("img"),this.h()},l(c){e=S(c,"DIV",{class:!0});var f=P(e);t=S(f,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,style:!0,width:!0,height:!0,tabindex:!0}),f.forEach(_),this.h()},h(){u(t,"class","post-media svelte-dgcl67"),u(t,"loading","lazy"),u(t,"data-src",n=s[0].sample_url),u(t,"alt",l=s[0].id.toString()),u(t,"style",r=`aspect-ratio: ${s[0].width} / ${s[0].height}`),u(t,"width",a=s[0].width),u(t,"height",o=s[0].height),u(t,"tabindex","0"),u(e,"class","svelte-dgcl67"),z(e,"expandable",s[3]),z(e,"open",s[1])},m(c,f){D(c,e,f),p(e,t),s[6](t),i||(h=[V(t,"click",s[5]),V(t,"keydown",ot),V(t,"error",s[7])],i=!0)},p(c,[f]){f&1&&n!==(n=c[0].sample_url)&&u(t,"data-src",n),f&1&&l!==(l=c[0].id.toString())&&u(t,"alt",l),f&1&&r!==(r=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&u(t,"style",r),f&1&&a!==(a=c[0].width)&&u(t,"width",a),f&1&&o!==(o=c[0].height)&&u(t,"height",o),f&8&&z(e,"expandable",c[3]),f&2&&z(e,"open",c[1])},i:C,o:C,d(c){c&&_(e),s[6](null),i=!1,Ae(h)}}}function Et(s,e,t){let n,l,{post:r}=e,{open:a}=e,o;je(()=>{Q==null||Q.observe(o)}),Fe(()=>{Q==null||Q.unobserve(o)});function i(f){Ue.call(this,s,f)}function h(f){ce[f?"unshift":"push"](()=>{o=f,t(2,o)})}const c=f=>f.target.src=`${Ie}/assets/failed-to-load.svg`;return s.$$set=f=>{"post"in f&&t(0,r=f.post),"open"in f&&t(1,a=f.open)},s.$$.update=()=>{s.$$.dirty&1&&t(4,n=r.width/r.height),s.$$.dirty&16&&t(3,l=n<.33)},[r,a,o,l,n,i,h,c]}class As extends Z{constructor(e){super(),J(this,e,Et,St,X,{post:0,open:1})}}const Qe=s=>{if(typeof s!="number")throw new TypeError(`Attempted to call formatVideoTime with invalid value: ${s}`);const e=Math.floor(s),t=e%60,n=Math.floor(e/60);return`${Xe(n)}:${Xe(t)}`},Xe=s=>{const e=String(s),t=Math.max(0,2-e.length);return`${"0".repeat(t)}${e}`};function At(s){let e,t;return{c(){e=w("img"),this.h()},l(n){e=S(n,"IMG",{src:!0,alt:!0,width:!0,height:!0,style:!0}),this.h()},h(){Ee(e.src,t=Ie+"/assets/play.svg")||u(e,"src",t),u(e,"alt","Start GIF"),u(e,"width","16"),u(e,"height","32"),Re(e,"margin-left","4px")},m(n,l){D(n,e,l)},p:C,d(n){n&&_(e)}}}function It(s){let e,t;return{c(){e=w("img"),this.h()},l(n){e=S(n,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){Ee(e.src,t=Ie+"/assets/pause.svg")||u(e,"src",t),u(e,"alt","Stop GIF"),u(e,"width","16"),u(e,"height","32")},m(n,l){D(n,e,l)},p:C,d(n){n&&_(e)}}}function Nt(s){let e,t;return{c(){e=w("img"),this.h()},l(n){e=S(n,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){Ee(e.src,t=Ie+"/assets/load.svg")||u(e,"src",t),u(e,"alt","Loading GIF"),u(e,"width","16"),u(e,"height","32")},m(n,l){D(n,e,l)},p:C,d(n){n&&_(e)}}}function Ct(s){let e,t,n,l,r;function a(h,c){return h[1]?Nt:h[0]?It:At}let o=a(s),i=o(s);return{c(){e=w("button"),t=w("div"),i.c(),this.h()},l(h){e=S(h,"BUTTON",{class:!0});var c=P(e);t=S(c,"DIV",{class:!0});var f=P(t);i.l(f),f.forEach(_),c.forEach(_),this.h()},h(){u(t,"class","circle svelte-16x84bp"),u(e,"class",n=ze(s[3].class)+" svelte-16x84bp"),z(e,"play",s[0]&&!s[1])},m(h,c){D(h,e,c),p(e,t),i.m(t,null),l||(r=V(e,"click",Ge(s[2])),l=!0)},p(h,[c]){o===(o=a(h))&&i?i.p(h,c):(i.d(1),i=o(h),i&&(i.c(),i.m(t,null))),c&8&&n!==(n=ze(h[3].class)+" svelte-16x84bp")&&u(e,"class",n),c&11&&z(e,"play",h[0]&&!h[1])},i:C,o:C,d(h){h&&_(e),i.d(),l=!1,r()}}}function Tt(s,e,t){let{playing:n}=e,{loading:l}=e;const r=()=>{t(1,l=!0),t(0,n=!n)};return s.$$set=a=>{t(3,e=Ne(Ne({},e),Ce(a))),"playing"in a&&t(0,n=a.playing),"loading"in a&&t(1,l=a.loading)},e=Ce(e),[n,l,r,e]}class ut extends Z{constructor(e){super(),J(this,e,Tt,Ct,X,{playing:0,loading:1})}}function Ze(s){let e,t,n,l=!0,r=!1,a,o,i,h=Qe(s[15])+"",c,f,v,E,k,A,b,y,m,B,le;function W(){cancelAnimationFrame(a),e.paused||(a=kt(W),r=!0),s[25].call(e)}function j(g){s[30](g)}function Y(g){s[31](g)}let $={class:"center"};return s[5]!==void 0&&($.playing=s[5]),s[6]!==void 0&&($.loading=s[6]),A=new ut({props:$}),ce.push(()=>De(A,"playing",j)),ce.push(()=>De(A,"loading",Y)),{c(){e=w("video"),o=F(),i=w("span"),c=K(h),f=F(),v=w("input"),k=F(),ee(A.$$.fragment),this.h()},l(g){e=S(g,"VIDEO",{poster:!0,src:!0,preload:!0,style:!0,class:!0}),P(e).forEach(_),o=U(g),i=S(g,"SPAN",{class:!0});var N=P(i);c=H(N,h),N.forEach(_),f=U(g),v=S(g,"INPUT",{type:!0,min:!0,max:!0,step:!0,style:!0,class:!0}),k=U(g),te(A.$$.fragment,g),this.h()},h(){u(e,"poster",s[1]),e.loop=s[4],Ee(e.src,t=s[0])||u(e,"src",t),u(e,"preload","metadata"),u(e,"style",n=`aspect-ratio: ${s[2]} / ${s[3]}`),u(e,"class","svelte-5yiaie"),s[8]===void 0&&ht(()=>s[26].call(e)),u(i,"class","svelte-5yiaie"),z(i,"hide",s[12]),u(v,"type","range"),u(v,"min",0),u(v,"max",s[8]),u(v,"step",.0166666),u(v,"style",E=`background-image: linear-gradient(90deg, var(--accent) ${s[13]}%, var(--background-2) ${s[13]}%);}`),u(v,"class","svelte-5yiaie"),z(v,"hide",s[12])},m(g,N){D(g,e,N),s[23](e),D(g,o,N),D(g,i,N),p(i,c),D(g,f,N),D(g,v,N),We(v,s[7]),D(g,k,N),se(A,g,N),m=!0,B||(le=[V(e,"play",s[24]),V(e,"pause",s[24]),V(e,"timeupdate",W),V(e,"durationchange",s[26]),V(e,"waiting",s[19]),V(e,"playing",s[20]),V(e,"pause",s[20]),V(e,"ended",s[27]),V(e,"dblclick",Ge(_t(s[28]))),V(v,"change",s[29]),V(v,"input",s[29]),V(v,"click",Ge(Pt))],B=!0)},p(g,N){(!m||N[0]&2)&&u(e,"poster",g[1]),(!m||N[0]&16)&&(e.loop=g[4]),(!m||N[0]&1&&!Ee(e.src,t=g[0]))&&u(e,"src",t),(!m||N[0]&12&&n!==(n=`aspect-ratio: ${g[2]} / ${g[3]}`))&&u(e,"style",n),N[0]&16384&&l!==(l=g[14])&&e[l?"pause":"play"](),!r&&N[0]&128&&!isNaN(g[7])&&(e.currentTime=g[7]),r=!1,(!m||N[0]&32768)&&h!==(h=Qe(g[15])+"")&&ae(c,h),(!m||N[0]&4096)&&z(i,"hide",g[12]),(!m||N[0]&256)&&u(v,"max",g[8]),(!m||N[0]&8192&&E!==(E=`background-image: linear-gradient(90deg, var(--accent) ${g[13]}%, var(--background-2) ${g[13]}%);}`))&&u(v,"style",E),N[0]&128&&We(v,g[7]),(!m||N[0]&4096)&&z(v,"hide",g[12]);const ie={};!b&&N[0]&32&&(b=!0,ie.playing=g[5],Te(()=>b=!1)),!y&&N[0]&64&&(y=!0,ie.loading=g[6],Te(()=>y=!1)),A.$set(ie)},i(g){m||(T(A.$$.fragment,g),m=!0)},o(g){M(A.$$.fragment,g),m=!1},d(g){g&&(_(e),_(o),_(i),_(f),_(v),_(k)),s[23](null),ne(A,g),B=!1,Ae(le)}}}function Dt(s){let e,t,n,l,r,a=s[9]&&Ze(s);return{c(){e=w("div"),a&&a.c(),this.h()},l(o){e=S(o,"DIV",{tabindex:!0,class:!0,style:!0});var i=P(e);a&&a.l(i),i.forEach(_),this.h()},h(){u(e,"tabindex","0"),u(e,"class",t="post-media player "+s[21].class+" svelte-5yiaie"),Re(e,"aspect-ratio",s[2]+"/"+s[3])},m(o,i){D(o,e,i),a&&a.m(e,null),s[32](e),n=!0,l||(r=[V(e,"click",s[22]),V(e,"keydown",s[18])],l=!0)},p(o,i){o[9]?a?(a.p(o,i),i[0]&512&&T(a,1)):(a=Ze(o),a.c(),T(a,1),a.m(e,null)):a&&(be(),M(a,1,1,()=>{a=null}),ve()),(!n||i[0]&2097152&&t!==(t="post-media player "+o[21].class+" svelte-5yiaie"))&&u(e,"class",t),(!n||i[0]&12)&&Re(e,"aspect-ratio",o[2]+"/"+o[3])},i(o){n||(T(a),n=!0)},o(o){M(a),n=!1},d(o){o&&_(e),a&&a.d(),s[32](null),l=!1,Ae(r)}}}const Je=5,Pt=()=>{};function Vt(s,e,t){let n,l,r,a,{src:o}=e,{poster:i}=e,{width:h}=e,{height:c}=e,{loop:f}=e,v,E,k=!1,A=!1,b=0,y=0,m=!1;const B=()=>{t(7,b=Math.max(0,b-Je))},le=()=>{t(7,b=Math.min(y,b+Je))},W=d=>{var oe;rt(d)?(oe=d.target)==null||oe.click():it(d)||d.key==="k"?(d.preventDefault(),t(5,k=!k)):d.key==="ArrowLeft"||d.key==="j"?B():(d.key==="ArrowRight"||d.key==="l")&&le()},j=new IntersectionObserver(d=>{for(const oe of d)oe.isIntersecting?t(9,m=!0):E&&(t(5,k=!1),t(6,A=!1),E.addEventListener("error",()=>{t(9,m=!1)},{once:!0}),t(11,E.src="",E))},{rootMargin:"0px"}),Y=()=>t(6,A=!0),$=()=>t(6,A=!1);je(()=>j==null?void 0:j.observe(v)),Fe(()=>j==null?void 0:j.unobserve(v));function g(d){Ue.call(this,s,d)}function N(d){ce[d?"unshift":"push"](()=>{E=d,t(11,E)})}function ie(){l=this.paused,t(14,l),t(5,k),t(9,m)}function x(){b=this.currentTime,t(7,b)}function re(){y=this.duration,t(8,y)}const fe=()=>{f||(t(6,A=!1),t(5,k=!1))},_e=d=>{d.offsetX<d.target.clientWidth/2?B():le()};function ye(){b=gt(this.value),t(7,b)}function ke(d){k=d,t(5,k),t(9,m)}function q(d){A=d,t(6,A)}function O(d){ce[d?"unshift":"push"](()=>{v=d,t(10,v)})}return s.$$set=d=>{t(21,e=Ne(Ne({},e),Ce(d))),"src"in d&&t(0,o=d.src),"poster"in d&&t(1,i=d.poster),"width"in d&&t(2,h=d.width),"height"in d&&t(3,c=d.height),"loop"in d&&t(4,f=d.loop)},s.$$.update=()=>{s.$$.dirty[0]&384&&t(15,n=y-b),s.$$.dirty[0]&544&&t(5,k=m&&k),s.$$.dirty[0]&32&&t(14,l=!k),s.$$.dirty[0]&384&&t(13,r=b/y*98+1),s.$$.dirty[0]&96&&t(12,a=k&&!A)},e=Ce(e),[o,i,h,c,f,k,A,b,y,m,v,E,a,r,l,n,B,le,W,Y,$,e,g,N,ie,x,re,fe,_e,ye,ke,q,O]}class Is extends Z{constructor(e){super(),J(this,e,Vt,Dt,X,{src:0,poster:1,width:2,height:3,loop:4},null,[-1,-1])}}const ct=s=>s.endsWith(".gif"),Mt=(s,e,t)=>ct(e)?{static:t,animated:e}:{static:e,animated:s},ft=s=>s.endsWith(".mp4")||s.endsWith(".webm"),Ns=(s,e,t)=>ft(e)?{static:t,animated:e}:{static:e,animated:s},Cs=s=>s.some(e=>e.name==="loop"),Ts=s=>ct(s)||ft(s);function Lt(s){let e,t,n,l,r,a,o,i,h,c,f,v,E;function k(y){s[11](y)}function A(y){s[12](y)}let b={class:"center"};return s[2]!==void 0&&(b.playing=s[2]),s[3]!==void 0&&(b.loading=s[3]),o=new ut({props:b}),ce.push(()=>De(o,"playing",k)),ce.push(()=>De(o,"loading",A)),{c(){e=w("div"),t=w("img"),a=F(),ee(o.$$.fragment),this.h()},l(y){e=S(y,"DIV",{class:!0,style:!0});var m=P(e);t=S(m,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,width:!0,height:!0,tabindex:!0}),a=U(m),te(o.$$.fragment,m),m.forEach(_),this.h()},h(){u(t,"class","post-media media-img svelte-1cndgba"),u(t,"loading","lazy"),u(t,"data-src",s[4]),u(t,"alt",n=s[0].id.toString()),u(t,"width",l=s[0].width),u(t,"height",r=s[0].height),u(t,"tabindex","0"),u(e,"class","container svelte-1cndgba"),u(e,"style",c=`aspect-ratio: ${s[0].width} / ${s[0].height}`)},m(y,m){D(y,e,m),p(e,t),s[7](t),p(e,a),se(o,e,null),f=!0,v||(E=[V(t,"click",s[6]),V(t,"keydown",s[8]),V(t,"load",s[9]),V(t,"error",s[10])],v=!0)},p(y,[m]){(!f||m&16)&&u(t,"data-src",y[4]),(!f||m&1&&n!==(n=y[0].id.toString()))&&u(t,"alt",n),(!f||m&1&&l!==(l=y[0].width))&&u(t,"width",l),(!f||m&1&&r!==(r=y[0].height))&&u(t,"height",r);const B={};!i&&m&4&&(i=!0,B.playing=y[2],Te(()=>i=!1)),!h&&m&8&&(h=!0,B.loading=y[3],Te(()=>h=!1)),o.$set(B),(!f||m&1&&c!==(c=`aspect-ratio: ${y[0].width} / ${y[0].height}`))&&u(e,"style",c)},i(y){f||(T(o.$$.fragment,y),f=!0)},o(y){M(o.$$.fragment,y),f=!1},d(y){y&&_(e),s[7](null),ne(o),v=!1,Ae(E)}}}function Gt(s,e,t){let n,l,{post:r}=e,a,o=!1,i=!1;je(()=>Q==null?void 0:Q.observe(a)),Fe(()=>Q==null?void 0:Q.unobserve(a));function h(b){Ue.call(this,s,b)}function c(b){ce[b?"unshift":"push"](()=>{a=b,t(1,a),t(2,o),t(5,n),t(0,r)})}const f=b=>{ot(b),it(b)&&(b.preventDefault(),t(3,i=!0),t(2,o=!o))},v=()=>t(3,i=!1),E=b=>{t(3,i=!1),b.target.src=`${Ie}/assets/failed-to-load.svg`};function k(b){o=b,t(2,o)}function A(b){i=b,t(3,i)}return s.$$set=b=>{"post"in b&&t(0,r=b.post)},s.$$.update=()=>{s.$$.dirty&1&&t(5,n=Mt(r.file_url,r.sample_url,r.preview_url)),s.$$.dirty&36&&t(4,l=o?n.animated:n.static),s.$$.dirty&38&&a&&t(1,a.src=o?n.animated:n.static,a)},[r,a,o,i,l,n,h,c,f,v,E,k,A]}class Ds extends Z{constructor(e){super(),J(this,e,Gt,Lt,X,{post:0})}}const Rt="https://api.rule34.xxx/index.php?page=dapi&s=comment&q=index&json=1",Ye=async(s=void 0)=>{if(typeof s!="number"&&s!==void 0)throw new TypeError("Invalid postId");const e=new URL(Rt);s!==void 0&&e.searchParams.append("post_id",String(s));const t=await fetch(e);if(!t.ok)throw new Error("Failed to get tag suggestions");const n=await t.text(),r=new DOMParser().parseFromString(n,"text/xml"),a=[];for(const o of r.getElementsByTagName("comment"))a.push(jt(o.attributes));return a},jt=s=>{const e=s.getNamedItem("creator"),t=s.getNamedItem("created_at"),n=s.getNamedItem("body");if(e==null||t==null||n==null)throw new Error(`Failed to parse comment, attribute was null. ${e}, ${t}, ${n}`);return{author:e.value,createdAt:t.value,content:n.value}},$e=6e4,Ve=s=>{if(!Ft(s))throw new TypeError("Invalid createdAt passed to formatCreatedAt");const e=new Date(s).getTime()/$e,n=new Date().getTime()/$e-e;if(n<1)return"just now";if(n<60)return me(n,"minute");const l=n/60;if(l<24)return me(l,"hour");const r=l/24;if(r<7)return me(r,"day");if(r<30.5)return me(r/7,"week");if(r<365.25)return me(r/30.5,"month");const a=r/365.25;return me(a,"year")},Ft=s=>(typeof s=="number"||typeof s=="string")&&new Date(s).toString()!=="Invalid Date",me=(s,e)=>{const t=s.toFixed();return`${t} ${e}${t==="1"?"":"s"} ago`};function Ut(s){let e,t,n=s[0].author+"",l,r,a,o=Ve(s[0].createdAt)+"",i,h,c,f=s[0].content+"",v;return{c(){e=w("div"),t=w("span"),l=K(n),r=F(),a=w("span"),i=K(o),h=F(),c=w("span"),v=K(f),this.h()},l(E){e=S(E,"DIV",{class:!0});var k=P(e);t=S(k,"SPAN",{class:!0});var A=P(t);l=H(A,n),A.forEach(_),r=U(k),a=S(k,"SPAN",{class:!0});var b=P(a);i=H(b,o),b.forEach(_),h=U(k),c=S(k,"SPAN",{class:!0});var y=P(c);v=H(y,f),y.forEach(_),k.forEach(_),this.h()},h(){u(t,"class","author svelte-gbprdj"),u(a,"class","created-at svelte-gbprdj"),u(c,"class","content svelte-gbprdj"),u(e,"class","svelte-gbprdj")},m(E,k){D(E,e,k),p(e,t),p(t,l),p(e,r),p(e,a),p(a,i),p(e,h),p(e,c),p(c,v)},p(E,[k]){k&1&&n!==(n=E[0].author+"")&&ae(l,n),k&1&&o!==(o=Ve(E[0].createdAt)+"")&&ae(i,o),k&1&&f!==(f=E[0].content+"")&&ae(v,f)},i:C,o:C,d(E){E&&_(e)}}}function Bt(s,e,t){let{comment:n}=e;return s.$$set=l=>{"comment"in l&&t(0,n=l.comment)},[n]}class qt extends Z{constructor(e){super(),J(this,e,Bt,Ut,X,{comment:0})}}function Ot(s){let e,t=Ve(s[0])+"",n;return{c(){e=w("span"),n=K(t),this.h()},l(l){e=S(l,"SPAN",{class:!0});var r=P(e);n=H(r,t),r.forEach(_),this.h()},h(){u(e,"class","svelte-1vqihm9")},m(l,r){D(l,e,r),p(e,n)},p(l,[r]){r&1&&t!==(t=Ve(l[0])+"")&&ae(n,t)},i:C,o:C,d(l){l&&_(e)}}}function zt(s,e,t){let{value:n}=e;return s.$$set=l=>{"value"in l&&t(0,n=l.value)},[n]}class Wt extends Z{constructor(e){super(),J(this,e,zt,Ot,X,{value:0})}}function Kt(s){let e,t=He(s[0])+"",n;return{c(){e=w("span"),n=K(t),this.h()},l(l){e=S(l,"SPAN",{"data-testid":!0,class:!0});var r=P(e);n=H(r,t),r.forEach(_),this.h()},h(){u(e,"data-testid","score"),u(e,"class","codicon codicon-heart svelte-ws217e")},m(l,r){D(l,e,r),p(e,n)},p(l,[r]){r&1&&t!==(t=He(l[0])+"")&&ae(n,t)},i:C,o:C,d(l){l&&_(e)}}}function Ht(s,e,t){let{value:n}=e;return s.$$set=l=>{"value"in l&&t(0,n=l.value)},[n]}class Qt extends Z{constructor(e){super(),J(this,e,Ht,Kt,X,{value:0})}}function xe(s){let e,t,n,l,r;return{c(){e=w("a"),t=w("i"),n=F(),l=K(s[1]),this.h()},l(a){e=S(a,"A",{href:!0,target:!0,class:!0});var o=P(e);t=S(o,"I",{class:!0}),P(t).forEach(_),n=U(o),l=H(o,s[1]),o.forEach(_),this.h()},h(){u(t,"class","codicon codicon-link"),u(e,"href",r=s[0].toString()),u(e,"target","_newtab"),u(e,"class","svelte-oadf5t")},m(a,o){D(a,e,o),p(e,t),p(e,n),p(e,l)},p(a,o){o&2&&ae(l,a[1]),o&1&&r!==(r=a[0].toString())&&u(e,"href",r)},d(a){a&&_(e)}}}function Xt(s){let e,t=s[0]&&xe(s);return{c(){t&&t.c(),e=pe()},l(n){t&&t.l(n),e=pe()},m(n,l){t&&t.m(n,l),D(n,e,l)},p(n,[l]){n[0]?t?t.p(n,l):(t=xe(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:C,o:C,d(n){n&&_(e),t&&t.d(n)}}}function Zt(s,e,t){let n,l,{source:r}=e;return s.$$set=a=>{"source"in a&&t(2,r=a.source)},s.$$.update=()=>{var a;s.$$.dirty&4&&t(0,n=bt(r)?new URL(r):null),s.$$.dirty&1&&t(1,l=(a=n==null?void 0:n.hostname)==null?void 0:a.replace(/^www./,""))},[n,l,r]}class Jt extends Z{constructor(e){super(),J(this,e,Zt,Xt,X,{source:2})}}function Yt(s){let e,t,n;return{c(){e=w("a"),t=w("i"),n=K(" File"),this.h()},l(l){e=S(l,"A",{href:!0,target:!0,class:!0});var r=P(e);t=S(r,"I",{class:!0}),P(t).forEach(_),n=H(r," File"),r.forEach(_),this.h()},h(){u(t,"class","codicon codicon-link-external"),u(e,"href",s[0]),u(e,"target","_newtab"),u(e,"class","svelte-oadf5t")},m(l,r){D(l,e,r),p(e,t),p(e,n)},p(l,[r]){r&1&&u(e,"href",l[0])},i:C,o:C,d(l){l&&_(e)}}}function $t(s,e,t){let{url:n}=e;return s.$$set=l=>{"url"in l&&t(0,n=l.url)},[n]}class xt extends Z{constructor(e){super(),J(this,e,$t,Yt,X,{url:0})}}function es(s){let e,t=s[0].charAt(0).toUpperCase()+"",n,l;return{c(){e=w("span"),n=K(t),this.h()},l(r){e=S(r,"SPAN",{title:!0,class:!0});var a=P(e);n=H(a,t),a.forEach(_),this.h()},h(){u(e,"title",l="Rated "+s[0]+"."),u(e,"class","svelte-1nbj6kf")},m(r,a){D(r,e,a),p(e,n)},p(r,[a]){a&1&&t!==(t=r[0].charAt(0).toUpperCase()+"")&&ae(n,t),a&1&&l!==(l="Rated "+r[0]+".")&&u(e,"title",l)},i:C,o:C,d(r){r&&_(e)}}}function ts(s,e,t){let{value:n}=e;return s.$$set=l=>{"value"in l&&t(0,n=l.value)},[n]}class ss extends Z{constructor(e){super(),J(this,e,ts,es,X,{value:0})}}function et(s,e,t){const n=s.slice();n[4]=e[t];const l=n[1].find(function(...a){return s[3](n[4],...a)})!==void 0;return n[5]=l,n}function tt(s){let e,t;function n(){return s[2](s[5],s[4])}return e=new vt({props:{tag:s[4],active:s[5]}}),e.$on("click",n),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,r){se(e,l,r),t=!0},p(l,r){s=l;const a={};r&1&&(a.tag=s[4]),r&3&&(a.active=s[5]),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){ne(e,l)}}}function ns(s){let e,t,n=Pe(s[0]),l=[];for(let a=0;a<n.length;a+=1)l[a]=tt(et(s,n,a));const r=a=>M(l[a],1,1,()=>{l[a]=null});return{c(){e=w("ul");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=S(a,"UL",{class:!0});var o=P(e);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(_),this.h()},h(){u(e,"class","tags svelte-1gd63k6")},m(a,o){D(a,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);t=!0},p(a,[o]){if(o&3){n=Pe(a[0]);let i;for(i=0;i<n.length;i+=1){const h=et(a,n,i);l[i]?(l[i].p(h,o),T(l[i],1)):(l[i]=tt(h),l[i].c(),T(l[i],1),l[i].m(e,null))}for(be(),i=n.length;i<l.length;i+=1)r(i);ve()}},i(a){if(!t){for(let o=0;o<n.length;o+=1)T(l[o]);t=!0}},o(a){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)M(l[o]);t=!1},d(a){a&&_(e),at(l,a)}}}function ls(s,e,t){let n;dt(s,Le,o=>t(1,n=o));let{tags:l}=e;const r=(o,i)=>o?Le.removeByName(i.name):Le.addOrReplace({...i,modifier:"+"}),a=(o,i)=>i.name===o.name;return s.$$set=o=>{"tags"in o&&t(0,l=o.tags)},[l,n,r,a]}class as extends Z{constructor(e){super(),J(this,e,ls,ns,X,{tags:0})}}function st(s,e,t){const n=s.slice();return n[5]=e[t],n}function nt(s){let e,t="•",n,l,r;return l=new Jt({props:{source:s[0].source}}),{c(){e=w("span"),e.textContent=t,n=F(),ee(l.$$.fragment),this.h()},l(a){e=S(a,"SPAN",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-7hh8jk"&&(e.textContent=t),n=U(a),te(l.$$.fragment,a),this.h()},h(){u(e,"class","svelte-11bu5ix")},m(a,o){D(a,e,o),D(a,n,o),se(l,a,o),r=!0},p(a,o){const i={};o&1&&(i.source=a[0].source),l.$set(i)},i(a){r||(T(l.$$.fragment,a),r=!0)},o(a){M(l.$$.fragment,a),r=!1},d(a){a&&(_(e),_(n)),ne(l,a)}}}function is(s){let e,t,n,l={ctx:s,current:null,token:null,hasCatch:!1,pending:hs,then:us,catch:os,value:4,blocks:[,,,]};return Ke(t=Ye(s[0].id),l),{c(){e=pe(),l.block.c()},l(r){e=pe(),l.block.l(r)},m(r,a){D(r,e,a),l.block.m(r,l.anchor=a),l.mount=()=>e.parentNode,l.anchor=e,n=!0},p(r,a){s=r,l.ctx=s,a&1&&t!==(t=Ye(s[0].id))&&Ke(t,l)||mt(l,s,a)},i(r){n||(T(l.block),n=!0)},o(r){for(let a=0;a<3;a+=1){const o=l.blocks[a];M(o)}n=!1},d(r){r&&_(e),l.block.d(r),l.token=null,l=null}}}function rs(s){let e,t;return e=new as({props:{tags:s[0].tags}}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,l){se(e,n,l),t=!0},p(n,l){const r={};l&1&&(r.tags=n[0].tags),e.$set(r)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function os(s){return{c:C,l:C,m:C,p:C,i:C,o:C,d:C}}function us(s){let e,t,n,l;const r=[fs,cs],a=[];function o(i,h){return i[4].length>0?0:1}return e=o(s),t=a[e]=r[e](s),{c(){t.c(),n=pe()},l(i){t.l(i),n=pe()},m(i,h){a[e].m(i,h),D(i,n,h),l=!0},p(i,h){let c=e;e=o(i),e===c?a[e].p(i,h):(be(),M(a[c],1,1,()=>{a[c]=null}),ve(),t=a[e],t?t.p(i,h):(t=a[e]=r[e](i),t.c()),T(t,1),t.m(n.parentNode,n))},i(i){l||(T(t),l=!0)},o(i){M(t),l=!1},d(i){i&&_(n),a[e].d(i)}}}function cs(s){let e,t="Comments for this post are not available";return{c(){e=w("span"),e.textContent=t,this.h()},l(n){e=S(n,"SPAN",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-4t2lxe"&&(e.textContent=t),this.h()},h(){u(e,"class","no-comments svelte-11bu5ix")},m(n,l){D(n,e,l)},p:C,i:C,o:C,d(n){n&&_(e)}}}function fs(s){let e,t,n=Pe(s[4]),l=[];for(let a=0;a<n.length;a+=1)l[a]=lt(st(s,n,a));const r=a=>M(l[a],1,1,()=>{l[a]=null});return{c(){e=w("ul");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=S(a,"UL",{class:!0});var o=P(e);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(_),this.h()},h(){u(e,"class","comments svelte-11bu5ix")},m(a,o){D(a,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);t=!0},p(a,o){if(o&1){n=Pe(a[4]);let i;for(i=0;i<n.length;i+=1){const h=st(a,n,i);l[i]?(l[i].p(h,o),T(l[i],1)):(l[i]=lt(h),l[i].c(),T(l[i],1),l[i].m(e,null))}for(be(),i=n.length;i<l.length;i+=1)r(i);ve()}},i(a){if(!t){for(let o=0;o<n.length;o+=1)T(l[o]);t=!0}},o(a){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)M(l[o]);t=!1},d(a){a&&_(e),at(l,a)}}}function lt(s){let e,t;return e=new qt({props:{comment:s[5]}}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,l){se(e,n,l),t=!0},p(n,l){const r={};l&1&&(r.comment=n[5]),e.$set(r)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function hs(s){let e,t;return e=new pt({}),{c(){ee(e.$$.fragment)},l(n){te(e.$$.fragment,n)},m(n,l){se(e,n,l),t=!0},p:C,i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ne(e,n)}}}function _s(s){let e,t,n,l,r,a="•",o,i,h,c,f="•",v,E,k,A,b="•",y,m,B,le,W,j,Y,$=s[0].tags.length+"",g,N,ie,x,re,fe=(s[0].comment_count||"No")+"",_e,ye,ke,q,O,d,oe,Be;n=new ss({props:{value:s[0].rating}}),i=new Qt({props:{value:s[0].score}}),E=new Wt({props:{value:s[0].change}}),m=new xt({props:{url:s[0].file_url}});let G=s[0].source&&nt(s);const qe=[rs,is],ue=[];function Oe(I,L){return I[1]==="tags"?0:1}return q=Oe(s),O=ue[q]=qe[q](s),{c(){e=w("div"),t=w("div"),ee(n.$$.fragment),l=F(),r=w("span"),r.textContent=a,o=F(),ee(i.$$.fragment),h=F(),c=w("span"),c.textContent=f,v=F(),ee(E.$$.fragment),k=F(),A=w("span"),A.textContent=b,y=F(),ee(m.$$.fragment),B=F(),G&&G.c(),le=F(),W=w("div"),j=w("button"),Y=w("span"),g=K($),N=K(" tags"),ie=F(),x=w("button"),re=w("span"),_e=K(fe),ye=K(" comments"),ke=F(),O.c(),this.h()},l(I){e=S(I,"DIV",{class:!0});var L=P(e);t=S(L,"DIV",{class:!0});var R=P(t);te(n.$$.fragment,R),l=U(R),r=S(R,"SPAN",{class:!0,"data-svelte-h":!0}),Se(r)!=="svelte-7hh8jk"&&(r.textContent=a),o=U(R),te(i.$$.fragment,R),h=U(R),c=S(R,"SPAN",{class:!0,"data-svelte-h":!0}),Se(c)!=="svelte-7hh8jk"&&(c.textContent=f),v=U(R),te(E.$$.fragment,R),k=U(R),A=S(R,"SPAN",{class:!0,"data-svelte-h":!0}),Se(A)!=="svelte-7hh8jk"&&(A.textContent=b),y=U(R),te(m.$$.fragment,R),B=U(R),G&&G.l(R),R.forEach(_),le=U(L),W=S(L,"DIV",{class:!0});var he=P(W);j=S(he,"BUTTON",{class:!0});var we=P(j);Y=S(we,"SPAN",{class:!0});var ge=P(Y);g=H(ge,$),N=H(ge," tags"),ge.forEach(_),we.forEach(_),ie=U(he),x=S(he,"BUTTON",{class:!0});var de=P(x);re=S(de,"SPAN",{class:!0});var Me=P(re);_e=H(Me,fe),ye=H(Me," comments"),Me.forEach(_),de.forEach(_),he.forEach(_),ke=U(L),O.l(L),L.forEach(_),this.h()},h(){u(r,"class","svelte-11bu5ix"),u(c,"class","svelte-11bu5ix"),u(A,"class","svelte-11bu5ix"),u(t,"class","summary svelte-11bu5ix"),u(Y,"class","svelte-11bu5ix"),u(j,"class","codicon codicon-tag svelte-11bu5ix"),z(j,"active",s[1]==="tags"),u(re,"class","svelte-11bu5ix"),u(x,"class","codicon codicon-comment-discussion svelte-11bu5ix"),z(x,"active",s[1]==="comments"),u(W,"class","tabs svelte-11bu5ix"),u(e,"class","details svelte-11bu5ix")},m(I,L){D(I,e,L),p(e,t),se(n,t,null),p(t,l),p(t,r),p(t,o),se(i,t,null),p(t,h),p(t,c),p(t,v),se(E,t,null),p(t,k),p(t,A),p(t,y),se(m,t,null),p(t,B),G&&G.m(t,null),p(e,le),p(e,W),p(W,j),p(j,Y),p(Y,g),p(Y,N),p(W,ie),p(W,x),p(x,re),p(re,_e),p(re,ye),p(e,ke),ue[q].m(e,null),d=!0,oe||(Be=[V(j,"click",s[2]),V(x,"click",s[3])],oe=!0)},p(I,[L]){const R={};L&1&&(R.value=I[0].rating),n.$set(R);const he={};L&1&&(he.value=I[0].score),i.$set(he);const we={};L&1&&(we.value=I[0].change),E.$set(we);const ge={};L&1&&(ge.url=I[0].file_url),m.$set(ge),I[0].source?G?(G.p(I,L),L&1&&T(G,1)):(G=nt(I),G.c(),T(G,1),G.m(t,null)):G&&(be(),M(G,1,1,()=>{G=null}),ve()),(!d||L&1)&&$!==($=I[0].tags.length+"")&&ae(g,$),(!d||L&2)&&z(j,"active",I[1]==="tags"),(!d||L&1)&&fe!==(fe=(I[0].comment_count||"No")+"")&&ae(_e,fe),(!d||L&2)&&z(x,"active",I[1]==="comments");let de=q;q=Oe(I),q===de?ue[q].p(I,L):(be(),M(ue[de],1,1,()=>{ue[de]=null}),ve(),O=ue[q],O?O.p(I,L):(O=ue[q]=qe[q](I),O.c()),T(O,1),O.m(e,null))},i(I){d||(T(n.$$.fragment,I),T(i.$$.fragment,I),T(E.$$.fragment,I),T(m.$$.fragment,I),T(G),T(O),d=!0)},o(I){M(n.$$.fragment,I),M(i.$$.fragment,I),M(E.$$.fragment,I),M(m.$$.fragment,I),M(G),M(O),d=!1},d(I){I&&_(e),ne(n),ne(i),ne(E),ne(m),G&&G.d(),ue[q].d(),oe=!1,Ae(Be)}}}function gs(s,e,t){let{post:n}=e,l="tags";const r=()=>{t(1,l="tags")},a=()=>{t(1,l="comments")};return s.$$set=o=>{"post"in o&&t(0,n=o.post)},[n,l,r,a]}class Ps extends Z{constructor(e){super(),J(this,e,gs,_s,X,{post:0})}}export{qt as C,Ps as D,Jt as E,Ds as G,As as I,as as P,ss as R,Qt as S,Is as V,Cs as a,Mt as b,Ts as c,Wt as d,xt as e,Ye as f,Ns as g,rt as i};
