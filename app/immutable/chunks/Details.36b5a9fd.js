import{v as C,s as Y,f as w,g as S,h as D,d as _,j as u,M as z,i as j,u as p,F as P,H as Ae,o as Fe,P as Re,N as Ue,p as ce,r as ze,O as Ge,R as Ne,S as Ce,I as Ee,k as Le,a as R,l as K,c as U,m as H,T as ct,E as We,Q as ft,n as ae,K as je,L as ht,e as pe,y as Se,C as _t,G as at}from"./scheduler.0a29c992.js";import{S as $,i as x,a as T,g as ve,t as V,c as be,f as Te,b as te,d as ne,m as le,e as se}from"./index.6d8df040.js";import{b as Ie}from"./paths.e903196b.js";import{h as Ke,u as gt}from"./await_block.f127d874.js";import{e as De}from"./each.e59479a4.js";import{L as dt}from"./LoadingAnimation.91c05c4c.js";import{f as He}from"./format-tag.7e313273.js";import{i as mt}from"./tags.49324235.js";import{a as Me}from"./active-tags-store.a60398a6.js";import{S as pt}from"./SimpleTag.952bfde9.js";const vt=typeof window<"u";let bt=vt?n=>requestAnimationFrame(n):C;const it=n=>(n==null?void 0:n.key)===" ",rt=n=>(n==null?void 0:n.key)==="Enter",ot=n=>{var e,t;rt(n)&&((t=(e=n.target)==null?void 0:e.click)==null||t.call(e))},yt="1250px",Q=new IntersectionObserver(n=>{for(const e of n){const t=e.isIntersecting?e.target.getAttribute("data-src")??"":"";e.target.setAttribute("src",t)}},{rootMargin:yt});function kt(n){let e,t,l,s,r,a,o,i,h;return{c(){e=w("div"),t=w("img"),this.h()},l(c){e=S(c,"DIV",{class:!0});var f=D(e);t=S(f,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,style:!0,width:!0,height:!0,tabindex:!0}),f.forEach(_),this.h()},h(){u(t,"class","post-media svelte-dgcl67"),u(t,"loading","lazy"),u(t,"data-src",l=n[0].sample_url),u(t,"alt",s=n[0].id.toString()),u(t,"style",r=`aspect-ratio: ${n[0].width} / ${n[0].height}`),u(t,"width",a=n[0].width),u(t,"height",o=n[0].height),u(t,"tabindex","0"),u(e,"class","svelte-dgcl67"),z(e,"expandable",n[3]),z(e,"open",n[1])},m(c,f){j(c,e,f),p(e,t),n[6](t),i||(h=[P(t,"click",n[5]),P(t,"keydown",ot),P(t,"error",n[7])],i=!0)},p(c,[f]){f&1&&l!==(l=c[0].sample_url)&&u(t,"data-src",l),f&1&&s!==(s=c[0].id.toString())&&u(t,"alt",s),f&1&&r!==(r=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&u(t,"style",r),f&1&&a!==(a=c[0].width)&&u(t,"width",a),f&1&&o!==(o=c[0].height)&&u(t,"height",o),f&8&&z(e,"expandable",c[3]),f&2&&z(e,"open",c[1])},i:C,o:C,d(c){c&&_(e),n[6](null),i=!1,Ae(h)}}}function wt(n,e,t){let l,s,{post:r}=e,{open:a}=e,o;Fe(()=>{Q==null||Q.observe(o)}),Re(()=>{Q==null||Q.unobserve(o)});function i(f){Ue.call(this,n,f)}function h(f){ce[f?"unshift":"push"](()=>{o=f,t(2,o)})}const c=f=>f.target.src=`${Ie}/assets/failed-to-load.svg`;return n.$$set=f=>{"post"in f&&t(0,r=f.post),"open"in f&&t(1,a=f.open)},n.$$.update=()=>{n.$$.dirty&1&&t(4,l=r.width/r.height),n.$$.dirty&16&&t(3,s=l<.33)},[r,a,o,s,l,i,h,c]}class Sn extends ${constructor(e){super(),x(this,e,wt,kt,Y,{post:0,open:1})}}const Qe=n=>{if(typeof n!="number")throw new TypeError(`Attempted to call formatVideoTime with invalid value: ${n}`);const e=Math.floor(n),t=e%60,l=Math.floor(e/60);return`${Xe(l)}:${Xe(t)}`},Xe=n=>{const e=String(n),t=Math.max(0,2-e.length);return`${"0".repeat(t)}${e}`};function St(n){let e,t;return{c(){e=w("img"),this.h()},l(l){e=S(l,"IMG",{src:!0,alt:!0,width:!0,height:!0,style:!0}),this.h()},h(){Ee(e.src,t=Ie+"/assets/play.svg")||u(e,"src",t),u(e,"alt","Start GIF"),u(e,"width","16"),u(e,"height","32"),Le(e,"margin-left","4px")},m(l,s){j(l,e,s)},p:C,d(l){l&&_(e)}}}function Et(n){let e,t;return{c(){e=w("img"),this.h()},l(l){e=S(l,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){Ee(e.src,t=Ie+"/assets/pause.svg")||u(e,"src",t),u(e,"alt","Stop GIF"),u(e,"width","16"),u(e,"height","32")},m(l,s){j(l,e,s)},p:C,d(l){l&&_(e)}}}function At(n){let e,t;return{c(){e=w("img"),this.h()},l(l){e=S(l,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){Ee(e.src,t=Ie+"/assets/load.svg")||u(e,"src",t),u(e,"alt","Loading GIF"),u(e,"width","16"),u(e,"height","32")},m(l,s){j(l,e,s)},p:C,d(l){l&&_(e)}}}function It(n){let e,t,l,s,r;function a(h,c){return h[1]?At:h[0]?Et:St}let o=a(n),i=o(n);return{c(){e=w("button"),t=w("div"),i.c(),this.h()},l(h){e=S(h,"BUTTON",{class:!0});var c=D(e);t=S(c,"DIV",{class:!0});var f=D(t);i.l(f),f.forEach(_),c.forEach(_),this.h()},h(){u(t,"class","circle svelte-16x84bp"),u(e,"class",l=ze(n[3].class)+" svelte-16x84bp"),z(e,"play",n[0]&&!n[1])},m(h,c){j(h,e,c),p(e,t),i.m(t,null),s||(r=P(e,"click",Ge(n[2])),s=!0)},p(h,[c]){o===(o=a(h))&&i?i.p(h,c):(i.d(1),i=o(h),i&&(i.c(),i.m(t,null))),c&8&&l!==(l=ze(h[3].class)+" svelte-16x84bp")&&u(e,"class",l),c&11&&z(e,"play",h[0]&&!h[1])},i:C,o:C,d(h){h&&_(e),i.d(),s=!1,r()}}}function Nt(n,e,t){let{playing:l}=e,{loading:s}=e;const r=()=>{t(1,s=!0),t(0,l=!l)};return n.$$set=a=>{t(3,e=Ne(Ne({},e),Ce(a))),"playing"in a&&t(0,l=a.playing),"loading"in a&&t(1,s=a.loading)},e=Ce(e),[l,s,r,e]}class ut extends ${constructor(e){super(),x(this,e,Nt,It,Y,{playing:0,loading:1})}}function Ze(n){let e,t,l,s=!0,r=!1,a,o,i,h=Qe(n[15])+"",c,f,b,E,k,A,v,y,m,B,ee;function W(){cancelAnimationFrame(a),e.paused||(a=bt(W),r=!0),n[25].call(e)}function F(g){n[30](g)}function X(g){n[31](g)}let Z={class:"center"};return n[5]!==void 0&&(Z.playing=n[5]),n[6]!==void 0&&(Z.loading=n[6]),A=new ut({props:Z}),ce.push(()=>Te(A,"playing",F)),ce.push(()=>Te(A,"loading",X)),{c(){e=w("video"),o=R(),i=w("span"),c=K(h),f=R(),b=w("input"),k=R(),te(A.$$.fragment),this.h()},l(g){e=S(g,"VIDEO",{poster:!0,src:!0,preload:!0,style:!0,class:!0}),D(e).forEach(_),o=U(g),i=S(g,"SPAN",{class:!0});var N=D(i);c=H(N,h),N.forEach(_),f=U(g),b=S(g,"INPUT",{type:!0,min:!0,max:!0,step:!0,style:!0,class:!0}),k=U(g),ne(A.$$.fragment,g),this.h()},h(){u(e,"poster",n[1]),e.loop=n[4],Ee(e.src,t=n[0])||u(e,"src",t),u(e,"preload","metadata"),u(e,"style",l=`aspect-ratio: ${n[2]} / ${n[3]}`),u(e,"class","svelte-5yiaie"),n[8]===void 0&&ct(()=>n[26].call(e)),u(i,"class","svelte-5yiaie"),z(i,"hide",n[12]),u(b,"type","range"),u(b,"min",0),u(b,"max",n[8]),u(b,"step",.0166666),u(b,"style",E=`background-image: linear-gradient(90deg, var(--accent) ${n[13]}%, var(--background-2) ${n[13]}%);}`),u(b,"class","svelte-5yiaie"),z(b,"hide",n[12])},m(g,N){j(g,e,N),n[23](e),j(g,o,N),j(g,i,N),p(i,c),j(g,f,N),j(g,b,N),We(b,n[7]),j(g,k,N),le(A,g,N),m=!0,B||(ee=[P(e,"play",n[24]),P(e,"pause",n[24]),P(e,"timeupdate",W),P(e,"durationchange",n[26]),P(e,"waiting",n[19]),P(e,"playing",n[20]),P(e,"pause",n[20]),P(e,"ended",n[27]),P(e,"dblclick",Ge(ft(n[28]))),P(b,"change",n[29]),P(b,"input",n[29]),P(b,"click",Ge(jt))],B=!0)},p(g,N){(!m||N[0]&2)&&u(e,"poster",g[1]),(!m||N[0]&16)&&(e.loop=g[4]),(!m||N[0]&1&&!Ee(e.src,t=g[0]))&&u(e,"src",t),(!m||N[0]&12&&l!==(l=`aspect-ratio: ${g[2]} / ${g[3]}`))&&u(e,"style",l),N[0]&16384&&s!==(s=g[14])&&e[s?"pause":"play"](),!r&&N[0]&128&&!isNaN(g[7])&&(e.currentTime=g[7]),r=!1,(!m||N[0]&32768)&&h!==(h=Qe(g[15])+"")&&ae(c,h),(!m||N[0]&4096)&&z(i,"hide",g[12]),(!m||N[0]&256)&&u(b,"max",g[8]),(!m||N[0]&8192&&E!==(E=`background-image: linear-gradient(90deg, var(--accent) ${g[13]}%, var(--background-2) ${g[13]}%);}`))&&u(b,"style",E),N[0]&128&&We(b,g[7]),(!m||N[0]&4096)&&z(b,"hide",g[12]);const ie={};!v&&N[0]&32&&(v=!0,ie.playing=g[5],je(()=>v=!1)),!y&&N[0]&64&&(y=!0,ie.loading=g[6],je(()=>y=!1)),A.$set(ie)},i(g){m||(T(A.$$.fragment,g),m=!0)},o(g){V(A.$$.fragment,g),m=!1},d(g){g&&(_(e),_(o),_(i),_(f),_(b),_(k)),n[23](null),se(A,g),B=!1,Ae(ee)}}}function Ct(n){let e,t,l,s,r,a=n[9]&&Ze(n);return{c(){e=w("div"),a&&a.c(),this.h()},l(o){e=S(o,"DIV",{tabindex:!0,class:!0,style:!0});var i=D(e);a&&a.l(i),i.forEach(_),this.h()},h(){u(e,"tabindex","0"),u(e,"class",t="post-media player "+n[21].class+" svelte-5yiaie"),Le(e,"aspect-ratio",n[2]+"/"+n[3])},m(o,i){j(o,e,i),a&&a.m(e,null),n[32](e),l=!0,s||(r=[P(e,"click",n[22]),P(e,"keydown",n[18])],s=!0)},p(o,i){o[9]?a?(a.p(o,i),i[0]&512&&T(a,1)):(a=Ze(o),a.c(),T(a,1),a.m(e,null)):a&&(ve(),V(a,1,1,()=>{a=null}),be()),(!l||i[0]&2097152&&t!==(t="post-media player "+o[21].class+" svelte-5yiaie"))&&u(e,"class",t),(!l||i[0]&12)&&Le(e,"aspect-ratio",o[2]+"/"+o[3])},i(o){l||(T(a),l=!0)},o(o){V(a),l=!1},d(o){o&&_(e),a&&a.d(),n[32](null),s=!1,Ae(r)}}}const Je=5,jt=()=>{};function Tt(n,e,t){let l,s,r,a,{src:o}=e,{poster:i}=e,{width:h}=e,{height:c}=e,{loop:f}=e,b,E,k=!1,A=!1,v=0,y=0,m=!1;const B=()=>{t(7,v=Math.max(0,v-Je))},ee=()=>{t(7,v=Math.min(y,v+Je))},W=d=>{var oe;rt(d)?(oe=d.target)==null||oe.click():it(d)||d.key==="k"?(d.preventDefault(),t(5,k=!k)):d.key==="ArrowLeft"||d.key==="j"?B():(d.key==="ArrowRight"||d.key==="l")&&ee()},F=new IntersectionObserver(d=>{for(const oe of d)oe.isIntersecting?t(9,m=!0):E&&(t(5,k=!1),t(6,A=!1),E.addEventListener("error",()=>{t(9,m=!1)},{once:!0}),t(11,E.src="",E))},{rootMargin:"0px"}),X=()=>t(6,A=!0),Z=()=>t(6,A=!1);Fe(()=>F==null?void 0:F.observe(b)),Re(()=>F==null?void 0:F.unobserve(b));function g(d){Ue.call(this,n,d)}function N(d){ce[d?"unshift":"push"](()=>{E=d,t(11,E)})}function ie(){s=this.paused,t(14,s),t(5,k),t(9,m)}function J(){v=this.currentTime,t(7,v)}function re(){y=this.duration,t(8,y)}const fe=()=>{f||(t(6,A=!1),t(5,k=!1))},_e=d=>{d.offsetX<d.target.clientWidth/2?B():ee()};function ye(){v=ht(this.value),t(7,v)}function ke(d){k=d,t(5,k),t(9,m)}function q(d){A=d,t(6,A)}function O(d){ce[d?"unshift":"push"](()=>{b=d,t(10,b)})}return n.$$set=d=>{t(21,e=Ne(Ne({},e),Ce(d))),"src"in d&&t(0,o=d.src),"poster"in d&&t(1,i=d.poster),"width"in d&&t(2,h=d.width),"height"in d&&t(3,c=d.height),"loop"in d&&t(4,f=d.loop)},n.$$.update=()=>{n.$$.dirty[0]&384&&t(15,l=y-v),n.$$.dirty[0]&544&&t(5,k=m&&k),n.$$.dirty[0]&32&&t(14,s=!k),n.$$.dirty[0]&384&&t(13,r=v/y*98+1),n.$$.dirty[0]&96&&t(12,a=k&&!A)},e=Ce(e),[o,i,h,c,f,k,A,v,y,m,b,E,a,r,s,l,B,ee,W,X,Z,e,g,N,ie,J,re,fe,_e,ye,ke,q,O]}class En extends ${constructor(e){super(),x(this,e,Tt,Ct,Y,{src:0,poster:1,width:2,height:3,loop:4},null,[-1,-1])}}const Dt=n=>n.endsWith(".gif"),Pt=(n,e,t)=>Dt(e)?{static:t,animated:e}:{static:e,animated:n},Vt=n=>n.endsWith(".mp4")||n.endsWith(".webm"),An=(n,e,t)=>Vt(e)?{static:t,animated:e}:{static:e,animated:n},In=n=>n.some(e=>e.name==="loop");function Mt(n){let e,t,l,s,r,a,o,i,h,c,f,b,E;function k(y){n[11](y)}function A(y){n[12](y)}let v={class:"center"};return n[2]!==void 0&&(v.playing=n[2]),n[3]!==void 0&&(v.loading=n[3]),o=new ut({props:v}),ce.push(()=>Te(o,"playing",k)),ce.push(()=>Te(o,"loading",A)),{c(){e=w("div"),t=w("img"),a=R(),te(o.$$.fragment),this.h()},l(y){e=S(y,"DIV",{class:!0,style:!0});var m=D(e);t=S(m,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,width:!0,height:!0,tabindex:!0}),a=U(m),ne(o.$$.fragment,m),m.forEach(_),this.h()},h(){u(t,"class","post-media media-img svelte-1cndgba"),u(t,"loading","lazy"),u(t,"data-src",n[4]),u(t,"alt",l=n[0].id.toString()),u(t,"width",s=n[0].width),u(t,"height",r=n[0].height),u(t,"tabindex","0"),u(e,"class","container svelte-1cndgba"),u(e,"style",c=`aspect-ratio: ${n[0].width} / ${n[0].height}`)},m(y,m){j(y,e,m),p(e,t),n[7](t),p(e,a),le(o,e,null),f=!0,b||(E=[P(t,"click",n[6]),P(t,"keydown",n[8]),P(t,"load",n[9]),P(t,"error",n[10])],b=!0)},p(y,[m]){(!f||m&16)&&u(t,"data-src",y[4]),(!f||m&1&&l!==(l=y[0].id.toString()))&&u(t,"alt",l),(!f||m&1&&s!==(s=y[0].width))&&u(t,"width",s),(!f||m&1&&r!==(r=y[0].height))&&u(t,"height",r);const B={};!i&&m&4&&(i=!0,B.playing=y[2],je(()=>i=!1)),!h&&m&8&&(h=!0,B.loading=y[3],je(()=>h=!1)),o.$set(B),(!f||m&1&&c!==(c=`aspect-ratio: ${y[0].width} / ${y[0].height}`))&&u(e,"style",c)},i(y){f||(T(o.$$.fragment,y),f=!0)},o(y){V(o.$$.fragment,y),f=!1},d(y){y&&_(e),n[7](null),se(o),b=!1,Ae(E)}}}function Gt(n,e,t){let l,s,{post:r}=e,a,o=!1,i=!1;Fe(()=>Q==null?void 0:Q.observe(a)),Re(()=>Q==null?void 0:Q.unobserve(a));function h(v){Ue.call(this,n,v)}function c(v){ce[v?"unshift":"push"](()=>{a=v,t(1,a),t(2,o),t(5,l),t(0,r)})}const f=v=>{ot(v),it(v)&&(v.preventDefault(),t(3,i=!0),t(2,o=!o))},b=()=>t(3,i=!1),E=v=>{t(3,i=!1),v.target.src=`${Ie}/assets/failed-to-load.svg`};function k(v){o=v,t(2,o)}function A(v){i=v,t(3,i)}return n.$$set=v=>{"post"in v&&t(0,r=v.post)},n.$$.update=()=>{n.$$.dirty&1&&t(5,l=Pt(r.file_url,r.sample_url,r.preview_url)),n.$$.dirty&36&&t(4,s=o?l.animated:l.static),n.$$.dirty&38&&a&&t(1,a.src=o?l.animated:l.static,a)},[r,a,o,i,s,l,h,c,f,b,E,k,A]}class Nn extends ${constructor(e){super(),x(this,e,Gt,Mt,Y,{post:0})}}const Lt="https://api.rule34.xxx/index.php?page=dapi&s=comment&q=index&json=1",Ye=async(n=void 0)=>{if(typeof n!="number"&&n!==void 0)throw new TypeError("Invalid postId");const e=new URL(Lt);n!==void 0&&e.searchParams.append("post_id",String(n));const t=await fetch(e);if(!t.ok)throw new Error("Failed to get tag suggestions");const l=await t.text(),r=new DOMParser().parseFromString(l,"text/xml"),a=[];for(const o of r.getElementsByTagName("comment"))a.push(Ft(o.attributes));return a},Ft=n=>{const e=n.getNamedItem("creator"),t=n.getNamedItem("created_at"),l=n.getNamedItem("body");if(e==null||t==null||l==null)throw new Error(`Failed to parse comment, attribute was null. ${e}, ${t}, ${l}`);return{author:e.value,createdAt:t.value,content:l.value}},$e=6e4,Pe=n=>{if(!Rt(n))throw new TypeError("Invalid createdAt passed to formatCreatedAt");const e=new Date(n).getTime()/$e,l=new Date().getTime()/$e-e;if(l<1)return"just now";if(l<60)return me(l,"minute");const s=l/60;if(s<24)return me(s,"hour");const r=s/24;if(r<7)return me(r,"day");if(r<30.5)return me(r/7,"week");if(r<365.25)return me(r/30.5,"month");const a=r/365.25;return me(a,"year")},Rt=n=>(typeof n=="number"||typeof n=="string")&&new Date(n).toString()!=="Invalid Date",me=(n,e)=>{const t=n.toFixed();return`${t} ${e}${t==="1"?"":"s"} ago`};function Ut(n){let e,t,l=n[0].author+"",s,r,a,o=Pe(n[0].createdAt)+"",i,h,c,f=n[0].content+"",b;return{c(){e=w("div"),t=w("span"),s=K(l),r=R(),a=w("span"),i=K(o),h=R(),c=w("span"),b=K(f),this.h()},l(E){e=S(E,"DIV",{class:!0});var k=D(e);t=S(k,"SPAN",{class:!0});var A=D(t);s=H(A,l),A.forEach(_),r=U(k),a=S(k,"SPAN",{class:!0});var v=D(a);i=H(v,o),v.forEach(_),h=U(k),c=S(k,"SPAN",{class:!0});var y=D(c);b=H(y,f),y.forEach(_),k.forEach(_),this.h()},h(){u(t,"class","author svelte-gbprdj"),u(a,"class","created-at svelte-gbprdj"),u(c,"class","content svelte-gbprdj"),u(e,"class","svelte-gbprdj")},m(E,k){j(E,e,k),p(e,t),p(t,s),p(e,r),p(e,a),p(a,i),p(e,h),p(e,c),p(c,b)},p(E,[k]){k&1&&l!==(l=E[0].author+"")&&ae(s,l),k&1&&o!==(o=Pe(E[0].createdAt)+"")&&ae(i,o),k&1&&f!==(f=E[0].content+"")&&ae(b,f)},i:C,o:C,d(E){E&&_(e)}}}function Bt(n,e,t){let{comment:l}=e;return n.$$set=s=>{"comment"in s&&t(0,l=s.comment)},[l]}class qt extends ${constructor(e){super(),x(this,e,Bt,Ut,Y,{comment:0})}}function Ot(n){let e,t=Pe(n[0])+"",l;return{c(){e=w("span"),l=K(t),this.h()},l(s){e=S(s,"SPAN",{class:!0});var r=D(e);l=H(r,t),r.forEach(_),this.h()},h(){u(e,"class","svelte-1vqihm9")},m(s,r){j(s,e,r),p(e,l)},p(s,[r]){r&1&&t!==(t=Pe(s[0])+"")&&ae(l,t)},i:C,o:C,d(s){s&&_(e)}}}function zt(n,e,t){let{value:l}=e;return n.$$set=s=>{"value"in s&&t(0,l=s.value)},[l]}class Wt extends ${constructor(e){super(),x(this,e,zt,Ot,Y,{value:0})}}function Kt(n){let e,t=He(n[0])+"",l;return{c(){e=w("span"),l=K(t),this.h()},l(s){e=S(s,"SPAN",{"data-testid":!0,class:!0});var r=D(e);l=H(r,t),r.forEach(_),this.h()},h(){u(e,"data-testid","score"),u(e,"class","codicon codicon-heart svelte-ws217e")},m(s,r){j(s,e,r),p(e,l)},p(s,[r]){r&1&&t!==(t=He(s[0])+"")&&ae(l,t)},i:C,o:C,d(s){s&&_(e)}}}function Ht(n,e,t){let{value:l}=e;return n.$$set=s=>{"value"in s&&t(0,l=s.value)},[l]}class Qt extends ${constructor(e){super(),x(this,e,Ht,Kt,Y,{value:0})}}function xe(n){let e,t,l,s,r;return{c(){e=w("a"),t=w("i"),l=R(),s=K(n[1]),this.h()},l(a){e=S(a,"A",{href:!0,target:!0,class:!0});var o=D(e);t=S(o,"I",{class:!0}),D(t).forEach(_),l=U(o),s=H(o,n[1]),o.forEach(_),this.h()},h(){u(t,"class","codicon codicon-link"),u(e,"href",r=n[0].toString()),u(e,"target","_newtab"),u(e,"class","svelte-oadf5t")},m(a,o){j(a,e,o),p(e,t),p(e,l),p(e,s)},p(a,o){o&2&&ae(s,a[1]),o&1&&r!==(r=a[0].toString())&&u(e,"href",r)},d(a){a&&_(e)}}}function Xt(n){let e,t=n[0]&&xe(n);return{c(){t&&t.c(),e=pe()},l(l){t&&t.l(l),e=pe()},m(l,s){t&&t.m(l,s),j(l,e,s)},p(l,[s]){l[0]?t?t.p(l,s):(t=xe(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:C,o:C,d(l){l&&_(e),t&&t.d(l)}}}function Zt(n,e,t){let l,s,{source:r}=e;return n.$$set=a=>{"source"in a&&t(2,r=a.source)},n.$$.update=()=>{var a;n.$$.dirty&4&&t(0,l=mt(r)?new URL(r):null),n.$$.dirty&1&&t(1,s=(a=l==null?void 0:l.hostname)==null?void 0:a.replace(/^www./,""))},[l,s,r]}class Jt extends ${constructor(e){super(),x(this,e,Zt,Xt,Y,{source:2})}}function Yt(n){let e,t,l;return{c(){e=w("a"),t=w("i"),l=K(" File"),this.h()},l(s){e=S(s,"A",{href:!0,target:!0,class:!0});var r=D(e);t=S(r,"I",{class:!0}),D(t).forEach(_),l=H(r," File"),r.forEach(_),this.h()},h(){u(t,"class","codicon codicon-link-external"),u(e,"href",n[0]),u(e,"target","_newtab"),u(e,"class","svelte-oadf5t")},m(s,r){j(s,e,r),p(e,t),p(e,l)},p(s,[r]){r&1&&u(e,"href",s[0])},i:C,o:C,d(s){s&&_(e)}}}function $t(n,e,t){let{url:l}=e;return n.$$set=s=>{"url"in s&&t(0,l=s.url)},[l]}class xt extends ${constructor(e){super(),x(this,e,$t,Yt,Y,{url:0})}}function en(n){let e,t=n[0].charAt(0).toUpperCase()+"",l,s;return{c(){e=w("span"),l=K(t),this.h()},l(r){e=S(r,"SPAN",{title:!0,class:!0});var a=D(e);l=H(a,t),a.forEach(_),this.h()},h(){u(e,"title",s="Rated "+n[0]+"."),u(e,"class","svelte-1nbj6kf")},m(r,a){j(r,e,a),p(e,l)},p(r,[a]){a&1&&t!==(t=r[0].charAt(0).toUpperCase()+"")&&ae(l,t),a&1&&s!==(s="Rated "+r[0]+".")&&u(e,"title",s)},i:C,o:C,d(r){r&&_(e)}}}function tn(n,e,t){let{value:l}=e;return n.$$set=s=>{"value"in s&&t(0,l=s.value)},[l]}class nn extends ${constructor(e){super(),x(this,e,tn,en,Y,{value:0})}}function et(n,e,t){const l=n.slice();return l[12]=e[t],l}function tt(n,e,t){const l=n.slice();l[7]=e[t];const s=l[2].find(function(...a){return n[6](l[7],...a)})!==void 0;return l[8]=s,l}function nt(n){let e,t="•",l,s,r;return s=new Jt({props:{source:n[0].source}}),{c(){e=w("span"),e.textContent=t,l=R(),te(s.$$.fragment),this.h()},l(a){e=S(a,"SPAN",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-7hh8jk"&&(e.textContent=t),l=U(a),ne(s.$$.fragment,a),this.h()},h(){u(e,"class","svelte-vujgty")},m(a,o){j(a,e,o),j(a,l,o),le(s,a,o),r=!0},p(a,o){const i={};o&1&&(i.source=a[0].source),s.$set(i)},i(a){r||(T(s.$$.fragment,a),r=!0)},o(a){V(s.$$.fragment,a),r=!1},d(a){a&&(_(e),_(l)),se(s,a)}}}function ln(n){let e,t,l,s={ctx:n,current:null,token:null,hasCatch:!1,pending:cn,then:rn,catch:an,value:11,blocks:[,,,]};return Ke(t=Ye(n[0].id),s),{c(){e=pe(),s.block.c()},l(r){e=pe(),s.block.l(r)},m(r,a){j(r,e,a),s.block.m(r,s.anchor=a),s.mount=()=>e.parentNode,s.anchor=e,l=!0},p(r,a){n=r,s.ctx=n,a&1&&t!==(t=Ye(n[0].id))&&Ke(t,s)||gt(s,n,a)},i(r){l||(T(s.block),l=!0)},o(r){for(let a=0;a<3;a+=1){const o=s.blocks[a];V(o)}l=!1},d(r){r&&_(e),s.block.d(r),s.token=null,s=null}}}function sn(n){let e,t,l=De(n[0].tags),s=[];for(let a=0;a<l.length;a+=1)s[a]=st(tt(n,l,a));const r=a=>V(s[a],1,1,()=>{s[a]=null});return{c(){e=w("ul");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=S(a,"UL",{class:!0});var o=D(e);for(let i=0;i<s.length;i+=1)s[i].l(o);o.forEach(_),this.h()},h(){u(e,"class","tags svelte-vujgty")},m(a,o){j(a,e,o);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(a,o){if(o&5){l=De(a[0].tags);let i;for(i=0;i<l.length;i+=1){const h=tt(a,l,i);s[i]?(s[i].p(h,o),T(s[i],1)):(s[i]=st(h),s[i].c(),T(s[i],1),s[i].m(e,null))}for(ve(),i=l.length;i<s.length;i+=1)r(i);be()}},i(a){if(!t){for(let o=0;o<l.length;o+=1)T(s[o]);t=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)V(s[o]);t=!1},d(a){a&&_(e),at(s,a)}}}function an(n){return{c:C,l:C,m:C,p:C,i:C,o:C,d:C}}function rn(n){let e,t,l,s;const r=[un,on],a=[];function o(i,h){return i[11].length>0?0:1}return e=o(n),t=a[e]=r[e](n),{c(){t.c(),l=pe()},l(i){t.l(i),l=pe()},m(i,h){a[e].m(i,h),j(i,l,h),s=!0},p(i,h){let c=e;e=o(i),e===c?a[e].p(i,h):(ve(),V(a[c],1,1,()=>{a[c]=null}),be(),t=a[e],t?t.p(i,h):(t=a[e]=r[e](i),t.c()),T(t,1),t.m(l.parentNode,l))},i(i){s||(T(t),s=!0)},o(i){V(t),s=!1},d(i){i&&_(l),a[e].d(i)}}}function on(n){let e,t="Comments for this post are not available";return{c(){e=w("span"),e.textContent=t,this.h()},l(l){e=S(l,"SPAN",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-4t2lxe"&&(e.textContent=t),this.h()},h(){u(e,"class","no-comments svelte-vujgty")},m(l,s){j(l,e,s)},p:C,i:C,o:C,d(l){l&&_(e)}}}function un(n){let e,t,l=De(n[11]),s=[];for(let a=0;a<l.length;a+=1)s[a]=lt(et(n,l,a));const r=a=>V(s[a],1,1,()=>{s[a]=null});return{c(){e=w("ul");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=S(a,"UL",{class:!0});var o=D(e);for(let i=0;i<s.length;i+=1)s[i].l(o);o.forEach(_),this.h()},h(){u(e,"class","comments svelte-vujgty")},m(a,o){j(a,e,o);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(a,o){if(o&1){l=De(a[11]);let i;for(i=0;i<l.length;i+=1){const h=et(a,l,i);s[i]?(s[i].p(h,o),T(s[i],1)):(s[i]=lt(h),s[i].c(),T(s[i],1),s[i].m(e,null))}for(ve(),i=l.length;i<s.length;i+=1)r(i);be()}},i(a){if(!t){for(let o=0;o<l.length;o+=1)T(s[o]);t=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)V(s[o]);t=!1},d(a){a&&_(e),at(s,a)}}}function lt(n){let e,t;return e=new qt({props:{comment:n[12]}}),{c(){te(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const r={};s&1&&(r.comment=l[12]),e.$set(r)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function cn(n){let e,t;return e=new dt({}),{c(){te(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p:C,i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function st(n){let e,t;function l(){return n[5](n[8],n[7])}return e=new pt({props:{tag:n[7],active:n[8]}}),e.$on("click",l),{c(){te(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,r){le(e,s,r),t=!0},p(s,r){n=s;const a={};r&1&&(a.tag=n[7]),r&5&&(a.active=n[8]),e.$set(a)},i(s){t||(T(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function fn(n){let e,t,l,s,r,a="•",o,i,h,c,f="•",b,E,k,A,v="•",y,m,B,ee,W,F,X,Z=n[0].tags.length+"",g,N,ie,J,re,fe=(n[0].comment_count||"No")+"",_e,ye,ke,q,O,d,oe,Be;l=new nn({props:{value:n[0].rating}}),i=new Qt({props:{value:n[0].score}}),E=new Wt({props:{value:n[0].change}}),m=new xt({props:{url:n[0].file_url}});let G=n[0].source&&nt(n);const qe=[sn,ln],ue=[];function Oe(I,M){return I[1]==="tags"?0:1}return q=Oe(n),O=ue[q]=qe[q](n),{c(){e=w("div"),t=w("div"),te(l.$$.fragment),s=R(),r=w("span"),r.textContent=a,o=R(),te(i.$$.fragment),h=R(),c=w("span"),c.textContent=f,b=R(),te(E.$$.fragment),k=R(),A=w("span"),A.textContent=v,y=R(),te(m.$$.fragment),B=R(),G&&G.c(),ee=R(),W=w("div"),F=w("button"),X=w("span"),g=K(Z),N=K(" tags"),ie=R(),J=w("button"),re=w("span"),_e=K(fe),ye=K(" comments"),ke=R(),O.c(),this.h()},l(I){e=S(I,"DIV",{class:!0});var M=D(e);t=S(M,"DIV",{class:!0});var L=D(t);ne(l.$$.fragment,L),s=U(L),r=S(L,"SPAN",{class:!0,"data-svelte-h":!0}),Se(r)!=="svelte-7hh8jk"&&(r.textContent=a),o=U(L),ne(i.$$.fragment,L),h=U(L),c=S(L,"SPAN",{class:!0,"data-svelte-h":!0}),Se(c)!=="svelte-7hh8jk"&&(c.textContent=f),b=U(L),ne(E.$$.fragment,L),k=U(L),A=S(L,"SPAN",{class:!0,"data-svelte-h":!0}),Se(A)!=="svelte-7hh8jk"&&(A.textContent=v),y=U(L),ne(m.$$.fragment,L),B=U(L),G&&G.l(L),L.forEach(_),ee=U(M),W=S(M,"DIV",{class:!0});var he=D(W);F=S(he,"BUTTON",{class:!0});var we=D(F);X=S(we,"SPAN",{class:!0});var ge=D(X);g=H(ge,Z),N=H(ge," tags"),ge.forEach(_),we.forEach(_),ie=U(he),J=S(he,"BUTTON",{class:!0});var de=D(J);re=S(de,"SPAN",{class:!0});var Ve=D(re);_e=H(Ve,fe),ye=H(Ve," comments"),Ve.forEach(_),de.forEach(_),he.forEach(_),ke=U(M),O.l(M),M.forEach(_),this.h()},h(){u(r,"class","svelte-vujgty"),u(c,"class","svelte-vujgty"),u(A,"class","svelte-vujgty"),u(t,"class","summary svelte-vujgty"),u(X,"class","svelte-vujgty"),u(F,"class","codicon codicon-tag svelte-vujgty"),z(F,"active",n[1]==="tags"),u(re,"class","svelte-vujgty"),u(J,"class","codicon codicon-comment-discussion svelte-vujgty"),z(J,"active",n[1]==="comments"),u(W,"class","tabs svelte-vujgty"),u(e,"class","details svelte-vujgty")},m(I,M){j(I,e,M),p(e,t),le(l,t,null),p(t,s),p(t,r),p(t,o),le(i,t,null),p(t,h),p(t,c),p(t,b),le(E,t,null),p(t,k),p(t,A),p(t,y),le(m,t,null),p(t,B),G&&G.m(t,null),p(e,ee),p(e,W),p(W,F),p(F,X),p(X,g),p(X,N),p(W,ie),p(W,J),p(J,re),p(re,_e),p(re,ye),p(e,ke),ue[q].m(e,null),d=!0,oe||(Be=[P(F,"click",n[3]),P(J,"click",n[4])],oe=!0)},p(I,[M]){const L={};M&1&&(L.value=I[0].rating),l.$set(L);const he={};M&1&&(he.value=I[0].score),i.$set(he);const we={};M&1&&(we.value=I[0].change),E.$set(we);const ge={};M&1&&(ge.url=I[0].file_url),m.$set(ge),I[0].source?G?(G.p(I,M),M&1&&T(G,1)):(G=nt(I),G.c(),T(G,1),G.m(t,null)):G&&(ve(),V(G,1,1,()=>{G=null}),be()),(!d||M&1)&&Z!==(Z=I[0].tags.length+"")&&ae(g,Z),(!d||M&2)&&z(F,"active",I[1]==="tags"),(!d||M&1)&&fe!==(fe=(I[0].comment_count||"No")+"")&&ae(_e,fe),(!d||M&2)&&z(J,"active",I[1]==="comments");let de=q;q=Oe(I),q===de?ue[q].p(I,M):(ve(),V(ue[de],1,1,()=>{ue[de]=null}),be(),O=ue[q],O?O.p(I,M):(O=ue[q]=qe[q](I),O.c()),T(O,1),O.m(e,null))},i(I){d||(T(l.$$.fragment,I),T(i.$$.fragment,I),T(E.$$.fragment,I),T(m.$$.fragment,I),T(G),T(O),d=!0)},o(I){V(l.$$.fragment,I),V(i.$$.fragment,I),V(E.$$.fragment,I),V(m.$$.fragment,I),V(G),V(O),d=!1},d(I){I&&_(e),se(l),se(i),se(E),se(m),G&&G.d(),ue[q].d(),oe=!1,Ae(Be)}}}function hn(n,e,t){let l;_t(n,Me,c=>t(2,l=c));let{post:s}=e,r="tags";const a=()=>{t(1,r="tags")},o=()=>{t(1,r="comments")},i=(c,f)=>c?Me.removeByName(f.name):Me.addOrReplace({...f,modifier:"+"}),h=(c,f)=>f.name===c.name;return n.$$set=c=>{"post"in c&&t(0,s=c.post)},[s,r,l,a,o,i,h]}class Cn extends ${constructor(e){super(),x(this,e,hn,fn,Y,{post:0})}}export{Cn as D,Nn as G,Sn as I,En as V,In as a,An as g,rt as i};
