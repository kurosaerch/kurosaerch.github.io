import{v as N,s as Z,f as E,g as S,h as C,d as g,j as u,L as z,i as T,u as k,F as V,K as me,o as Te,O as De,M as Ce,p as re,r as Ve,N as Ae,R as qe,S as Fe,D as de,k as Ne,a as U,l as K,c as j,m as W,T as et,H as Le,Q as tt,n as ee,I as ye,J as nt,e as fe,y as ke,C as lt,P as Ye}from"./scheduler.6c5d9662.js";import{S as Y,i as $,a as D,g as _e,t as q,c as he,f as we,b as te,d as ne,m as le,e as se}from"./index.8c724fb2.js";import{b as Pe}from"./paths.a85f3ec6.js";import{i as st,h as Ge,u as at}from"./tags.afa77e19.js";import{e as Ee}from"./each.e59479a4.js";import{L as rt}from"./LoadingAnimation.4f862ba3.js";import{f as Ue}from"./format-tag.d6c065e3.js";import{a as Ie}from"./active-tags-store.72f5ae3d.js";import{S as it}from"./SimpleTag.12ca1edf.js";const ot=typeof window<"u";let ut=ot?n=>requestAnimationFrame(n):N;const ct="https://api.rule34.xxx/index.php?page=dapi&s=comment&q=index&json=1",je=async(n=void 0)=>{if(typeof n!="number"&&n!==void 0)throw new TypeError("Invalid postId");const e=new URL(ct);n!==void 0&&e.searchParams.append("post_id",String(n));const t=await fetch(e);if(!t.ok)throw new Error("Failed to get tag suggestions");const s=await t.text(),r=new DOMParser().parseFromString(s,"text/xml"),a=[];for(const o of r.getElementsByTagName("comment"))a.push(ft(o.attributes));return a},ft=n=>{const e=n.getNamedItem("creator"),t=n.getNamedItem("created_at"),s=n.getNamedItem("body");if(e==null||t==null||s==null)throw new Error(`Failed to parse comment, attribute was null. ${e}, ${t}, ${s}`);return{author:e.value,createdAt:t.value,content:s.value}},$e=n=>(n==null?void 0:n.key)===" ",Me=n=>(n==null?void 0:n.key)==="Enter",_t="1250px",O=new IntersectionObserver(n=>{for(const e of n){const t=e.isIntersecting?e.target.getAttribute("data-src")??"":"";e.target.setAttribute("src",t)}},{rootMargin:_t});function ht(n){let e,t,s,l,r,a,o,i,h;return{c(){e=E("div"),t=E("img"),this.h()},l(c){e=S(c,"DIV",{class:!0});var _=C(e);t=S(_,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,style:!0,width:!0,height:!0,tabindex:!0}),_.forEach(g),this.h()},h(){u(t,"class","post-media svelte-dgcl67"),u(t,"loading","lazy"),u(t,"data-src",s=n[0].sample_url),u(t,"alt",l=n[0].id.toString()),u(t,"style",r=`aspect-ratio: ${n[0].width} / ${n[0].height}`),u(t,"width",a=n[0].width),u(t,"height",o=n[0].height),u(t,"tabindex","0"),u(e,"class","svelte-dgcl67"),z(e,"expandable",n[3]),z(e,"open",n[1])},m(c,_){T(c,e,_),k(e,t),n[6](t),i||(h=[V(t,"click",n[5]),V(t,"keydown",n[7])],i=!0)},p(c,[_]){_&1&&s!==(s=c[0].sample_url)&&u(t,"data-src",s),_&1&&l!==(l=c[0].id.toString())&&u(t,"alt",l),_&1&&r!==(r=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&u(t,"style",r),_&1&&a!==(a=c[0].width)&&u(t,"width",a),_&1&&o!==(o=c[0].height)&&u(t,"height",o),_&8&&z(e,"expandable",c[3]),_&2&&z(e,"open",c[1])},i:N,o:N,d(c){c&&g(e),n[6](null),i=!1,me(h)}}}function gt(n,e,t){let s,l,{post:r}=e,{open:a}=e,o;Te(()=>{O==null||O.observe(o)}),De(()=>{O==null||O.unobserve(o)});function i(_){Ce.call(this,n,_)}function h(_){re[_?"unshift":"push"](()=>{o=_,t(2,o)})}const c=_=>{Me(_)&&_.target.click()};return n.$$set=_=>{"post"in _&&t(0,r=_.post),"open"in _&&t(1,a=_.open)},n.$$.update=()=>{n.$$.dirty&1&&t(4,s=r.width/r.height),n.$$.dirty&16&&t(3,l=s<.33)},[r,a,o,l,s,i,h,c]}class an extends Y{constructor(e){super(),$(this,e,gt,ht,Z,{post:0,open:1})}}const Be=n=>{if(typeof n!="number")throw new TypeError(`Attempted to call formatVideoTime with invalid value: ${n}`);const e=Math.floor(n),t=e%60,s=Math.floor(e/60);return`${Re(s)}:${Re(t)}`},Re=n=>{const e=String(n),t=Math.max(0,2-e.length);return`${"0".repeat(t)}${e}`};function dt(n){let e,t;return{c(){e=E("img"),this.h()},l(s){e=S(s,"IMG",{src:!0,alt:!0,width:!0,height:!0,style:!0}),this.h()},h(){de(e.src,t=Pe+"/assets/play.svg")||u(e,"src",t),u(e,"alt","Start GIF"),u(e,"width","16"),u(e,"height","32"),Ne(e,"margin-left","4px")},m(s,l){T(s,e,l)},p:N,d(s){s&&g(e)}}}function mt(n){let e,t;return{c(){e=E("img"),this.h()},l(s){e=S(s,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){de(e.src,t=Pe+"/assets/pause.svg")||u(e,"src",t),u(e,"alt","Stop GIF"),u(e,"width","16"),u(e,"height","32")},m(s,l){T(s,e,l)},p:N,d(s){s&&g(e)}}}function pt(n){let e,t;return{c(){e=E("img"),this.h()},l(s){e=S(s,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){de(e.src,t=Pe+"/assets/load.svg")||u(e,"src",t),u(e,"alt","Loading GIF"),u(e,"width","16"),u(e,"height","32")},m(s,l){T(s,e,l)},p:N,d(s){s&&g(e)}}}function bt(n){let e,t,s,l,r;function a(h,c){return h[1]?pt:h[0]?mt:dt}let o=a(n),i=o(n);return{c(){e=E("button"),t=E("div"),i.c(),this.h()},l(h){e=S(h,"BUTTON",{class:!0});var c=C(e);t=S(c,"DIV",{class:!0});var _=C(t);i.l(_),_.forEach(g),c.forEach(g),this.h()},h(){u(t,"class","circle svelte-gangdl"),u(e,"class",s=Ve(n[3].class)+" svelte-gangdl"),z(e,"play",n[0]&&!n[1])},m(h,c){T(h,e,c),k(e,t),i.m(t,null),l||(r=V(e,"click",Ae(n[2])),l=!0)},p(h,[c]){o===(o=a(h))&&i?i.p(h,c):(i.d(1),i=o(h),i&&(i.c(),i.m(t,null))),c&8&&s!==(s=Ve(h[3].class)+" svelte-gangdl")&&u(e,"class",s),c&11&&z(e,"play",h[0]&&!h[1])},i:N,o:N,d(h){h&&g(e),i.d(),l=!1,r()}}}function vt(n,e,t){let{playing:s}=e,{loading:l}=e;const r=()=>{t(1,l=!0),t(0,s=!s)};return n.$$set=a=>{t(3,e=qe(qe({},e),Fe(a))),"playing"in a&&t(0,s=a.playing),"loading"in a&&t(1,l=a.loading)},e=Fe(e),[s,l,r,e]}class xe extends Y{constructor(e){super(),$(this,e,vt,bt,Z,{playing:0,loading:1})}}function ze(n){let e,t,s,l=!0,r=!1,a,o,i,h=Be(n[15])+"",c,_,v,w,y,A,m,p,b,G,H;function ae(){cancelAnimationFrame(a),e.paused||(a=ut(ae),r=!0),n[24].call(e)}function L(d){n[29](d)}function x(d){n[30](d)}let J={class:"center"};return n[5]!==void 0&&(J.playing=n[5]),n[6]!==void 0&&(J.loading=n[6]),A=new xe({props:J}),re.push(()=>we(A,"playing",L)),re.push(()=>we(A,"loading",x)),{c(){e=E("video"),o=U(),i=E("span"),c=K(h),_=U(),v=E("input"),y=U(),te(A.$$.fragment),this.h()},l(d){e=S(d,"VIDEO",{poster:!0,src:!0,preload:!0,style:!0,class:!0}),C(e).forEach(g),o=j(d),i=S(d,"SPAN",{class:!0});var I=C(i);c=W(I,h),I.forEach(g),_=j(d),v=S(d,"INPUT",{type:!0,min:!0,max:!0,step:!0,style:!0,class:!0}),y=j(d),ne(A.$$.fragment,d),this.h()},h(){u(e,"poster",n[1]),e.loop=n[4],de(e.src,t=n[0])||u(e,"src",t),u(e,"preload","metadata"),u(e,"style",s=`aspect-ratio: ${n[2]} / ${n[3]}`),u(e,"class","svelte-degafo"),n[8]===void 0&&et(()=>n[25].call(e)),u(i,"class","svelte-degafo"),z(i,"hide",n[12]),u(v,"type","range"),u(v,"min",0),u(v,"max",n[8]),u(v,"step",.0166666),u(v,"style",w=`background-image: linear-gradient(90deg, var(--accent) ${n[13]}%, var(--background-2) ${n[13]}%);}`),u(v,"class","svelte-degafo"),z(v,"hide",n[12])},m(d,I){T(d,e,I),n[22](e),T(d,o,I),T(d,i,I),k(i,c),T(d,_,I),T(d,v,I),Le(v,n[7]),T(d,y,I),le(A,d,I),b=!0,G||(H=[V(e,"play",n[23]),V(e,"pause",n[23]),V(e,"timeupdate",ae),V(e,"durationchange",n[25]),V(e,"waiting",n[19]),V(e,"playing",n[20]),V(e,"pause",n[20]),V(e,"ended",n[26]),V(e,"dblclick",Ae(tt(n[27]))),V(v,"change",n[28]),V(v,"input",n[28]),V(v,"click",Ae(kt))],G=!0)},p(d,I){(!b||I[0]&2)&&u(e,"poster",d[1]),(!b||I[0]&16)&&(e.loop=d[4]),(!b||I[0]&1&&!de(e.src,t=d[0]))&&u(e,"src",t),(!b||I[0]&12&&s!==(s=`aspect-ratio: ${d[2]} / ${d[3]}`))&&u(e,"style",s),I[0]&16384&&l!==(l=d[14])&&e[l?"pause":"play"](),!r&&I[0]&128&&!isNaN(d[7])&&(e.currentTime=d[7]),r=!1,(!b||I[0]&32768)&&h!==(h=Be(d[15])+"")&&ee(c,h),(!b||I[0]&4096)&&z(i,"hide",d[12]),(!b||I[0]&256)&&u(v,"max",d[8]),(!b||I[0]&8192&&w!==(w=`background-image: linear-gradient(90deg, var(--accent) ${d[13]}%, var(--background-2) ${d[13]}%);}`))&&u(v,"style",w),I[0]&128&&Le(v,d[7]),(!b||I[0]&4096)&&z(v,"hide",d[12]);const F={};!m&&I[0]&32&&(m=!0,F.playing=d[5],ye(()=>m=!1)),!p&&I[0]&64&&(p=!0,F.loading=d[6],ye(()=>p=!1)),A.$set(F)},i(d){b||(D(A.$$.fragment,d),b=!0)},o(d){q(A.$$.fragment,d),b=!1},d(d){d&&(g(e),g(o),g(i),g(_),g(v),g(y)),n[22](null),se(A,d),G=!1,me(H)}}}function yt(n){let e,t,s,l,r=n[9]&&ze(n);return{c(){e=E("div"),r&&r.c(),this.h()},l(a){e=S(a,"DIV",{tabindex:!0,class:!0,style:!0});var o=C(e);r&&r.l(o),o.forEach(g),this.h()},h(){u(e,"tabindex","0"),u(e,"class","post-media player svelte-degafo"),Ne(e,"aspect-ratio",n[2]+"/"+n[3])},m(a,o){T(a,e,o),r&&r.m(e,null),n[31](e),t=!0,s||(l=[V(e,"click",n[21]),V(e,"keydown",n[18])],s=!0)},p(a,o){a[9]?r?(r.p(a,o),o[0]&512&&D(r,1)):(r=ze(a),r.c(),D(r,1),r.m(e,null)):r&&(_e(),q(r,1,1,()=>{r=null}),he()),(!t||o[0]&12)&&Ne(e,"aspect-ratio",a[2]+"/"+a[3])},i(a){t||(D(r),t=!0)},o(a){q(r),t=!1},d(a){a&&g(e),r&&r.d(),n[31](null),s=!1,me(l)}}}const Oe=5,kt=()=>{};function wt(n,e,t){let s,l,r,a,{src:o}=e,{poster:i}=e,{width:h}=e,{height:c}=e,{loop:_}=e,v,w,y=!1,A=!1,m=0,p=0,b=!1;const G=()=>{t(7,m=Math.max(0,m-Oe))},H=()=>{t(7,m=Math.min(p,m+Oe))},ae=f=>{Me(f)?f.target.click():$e(f)?(f.preventDefault(),t(5,y=!y)):f.key==="ArrowLeft"?G():f.key==="ArrowRight"&&H()},L=new IntersectionObserver(f=>{for(const P of f)P.isIntersecting?t(9,b=!0):w&&(t(5,y=!1),t(6,A=!1),w.addEventListener("error",()=>{t(9,b=!1)},{once:!0}),t(11,w.src="",w))},{rootMargin:"0px"});Te(()=>{L&&L.observe(v)}),De(()=>{L&&L.unobserve(v)});const x=()=>{t(6,A=!0)},J=()=>{t(6,A=!1)};function d(f){Ce.call(this,n,f)}function I(f){re[f?"unshift":"push"](()=>{w=f,t(11,w)})}function F(){l=this.paused,t(14,l),t(5,y),t(9,b)}function R(){m=this.currentTime,t(7,m)}function Q(){p=this.duration,t(8,p)}const ge=()=>{_||(t(6,A=!1),t(5,y=!1))},pe=f=>{f.offsetX<f.target.clientWidth/2?G():H()};function M(){m=nt(this.value),t(7,m)}function be(f){y=f,t(5,y),t(9,b)}function X(f){A=f,t(6,A)}function ve(f){re[f?"unshift":"push"](()=>{v=f,t(10,v)})}return n.$$set=f=>{"src"in f&&t(0,o=f.src),"poster"in f&&t(1,i=f.poster),"width"in f&&t(2,h=f.width),"height"in f&&t(3,c=f.height),"loop"in f&&t(4,_=f.loop)},n.$$.update=()=>{n.$$.dirty[0]&384&&t(15,s=p-m),n.$$.dirty[0]&544&&t(5,y=b&&y),n.$$.dirty[0]&32&&t(14,l=!y),n.$$.dirty[0]&384&&t(13,r=m/p*98+1),n.$$.dirty[0]&96&&t(12,a=y&&!A)},[o,i,h,c,_,y,A,m,p,b,v,w,a,r,l,s,G,H,ae,x,J,d,I,F,R,Q,ge,pe,M,be,X,ve]}class rn extends Y{constructor(e){super(),$(this,e,wt,yt,Z,{src:0,poster:1,width:2,height:3,loop:4},null,[-1,-1])}}function Et(n){let e,t,s,l,r,a,o,i,h,c,_,v,w;function y(p){n[11](p)}function A(p){n[12](p)}let m={class:"center"};return n[2]!==void 0&&(m.playing=n[2]),n[3]!==void 0&&(m.loading=n[3]),o=new xe({props:m}),re.push(()=>we(o,"playing",y)),re.push(()=>we(o,"loading",A)),{c(){e=E("div"),t=E("img"),a=U(),te(o.$$.fragment),this.h()},l(p){e=S(p,"DIV",{class:!0,style:!0});var b=C(e);t=S(b,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,width:!0,height:!0,tabindex:!0}),a=j(b),ne(o.$$.fragment,b),b.forEach(g),this.h()},h(){u(t,"class","post-media media-img svelte-6pgxdn"),u(t,"loading","lazy"),u(t,"data-src",n[4]),u(t,"alt",s=n[0].id.toString()),u(t,"width",l=n[0].width),u(t,"height",r=n[0].height),u(t,"tabindex","0"),u(e,"class","container svelte-6pgxdn"),u(e,"style",c=`aspect-ratio: ${n[0].width} / ${n[0].height}`)},m(p,b){T(p,e,b),k(e,t),n[8](t),k(e,a),le(o,e,null),_=!0,v||(w=[V(t,"click",n[7]),V(t,"keydown",n[9]),V(t,"load",n[10])],v=!0)},p(p,[b]){(!_||b&16)&&u(t,"data-src",p[4]),(!_||b&1&&s!==(s=p[0].id.toString()))&&u(t,"alt",s),(!_||b&1&&l!==(l=p[0].width))&&u(t,"width",l),(!_||b&1&&r!==(r=p[0].height))&&u(t,"height",r);const G={};!i&&b&4&&(i=!0,G.playing=p[2],ye(()=>i=!1)),!h&&b&8&&(h=!0,G.loading=p[3],ye(()=>h=!1)),o.$set(G),(!_||b&1&&c!==(c=`aspect-ratio: ${p[0].width} / ${p[0].height}`))&&u(e,"style",c)},i(p){_||(D(o.$$.fragment,p),_=!0)},o(p){q(o.$$.fragment,p),_=!1},d(p){p&&g(e),n[8](null),se(o),v=!1,me(w)}}}function St(n,e,t){let s,l,r,{post:a}=e,o,i=!1,h=!1;Te(()=>{O==null||O.observe(o)}),De(()=>{O==null||O.unobserve(o)});function c(m){Ce.call(this,n,m)}function _(m){re[m?"unshift":"push"](()=>{o=m,t(1,o),t(2,i),t(6,l),t(5,s),t(0,a)})}const v=m=>{Me(m)&&m.target.click(),$e(m)&&(m.preventDefault(),t(3,h=!0),t(2,i=!i))},w=()=>t(3,h=!1);function y(m){i=m,t(2,i)}function A(m){h=m,t(3,h)}return n.$$set=m=>{"post"in m&&t(0,a=m.post)},n.$$.update=()=>{n.$$.dirty&1&&t(5,s=a.sample_url.endsWith(".gif")?a.preview_url:a.sample_url),n.$$.dirty&1&&t(6,l=a.sample_url.endsWith(".gif")?a.sample_url:a.file_url),n.$$.dirty&100&&t(4,r=i?l:s),n.$$.dirty&102&&o&&t(1,o.src=i?l:s,o)},[a,o,i,h,r,s,l,c,_,v,w,y,A]}class on extends Y{constructor(e){super(),$(this,e,St,Et,Z,{post:0})}}const Ke=6e4,Se=n=>{if(!It(n))throw new TypeError("Invalid createdAt passed to formatCreatedAt");const e=new Date(n).getTime()/Ke,s=new Date().getTime()/Ke-e;if(s<1)return"just now";if(s<60)return ce(s,"minute");const l=s/60;if(l<24)return ce(l,"hour");const r=l/24;if(r<7)return ce(r,"day");if(r<30.5)return ce(r/7,"week");if(r<365.25)return ce(r/30.5,"month");const a=r/365.25;return ce(a,"year")},It=n=>(typeof n=="number"||typeof n=="string")&&new Date(n).toString()!=="Invalid Date",ce=(n,e)=>{const t=n.toFixed();return`${t} ${e}${t==="1"?"":"s"} ago`};function At(n){let e,t,s=n[0].author+"",l,r,a,o=Se(n[0].createdAt)+"",i,h,c,_=n[0].content+"",v;return{c(){e=E("div"),t=E("span"),l=K(s),r=U(),a=E("span"),i=K(o),h=U(),c=E("span"),v=K(_),this.h()},l(w){e=S(w,"DIV",{class:!0});var y=C(e);t=S(y,"SPAN",{class:!0});var A=C(t);l=W(A,s),A.forEach(g),r=j(y),a=S(y,"SPAN",{class:!0});var m=C(a);i=W(m,o),m.forEach(g),h=j(y),c=S(y,"SPAN",{class:!0});var p=C(c);v=W(p,_),p.forEach(g),y.forEach(g),this.h()},h(){u(t,"class","author svelte-gbprdj"),u(a,"class","created-at svelte-gbprdj"),u(c,"class","content svelte-gbprdj"),u(e,"class","svelte-gbprdj")},m(w,y){T(w,e,y),k(e,t),k(t,l),k(e,r),k(e,a),k(a,i),k(e,h),k(e,c),k(c,v)},p(w,[y]){y&1&&s!==(s=w[0].author+"")&&ee(l,s),y&1&&o!==(o=Se(w[0].createdAt)+"")&&ee(i,o),y&1&&_!==(_=w[0].content+"")&&ee(v,_)},i:N,o:N,d(w){w&&g(e)}}}function Nt(n,e,t){let{comment:s}=e;return n.$$set=l=>{"comment"in l&&t(0,s=l.comment)},[s]}class Tt extends Y{constructor(e){super(),$(this,e,Nt,At,Z,{comment:0})}}function Dt(n){let e,t=Se(n[0])+"",s;return{c(){e=E("span"),s=K(t),this.h()},l(l){e=S(l,"SPAN",{class:!0});var r=C(e);s=W(r,t),r.forEach(g),this.h()},h(){u(e,"class","svelte-1vqihm9")},m(l,r){T(l,e,r),k(e,s)},p(l,[r]){r&1&&t!==(t=Se(l[0])+"")&&ee(s,t)},i:N,o:N,d(l){l&&g(e)}}}function Ct(n,e,t){let{value:s}=e;return n.$$set=l=>{"value"in l&&t(0,s=l.value)},[s]}class Pt extends Y{constructor(e){super(),$(this,e,Ct,Dt,Z,{value:0})}}function Mt(n){let e,t=Ue(n[0])+"",s;return{c(){e=E("span"),s=K(t),this.h()},l(l){e=S(l,"SPAN",{"data-testid":!0,class:!0});var r=C(e);s=W(r,t),r.forEach(g),this.h()},h(){u(e,"data-testid","score"),u(e,"class","codicon codicon-heart svelte-ws217e")},m(l,r){T(l,e,r),k(e,s)},p(l,[r]){r&1&&t!==(t=Ue(l[0])+"")&&ee(s,t)},i:N,o:N,d(l){l&&g(e)}}}function Vt(n,e,t){let{value:s}=e;return n.$$set=l=>{"value"in l&&t(0,s=l.value)},[s]}class qt extends Y{constructor(e){super(),$(this,e,Vt,Mt,Z,{value:0})}}function We(n){let e,t,s,l,r;return{c(){e=E("a"),t=E("i"),s=U(),l=K(n[1]),this.h()},l(a){e=S(a,"A",{href:!0,target:!0,class:!0});var o=C(e);t=S(o,"I",{class:!0}),C(t).forEach(g),s=j(o),l=W(o,n[1]),o.forEach(g),this.h()},h(){u(t,"class","codicon codicon-link"),u(e,"href",r=n[0].toString()),u(e,"target","_newtab"),u(e,"class","svelte-oadf5t")},m(a,o){T(a,e,o),k(e,t),k(e,s),k(e,l)},p(a,o){o&2&&ee(l,a[1]),o&1&&r!==(r=a[0].toString())&&u(e,"href",r)},d(a){a&&g(e)}}}function Ft(n){let e,t=n[0]&&We(n);return{c(){t&&t.c(),e=fe()},l(s){t&&t.l(s),e=fe()},m(s,l){t&&t.m(s,l),T(s,e,l)},p(s,[l]){s[0]?t?t.p(s,l):(t=We(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:N,o:N,d(s){s&&g(e),t&&t.d(s)}}}function Lt(n,e,t){let s,l,{source:r}=e;return n.$$set=a=>{"source"in a&&t(2,r=a.source)},n.$$.update=()=>{var a;n.$$.dirty&4&&t(0,s=st(r)?new URL(r):null),n.$$.dirty&1&&t(1,l=(a=s==null?void 0:s.hostname)==null?void 0:a.replace(/^www./,""))},[s,l,r]}class Gt extends Y{constructor(e){super(),$(this,e,Lt,Ft,Z,{source:2})}}function Ut(n){let e,t,s;return{c(){e=E("a"),t=E("i"),s=K(" File"),this.h()},l(l){e=S(l,"A",{href:!0,target:!0,class:!0});var r=C(e);t=S(r,"I",{class:!0}),C(t).forEach(g),s=W(r," File"),r.forEach(g),this.h()},h(){u(t,"class","codicon codicon-link-external"),u(e,"href",n[0]),u(e,"target","_newtab"),u(e,"class","svelte-oadf5t")},m(l,r){T(l,e,r),k(e,t),k(e,s)},p(l,[r]){r&1&&u(e,"href",l[0])},i:N,o:N,d(l){l&&g(e)}}}function jt(n,e,t){let{url:s}=e;return n.$$set=l=>{"url"in l&&t(0,s=l.url)},[s]}class Bt extends Y{constructor(e){super(),$(this,e,jt,Ut,Z,{url:0})}}function He(n,e,t){const s=n.slice();return s[12]=e[t],s}function Je(n,e,t){const s=n.slice();s[7]=e[t];const l=s[2].find(function(...a){return n[6](s[7],...a)})!==void 0;return s[8]=l,s}function Qe(n){let e,t="•",s,l,r;return l=new Gt({props:{source:n[0].source}}),{c(){e=E("span"),e.textContent=t,s=U(),te(l.$$.fragment),this.h()},l(a){e=S(a,"SPAN",{class:!0,["data-svelte-h"]:!0}),ke(e)!=="svelte-7hh8jk"&&(e.textContent=t),s=j(a),ne(l.$$.fragment,a),this.h()},h(){u(e,"class","svelte-4c1qy8")},m(a,o){T(a,e,o),T(a,s,o),le(l,a,o),r=!0},p(a,o){const i={};o&1&&(i.source=a[0].source),l.$set(i)},i(a){r||(D(l.$$.fragment,a),r=!0)},o(a){q(l.$$.fragment,a),r=!1},d(a){a&&(g(e),g(s)),se(l,a)}}}function Rt(n){let e,t,s,l={ctx:n,current:null,token:null,hasCatch:!1,pending:Jt,then:Kt,catch:Ot,value:11,blocks:[,,,]};return Ge(t=je(n[0].id),l),{c(){e=fe(),l.block.c()},l(r){e=fe(),l.block.l(r)},m(r,a){T(r,e,a),l.block.m(r,l.anchor=a),l.mount=()=>e.parentNode,l.anchor=e,s=!0},p(r,a){n=r,l.ctx=n,a&1&&t!==(t=je(n[0].id))&&Ge(t,l)||at(l,n,a)},i(r){s||(D(l.block),s=!0)},o(r){for(let a=0;a<3;a+=1){const o=l.blocks[a];q(o)}s=!1},d(r){r&&g(e),l.block.d(r),l.token=null,l=null}}}function zt(n){let e,t,s=Ee(n[0].tags),l=[];for(let a=0;a<s.length;a+=1)l[a]=Ze(Je(n,s,a));const r=a=>q(l[a],1,1,()=>{l[a]=null});return{c(){e=E("ul");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=S(a,"UL",{class:!0});var o=C(e);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(g),this.h()},h(){u(e,"class","tags svelte-4c1qy8")},m(a,o){T(a,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);t=!0},p(a,o){if(o&5){s=Ee(a[0].tags);let i;for(i=0;i<s.length;i+=1){const h=Je(a,s,i);l[i]?(l[i].p(h,o),D(l[i],1)):(l[i]=Ze(h),l[i].c(),D(l[i],1),l[i].m(e,null))}for(_e(),i=s.length;i<l.length;i+=1)r(i);he()}},i(a){if(!t){for(let o=0;o<s.length;o+=1)D(l[o]);t=!0}},o(a){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)q(l[o]);t=!1},d(a){a&&g(e),Ye(l,a)}}}function Ot(n){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function Kt(n){let e,t,s,l;const r=[Ht,Wt],a=[];function o(i,h){return i[11].length>0?0:1}return e=o(n),t=a[e]=r[e](n),{c(){t.c(),s=fe()},l(i){t.l(i),s=fe()},m(i,h){a[e].m(i,h),T(i,s,h),l=!0},p(i,h){let c=e;e=o(i),e===c?a[e].p(i,h):(_e(),q(a[c],1,1,()=>{a[c]=null}),he(),t=a[e],t?t.p(i,h):(t=a[e]=r[e](i),t.c()),D(t,1),t.m(s.parentNode,s))},i(i){l||(D(t),l=!0)},o(i){q(t),l=!1},d(i){i&&g(s),a[e].d(i)}}}function Wt(n){let e,t="Comments for this post are not available";return{c(){e=E("span"),e.textContent=t,this.h()},l(s){e=S(s,"SPAN",{class:!0,["data-svelte-h"]:!0}),ke(e)!=="svelte-4t2lxe"&&(e.textContent=t),this.h()},h(){u(e,"class","no-comments svelte-4c1qy8")},m(s,l){T(s,e,l)},p:N,i:N,o:N,d(s){s&&g(e)}}}function Ht(n){let e,t,s=Ee(n[11]),l=[];for(let a=0;a<s.length;a+=1)l[a]=Xe(He(n,s,a));const r=a=>q(l[a],1,1,()=>{l[a]=null});return{c(){e=E("ul");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=S(a,"UL",{class:!0});var o=C(e);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(g),this.h()},h(){u(e,"class","comments svelte-4c1qy8")},m(a,o){T(a,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);t=!0},p(a,o){if(o&1){s=Ee(a[11]);let i;for(i=0;i<s.length;i+=1){const h=He(a,s,i);l[i]?(l[i].p(h,o),D(l[i],1)):(l[i]=Xe(h),l[i].c(),D(l[i],1),l[i].m(e,null))}for(_e(),i=s.length;i<l.length;i+=1)r(i);he()}},i(a){if(!t){for(let o=0;o<s.length;o+=1)D(l[o]);t=!0}},o(a){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)q(l[o]);t=!1},d(a){a&&g(e),Ye(l,a)}}}function Xe(n){let e,t;return e=new Tt({props:{comment:n[12]}}),{c(){te(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,l){le(e,s,l),t=!0},p(s,l){const r={};l&1&&(r.comment=s[12]),e.$set(r)},i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Jt(n){let e,t;return e=new rt({}),{c(){te(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,l){le(e,s,l),t=!0},p:N,i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Ze(n){let e,t;function s(){return n[5](n[8],n[7])}return e=new it({props:{tag:n[7],active:n[8]}}),e.$on("click",s),{c(){te(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,r){le(e,l,r),t=!0},p(l,r){n=l;const a={};r&1&&(a.tag=n[7]),r&5&&(a.active=n[8]),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function Qt(n){let e,t,s,l,r,a="•",o,i,h,c,_="•",v,w,y,A,m,p,b=n[0].tags.length+"",G,H,ae,L,x=(n[0].comment_count||"No")+"",J,d,I,F,R,Q,ge,pe;s=new qt({props:{value:n[0].score}}),i=new Pt({props:{value:n[0].change}}),w=new Bt({props:{url:n[0].file_url}});let M=n[0].source&&Qe(n);const be=[zt,Rt],X=[];function ve(f,P){return f[1]==="tags"?0:1}return F=ve(n),R=X[F]=be[F](n),{c(){e=E("div"),t=E("div"),te(s.$$.fragment),l=U(),r=E("span"),r.textContent=a,o=U(),te(i.$$.fragment),h=U(),c=E("span"),c.textContent=_,v=U(),te(w.$$.fragment),y=U(),M&&M.c(),A=U(),m=E("div"),p=E("button"),G=K(b),H=K(" tags"),ae=U(),L=E("button"),J=K(x),d=K(" comments"),I=U(),R.c(),this.h()},l(f){e=S(f,"DIV",{class:!0});var P=C(e);t=S(P,"DIV",{class:!0});var B=C(t);ne(s.$$.fragment,B),l=j(B),r=S(B,"SPAN",{class:!0,["data-svelte-h"]:!0}),ke(r)!=="svelte-7hh8jk"&&(r.textContent=a),o=j(B),ne(i.$$.fragment,B),h=j(B),c=S(B,"SPAN",{class:!0,["data-svelte-h"]:!0}),ke(c)!=="svelte-7hh8jk"&&(c.textContent=_),v=j(B),ne(w.$$.fragment,B),y=j(B),M&&M.l(B),B.forEach(g),A=j(P),m=S(P,"DIV",{class:!0});var ie=C(m);p=S(ie,"BUTTON",{class:!0});var ue=C(p);G=W(ue,b),H=W(ue," tags"),ue.forEach(g),ae=j(ie),L=S(ie,"BUTTON",{class:!0});var oe=C(L);J=W(oe,x),d=W(oe," comments"),oe.forEach(g),ie.forEach(g),I=j(P),R.l(P),P.forEach(g),this.h()},h(){u(r,"class","svelte-4c1qy8"),u(c,"class","svelte-4c1qy8"),u(t,"class","summary svelte-4c1qy8"),u(p,"class","codicon codicon-tag svelte-4c1qy8"),z(p,"active",n[1]==="tags"),u(L,"class","codicon codicon-comment-discussion svelte-4c1qy8"),z(L,"active",n[1]==="comments"),u(m,"class","tabs svelte-4c1qy8"),u(e,"class","details svelte-4c1qy8")},m(f,P){T(f,e,P),k(e,t),le(s,t,null),k(t,l),k(t,r),k(t,o),le(i,t,null),k(t,h),k(t,c),k(t,v),le(w,t,null),k(t,y),M&&M.m(t,null),k(e,A),k(e,m),k(m,p),k(p,G),k(p,H),k(m,ae),k(m,L),k(L,J),k(L,d),k(e,I),X[F].m(e,null),Q=!0,ge||(pe=[V(p,"click",n[3]),V(L,"click",n[4])],ge=!0)},p(f,[P]){const B={};P&1&&(B.value=f[0].score),s.$set(B);const ie={};P&1&&(ie.value=f[0].change),i.$set(ie);const ue={};P&1&&(ue.url=f[0].file_url),w.$set(ue),f[0].source?M?(M.p(f,P),P&1&&D(M,1)):(M=Qe(f),M.c(),D(M,1),M.m(t,null)):M&&(_e(),q(M,1,1,()=>{M=null}),he()),(!Q||P&1)&&b!==(b=f[0].tags.length+"")&&ee(G,b),(!Q||P&2)&&z(p,"active",f[1]==="tags"),(!Q||P&1)&&x!==(x=(f[0].comment_count||"No")+"")&&ee(J,x),(!Q||P&2)&&z(L,"active",f[1]==="comments");let oe=F;F=ve(f),F===oe?X[F].p(f,P):(_e(),q(X[oe],1,1,()=>{X[oe]=null}),he(),R=X[F],R?R.p(f,P):(R=X[F]=be[F](f),R.c()),D(R,1),R.m(e,null))},i(f){Q||(D(s.$$.fragment,f),D(i.$$.fragment,f),D(w.$$.fragment,f),D(M),D(R),Q=!0)},o(f){q(s.$$.fragment,f),q(i.$$.fragment,f),q(w.$$.fragment,f),q(M),q(R),Q=!1},d(f){f&&g(e),se(s),se(i),se(w),M&&M.d(),X[F].d(),ge=!1,me(pe)}}}function Xt(n,e,t){let s;lt(n,Ie,c=>t(2,s=c));let{post:l}=e,r="tags";const a=()=>{t(1,r="tags")},o=()=>{t(1,r="comments")},i=(c,_)=>c?Ie.removeByName(_.name):Ie.addOrReplace({..._,modifier:"+"}),h=(c,_)=>_.name===c.name;return n.$$set=c=>{"post"in c&&t(0,l=c.post)},[l,r,s,a,o,i,h]}class un extends Y{constructor(e){super(),$(this,e,Xt,Qt,Z,{post:0})}}export{un as D,on as G,an as I,rn as V,Me as i};
