import{n as k,s as L,e as E,t as O,a as U,c as I,b as R,d as z,f as d,g as F,o as u,i as A,h as D,j as q,l as $,p as st,q as Ne,k as Le,C as de,y as P,Q as ne,R as le,F as ee,x as te,Y as j,E as re,z as nt,B as lt,N as at,A as B,I as ge,ac as it,D as rt,U as se,aa as ot,$ as _e,V as me}from"./scheduler.9ddb58b7.js";import{h as pe,u as ct}from"./await_block.bc50228e.js";import{e as ae}from"./each.e59479a4.js";import{S as V,i as G,t as M,a as N,g as oe,e as ce,c as W,b as H,m as K,d as Y,f as be}from"./index.ea5578de.js";import{g as ve}from"./comments.7340f7b2.js";import{L as ut}from"./LoadingAnimation.9c99af81.js";import{b as ye}from"./format-tag.9687384a.js";import{i as ft}from"./tags.49324235.js";import{a as ue}from"./blocking-group-data.358160cd.js";import{S as ht}from"./SimpleTag.2967b558.js";import{g as _t}from"./url-parsing.a8bc8aac.js";import{b as Ve,g as dt,c as Ge,h as gt}from"./always-loop-store.33c93ae3.js";import{b as fe}from"./paths.6753c126.js";const mt=typeof window<"u";let pt=mt?s=>requestAnimationFrame(s):k;const ke=6e4,ie=s=>{if(!bt(s))throw new TypeError("Invalid createdAt passed to formatCreatedAt");const e=new Date(s).getTime()/ke,l=new Date().getTime()/ke-e;if(l<1)return"Just now";if(l<60)return X(l,"minute");const n=l/60;if(n<24)return X(n,"hour");const r=n/24;if(r<7)return X(r,"day");if(r<30.5)return X(r/7,"week");if(r<365.25)return X(r/30.5,"month");const a=r/365.25;return X(a,"year")},bt=s=>(typeof s=="number"||typeof s=="string")&&new Date(s).toString()!=="Invalid Date",X=(s,e)=>{const t=s.toFixed();return`${t} ${e}${t==="1"?"":"s"} ago`};function vt(s){let e,t,l=s[0].author+"",n,r,a,o=ie(s[0].createdAt)+"",i,c,h,p=s[0].content+"",m;return{c(){e=E("div"),t=E("span"),n=O(l),r=U(),a=E("span"),i=O(o),c=U(),h=E("span"),m=O(p),this.h()},l(S){e=I(S,"DIV",{class:!0});var f=R(e);t=I(f,"SPAN",{class:!0});var T=R(t);n=z(T,l),T.forEach(d),r=F(f),a=I(f,"SPAN",{class:!0});var y=R(a);i=z(y,o),y.forEach(d),c=F(f),h=I(f,"SPAN",{class:!0});var C=R(h);m=z(C,p),C.forEach(d),f.forEach(d),this.h()},h(){u(t,"class","author svelte-bys59y"),u(a,"class","created-at svelte-bys59y"),u(h,"class","content svelte-bys59y"),u(e,"class","svelte-bys59y")},m(S,f){A(S,e,f),D(e,t),D(t,n),D(e,r),D(e,a),D(a,i),D(e,c),D(e,h),D(h,m)},p(S,[f]){f&1&&l!==(l=S[0].author+"")&&q(n,l),f&1&&o!==(o=ie(S[0].createdAt)+"")&&q(i,o),f&1&&p!==(p=S[0].content+"")&&q(m,p)},i:k,o:k,d(S){S&&d(e)}}}function yt(s,e,t){let{comment:l}=e;return s.$$set=n=>{"comment"in n&&t(0,l=n.comment)},[l]}class kt extends V{constructor(e){super(),G(this,e,yt,vt,L,{comment:0})}}function we(s,e,t){const l=s.slice();return l[2]=e[t],l}function wt(s){return{c:k,l:k,m:k,p:k,i:k,o:k,d:k}}function St(s){let e,t,l,n;const r=[Et,At],a=[];function o(i,c){return i[1].length>0?0:1}return e=o(s),t=a[e]=r[e](s),{c(){t.c(),l=$()},l(i){t.l(i),l=$()},m(i,c){a[e].m(i,c),A(i,l,c),n=!0},p(i,c){let h=e;e=o(i),e===h?a[e].p(i,c):(oe(),N(a[h],1,1,()=>{a[h]=null}),ce(),t=a[e],t?t.p(i,c):(t=a[e]=r[e](i),t.c()),M(t,1),t.m(l.parentNode,l))},i(i){n||(M(t),n=!0)},o(i){N(t),n=!1},d(i){i&&d(l),a[e].d(i)}}}function At(s){let e,t="Comments for this post are not available. <br/>This can happen if comments have been deleted.";return{c(){e=E("p"),e.innerHTML=t,this.h()},l(l){e=I(l,"P",{class:!0,"data-svelte-h":!0}),st(e)!=="svelte-1f9q9vq"&&(e.innerHTML=t),this.h()},h(){u(e,"class","no-comments svelte-x6zn2h")},m(l,n){A(l,e,n)},p:k,i:k,o:k,d(l){l&&d(e)}}}function Et(s){let e,t,l=ae(s[1]),n=[];for(let a=0;a<l.length;a+=1)n[a]=Se(we(s,l,a));const r=a=>N(n[a],1,1,()=>{n[a]=null});return{c(){e=E("ul");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=I(a,"UL",{class:!0});var o=R(e);for(let i=0;i<n.length;i+=1)n[i].l(o);o.forEach(d),this.h()},h(){u(e,"class","comments svelte-x6zn2h")},m(a,o){A(a,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(a,o){if(o&1){l=ae(a[1]);let i;for(i=0;i<l.length;i+=1){const c=we(a,l,i);n[i]?(n[i].p(c,o),M(n[i],1)):(n[i]=Se(c),n[i].c(),M(n[i],1),n[i].m(e,null))}for(oe(),i=l.length;i<n.length;i+=1)r(i);ce()}},i(a){if(!t){for(let o=0;o<l.length;o+=1)M(n[o]);t=!0}},o(a){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)N(n[o]);t=!1},d(a){a&&d(e),Ne(n,a)}}}function Se(s){let e,t;return e=new kt({props:{comment:s[2]}}),{c(){W(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,n){K(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.comment=l[2]),e.$set(r)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function It(s){let e,t;return e=new ut({}),{c(){W(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,n){K(e,l,n),t=!0},p:k,i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function Tt(s){let e,t,l,n={ctx:s,current:null,token:null,hasCatch:!1,pending:It,then:St,catch:wt,value:1,blocks:[,,,]};return pe(t=ve(s[0].id),n),{c(){e=$(),n.block.c()},l(r){e=$(),n.block.l(r)},m(r,a){A(r,e,a),n.block.m(r,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,l=!0},p(r,[a]){s=r,n.ctx=s,a&1&&t!==(t=ve(s[0].id))&&pe(t,n)||ct(n,s,a)},i(r){l||(M(n.block),l=!0)},o(r){for(let a=0;a<3;a+=1){const o=n.blocks[a];N(o)}l=!1},d(r){r&&d(e),n.block.d(r),n.token=null,n=null}}}function Pt(s,e,t){let{post:l}=e;return s.$$set=n=>{"post"in n&&t(0,l=n.post)},[l]}class ms extends V{constructor(e){super(),G(this,e,Pt,Tt,L,{post:0})}}function Dt(s){let e,t=s[0].charAt(0).toUpperCase()+"",l,n;return{c(){e=E("span"),l=O(t),this.h()},l(r){e=I(r,"SPAN",{title:!0,class:!0});var a=R(e);l=z(a,t),a.forEach(d),this.h()},h(){u(e,"title",n="Rated "+s[0]+"."),u(e,"class","svelte-1nbj6kf")},m(r,a){A(r,e,a),D(e,l)},p(r,[a]){a&1&&t!==(t=r[0].charAt(0).toUpperCase()+"")&&q(l,t),a&1&&n!==(n="Rated "+r[0]+".")&&u(e,"title",n)},i:k,o:k,d(r){r&&d(e)}}}function Ct(s,e,t){let{value:l}=e;return s.$$set=n=>{"value"in n&&t(0,l=n.value)},[l]}class ps extends V{constructor(e){super(),G(this,e,Ct,Dt,L,{value:0})}}function Rt(s){let e,t=ie(s[0])+"",l;return{c(){e=E("span"),l=O(t),this.h()},l(n){e=I(n,"SPAN",{class:!0});var r=R(e);l=z(r,t),r.forEach(d),this.h()},h(){u(e,"class","svelte-1vqihm9")},m(n,r){A(n,e,r),D(e,l)},p(n,[r]){r&1&&t!==(t=ie(n[0])+"")&&q(l,t)},i:k,o:k,d(n){n&&d(e)}}}function Mt(s,e,t){let{value:l}=e;return s.$$set=n=>{"value"in n&&t(0,l=n.value)},[l]}class bs extends V{constructor(e){super(),G(this,e,Mt,Rt,L,{value:0})}}function Nt(s){let e,t=ye(s[0])+"",l;return{c(){e=E("span"),l=O(t),this.h()},l(n){e=I(n,"SPAN",{"data-testid":!0,class:!0});var r=R(e);l=z(r,t),r.forEach(d),this.h()},h(){u(e,"data-testid","score"),u(e,"class","codicon codicon-heart svelte-te86f3")},m(n,r){A(n,e,r),D(e,l)},p(n,[r]){r&1&&t!==(t=ye(n[0])+"")&&q(l,t)},i:k,o:k,d(n){n&&d(e)}}}function Lt(s,e,t){let{value:l}=e;return s.$$set=n=>{"value"in n&&t(0,l=n.value)},[l]}class vs extends V{constructor(e){super(),G(this,e,Lt,Nt,L,{value:0})}}function Ae(s){let e,t,l,n,r;return{c(){e=E("a"),t=E("i"),l=U(),n=O(s[1]),this.h()},l(a){e=I(a,"A",{href:!0,target:!0,class:!0});var o=R(e);t=I(o,"I",{class:!0}),R(t).forEach(d),l=F(o),n=z(o,s[1]),o.forEach(d),this.h()},h(){u(t,"class","codicon codicon-link"),u(e,"href",r=s[0].toString()),u(e,"target","_newtab"),u(e,"class","svelte-1orztco")},m(a,o){A(a,e,o),D(e,t),D(e,l),D(e,n)},p(a,o){o&2&&q(n,a[1]),o&1&&r!==(r=a[0].toString())&&u(e,"href",r)},d(a){a&&d(e)}}}function Vt(s){let e,t=s[0]&&Ae(s);return{c(){t&&t.c(),e=$()},l(l){t&&t.l(l),e=$()},m(l,n){t&&t.m(l,n),A(l,e,n)},p(l,[n]){l[0]?t?t.p(l,n):(t=Ae(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:k,o:k,d(l){l&&d(e),t&&t.d(l)}}}function Gt(s,e,t){let l,n,{source:r}=e;return s.$$set=a=>{"source"in a&&t(2,r=a.source)},s.$$.update=()=>{var a;s.$$.dirty&4&&t(0,l=ft(r)?new URL(r):null),s.$$.dirty&1&&t(1,n=(a=l==null?void 0:l.hostname)==null?void 0:a.replace(/^www./,""))},[l,n,r]}class ys extends V{constructor(e){super(),G(this,e,Gt,Vt,L,{source:2})}}function Ot(s){let e,t,l;return{c(){e=E("a"),t=E("i"),l=O(" File"),this.h()},l(n){e=I(n,"A",{href:!0,target:!0,class:!0});var r=R(e);t=I(r,"I",{class:!0}),R(t).forEach(d),l=z(r," File"),r.forEach(d),this.h()},h(){u(t,"class","codicon codicon-file"),u(e,"href",s[0]),u(e,"target","_newtab"),u(e,"class","svelte-1orztco")},m(n,r){A(n,e,r),D(e,t),D(e,l)},p(n,[r]){r&1&&u(e,"href",n[0])},i:k,o:k,d(n){n&&d(e)}}}function Ut(s,e,t){let{url:l}=e;return s.$$set=n=>{"url"in n&&t(0,l=n.url)},[l]}class ks extends V{constructor(e){super(),G(this,e,Ut,Ot,L,{url:0})}}function Ee(s,e,t){const l=s.slice();l[6]=e[t];const n=l[1].find(function(...a){return s[5](l[6],...a)})!==void 0;return l[7]=n,l}function Ie(s){let e,t;function l(){return s[3](s[7],s[6])}function n(){return s[4](s[6])}return e=new ht({props:{tag:s[6],active:s[7]}}),e.$on("click",l),e.$on("contextmenu",n),{c(){W(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,a){K(e,r,a),t=!0},p(r,a){s=r;const o={};a&1&&(o.tag=s[6]),a&3&&(o.active=s[7]),e.$set(o)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){N(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function zt(s){let e,t,l=ae(s[0]),n=[];for(let a=0;a<l.length;a+=1)n[a]=Ie(Ee(s,l,a));const r=a=>N(n[a],1,1,()=>{n[a]=null});return{c(){e=E("ul");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=I(a,"UL",{class:!0});var o=R(e);for(let i=0;i<n.length;i+=1)n[i].l(o);o.forEach(d),this.h()},h(){u(e,"class","tags svelte-b5q4us")},m(a,o){A(a,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(a,[o]){if(o&7){l=ae(a[0]);let i;for(i=0;i<l.length;i+=1){const c=Ee(a,l,i);n[i]?(n[i].p(c,o),M(n[i],1)):(n[i]=Ie(c),n[i].c(),M(n[i],1),n[i].m(e,null))}for(oe(),i=l.length;i<n.length;i+=1)r(i);ce()}},i(a){if(!t){for(let o=0;o<l.length;o+=1)M(n[o]);t=!0}},o(a){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)N(n[o]);t=!1},d(a){a&&d(e),Ne(n,a)}}}function Ft(s,e,t){let l;Le(s,ue,c=>t(1,l=c));let{tags:n}=e;const r=c=>{const h=_t([{modifier:"+",...c}]);window.open(h,"_blank")},a=(c,h)=>c?ue.removeByName(h.name):ue.addOrReplace({...h,modifier:"+"}),o=c=>r(c),i=(c,h)=>h.name===c.name;return s.$$set=c=>{"tags"in c&&t(0,n=c.tags)},[n,l,r,a,o,i]}class ws extends V{constructor(e){super(),G(this,e,Ft,zt,L,{tags:0})}}const Oe=s=>s.endsWith(".gif"),qt=(s,e,t)=>Oe(e)?{static:t,animated:e}:{static:e,animated:s},Ue=s=>s.endsWith(".mp4")||s.endsWith(".webm"),Ss=(s,e,t)=>Ue(e)?{static:t,animated:e}:{static:e,animated:s},As=s=>s.some(e=>e.name==="loop"),Es=s=>Oe(s)||Ue(s),Te=s=>{if(typeof s!="number")throw new TypeError(`Attempted to call formatVideoTime with invalid value: ${s}`);const e=Math.floor(s),t=e%60,l=Math.floor(e/60);return`${Pe(l)}:${Pe(t)}`},Pe=s=>{const e=String(s),t=Math.max(0,2-e.length);return`${"0".repeat(t)}${e}`},Bt=(s,e)=>s&&e?s/e:1,he=(s,e)=>s&&e?`${s} / ${e}`:"1 / 1";function jt(s){let e,t;return{c(){e=E("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,width:!0,height:!0,style:!0}),this.h()},h(){te(e.src,t=s[3])||u(e,"src",t),u(e,"alt","Start GIF"),u(e,"width","16"),u(e,"height","32"),j(e,"margin-left","4px")},m(l,n){A(l,e,n)},p:k,d(l){l&&d(e)}}}function Wt(s){let e,t;return{c(){e=E("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){te(e.src,t=s[4])||u(e,"src",t),u(e,"alt","Stop GIF"),u(e,"width","16"),u(e,"height","32")},m(l,n){A(l,e,n)},p:k,d(l){l&&d(e)}}}function Ht(s){let e,t;return{c(){e=E("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){te(e.src,t=s[2])||u(e,"src",t),u(e,"alt","Loading GIF"),u(e,"width","16"),u(e,"height","32")},m(l,n){A(l,e,n)},p:k,d(l){l&&d(e)}}}function Kt(s){let e,t,l,n;function r(i,c){return i[1]?Ht:i[0]?Wt:jt}let a=r(s),o=a(s);return{c(){e=E("button"),o.c(),this.h()},l(i){e=I(i,"BUTTON",{type:!0,class:!0});var c=R(e);o.l(c),c.forEach(d),this.h()},h(){u(e,"type","button"),u(e,"class",t=de(s[5].class)+" svelte-19k2j29")},m(i,c){A(i,e,c),o.m(e,null),l||(n=P(e,"click",s[6]),l=!0)},p(i,[c]){a===(a=r(i))&&o?o.p(i,c):(o.d(1),o=a(i),o&&(o.c(),o.m(e,null))),c&32&&t!==(t=de(i[5].class)+" svelte-19k2j29")&&u(e,"class",t)},i:k,o:k,d(i){i&&d(e),o.d(),l=!1,n()}}}function Yt(s,e,t){const l=`${fe}/assets/load.svg`,n=`${fe}/assets/play.svg`,r=`${fe}/assets/pause.svg`;let{playing:a}=e,{loading:o}=e;function i(c){ee.call(this,s,c)}return s.$$set=c=>{t(5,e=ne(ne({},e),le(c))),"playing"in c&&t(0,a=c.playing),"loading"in c&&t(1,o=c.loading)},e=le(e),[a,o,l,n,r,e,i]}class ze extends V{constructor(e){super(),G(this,e,Yt,Kt,L,{playing:0,loading:1})}}function De(s){let e,t,l,n=!0,r=!1,a,o,i,c=Te(s[16])+"",h,p,m,S,f,T,y,C,v;function g(){cancelAnimationFrame(a),e.paused||(a=pt(g),r=!0),s[25].call(e)}return T=new ze({props:{playing:s[5],loading:s[6],class:`center hidable ${s[13]?"hide":""}`}}),T.$on("click",s[19]),{c(){e=E("video"),o=U(),i=E("span"),h=O(c),p=U(),m=E("input"),f=U(),W(T.$$.fragment),this.h()},l(_){e=I(_,"VIDEO",{tabindex:!0,poster:!0,src:!0,preload:!0,style:!0,class:!0}),R(e).forEach(d),o=F(_),i=I(_,"SPAN",{class:!0});var w=R(i);h=z(w,c),w.forEach(d),p=F(_),m=I(_,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0,style:!0}),f=F(_),H(T.$$.fragment,_),this.h()},h(){u(e,"tabindex","0"),u(e,"poster",s[1]),e.loop=s[4],te(e.src,t=s[0])||u(e,"src",t),u(e,"preload","metadata"),u(e,"style",l=`aspect-ratio: ${s[2]} / ${s[3]}`),u(e,"class","svelte-5v7blo"),s[8]===void 0&&at(()=>s[26].call(e)),u(i,"class","hidable svelte-5v7blo"),B(i,"hide",s[10]),u(m,"type","range"),u(m,"min",0),u(m,"max",s[8]),u(m,"step",.0166666),u(m,"class","hidable svelte-5v7blo"),u(m,"style",S=`background-image: linear-gradient(90deg, var(--accent) ${s[14]}%, var(--background-2) ${s[14]}%);}`),B(m,"hide",s[13])},m(_,w){A(_,e,w),s[23](e),A(_,o,w),A(_,i,w),D(i,h),A(_,p,w),A(_,m,w),ge(m,s[7]),A(_,f,w),K(T,_,w),y=!0,C||(v=[P(e,"play",s[24]),P(e,"pause",s[24]),P(e,"timeupdate",g),P(e,"durationchange",s[26]),P(e,"waiting",s[27]),P(e,"playing",s[28]),P(e,"pause",s[29]),P(e,"ended",s[30]),P(e,"click",s[20]),P(e,"dblclick",it(rt(s[17]))),P(m,"change",s[31]),P(m,"input",s[31])],C=!0)},p(_,w){(!y||w[0]&2)&&u(e,"poster",_[1]),(!y||w[0]&16)&&(e.loop=_[4]),(!y||w[0]&1&&!te(e.src,t=_[0]))&&u(e,"src",t),(!y||w[0]&12&&l!==(l=`aspect-ratio: ${_[2]} / ${_[3]}`))&&u(e,"style",l),w[0]&32768&&n!==(n=_[15])&&e[n?"pause":"play"](),!r&&w[0]&128&&!isNaN(_[7])&&(e.currentTime=_[7]),r=!1,(!y||w[0]&65536)&&c!==(c=Te(_[16])+"")&&q(h,c),(!y||w[0]&1024)&&B(i,"hide",_[10]),(!y||w[0]&256)&&u(m,"max",_[8]),(!y||w[0]&16384&&S!==(S=`background-image: linear-gradient(90deg, var(--accent) ${_[14]}%, var(--background-2) ${_[14]}%);}`))&&u(m,"style",S),w[0]&128&&ge(m,_[7]),(!y||w[0]&8192)&&B(m,"hide",_[13]);const J={};w[0]&32&&(J.playing=_[5]),w[0]&64&&(J.loading=_[6]),w[0]&8192&&(J.class=`center hidable ${_[13]?"hide":""}`),T.$set(J)},i(_){y||(M(T.$$.fragment,_),y=!0)},o(_){N(T.$$.fragment,_),y=!1},d(_){_&&(d(e),d(o),d(i),d(p),d(m),d(f)),s[23](null),Y(T,_),C=!1,re(v)}}}function Jt(s){let e,t,l,n,r,a=s[9]&&De(s);return{c(){e=E("div"),a&&a.c(),this.h()},l(o){e=I(o,"DIV",{class:!0,style:!0});var i=R(e);a&&a.l(i),i.forEach(d),this.h()},h(){u(e,"class",t="post-media player "+s[21].class+" svelte-5v7blo"),j(e,"aspect-ratio",s[2]+"/"+s[3])},m(o,i){A(o,e,i),a&&a.m(e,null),s[32](e),l=!0,n||(r=[P(e,"keydown",s[18]),P(e,"click",s[22])],n=!0)},p(o,i){o[9]?a?(a.p(o,i),i[0]&512&&M(a,1)):(a=De(o),a.c(),M(a,1),a.m(e,null)):a&&(oe(),N(a,1,1,()=>{a=null}),ce()),(!l||i[0]&2097152&&t!==(t="post-media player "+o[21].class+" svelte-5v7blo"))&&u(e,"class",t),(!l||i[0]&12)&&j(e,"aspect-ratio",o[2]+"/"+o[3])},i(o){l||(M(a),l=!0)},o(o){N(a),l=!1},d(o){o&&d(e),a&&a.d(),s[32](null),n=!1,re(r)}}}const Ce=5;function Qt(s,e,t){let l,n,r,a,{src:o}=e,{poster:i}=e,{width:c}=e,{height:h}=e,{loop:p}=e,m,S,f=!1,T=!1,y=0,C=0,v=!1,g=!1;const _=()=>{t(7,y=Math.max(0,y-Ce))},w=()=>{t(7,y=Math.min(C,y+Ce))},J=b=>{b.offsetX<b.target.clientWidth/2?_():w()},qe=b=>{Ve(b)||b.key==="k"?(b.preventDefault(),b.stopPropagation(),t(5,f=!f)):b.key==="ArrowLeft"||b.key==="j"?(b.preventDefault(),b.stopPropagation(),_()):(b.key==="ArrowRight"||b.key==="l")&&(b.preventDefault(),b.stopPropagation(),w())},Q=new IntersectionObserver(b=>{for(const tt of b)tt.isIntersecting?t(9,v=!0):S&&(t(5,f=!1),t(6,T=!1),S.addEventListener("error",()=>{t(9,v=!1)},{once:!0}),t(12,S.src="",S))},{rootMargin:"0px"}),Be=()=>{t(5,f=!f),t(6,T=!0),t(10,g=f)},je=()=>{t(10,g=!g)};nt(()=>Q==null?void 0:Q.observe(m)),lt(()=>Q==null?void 0:Q.unobserve(m));function We(b){ee.call(this,s,b)}function He(b){se[b?"unshift":"push"](()=>{S=b,t(12,S)})}function Ke(){n=this.paused,t(15,n),t(5,f),t(9,v)}function Ye(){y=this.currentTime,t(7,y)}function Je(){C=this.duration,t(8,C)}const Qe=()=>t(6,T=!0),Xe=()=>t(6,T=!1),Ze=()=>t(6,T=!1),xe=()=>{p||(t(6,T=!1),t(5,f=!1))};function $e(){y=ot(this.value),t(7,y)}function et(b){se[b?"unshift":"push"](()=>{m=b,t(11,m)})}return s.$$set=b=>{t(21,e=ne(ne({},e),le(b))),"src"in b&&t(0,o=b.src),"poster"in b&&t(1,i=b.poster),"width"in b&&t(2,c=b.width),"height"in b&&t(3,h=b.height),"loop"in b&&t(4,p=b.loop)},s.$$.update=()=>{s.$$.dirty[0]&384&&t(16,l=C-y),s.$$.dirty[0]&544&&t(5,f=v&&f),s.$$.dirty[0]&32&&t(15,n=!f),s.$$.dirty[0]&384&&t(14,r=y/C*98+1),s.$$.dirty[0]&1120&&t(13,a=f&&!T&&g)},e=le(e),[o,i,c,h,p,f,T,y,C,v,g,m,S,a,r,n,l,J,qe,Be,je,e,We,He,Ke,Ye,Je,Qe,Xe,Ze,xe,$e,et]}class Is extends V{constructor(e){super(),G(this,e,Qt,Jt,L,{src:0,poster:1,width:2,height:3,loop:4},null,[-1,-1])}}const Z=new IntersectionObserver(s=>{var e,t;for(const l of s)if(l.isIntersecting){const n=l.target.getAttribute("data-src")??"";(e=l==null?void 0:l.target)==null||e.setAttribute("src",n)}else(t=l==null?void 0:l.target)==null||t.setAttribute("src","https://unload")},{rootMargin:"1250px"}),Fe=s=>(Z==null||Z.observe(s),{destroy(){Z==null||Z.unobserve(s)}});function Re(s){let e,t,l;return{c(){e=E("img"),this.h()},l(n){e=I(n,"IMG",{"data-src":!0,loading:!0,alt:!0,class:!0}),this.h()},h(){u(e,"data-src",s[3]),u(e,"loading","lazy"),u(e,"alt","animated source preload"),u(e,"class","animated-preload svelte-12psnhd")},m(n,r){A(n,e,r),t||(l=_e(Fe.call(null,e)),t=!0)},p(n,r){r&8&&u(e,"data-src",n[3])},d(n){n&&d(e),t=!1,l()}}}function Xt(s){let e,t,l,n,r,a,o,i,c,h,p,m,S,f=s[6]&&Re(s);function T(v){s[13](v)}function y(v){s[14](v)}let C={class:"center"};return s[2]!==void 0&&(C.playing=s[2]),s[4]!==void 0&&(C.loading=s[4]),i=new ze({props:C}),se.push(()=>be(i,"playing",T)),se.push(()=>be(i,"loading",y)),i.$on("click",s[15]),{c(){e=E("div"),t=E("img"),a=U(),f&&f.c(),o=U(),W(i.$$.fragment),this.h()},l(v){e=I(v,"DIV",{class:!0,style:!0});var g=R(e);t=I(g,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,width:!0,height:!0,tabindex:!0}),a=F(g),f&&f.l(g),o=F(g),H(i.$$.fragment,g),g.forEach(d),this.h()},h(){u(t,"class","post-media media-img svelte-12psnhd"),u(t,"loading","lazy"),u(t,"data-src",s[5]),u(t,"alt",l=s[0].id.toString()),u(t,"width",n=s[0].width),u(t,"height",r=s[0].height),u(t,"tabindex","0"),u(e,"class","container svelte-12psnhd"),j(e,"aspect-ratio",he(s[0].width,s[0].height))},m(v,g){A(v,e,g),D(e,t),s[10](t),D(e,a),f&&f.m(e,null),D(e,o),K(i,e,null),p=!0,m||(S=[P(t,"click",s[9]),P(t,"keydown",s[11]),P(t,"load",s[12]),_e(Fe.call(null,t))],m=!0)},p(v,[g]){(!p||g&32)&&u(t,"data-src",v[5]),(!p||g&1&&l!==(l=v[0].id.toString()))&&u(t,"alt",l),(!p||g&1&&n!==(n=v[0].width))&&u(t,"width",n),(!p||g&1&&r!==(r=v[0].height))&&u(t,"height",r),v[6]?f?f.p(v,g):(f=Re(v),f.c(),f.m(e,o)):f&&(f.d(1),f=null);const _={};!c&&g&4&&(c=!0,_.playing=v[2],me(()=>c=!1)),!h&&g&16&&(h=!0,_.loading=v[4],me(()=>h=!1)),i.$set(_),(!p||g&1)&&j(e,"aspect-ratio",he(v[0].width,v[0].height))},i(v){p||(M(i.$$.fragment,v),p=!0)},o(v){N(i.$$.fragment,v),p=!1},d(v){v&&d(e),s[10](null),f&&f.d(),Y(i),m=!1,re(S)}}}function Zt(s,e,t){let l,n,r,a,o;Le(s,dt,g=>t(6,o=g));let{post:i}=e,c,h=!1,p=!1;function m(g){ee.call(this,s,g)}function S(g){se[g?"unshift":"push"](()=>{c=g,t(1,c),t(2,h),t(3,n),t(7,r),t(8,l),t(0,i)})}const f=g=>{Ge(g),Ve(g)&&(g.preventDefault(),t(4,p=!0),t(2,h=!h))},T=()=>t(4,p=!1);function y(g){h=g,t(2,h)}function C(g){p=g,t(4,p)}const v=()=>{t(4,p=!0),t(2,h=!h)};return s.$$set=g=>{"post"in g&&t(0,i=g.post)},s.$$.update=()=>{s.$$.dirty&1&&t(8,l=qt(i.file_url,i.sample_url,i.preview_url)),s.$$.dirty&256&&t(3,n=l.animated),s.$$.dirty&256&&t(7,r=l.static),s.$$.dirty&140&&t(5,a=h?n:r),s.$$.dirty&142&&c&&t(1,c.src=h?n:r,c)},[i,c,h,n,p,a,o,r,l,m,S,f,T,y,C,v]}class Ts extends V{constructor(e){super(),G(this,e,Zt,Xt,L,{post:0})}}const x=new IntersectionObserver(s=>{var e,t;for(const l of s)if(l.isIntersecting){const n=l.target.getAttribute("data-src")??"";if((l.target.getAttribute("src")??"")===n)return;(e=l==null?void 0:l.target)==null||e.setAttribute("src",n)}else(t=l==null?void 0:l.target)==null||t.setAttribute("src","https://unload")},{rootMargin:"1250px"}),xt=s=>(x==null||x.observe(s),{destroy(){x==null||x.unobserve(s)}});function $t(s){let e,t,l;return{c(){e=E("img"),this.h()},l(n){e=I(n,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,width:!0,height:!0,tabindex:!0}),this.h()},h(){u(e,"class","post-media svelte-1s97xbu"),u(e,"loading","lazy"),u(e,"data-src",s[0]),u(e,"alt",s[1]),u(e,"width",s[2]),u(e,"height",s[3]),u(e,"tabindex","0")},m(n,r){A(n,e,r),t||(l=[P(e,"click",s[4]),P(e,"load",s[5]),P(e,"keydown",Ge),_e(xt.call(null,e))],t=!0)},p(n,[r]){r&1&&u(e,"data-src",n[0]),r&2&&u(e,"alt",n[1]),r&4&&u(e,"width",n[2]),r&8&&u(e,"height",n[3])},i:k,o:k,d(n){n&&d(e),t=!1,re(l)}}}function es(s,e,t){let{src:l}=e,{alt:n}=e,{width:r}=e,{height:a}=e;function o(c){ee.call(this,s,c)}function i(c){ee.call(this,s,c)}return s.$$set=c=>{"src"in c&&t(0,l=c.src),"alt"in c&&t(1,n=c.alt),"width"in c&&t(2,r=c.width),"height"in c&&t(3,a=c.height)},[l,n,r,a,o,i]}class Me extends V{constructor(e){super(),G(this,e,es,$t,L,{src:0,alt:1,width:2,height:3})}}function ts(s){let e,t,l,n,r,a,o;return t=new Me({props:{src:s[5],alt:s[3],width:s[0].width,height:s[0].height}}),n=new Me({props:{src:s[4],alt:s[3],width:s[0].width,height:s[0].height}}),{c(){e=E("div"),W(t.$$.fragment),l=U(),W(n.$$.fragment),this.h()},l(i){e=I(i,"DIV",{style:!0,class:!0});var c=R(e);H(t.$$.fragment,c),l=F(c),H(n.$$.fragment,c),c.forEach(d),this.h()},h(){j(e,"aspect-ratio",s[1]),u(e,"class","svelte-1c0gugi"),B(e,"expandable",s[2]),B(e,"open",s[6])},m(i,c){A(i,e,c),K(t,e,null),D(e,l),K(n,e,null),r=!0,a||(o=P(e,"click",s[8]),a=!0)},p(i,[c]){const h={};c&32&&(h.src=i[5]),c&8&&(h.alt=i[3]),c&1&&(h.width=i[0].width),c&1&&(h.height=i[0].height),t.$set(h);const p={};c&16&&(p.src=i[4]),c&8&&(p.alt=i[3]),c&1&&(p.width=i[0].width),c&1&&(p.height=i[0].height),n.$set(p),(!r||c&2)&&j(e,"aspect-ratio",i[1]),(!r||c&4)&&B(e,"expandable",i[2])},i(i){r||(M(t.$$.fragment,i),M(n.$$.fragment,i),r=!0)},o(i){N(t.$$.fragment,i),N(n.$$.fragment,i),r=!1},d(i){i&&d(e),Y(t),Y(n),a=!1,o()}}}function ss(s,e,t){let l,n,r,a,o,i,{post:c}=e,h;function p(m){ee.call(this,s,m)}return s.$$set=m=>{"post"in m&&t(0,c=m.post)},s.$$.update=()=>{s.$$.dirty&1&&t(5,l=c.preview_url),s.$$.dirty&1&&t(4,n=gt?c.file_url:c.sample_url),s.$$.dirty&1&&t(3,r=c.id.toString()),s.$$.dirty&1&&t(7,a=Bt(c.width,c.height)),s.$$.dirty&128&&t(2,o=a<.33),s.$$.dirty&1&&t(1,i=he(c.width,c.height))},[c,i,o,r,n,l,h,a,p]}class Ps extends V{constructor(e){super(),G(this,e,ss,ts,L,{post:0})}}export{ms as C,ys as E,Ts as G,ws as P,ps as R,vs as S,Is as V,bs as a,ks as b,Ps as c,qt as d,Es as e,Te as f,Ss as g,Bt as h,As as i,pt as r};
