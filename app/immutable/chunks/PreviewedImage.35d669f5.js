import{n as k,s as N,e as E,t as O,a as U,c as I,b as R,d as z,f as _,g as F,o as u,i as A,h as D,j as q,l as $,p as st,q as Le,k as Ne,C as de,y as T,O as ne,P as le,D as ee,x as te,Y as j,R as re,z as nt,B as lt,L as at,A as B,F as ge,ac as it,Q as rt,U as se,aa as ot,$ as _e,V as me}from"./scheduler.1046d3e1.js";import{h as pe,u as ct}from"./await_block.f6abea4d.js";import{e as ae}from"./each.e59479a4.js";import{S as V,i as G,t as M,a as L,g as oe,e as ce,c as W,b as H,m as K,d as Y,f as be}from"./index.bea7ce5d.js";import{g as ve}from"./comments.7340f7b2.js";import{L as ut}from"./LoadingAnimation.3ab38bd0.js";import{b as ye}from"./format-tag.9687384a.js";import{i as ft}from"./tags.49324235.js";import{a as ue}from"./active-tags-store.dee88dd0.js";import{S as ht}from"./SimpleTag.04bb1ca1.js";import{b as Ve,g as _t,c as Ge,h as dt}from"./always-loop-store.99539979.js";import{b as fe}from"./paths.396bbdc5.js";const gt=typeof window<"u";let mt=gt?s=>requestAnimationFrame(s):k;const ke=6e4,ie=s=>{if(!pt(s))throw new TypeError("Invalid createdAt passed to formatCreatedAt");const e=new Date(s).getTime()/ke,l=new Date().getTime()/ke-e;if(l<1)return"Just now";if(l<60)return X(l,"minute");const n=l/60;if(n<24)return X(n,"hour");const r=n/24;if(r<7)return X(r,"day");if(r<30.5)return X(r/7,"week");if(r<365.25)return X(r/30.5,"month");const i=r/365.25;return X(i,"year")},pt=s=>(typeof s=="number"||typeof s=="string")&&new Date(s).toString()!=="Invalid Date",X=(s,e)=>{const t=s.toFixed();return`${t} ${e}${t==="1"?"":"s"} ago`};function bt(s){let e,t,l=s[0].author+"",n,r,i,o=ie(s[0].createdAt)+"",a,c,g,p=s[0].content+"",m;return{c(){e=E("div"),t=E("span"),n=O(l),r=U(),i=E("span"),a=O(o),c=U(),g=E("span"),m=O(p),this.h()},l(S){e=I(S,"DIV",{class:!0});var f=R(e);t=I(f,"SPAN",{class:!0});var P=R(t);n=z(P,l),P.forEach(_),r=F(f),i=I(f,"SPAN",{class:!0});var y=R(i);a=z(y,o),y.forEach(_),c=F(f),g=I(f,"SPAN",{class:!0});var C=R(g);m=z(C,p),C.forEach(_),f.forEach(_),this.h()},h(){u(t,"class","author svelte-bys59y"),u(i,"class","created-at svelte-bys59y"),u(g,"class","content svelte-bys59y"),u(e,"class","svelte-bys59y")},m(S,f){A(S,e,f),D(e,t),D(t,n),D(e,r),D(e,i),D(i,a),D(e,c),D(e,g),D(g,m)},p(S,[f]){f&1&&l!==(l=S[0].author+"")&&q(n,l),f&1&&o!==(o=ie(S[0].createdAt)+"")&&q(a,o),f&1&&p!==(p=S[0].content+"")&&q(m,p)},i:k,o:k,d(S){S&&_(e)}}}function vt(s,e,t){let{comment:l}=e;return s.$$set=n=>{"comment"in n&&t(0,l=n.comment)},[l]}class yt extends V{constructor(e){super(),G(this,e,vt,bt,N,{comment:0})}}function we(s,e,t){const l=s.slice();return l[2]=e[t],l}function kt(s){return{c:k,l:k,m:k,p:k,i:k,o:k,d:k}}function wt(s){let e,t,l,n;const r=[At,St],i=[];function o(a,c){return a[1].length>0?0:1}return e=o(s),t=i[e]=r[e](s),{c(){t.c(),l=$()},l(a){t.l(a),l=$()},m(a,c){i[e].m(a,c),A(a,l,c),n=!0},p(a,c){let g=e;e=o(a),e===g?i[e].p(a,c):(oe(),L(i[g],1,1,()=>{i[g]=null}),ce(),t=i[e],t?t.p(a,c):(t=i[e]=r[e](a),t.c()),M(t,1),t.m(l.parentNode,l))},i(a){n||(M(t),n=!0)},o(a){L(t),n=!1},d(a){a&&_(l),i[e].d(a)}}}function St(s){let e,t="Comments for this post are not available. <br/>This can happen if comments have been deleted.";return{c(){e=E("p"),e.innerHTML=t,this.h()},l(l){e=I(l,"P",{class:!0,"data-svelte-h":!0}),st(e)!=="svelte-1f9q9vq"&&(e.innerHTML=t),this.h()},h(){u(e,"class","no-comments svelte-x6zn2h")},m(l,n){A(l,e,n)},p:k,i:k,o:k,d(l){l&&_(e)}}}function At(s){let e,t,l=ae(s[1]),n=[];for(let i=0;i<l.length;i+=1)n[i]=Se(we(s,l,i));const r=i=>L(n[i],1,1,()=>{n[i]=null});return{c(){e=E("ul");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=I(i,"UL",{class:!0});var o=R(e);for(let a=0;a<n.length;a+=1)n[a].l(o);o.forEach(_),this.h()},h(){u(e,"class","comments svelte-x6zn2h")},m(i,o){A(i,e,o);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(i,o){if(o&1){l=ae(i[1]);let a;for(a=0;a<l.length;a+=1){const c=we(i,l,a);n[a]?(n[a].p(c,o),M(n[a],1)):(n[a]=Se(c),n[a].c(),M(n[a],1),n[a].m(e,null))}for(oe(),a=l.length;a<n.length;a+=1)r(a);ce()}},i(i){if(!t){for(let o=0;o<l.length;o+=1)M(n[o]);t=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)L(n[o]);t=!1},d(i){i&&_(e),Le(n,i)}}}function Se(s){let e,t;return e=new yt({props:{comment:s[2]}}),{c(){W(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,n){K(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.comment=l[2]),e.$set(r)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function Et(s){let e,t;return e=new ut({}),{c(){W(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,n){K(e,l,n),t=!0},p:k,i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function It(s){let e,t,l,n={ctx:s,current:null,token:null,hasCatch:!1,pending:Et,then:wt,catch:kt,value:1,blocks:[,,,]};return pe(t=ve(s[0].id),n),{c(){e=$(),n.block.c()},l(r){e=$(),n.block.l(r)},m(r,i){A(r,e,i),n.block.m(r,n.anchor=i),n.mount=()=>e.parentNode,n.anchor=e,l=!0},p(r,[i]){s=r,n.ctx=s,i&1&&t!==(t=ve(s[0].id))&&pe(t,n)||ct(n,s,i)},i(r){l||(M(n.block),l=!0)},o(r){for(let i=0;i<3;i+=1){const o=n.blocks[i];L(o)}l=!1},d(r){r&&_(e),n.block.d(r),n.token=null,n=null}}}function Pt(s,e,t){let{post:l}=e;return s.$$set=n=>{"post"in n&&t(0,l=n.post)},[l]}class ds extends V{constructor(e){super(),G(this,e,Pt,It,N,{post:0})}}function Tt(s){let e,t=s[0].charAt(0).toUpperCase()+"",l,n;return{c(){e=E("span"),l=O(t),this.h()},l(r){e=I(r,"SPAN",{title:!0,class:!0});var i=R(e);l=z(i,t),i.forEach(_),this.h()},h(){u(e,"title",n="Rated "+s[0]+"."),u(e,"class","svelte-1nbj6kf")},m(r,i){A(r,e,i),D(e,l)},p(r,[i]){i&1&&t!==(t=r[0].charAt(0).toUpperCase()+"")&&q(l,t),i&1&&n!==(n="Rated "+r[0]+".")&&u(e,"title",n)},i:k,o:k,d(r){r&&_(e)}}}function Dt(s,e,t){let{value:l}=e;return s.$$set=n=>{"value"in n&&t(0,l=n.value)},[l]}class gs extends V{constructor(e){super(),G(this,e,Dt,Tt,N,{value:0})}}function Ct(s){let e,t=ie(s[0])+"",l;return{c(){e=E("span"),l=O(t),this.h()},l(n){e=I(n,"SPAN",{class:!0});var r=R(e);l=z(r,t),r.forEach(_),this.h()},h(){u(e,"class","svelte-1vqihm9")},m(n,r){A(n,e,r),D(e,l)},p(n,[r]){r&1&&t!==(t=ie(n[0])+"")&&q(l,t)},i:k,o:k,d(n){n&&_(e)}}}function Rt(s,e,t){let{value:l}=e;return s.$$set=n=>{"value"in n&&t(0,l=n.value)},[l]}class ms extends V{constructor(e){super(),G(this,e,Rt,Ct,N,{value:0})}}function Mt(s){let e,t=ye(s[0])+"",l;return{c(){e=E("span"),l=O(t),this.h()},l(n){e=I(n,"SPAN",{"data-testid":!0,class:!0});var r=R(e);l=z(r,t),r.forEach(_),this.h()},h(){u(e,"data-testid","score"),u(e,"class","codicon codicon-heart svelte-te86f3")},m(n,r){A(n,e,r),D(e,l)},p(n,[r]){r&1&&t!==(t=ye(n[0])+"")&&q(l,t)},i:k,o:k,d(n){n&&_(e)}}}function Lt(s,e,t){let{value:l}=e;return s.$$set=n=>{"value"in n&&t(0,l=n.value)},[l]}class ps extends V{constructor(e){super(),G(this,e,Lt,Mt,N,{value:0})}}function Ae(s){let e,t,l,n,r;return{c(){e=E("a"),t=E("i"),l=U(),n=O(s[1]),this.h()},l(i){e=I(i,"A",{href:!0,target:!0,class:!0});var o=R(e);t=I(o,"I",{class:!0}),R(t).forEach(_),l=F(o),n=z(o,s[1]),o.forEach(_),this.h()},h(){u(t,"class","codicon codicon-link"),u(e,"href",r=s[0].toString()),u(e,"target","_newtab"),u(e,"class","svelte-1orztco")},m(i,o){A(i,e,o),D(e,t),D(e,l),D(e,n)},p(i,o){o&2&&q(n,i[1]),o&1&&r!==(r=i[0].toString())&&u(e,"href",r)},d(i){i&&_(e)}}}function Nt(s){let e,t=s[0]&&Ae(s);return{c(){t&&t.c(),e=$()},l(l){t&&t.l(l),e=$()},m(l,n){t&&t.m(l,n),A(l,e,n)},p(l,[n]){l[0]?t?t.p(l,n):(t=Ae(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:k,o:k,d(l){l&&_(e),t&&t.d(l)}}}function Vt(s,e,t){let l,n,{source:r}=e;return s.$$set=i=>{"source"in i&&t(2,r=i.source)},s.$$.update=()=>{var i;s.$$.dirty&4&&t(0,l=ft(r)?new URL(r):null),s.$$.dirty&1&&t(1,n=(i=l==null?void 0:l.hostname)==null?void 0:i.replace(/^www./,""))},[l,n,r]}class bs extends V{constructor(e){super(),G(this,e,Vt,Nt,N,{source:2})}}function Gt(s){let e,t,l;return{c(){e=E("a"),t=E("i"),l=O(" File"),this.h()},l(n){e=I(n,"A",{href:!0,target:!0,class:!0});var r=R(e);t=I(r,"I",{class:!0}),R(t).forEach(_),l=z(r," File"),r.forEach(_),this.h()},h(){u(t,"class","codicon codicon-file"),u(e,"href",s[0]),u(e,"target","_newtab"),u(e,"class","svelte-1orztco")},m(n,r){A(n,e,r),D(e,t),D(e,l)},p(n,[r]){r&1&&u(e,"href",n[0])},i:k,o:k,d(n){n&&_(e)}}}function Ot(s,e,t){let{url:l}=e;return s.$$set=n=>{"url"in n&&t(0,l=n.url)},[l]}class vs extends V{constructor(e){super(),G(this,e,Ot,Gt,N,{url:0})}}function Ee(s,e,t){const l=s.slice();l[4]=e[t];const n=l[1].find(function(...i){return s[3](l[4],...i)})!==void 0;return l[5]=n,l}function Ie(s){let e,t;function l(){return s[2](s[5],s[4])}return e=new ht({props:{tag:s[4],active:s[5]}}),e.$on("click",l),{c(){W(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){s=n;const i={};r&1&&(i.tag=s[4]),r&3&&(i.active=s[5]),e.$set(i)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function Ut(s){let e,t,l=ae(s[0]),n=[];for(let i=0;i<l.length;i+=1)n[i]=Ie(Ee(s,l,i));const r=i=>L(n[i],1,1,()=>{n[i]=null});return{c(){e=E("ul");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=I(i,"UL",{class:!0});var o=R(e);for(let a=0;a<n.length;a+=1)n[a].l(o);o.forEach(_),this.h()},h(){u(e,"class","tags svelte-b5q4us")},m(i,o){A(i,e,o);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(i,[o]){if(o&3){l=ae(i[0]);let a;for(a=0;a<l.length;a+=1){const c=Ee(i,l,a);n[a]?(n[a].p(c,o),M(n[a],1)):(n[a]=Ie(c),n[a].c(),M(n[a],1),n[a].m(e,null))}for(oe(),a=l.length;a<n.length;a+=1)r(a);ce()}},i(i){if(!t){for(let o=0;o<l.length;o+=1)M(n[o]);t=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)L(n[o]);t=!1},d(i){i&&_(e),Le(n,i)}}}function zt(s,e,t){let l;Ne(s,ue,o=>t(1,l=o));let{tags:n}=e;const r=(o,a)=>o?ue.removeByName(a.name):ue.addOrReplace({...a,modifier:"+"}),i=(o,a)=>a.name===o.name;return s.$$set=o=>{"tags"in o&&t(0,n=o.tags)},[n,l,r,i]}class ys extends V{constructor(e){super(),G(this,e,zt,Ut,N,{tags:0})}}const Oe=s=>s.endsWith(".gif"),Ft=(s,e,t)=>Oe(e)?{static:t,animated:e}:{static:e,animated:s},Ue=s=>s.endsWith(".mp4")||s.endsWith(".webm"),ks=(s,e,t)=>Ue(e)?{static:t,animated:e}:{static:e,animated:s},ws=s=>s.some(e=>e.name==="loop"),Ss=s=>Oe(s)||Ue(s),Pe=s=>{if(typeof s!="number")throw new TypeError(`Attempted to call formatVideoTime with invalid value: ${s}`);const e=Math.floor(s),t=e%60,l=Math.floor(e/60);return`${Te(l)}:${Te(t)}`},Te=s=>{const e=String(s),t=Math.max(0,2-e.length);return`${"0".repeat(t)}${e}`},qt=(s,e)=>s&&e?s/e:1,he=(s,e)=>s&&e?`${s} / ${e}`:"1 / 1";function Bt(s){let e,t;return{c(){e=E("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,width:!0,height:!0,style:!0}),this.h()},h(){te(e.src,t=s[3])||u(e,"src",t),u(e,"alt","Start GIF"),u(e,"width","16"),u(e,"height","32"),j(e,"margin-left","4px")},m(l,n){A(l,e,n)},p:k,d(l){l&&_(e)}}}function jt(s){let e,t;return{c(){e=E("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){te(e.src,t=s[4])||u(e,"src",t),u(e,"alt","Stop GIF"),u(e,"width","16"),u(e,"height","32")},m(l,n){A(l,e,n)},p:k,d(l){l&&_(e)}}}function Wt(s){let e,t;return{c(){e=E("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){te(e.src,t=s[2])||u(e,"src",t),u(e,"alt","Loading GIF"),u(e,"width","16"),u(e,"height","32")},m(l,n){A(l,e,n)},p:k,d(l){l&&_(e)}}}function Ht(s){let e,t,l,n;function r(a,c){return a[1]?Wt:a[0]?jt:Bt}let i=r(s),o=i(s);return{c(){e=E("button"),o.c(),this.h()},l(a){e=I(a,"BUTTON",{type:!0,class:!0});var c=R(e);o.l(c),c.forEach(_),this.h()},h(){u(e,"type","button"),u(e,"class",t=de(s[5].class)+" svelte-19k2j29")},m(a,c){A(a,e,c),o.m(e,null),l||(n=T(e,"click",s[6]),l=!0)},p(a,[c]){i===(i=r(a))&&o?o.p(a,c):(o.d(1),o=i(a),o&&(o.c(),o.m(e,null))),c&32&&t!==(t=de(a[5].class)+" svelte-19k2j29")&&u(e,"class",t)},i:k,o:k,d(a){a&&_(e),o.d(),l=!1,n()}}}function Kt(s,e,t){const l=`${fe}/assets/load.svg`,n=`${fe}/assets/play.svg`,r=`${fe}/assets/pause.svg`;let{playing:i}=e,{loading:o}=e;function a(c){ee.call(this,s,c)}return s.$$set=c=>{t(5,e=ne(ne({},e),le(c))),"playing"in c&&t(0,i=c.playing),"loading"in c&&t(1,o=c.loading)},e=le(e),[i,o,l,n,r,e,a]}class ze extends V{constructor(e){super(),G(this,e,Kt,Ht,N,{playing:0,loading:1})}}function De(s){let e,t,l,n=!0,r=!1,i,o,a,c=Pe(s[16])+"",g,p,m,S,f,P,y,C,v;function d(){cancelAnimationFrame(i),e.paused||(i=mt(d),r=!0),s[25].call(e)}return P=new ze({props:{playing:s[5],loading:s[6],class:`center hidable ${s[13]?"hide":""}`}}),P.$on("click",s[19]),{c(){e=E("video"),o=U(),a=E("span"),g=O(c),p=U(),m=E("input"),f=U(),W(P.$$.fragment),this.h()},l(h){e=I(h,"VIDEO",{tabindex:!0,poster:!0,src:!0,preload:!0,style:!0,class:!0}),R(e).forEach(_),o=F(h),a=I(h,"SPAN",{class:!0});var w=R(a);g=z(w,c),w.forEach(_),p=F(h),m=I(h,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0,style:!0}),f=F(h),H(P.$$.fragment,h),this.h()},h(){u(e,"tabindex","0"),u(e,"poster",s[1]),e.loop=s[4],te(e.src,t=s[0])||u(e,"src",t),u(e,"preload","metadata"),u(e,"style",l=`aspect-ratio: ${s[2]} / ${s[3]}`),u(e,"class","svelte-5v7blo"),s[8]===void 0&&at(()=>s[26].call(e)),u(a,"class","hidable svelte-5v7blo"),B(a,"hide",s[10]),u(m,"type","range"),u(m,"min",0),u(m,"max",s[8]),u(m,"step",.0166666),u(m,"class","hidable svelte-5v7blo"),u(m,"style",S=`background-image: linear-gradient(90deg, var(--accent) ${s[14]}%, var(--background-2) ${s[14]}%);}`),B(m,"hide",s[13])},m(h,w){A(h,e,w),s[23](e),A(h,o,w),A(h,a,w),D(a,g),A(h,p,w),A(h,m,w),ge(m,s[7]),A(h,f,w),K(P,h,w),y=!0,C||(v=[T(e,"play",s[24]),T(e,"pause",s[24]),T(e,"timeupdate",d),T(e,"durationchange",s[26]),T(e,"waiting",s[27]),T(e,"playing",s[28]),T(e,"pause",s[29]),T(e,"ended",s[30]),T(e,"click",s[20]),T(e,"dblclick",it(rt(s[17]))),T(m,"change",s[31]),T(m,"input",s[31])],C=!0)},p(h,w){(!y||w[0]&2)&&u(e,"poster",h[1]),(!y||w[0]&16)&&(e.loop=h[4]),(!y||w[0]&1&&!te(e.src,t=h[0]))&&u(e,"src",t),(!y||w[0]&12&&l!==(l=`aspect-ratio: ${h[2]} / ${h[3]}`))&&u(e,"style",l),w[0]&32768&&n!==(n=h[15])&&e[n?"pause":"play"](),!r&&w[0]&128&&!isNaN(h[7])&&(e.currentTime=h[7]),r=!1,(!y||w[0]&65536)&&c!==(c=Pe(h[16])+"")&&q(g,c),(!y||w[0]&1024)&&B(a,"hide",h[10]),(!y||w[0]&256)&&u(m,"max",h[8]),(!y||w[0]&16384&&S!==(S=`background-image: linear-gradient(90deg, var(--accent) ${h[14]}%, var(--background-2) ${h[14]}%);}`))&&u(m,"style",S),w[0]&128&&ge(m,h[7]),(!y||w[0]&8192)&&B(m,"hide",h[13]);const J={};w[0]&32&&(J.playing=h[5]),w[0]&64&&(J.loading=h[6]),w[0]&8192&&(J.class=`center hidable ${h[13]?"hide":""}`),P.$set(J)},i(h){y||(M(P.$$.fragment,h),y=!0)},o(h){L(P.$$.fragment,h),y=!1},d(h){h&&(_(e),_(o),_(a),_(p),_(m),_(f)),s[23](null),Y(P,h),C=!1,re(v)}}}function Yt(s){let e,t,l,n,r,i=s[9]&&De(s);return{c(){e=E("div"),i&&i.c(),this.h()},l(o){e=I(o,"DIV",{class:!0,style:!0});var a=R(e);i&&i.l(a),a.forEach(_),this.h()},h(){u(e,"class",t="post-media player "+s[21].class+" svelte-5v7blo"),j(e,"aspect-ratio",s[2]+"/"+s[3])},m(o,a){A(o,e,a),i&&i.m(e,null),s[32](e),l=!0,n||(r=[T(e,"keydown",s[18]),T(e,"click",s[22])],n=!0)},p(o,a){o[9]?i?(i.p(o,a),a[0]&512&&M(i,1)):(i=De(o),i.c(),M(i,1),i.m(e,null)):i&&(oe(),L(i,1,1,()=>{i=null}),ce()),(!l||a[0]&2097152&&t!==(t="post-media player "+o[21].class+" svelte-5v7blo"))&&u(e,"class",t),(!l||a[0]&12)&&j(e,"aspect-ratio",o[2]+"/"+o[3])},i(o){l||(M(i),l=!0)},o(o){L(i),l=!1},d(o){o&&_(e),i&&i.d(),s[32](null),n=!1,re(r)}}}const Ce=5;function Jt(s,e,t){let l,n,r,i,{src:o}=e,{poster:a}=e,{width:c}=e,{height:g}=e,{loop:p}=e,m,S,f=!1,P=!1,y=0,C=0,v=!1,d=!1;const h=()=>{t(7,y=Math.max(0,y-Ce))},w=()=>{t(7,y=Math.min(C,y+Ce))},J=b=>{b.offsetX<b.target.clientWidth/2?h():w()},qe=b=>{Ve(b)||b.key==="k"?(b.preventDefault(),b.stopPropagation(),t(5,f=!f)):b.key==="ArrowLeft"||b.key==="j"?(b.preventDefault(),b.stopPropagation(),h()):(b.key==="ArrowRight"||b.key==="l")&&(b.preventDefault(),b.stopPropagation(),w())},Q=new IntersectionObserver(b=>{for(const tt of b)tt.isIntersecting?t(9,v=!0):S&&(t(5,f=!1),t(6,P=!1),S.addEventListener("error",()=>{t(9,v=!1)},{once:!0}),t(12,S.src="",S))},{rootMargin:"0px"}),Be=()=>{t(5,f=!f),t(6,P=!0),t(10,d=f)},je=()=>{t(10,d=!d)};nt(()=>Q==null?void 0:Q.observe(m)),lt(()=>Q==null?void 0:Q.unobserve(m));function We(b){ee.call(this,s,b)}function He(b){se[b?"unshift":"push"](()=>{S=b,t(12,S)})}function Ke(){n=this.paused,t(15,n),t(5,f),t(9,v)}function Ye(){y=this.currentTime,t(7,y)}function Je(){C=this.duration,t(8,C)}const Qe=()=>t(6,P=!0),Xe=()=>t(6,P=!1),Ze=()=>t(6,P=!1),xe=()=>{p||(t(6,P=!1),t(5,f=!1))};function $e(){y=ot(this.value),t(7,y)}function et(b){se[b?"unshift":"push"](()=>{m=b,t(11,m)})}return s.$$set=b=>{t(21,e=ne(ne({},e),le(b))),"src"in b&&t(0,o=b.src),"poster"in b&&t(1,a=b.poster),"width"in b&&t(2,c=b.width),"height"in b&&t(3,g=b.height),"loop"in b&&t(4,p=b.loop)},s.$$.update=()=>{s.$$.dirty[0]&384&&t(16,l=C-y),s.$$.dirty[0]&544&&t(5,f=v&&f),s.$$.dirty[0]&32&&t(15,n=!f),s.$$.dirty[0]&384&&t(14,r=y/C*98+1),s.$$.dirty[0]&1120&&t(13,i=f&&!P&&d)},e=le(e),[o,a,c,g,p,f,P,y,C,v,d,m,S,i,r,n,l,J,qe,Be,je,e,We,He,Ke,Ye,Je,Qe,Xe,Ze,xe,$e,et]}class As extends V{constructor(e){super(),G(this,e,Jt,Yt,N,{src:0,poster:1,width:2,height:3,loop:4},null,[-1,-1])}}const Z=new IntersectionObserver(s=>{var e,t;for(const l of s)if(l.isIntersecting){const n=l.target.getAttribute("data-src")??"";(e=l==null?void 0:l.target)==null||e.setAttribute("src",n)}else(t=l==null?void 0:l.target)==null||t.setAttribute("src","https://unload")},{rootMargin:"1250px"}),Fe=s=>(Z==null||Z.observe(s),{destroy(){Z==null||Z.unobserve(s)}});function Re(s){let e,t,l;return{c(){e=E("img"),this.h()},l(n){e=I(n,"IMG",{"data-src":!0,loading:!0,alt:!0,class:!0}),this.h()},h(){u(e,"data-src",s[3]),u(e,"loading","lazy"),u(e,"alt","animated source preload"),u(e,"class","animated-preload svelte-12psnhd")},m(n,r){A(n,e,r),t||(l=_e(Fe.call(null,e)),t=!0)},p(n,r){r&8&&u(e,"data-src",n[3])},d(n){n&&_(e),t=!1,l()}}}function Qt(s){let e,t,l,n,r,i,o,a,c,g,p,m,S,f=s[6]&&Re(s);function P(v){s[13](v)}function y(v){s[14](v)}let C={class:"center"};return s[2]!==void 0&&(C.playing=s[2]),s[4]!==void 0&&(C.loading=s[4]),a=new ze({props:C}),se.push(()=>be(a,"playing",P)),se.push(()=>be(a,"loading",y)),a.$on("click",s[15]),{c(){e=E("div"),t=E("img"),i=U(),f&&f.c(),o=U(),W(a.$$.fragment),this.h()},l(v){e=I(v,"DIV",{class:!0,style:!0});var d=R(e);t=I(d,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,width:!0,height:!0,tabindex:!0}),i=F(d),f&&f.l(d),o=F(d),H(a.$$.fragment,d),d.forEach(_),this.h()},h(){u(t,"class","post-media media-img svelte-12psnhd"),u(t,"loading","lazy"),u(t,"data-src",s[5]),u(t,"alt",l=s[0].id.toString()),u(t,"width",n=s[0].width),u(t,"height",r=s[0].height),u(t,"tabindex","0"),u(e,"class","container svelte-12psnhd"),j(e,"aspect-ratio",he(s[0].width,s[0].height))},m(v,d){A(v,e,d),D(e,t),s[10](t),D(e,i),f&&f.m(e,null),D(e,o),K(a,e,null),p=!0,m||(S=[T(t,"click",s[9]),T(t,"keydown",s[11]),T(t,"load",s[12]),_e(Fe.call(null,t))],m=!0)},p(v,[d]){(!p||d&32)&&u(t,"data-src",v[5]),(!p||d&1&&l!==(l=v[0].id.toString()))&&u(t,"alt",l),(!p||d&1&&n!==(n=v[0].width))&&u(t,"width",n),(!p||d&1&&r!==(r=v[0].height))&&u(t,"height",r),v[6]?f?f.p(v,d):(f=Re(v),f.c(),f.m(e,o)):f&&(f.d(1),f=null);const h={};!c&&d&4&&(c=!0,h.playing=v[2],me(()=>c=!1)),!g&&d&16&&(g=!0,h.loading=v[4],me(()=>g=!1)),a.$set(h),(!p||d&1)&&j(e,"aspect-ratio",he(v[0].width,v[0].height))},i(v){p||(M(a.$$.fragment,v),p=!0)},o(v){L(a.$$.fragment,v),p=!1},d(v){v&&_(e),s[10](null),f&&f.d(),Y(a),m=!1,re(S)}}}function Xt(s,e,t){let l,n,r,i,o;Ne(s,_t,d=>t(6,o=d));let{post:a}=e,c,g=!1,p=!1;function m(d){ee.call(this,s,d)}function S(d){se[d?"unshift":"push"](()=>{c=d,t(1,c),t(2,g),t(3,n),t(7,r),t(8,l),t(0,a)})}const f=d=>{Ge(d),Ve(d)&&(d.preventDefault(),t(4,p=!0),t(2,g=!g))},P=()=>t(4,p=!1);function y(d){g=d,t(2,g)}function C(d){p=d,t(4,p)}const v=()=>{t(4,p=!0),t(2,g=!g)};return s.$$set=d=>{"post"in d&&t(0,a=d.post)},s.$$.update=()=>{s.$$.dirty&1&&t(8,l=Ft(a.file_url,a.sample_url,a.preview_url)),s.$$.dirty&256&&t(3,n=l.animated),s.$$.dirty&256&&t(7,r=l.static),s.$$.dirty&140&&t(5,i=g?n:r),s.$$.dirty&142&&c&&t(1,c.src=g?n:r,c)},[a,c,g,n,p,i,o,r,l,m,S,f,P,y,C,v]}class Es extends V{constructor(e){super(),G(this,e,Xt,Qt,N,{post:0})}}const x=new IntersectionObserver(s=>{var e,t;for(const l of s)if(l.isIntersecting){const n=l.target.getAttribute("data-src")??"";if((l.target.getAttribute("src")??"")===n)return;(e=l==null?void 0:l.target)==null||e.setAttribute("src",n)}else(t=l==null?void 0:l.target)==null||t.setAttribute("src","https://unload")},{rootMargin:"1250px"}),Zt=s=>(x==null||x.observe(s),{destroy(){x==null||x.unobserve(s)}});function xt(s){let e,t,l;return{c(){e=E("img"),this.h()},l(n){e=I(n,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,width:!0,height:!0,tabindex:!0}),this.h()},h(){u(e,"class","post-media svelte-1s97xbu"),u(e,"loading","lazy"),u(e,"data-src",s[0]),u(e,"alt",s[1]),u(e,"width",s[2]),u(e,"height",s[3]),u(e,"tabindex","0")},m(n,r){A(n,e,r),t||(l=[T(e,"click",s[4]),T(e,"load",s[5]),T(e,"keydown",Ge),_e(Zt.call(null,e))],t=!0)},p(n,[r]){r&1&&u(e,"data-src",n[0]),r&2&&u(e,"alt",n[1]),r&4&&u(e,"width",n[2]),r&8&&u(e,"height",n[3])},i:k,o:k,d(n){n&&_(e),t=!1,re(l)}}}function $t(s,e,t){let{src:l}=e,{alt:n}=e,{width:r}=e,{height:i}=e;function o(c){ee.call(this,s,c)}function a(c){ee.call(this,s,c)}return s.$$set=c=>{"src"in c&&t(0,l=c.src),"alt"in c&&t(1,n=c.alt),"width"in c&&t(2,r=c.width),"height"in c&&t(3,i=c.height)},[l,n,r,i,o,a]}class Me extends V{constructor(e){super(),G(this,e,$t,xt,N,{src:0,alt:1,width:2,height:3})}}function es(s){let e,t,l,n,r,i,o;return t=new Me({props:{src:s[5],alt:s[3],width:s[0].width,height:s[0].height}}),n=new Me({props:{src:s[4],alt:s[3],width:s[0].width,height:s[0].height}}),{c(){e=E("div"),W(t.$$.fragment),l=U(),W(n.$$.fragment),this.h()},l(a){e=I(a,"DIV",{style:!0,class:!0});var c=R(e);H(t.$$.fragment,c),l=F(c),H(n.$$.fragment,c),c.forEach(_),this.h()},h(){j(e,"aspect-ratio",s[1]),u(e,"class","svelte-1c0gugi"),B(e,"expandable",s[2]),B(e,"open",s[6])},m(a,c){A(a,e,c),K(t,e,null),D(e,l),K(n,e,null),r=!0,i||(o=T(e,"click",s[8]),i=!0)},p(a,[c]){const g={};c&32&&(g.src=a[5]),c&8&&(g.alt=a[3]),c&1&&(g.width=a[0].width),c&1&&(g.height=a[0].height),t.$set(g);const p={};c&16&&(p.src=a[4]),c&8&&(p.alt=a[3]),c&1&&(p.width=a[0].width),c&1&&(p.height=a[0].height),n.$set(p),(!r||c&2)&&j(e,"aspect-ratio",a[1]),(!r||c&4)&&B(e,"expandable",a[2])},i(a){r||(M(t.$$.fragment,a),M(n.$$.fragment,a),r=!0)},o(a){L(t.$$.fragment,a),L(n.$$.fragment,a),r=!1},d(a){a&&_(e),Y(t),Y(n),i=!1,o()}}}function ts(s,e,t){let l,n,r,i,o,a,{post:c}=e,g;function p(m){ee.call(this,s,m)}return s.$$set=m=>{"post"in m&&t(0,c=m.post)},s.$$.update=()=>{s.$$.dirty&1&&t(5,l=c.preview_url),s.$$.dirty&1&&t(4,n=dt?c.file_url:c.sample_url),s.$$.dirty&1&&t(3,r=c.id.toString()),s.$$.dirty&1&&t(7,i=qt(c.width,c.height)),s.$$.dirty&128&&t(2,o=i<.33),s.$$.dirty&1&&t(1,a=he(c.width,c.height))},[c,a,o,r,n,l,g,i,p]}class Is extends V{constructor(e){super(),G(this,e,ts,es,N,{post:0})}}export{ds as C,bs as E,Es as G,ys as P,gs as R,ps as S,As as V,ms as a,vs as b,Is as c,Ft as d,Ss as e,Pe as f,ks as g,qt as h,ws as i,mt as r};
