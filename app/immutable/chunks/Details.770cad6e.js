import{v as C,s as X,f as S,g as E,h as V,d as _,j as c,L as W,i as T,u as p,F as q,K as Se,o as je,O as Fe,M as Ge,p as oe,r as Ue,N as qe,R as Ae,S as Ie,D as we,k as Me,a as L,l as H,c as R,m as J,T as rt,H as Be,Q as ot,n as ae,I as Ne,J as ct,e as ge,y as ke,C as ut,P as nt}from"./scheduler.88299003.js";import{S as Z,i as Y,a as D,g as me,t as M,c as pe,f as Ce,b as te,d as ne,m as le,e as se}from"./index.15b414ac.js";import{b as Ee}from"./paths.6a57291d.js";import{h as Oe,u as ft}from"./await_block.7017edd9.js";import{e as Te}from"./each.e59479a4.js";import{L as ht}from"./LoadingAnimation.bc4b1a41.js";import{f as ze}from"./format-tag.7e313273.js";import{i as _t}from"./tags.49324235.js";import{a as Ve}from"./posts.779cfae3.js";import{S as dt}from"./SimpleTag.22da9add.js";const gt=typeof window<"u";let mt=gt?n=>requestAnimationFrame(n):C;const pt="https://api.rule34.xxx/index.php?page=dapi&s=comment&q=index&json=1",We=async(n=void 0)=>{if(typeof n!="number"&&n!==void 0)throw new TypeError("Invalid postId");const e=new URL(pt);n!==void 0&&e.searchParams.append("post_id",String(n));const t=await fetch(e);if(!t.ok)throw new Error("Failed to get tag suggestions");const l=await t.text(),r=new DOMParser().parseFromString(l,"text/xml"),a=[];for(const o of r.getElementsByTagName("comment"))a.push(vt(o.attributes));return a},vt=n=>{const e=n.getNamedItem("creator"),t=n.getNamedItem("created_at"),l=n.getNamedItem("body");if(e==null||t==null||l==null)throw new Error(`Failed to parse comment, attribute was null. ${e}, ${t}, ${l}`);return{author:e.value,createdAt:t.value,content:l.value}},lt=n=>(n==null?void 0:n.key)===" ",st=n=>(n==null?void 0:n.key)==="Enter",at=n=>{var e,t;st(n)&&((t=(e=n.target)==null?void 0:e.click)==null||t.call(e))},bt="1250px",Q=new IntersectionObserver(n=>{for(const e of n){const t=e.isIntersecting?e.target.getAttribute("data-src")??"":"";e.target.setAttribute("src",t)}},{rootMargin:bt});function yt(n){let e,t,l,s,r,a,o,i,h;return{c(){e=S("div"),t=S("img"),this.h()},l(u){e=E(u,"DIV",{class:!0});var f=V(e);t=E(f,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,style:!0,width:!0,height:!0,tabindex:!0}),f.forEach(_),this.h()},h(){c(t,"class","post-media svelte-dgcl67"),c(t,"loading","lazy"),c(t,"data-src",l=n[0].sample_url),c(t,"alt",s=n[0].id.toString()),c(t,"style",r=`aspect-ratio: ${n[0].width} / ${n[0].height}`),c(t,"width",a=n[0].width),c(t,"height",o=n[0].height),c(t,"tabindex","0"),c(e,"class","svelte-dgcl67"),W(e,"expandable",n[3]),W(e,"open",n[1])},m(u,f){T(u,e,f),p(e,t),n[6](t),i||(h=[q(t,"click",n[5]),q(t,"keydown",at),q(t,"error",n[7])],i=!0)},p(u,[f]){f&1&&l!==(l=u[0].sample_url)&&c(t,"data-src",l),f&1&&s!==(s=u[0].id.toString())&&c(t,"alt",s),f&1&&r!==(r=`aspect-ratio: ${u[0].width} / ${u[0].height}`)&&c(t,"style",r),f&1&&a!==(a=u[0].width)&&c(t,"width",a),f&1&&o!==(o=u[0].height)&&c(t,"height",o),f&8&&W(e,"expandable",u[3]),f&2&&W(e,"open",u[1])},i:C,o:C,d(u){u&&_(e),n[6](null),i=!1,Se(h)}}}function kt(n,e,t){let l,s,{post:r}=e,{open:a}=e,o;je(()=>{Q==null||Q.observe(o)}),Fe(()=>{Q==null||Q.unobserve(o)});function i(f){Ge.call(this,n,f)}function h(f){oe[f?"unshift":"push"](()=>{o=f,t(2,o)})}const u=f=>f.target.src=`${Ee}/assets/failed-to-load.svg`;return n.$$set=f=>{"post"in f&&t(0,r=f.post),"open"in f&&t(1,a=f.open)},n.$$.update=()=>{n.$$.dirty&1&&t(4,l=r.width/r.height),n.$$.dirty&16&&t(3,s=l<.33)},[r,a,o,s,l,i,h,u]}class yn extends Z{constructor(e){super(),Y(this,e,kt,yt,X,{post:0,open:1})}}const Ke=n=>{if(typeof n!="number")throw new TypeError(`Attempted to call formatVideoTime with invalid value: ${n}`);const e=Math.floor(n),t=e%60,l=Math.floor(e/60);return`${He(l)}:${He(t)}`},He=n=>{const e=String(n),t=Math.max(0,2-e.length);return`${"0".repeat(t)}${e}`};function wt(n){let e,t;return{c(){e=S("img"),this.h()},l(l){e=E(l,"IMG",{src:!0,alt:!0,width:!0,height:!0,style:!0}),this.h()},h(){we(e.src,t=Ee+"/assets/play.svg")||c(e,"src",t),c(e,"alt","Start GIF"),c(e,"width","16"),c(e,"height","32"),Me(e,"margin-left","4px")},m(l,s){T(l,e,s)},p:C,d(l){l&&_(e)}}}function St(n){let e,t;return{c(){e=S("img"),this.h()},l(l){e=E(l,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){we(e.src,t=Ee+"/assets/pause.svg")||c(e,"src",t),c(e,"alt","Stop GIF"),c(e,"width","16"),c(e,"height","32")},m(l,s){T(l,e,s)},p:C,d(l){l&&_(e)}}}function Et(n){let e,t;return{c(){e=S("img"),this.h()},l(l){e=E(l,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){we(e.src,t=Ee+"/assets/load.svg")||c(e,"src",t),c(e,"alt","Loading GIF"),c(e,"width","16"),c(e,"height","32")},m(l,s){T(l,e,s)},p:C,d(l){l&&_(e)}}}function At(n){let e,t,l,s,r;function a(h,u){return h[1]?Et:h[0]?St:wt}let o=a(n),i=o(n);return{c(){e=S("button"),t=S("div"),i.c(),this.h()},l(h){e=E(h,"BUTTON",{class:!0});var u=V(e);t=E(u,"DIV",{class:!0});var f=V(t);i.l(f),f.forEach(_),u.forEach(_),this.h()},h(){c(t,"class","circle svelte-16x84bp"),c(e,"class",l=Ue(n[3].class)+" svelte-16x84bp"),W(e,"play",n[0]&&!n[1])},m(h,u){T(h,e,u),p(e,t),i.m(t,null),s||(r=q(e,"click",qe(n[2])),s=!0)},p(h,[u]){o===(o=a(h))&&i?i.p(h,u):(i.d(1),i=o(h),i&&(i.c(),i.m(t,null))),u&8&&l!==(l=Ue(h[3].class)+" svelte-16x84bp")&&c(e,"class",l),u&11&&W(e,"play",h[0]&&!h[1])},i:C,o:C,d(h){h&&_(e),i.d(),s=!1,r()}}}function It(n,e,t){let{playing:l}=e,{loading:s}=e;const r=()=>{t(1,s=!0),t(0,l=!l)};return n.$$set=a=>{t(3,e=Ae(Ae({},e),Ie(a))),"playing"in a&&t(0,l=a.playing),"loading"in a&&t(1,s=a.loading)},e=Ie(e),[l,s,r,e]}class it extends Z{constructor(e){super(),Y(this,e,It,At,X,{playing:0,loading:1})}}function Je(n){let e,t,l,s=!0,r=!1,a,o,i,h=Ke(n[15])+"",u,f,b,w,k,A,m,y,g,B,$;function K(){cancelAnimationFrame(a),e.paused||(a=mt(K),r=!0),n[25].call(e)}function F(d){n[30](d)}function ie(d){n[31](d)}let x={class:"center"};return n[5]!==void 0&&(x.playing=n[5]),n[6]!==void 0&&(x.loading=n[6]),A=new it({props:x}),oe.push(()=>Ce(A,"playing",F)),oe.push(()=>Ce(A,"loading",ie)),{c(){e=S("video"),o=L(),i=S("span"),u=H(h),f=L(),b=S("input"),k=L(),te(A.$$.fragment),this.h()},l(d){e=E(d,"VIDEO",{poster:!0,src:!0,preload:!0,style:!0,class:!0}),V(e).forEach(_),o=R(d),i=E(d,"SPAN",{class:!0});var N=V(i);u=J(N,h),N.forEach(_),f=R(d),b=E(d,"INPUT",{type:!0,min:!0,max:!0,step:!0,style:!0,class:!0}),k=R(d),ne(A.$$.fragment,d),this.h()},h(){c(e,"poster",n[1]),e.loop=n[4],we(e.src,t=n[0])||c(e,"src",t),c(e,"preload","metadata"),c(e,"style",l=`aspect-ratio: ${n[2]} / ${n[3]}`),c(e,"class","svelte-5yiaie"),n[8]===void 0&&rt(()=>n[26].call(e)),c(i,"class","svelte-5yiaie"),W(i,"hide",n[12]),c(b,"type","range"),c(b,"min",0),c(b,"max",n[8]),c(b,"step",.0166666),c(b,"style",w=`background-image: linear-gradient(90deg, var(--accent) ${n[13]}%, var(--background-2) ${n[13]}%);}`),c(b,"class","svelte-5yiaie"),W(b,"hide",n[12])},m(d,N){T(d,e,N),n[23](e),T(d,o,N),T(d,i,N),p(i,u),T(d,f,N),T(d,b,N),Be(b,n[7]),T(d,k,N),le(A,d,N),g=!0,B||($=[q(e,"play",n[24]),q(e,"pause",n[24]),q(e,"timeupdate",K),q(e,"durationchange",n[26]),q(e,"waiting",n[19]),q(e,"playing",n[20]),q(e,"pause",n[20]),q(e,"ended",n[27]),q(e,"dblclick",qe(ot(n[28]))),q(b,"change",n[29]),q(b,"input",n[29]),q(b,"click",qe(Ct))],B=!0)},p(d,N){(!g||N[0]&2)&&c(e,"poster",d[1]),(!g||N[0]&16)&&(e.loop=d[4]),(!g||N[0]&1&&!we(e.src,t=d[0]))&&c(e,"src",t),(!g||N[0]&12&&l!==(l=`aspect-ratio: ${d[2]} / ${d[3]}`))&&c(e,"style",l),N[0]&16384&&s!==(s=d[14])&&e[s?"pause":"play"](),!r&&N[0]&128&&!isNaN(d[7])&&(e.currentTime=d[7]),r=!1,(!g||N[0]&32768)&&h!==(h=Ke(d[15])+"")&&ae(u,h),(!g||N[0]&4096)&&W(i,"hide",d[12]),(!g||N[0]&256)&&c(b,"max",d[8]),(!g||N[0]&8192&&w!==(w=`background-image: linear-gradient(90deg, var(--accent) ${d[13]}%, var(--background-2) ${d[13]}%);}`))&&c(b,"style",w),N[0]&128&&Be(b,d[7]),(!g||N[0]&4096)&&W(b,"hide",d[12]);const U={};!m&&N[0]&32&&(m=!0,U.playing=d[5],Ne(()=>m=!1)),!y&&N[0]&64&&(y=!0,U.loading=d[6],Ne(()=>y=!1)),A.$set(U)},i(d){g||(D(A.$$.fragment,d),g=!0)},o(d){M(A.$$.fragment,d),g=!1},d(d){d&&(_(e),_(o),_(i),_(f),_(b),_(k)),n[23](null),se(A,d),B=!1,Se($)}}}function Nt(n){let e,t,l,s,r,a=n[9]&&Je(n);return{c(){e=S("div"),a&&a.c(),this.h()},l(o){e=E(o,"DIV",{tabindex:!0,class:!0,style:!0});var i=V(e);a&&a.l(i),i.forEach(_),this.h()},h(){c(e,"tabindex","0"),c(e,"class",t="post-media player "+n[21].class+" svelte-5yiaie"),Me(e,"aspect-ratio",n[2]+"/"+n[3])},m(o,i){T(o,e,i),a&&a.m(e,null),n[32](e),l=!0,s||(r=[q(e,"click",n[22]),q(e,"keydown",n[18])],s=!0)},p(o,i){o[9]?a?(a.p(o,i),i[0]&512&&D(a,1)):(a=Je(o),a.c(),D(a,1),a.m(e,null)):a&&(me(),M(a,1,1,()=>{a=null}),pe()),(!l||i[0]&2097152&&t!==(t="post-media player "+o[21].class+" svelte-5yiaie"))&&c(e,"class",t),(!l||i[0]&12)&&Me(e,"aspect-ratio",o[2]+"/"+o[3])},i(o){l||(D(a),l=!0)},o(o){M(a),l=!1},d(o){o&&_(e),a&&a.d(),n[32](null),s=!1,Se(r)}}}const Qe=5,Ct=()=>{};function Tt(n,e,t){let l,s,r,a,{src:o}=e,{poster:i}=e,{width:h}=e,{height:u}=e,{loop:f}=e,b,w,k=!1,A=!1,m=0,y=0,g=!1;const B=()=>{t(7,m=Math.max(0,m-Qe))},$=()=>{t(7,m=Math.min(y,m+Qe))},K=v=>{var P;st(v)?(P=v.target)==null||P.click():lt(v)||v.key==="k"?(v.preventDefault(),t(5,k=!k)):v.key==="ArrowLeft"||v.key==="j"?B():(v.key==="ArrowRight"||v.key==="l")&&$()},F=new IntersectionObserver(v=>{for(const P of v)P.isIntersecting?t(9,g=!0):w&&(t(5,k=!1),t(6,A=!1),w.addEventListener("error",()=>{t(9,g=!1)},{once:!0}),t(11,w.src="",w))},{rootMargin:"0px"}),ie=()=>t(6,A=!0),x=()=>t(6,A=!1);je(()=>F==null?void 0:F.observe(b)),Fe(()=>F==null?void 0:F.unobserve(b));function d(v){Ge.call(this,n,v)}function N(v){oe[v?"unshift":"push"](()=>{w=v,t(11,w)})}function U(){s=this.paused,t(14,s),t(5,k),t(9,g)}function ce(){m=this.currentTime,t(7,m)}function fe(){y=this.duration,t(8,y)}const ve=()=>{f||(t(6,A=!1),t(5,k=!1))},be=v=>{v.offsetX<v.target.clientWidth/2?B():$()};function O(){m=ct(this.value),t(7,m)}function z(v){k=v,t(5,k),t(9,g)}function ee(v){A=v,t(6,A)}function ye(v){oe[v?"unshift":"push"](()=>{b=v,t(10,b)})}return n.$$set=v=>{t(21,e=Ae(Ae({},e),Ie(v))),"src"in v&&t(0,o=v.src),"poster"in v&&t(1,i=v.poster),"width"in v&&t(2,h=v.width),"height"in v&&t(3,u=v.height),"loop"in v&&t(4,f=v.loop)},n.$$.update=()=>{n.$$.dirty[0]&384&&t(15,l=y-m),n.$$.dirty[0]&544&&t(5,k=g&&k),n.$$.dirty[0]&32&&t(14,s=!k),n.$$.dirty[0]&384&&t(13,r=m/y*98+1),n.$$.dirty[0]&96&&t(12,a=k&&!A)},e=Ie(e),[o,i,h,u,f,k,A,m,y,g,b,w,a,r,s,l,B,$,K,ie,x,e,d,N,U,ce,fe,ve,be,O,z,ee,ye]}class kn extends Z{constructor(e){super(),Y(this,e,Tt,Nt,X,{src:0,poster:1,width:2,height:3,loop:4},null,[-1,-1])}}const Dt=n=>n.endsWith(".gif"),Pt=(n,e,t)=>Dt(e)?{static:t,animated:e}:{static:e,animated:n},Vt=n=>n.endsWith(".mp4")||n.endsWith(".webm"),wn=(n,e,t)=>Vt(e)?{static:t,animated:e}:{static:e,animated:n};function qt(n){let e,t,l,s,r,a,o,i,h,u,f,b,w;function k(y){n[11](y)}function A(y){n[12](y)}let m={class:"center"};return n[2]!==void 0&&(m.playing=n[2]),n[3]!==void 0&&(m.loading=n[3]),o=new it({props:m}),oe.push(()=>Ce(o,"playing",k)),oe.push(()=>Ce(o,"loading",A)),{c(){e=S("div"),t=S("img"),a=L(),te(o.$$.fragment),this.h()},l(y){e=E(y,"DIV",{class:!0,style:!0});var g=V(e);t=E(g,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,width:!0,height:!0,tabindex:!0}),a=R(g),ne(o.$$.fragment,g),g.forEach(_),this.h()},h(){c(t,"class","post-media media-img svelte-1cndgba"),c(t,"loading","lazy"),c(t,"data-src",n[4]),c(t,"alt",l=n[0].id.toString()),c(t,"width",s=n[0].width),c(t,"height",r=n[0].height),c(t,"tabindex","0"),c(e,"class","container svelte-1cndgba"),c(e,"style",u=`aspect-ratio: ${n[0].width} / ${n[0].height}`)},m(y,g){T(y,e,g),p(e,t),n[7](t),p(e,a),le(o,e,null),f=!0,b||(w=[q(t,"click",n[6]),q(t,"keydown",n[8]),q(t,"load",n[9]),q(t,"error",n[10])],b=!0)},p(y,[g]){(!f||g&16)&&c(t,"data-src",y[4]),(!f||g&1&&l!==(l=y[0].id.toString()))&&c(t,"alt",l),(!f||g&1&&s!==(s=y[0].width))&&c(t,"width",s),(!f||g&1&&r!==(r=y[0].height))&&c(t,"height",r);const B={};!i&&g&4&&(i=!0,B.playing=y[2],Ne(()=>i=!1)),!h&&g&8&&(h=!0,B.loading=y[3],Ne(()=>h=!1)),o.$set(B),(!f||g&1&&u!==(u=`aspect-ratio: ${y[0].width} / ${y[0].height}`))&&c(e,"style",u)},i(y){f||(D(o.$$.fragment,y),f=!0)},o(y){M(o.$$.fragment,y),f=!1},d(y){y&&_(e),n[7](null),se(o),b=!1,Se(w)}}}function Mt(n,e,t){let l,s,{post:r}=e,a,o=!1,i=!1;je(()=>Q==null?void 0:Q.observe(a)),Fe(()=>Q==null?void 0:Q.unobserve(a));function h(m){Ge.call(this,n,m)}function u(m){oe[m?"unshift":"push"](()=>{a=m,t(1,a),t(2,o),t(5,l),t(0,r)})}const f=m=>{at(m),lt(m)&&(m.preventDefault(),t(3,i=!0),t(2,o=!o))},b=()=>t(3,i=!1),w=m=>{t(3,i=!1),m.target.src=`${Ee}/assets/failed-to-load.svg`};function k(m){o=m,t(2,o)}function A(m){i=m,t(3,i)}return n.$$set=m=>{"post"in m&&t(0,r=m.post)},n.$$.update=()=>{n.$$.dirty&1&&t(5,l=Pt(r.file_url,r.sample_url,r.preview_url)),n.$$.dirty&36&&t(4,s=o?l.animated:l.static),n.$$.dirty&38&&a&&t(1,a.src=o?l.animated:l.static,a)},[r,a,o,i,s,l,h,u,f,b,w,k,A]}class Sn extends Z{constructor(e){super(),Y(this,e,Mt,qt,X,{post:0})}}const Xe=6e4,De=n=>{if(!jt(n))throw new TypeError("Invalid createdAt passed to formatCreatedAt");const e=new Date(n).getTime()/Xe,l=new Date().getTime()/Xe-e;if(l<1)return"just now";if(l<60)return de(l,"minute");const s=l/60;if(s<24)return de(s,"hour");const r=s/24;if(r<7)return de(r,"day");if(r<30.5)return de(r/7,"week");if(r<365.25)return de(r/30.5,"month");const a=r/365.25;return de(a,"year")},jt=n=>(typeof n=="number"||typeof n=="string")&&new Date(n).toString()!=="Invalid Date",de=(n,e)=>{const t=n.toFixed();return`${t} ${e}${t==="1"?"":"s"} ago`};function Ft(n){let e,t,l=n[0].author+"",s,r,a,o=De(n[0].createdAt)+"",i,h,u,f=n[0].content+"",b;return{c(){e=S("div"),t=S("span"),s=H(l),r=L(),a=S("span"),i=H(o),h=L(),u=S("span"),b=H(f),this.h()},l(w){e=E(w,"DIV",{class:!0});var k=V(e);t=E(k,"SPAN",{class:!0});var A=V(t);s=J(A,l),A.forEach(_),r=R(k),a=E(k,"SPAN",{class:!0});var m=V(a);i=J(m,o),m.forEach(_),h=R(k),u=E(k,"SPAN",{class:!0});var y=V(u);b=J(y,f),y.forEach(_),k.forEach(_),this.h()},h(){c(t,"class","author svelte-gbprdj"),c(a,"class","created-at svelte-gbprdj"),c(u,"class","content svelte-gbprdj"),c(e,"class","svelte-gbprdj")},m(w,k){T(w,e,k),p(e,t),p(t,s),p(e,r),p(e,a),p(a,i),p(e,h),p(e,u),p(u,b)},p(w,[k]){k&1&&l!==(l=w[0].author+"")&&ae(s,l),k&1&&o!==(o=De(w[0].createdAt)+"")&&ae(i,o),k&1&&f!==(f=w[0].content+"")&&ae(b,f)},i:C,o:C,d(w){w&&_(e)}}}function Gt(n,e,t){let{comment:l}=e;return n.$$set=s=>{"comment"in s&&t(0,l=s.comment)},[l]}class Lt extends Z{constructor(e){super(),Y(this,e,Gt,Ft,X,{comment:0})}}function Rt(n){let e,t=De(n[0])+"",l;return{c(){e=S("span"),l=H(t),this.h()},l(s){e=E(s,"SPAN",{class:!0});var r=V(e);l=J(r,t),r.forEach(_),this.h()},h(){c(e,"class","svelte-1vqihm9")},m(s,r){T(s,e,r),p(e,l)},p(s,[r]){r&1&&t!==(t=De(s[0])+"")&&ae(l,t)},i:C,o:C,d(s){s&&_(e)}}}function Ut(n,e,t){let{value:l}=e;return n.$$set=s=>{"value"in s&&t(0,l=s.value)},[l]}class Bt extends Z{constructor(e){super(),Y(this,e,Ut,Rt,X,{value:0})}}function Ot(n){let e,t=ze(n[0])+"",l;return{c(){e=S("span"),l=H(t),this.h()},l(s){e=E(s,"SPAN",{"data-testid":!0,class:!0});var r=V(e);l=J(r,t),r.forEach(_),this.h()},h(){c(e,"data-testid","score"),c(e,"class","codicon codicon-heart svelte-ws217e")},m(s,r){T(s,e,r),p(e,l)},p(s,[r]){r&1&&t!==(t=ze(s[0])+"")&&ae(l,t)},i:C,o:C,d(s){s&&_(e)}}}function zt(n,e,t){let{value:l}=e;return n.$$set=s=>{"value"in s&&t(0,l=s.value)},[l]}class Wt extends Z{constructor(e){super(),Y(this,e,zt,Ot,X,{value:0})}}function Ze(n){let e,t,l,s,r;return{c(){e=S("a"),t=S("i"),l=L(),s=H(n[1]),this.h()},l(a){e=E(a,"A",{href:!0,target:!0,class:!0});var o=V(e);t=E(o,"I",{class:!0}),V(t).forEach(_),l=R(o),s=J(o,n[1]),o.forEach(_),this.h()},h(){c(t,"class","codicon codicon-link"),c(e,"href",r=n[0].toString()),c(e,"target","_newtab"),c(e,"class","svelte-oadf5t")},m(a,o){T(a,e,o),p(e,t),p(e,l),p(e,s)},p(a,o){o&2&&ae(s,a[1]),o&1&&r!==(r=a[0].toString())&&c(e,"href",r)},d(a){a&&_(e)}}}function Kt(n){let e,t=n[0]&&Ze(n);return{c(){t&&t.c(),e=ge()},l(l){t&&t.l(l),e=ge()},m(l,s){t&&t.m(l,s),T(l,e,s)},p(l,[s]){l[0]?t?t.p(l,s):(t=Ze(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:C,o:C,d(l){l&&_(e),t&&t.d(l)}}}function Ht(n,e,t){let l,s,{source:r}=e;return n.$$set=a=>{"source"in a&&t(2,r=a.source)},n.$$.update=()=>{var a;n.$$.dirty&4&&t(0,l=_t(r)?new URL(r):null),n.$$.dirty&1&&t(1,s=(a=l==null?void 0:l.hostname)==null?void 0:a.replace(/^www./,""))},[l,s,r]}class Jt extends Z{constructor(e){super(),Y(this,e,Ht,Kt,X,{source:2})}}function Qt(n){let e,t,l;return{c(){e=S("a"),t=S("i"),l=H(" File"),this.h()},l(s){e=E(s,"A",{href:!0,target:!0,class:!0});var r=V(e);t=E(r,"I",{class:!0}),V(t).forEach(_),l=J(r," File"),r.forEach(_),this.h()},h(){c(t,"class","codicon codicon-link-external"),c(e,"href",n[0]),c(e,"target","_newtab"),c(e,"class","svelte-oadf5t")},m(s,r){T(s,e,r),p(e,t),p(e,l)},p(s,[r]){r&1&&c(e,"href",s[0])},i:C,o:C,d(s){s&&_(e)}}}function Xt(n,e,t){let{url:l}=e;return n.$$set=s=>{"url"in s&&t(0,l=s.url)},[l]}class Zt extends Z{constructor(e){super(),Y(this,e,Xt,Qt,X,{url:0})}}function Yt(n){let e,t=n[0].charAt(0).toUpperCase()+"",l,s;return{c(){e=S("span"),l=H(t),this.h()},l(r){e=E(r,"SPAN",{title:!0,class:!0});var a=V(e);l=J(a,t),a.forEach(_),this.h()},h(){c(e,"title",s="Rated "+n[0]+"."),c(e,"class","svelte-1nbj6kf")},m(r,a){T(r,e,a),p(e,l)},p(r,[a]){a&1&&t!==(t=r[0].charAt(0).toUpperCase()+"")&&ae(l,t),a&1&&s!==(s="Rated "+r[0]+".")&&c(e,"title",s)},i:C,o:C,d(r){r&&_(e)}}}function $t(n,e,t){let{value:l}=e;return n.$$set=s=>{"value"in s&&t(0,l=s.value)},[l]}class xt extends Z{constructor(e){super(),Y(this,e,$t,Yt,X,{value:0})}}function Ye(n,e,t){const l=n.slice();return l[12]=e[t],l}function $e(n,e,t){const l=n.slice();l[7]=e[t];const s=l[2].find(function(...a){return n[6](l[7],...a)})!==void 0;return l[8]=s,l}function xe(n){let e,t="•",l,s,r;return s=new Jt({props:{source:n[0].source}}),{c(){e=S("span"),e.textContent=t,l=L(),te(s.$$.fragment),this.h()},l(a){e=E(a,"SPAN",{class:!0,"data-svelte-h":!0}),ke(e)!=="svelte-7hh8jk"&&(e.textContent=t),l=R(a),ne(s.$$.fragment,a),this.h()},h(){c(e,"class","svelte-4c1qy8")},m(a,o){T(a,e,o),T(a,l,o),le(s,a,o),r=!0},p(a,o){const i={};o&1&&(i.source=a[0].source),s.$set(i)},i(a){r||(D(s.$$.fragment,a),r=!0)},o(a){M(s.$$.fragment,a),r=!1},d(a){a&&(_(e),_(l)),se(s,a)}}}function en(n){let e,t,l,s={ctx:n,current:null,token:null,hasCatch:!1,pending:rn,then:ln,catch:nn,value:11,blocks:[,,,]};return Oe(t=We(n[0].id),s),{c(){e=ge(),s.block.c()},l(r){e=ge(),s.block.l(r)},m(r,a){T(r,e,a),s.block.m(r,s.anchor=a),s.mount=()=>e.parentNode,s.anchor=e,l=!0},p(r,a){n=r,s.ctx=n,a&1&&t!==(t=We(n[0].id))&&Oe(t,s)||ft(s,n,a)},i(r){l||(D(s.block),l=!0)},o(r){for(let a=0;a<3;a+=1){const o=s.blocks[a];M(o)}l=!1},d(r){r&&_(e),s.block.d(r),s.token=null,s=null}}}function tn(n){let e,t,l=Te(n[0].tags),s=[];for(let a=0;a<l.length;a+=1)s[a]=tt($e(n,l,a));const r=a=>M(s[a],1,1,()=>{s[a]=null});return{c(){e=S("ul");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=E(a,"UL",{class:!0});var o=V(e);for(let i=0;i<s.length;i+=1)s[i].l(o);o.forEach(_),this.h()},h(){c(e,"class","tags svelte-4c1qy8")},m(a,o){T(a,e,o);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(a,o){if(o&5){l=Te(a[0].tags);let i;for(i=0;i<l.length;i+=1){const h=$e(a,l,i);s[i]?(s[i].p(h,o),D(s[i],1)):(s[i]=tt(h),s[i].c(),D(s[i],1),s[i].m(e,null))}for(me(),i=l.length;i<s.length;i+=1)r(i);pe()}},i(a){if(!t){for(let o=0;o<l.length;o+=1)D(s[o]);t=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)M(s[o]);t=!1},d(a){a&&_(e),nt(s,a)}}}function nn(n){return{c:C,l:C,m:C,p:C,i:C,o:C,d:C}}function ln(n){let e,t,l,s;const r=[an,sn],a=[];function o(i,h){return i[11].length>0?0:1}return e=o(n),t=a[e]=r[e](n),{c(){t.c(),l=ge()},l(i){t.l(i),l=ge()},m(i,h){a[e].m(i,h),T(i,l,h),s=!0},p(i,h){let u=e;e=o(i),e===u?a[e].p(i,h):(me(),M(a[u],1,1,()=>{a[u]=null}),pe(),t=a[e],t?t.p(i,h):(t=a[e]=r[e](i),t.c()),D(t,1),t.m(l.parentNode,l))},i(i){s||(D(t),s=!0)},o(i){M(t),s=!1},d(i){i&&_(l),a[e].d(i)}}}function sn(n){let e,t="Comments for this post are not available";return{c(){e=S("span"),e.textContent=t,this.h()},l(l){e=E(l,"SPAN",{class:!0,"data-svelte-h":!0}),ke(e)!=="svelte-4t2lxe"&&(e.textContent=t),this.h()},h(){c(e,"class","no-comments svelte-4c1qy8")},m(l,s){T(l,e,s)},p:C,i:C,o:C,d(l){l&&_(e)}}}function an(n){let e,t,l=Te(n[11]),s=[];for(let a=0;a<l.length;a+=1)s[a]=et(Ye(n,l,a));const r=a=>M(s[a],1,1,()=>{s[a]=null});return{c(){e=S("ul");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=E(a,"UL",{class:!0});var o=V(e);for(let i=0;i<s.length;i+=1)s[i].l(o);o.forEach(_),this.h()},h(){c(e,"class","comments svelte-4c1qy8")},m(a,o){T(a,e,o);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(a,o){if(o&1){l=Te(a[11]);let i;for(i=0;i<l.length;i+=1){const h=Ye(a,l,i);s[i]?(s[i].p(h,o),D(s[i],1)):(s[i]=et(h),s[i].c(),D(s[i],1),s[i].m(e,null))}for(me(),i=l.length;i<s.length;i+=1)r(i);pe()}},i(a){if(!t){for(let o=0;o<l.length;o+=1)D(s[o]);t=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)M(s[o]);t=!1},d(a){a&&_(e),nt(s,a)}}}function et(n){let e,t;return e=new Lt({props:{comment:n[12]}}),{c(){te(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const r={};s&1&&(r.comment=l[12]),e.$set(r)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function rn(n){let e,t;return e=new ht({}),{c(){te(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p:C,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function tt(n){let e,t;function l(){return n[5](n[8],n[7])}return e=new dt({props:{tag:n[7],active:n[8]}}),e.$on("click",l),{c(){te(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,r){le(e,s,r),t=!0},p(s,r){n=s;const a={};r&1&&(a.tag=n[7]),r&5&&(a.active=n[8]),e.$set(a)},i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function on(n){let e,t,l,s,r,a="•",o,i,h,u,f="•",b,w,k,A,m="•",y,g,B,$,K,F,ie=n[0].tags.length+"",x,d,N,U,ce=(n[0].comment_count||"No")+"",fe,ve,be,O,z,ee,ye,v;l=new xt({props:{value:n[0].rating}}),i=new Wt({props:{value:n[0].score}}),w=new Bt({props:{value:n[0].change}}),g=new Zt({props:{url:n[0].file_url}});let P=n[0].source&&xe(n);const Le=[tn,en],re=[];function Re(I,j){return I[1]==="tags"?0:1}return O=Re(n),z=re[O]=Le[O](n),{c(){e=S("div"),t=S("div"),te(l.$$.fragment),s=L(),r=S("span"),r.textContent=a,o=L(),te(i.$$.fragment),h=L(),u=S("span"),u.textContent=f,b=L(),te(w.$$.fragment),k=L(),A=S("span"),A.textContent=m,y=L(),te(g.$$.fragment),B=L(),P&&P.c(),$=L(),K=S("div"),F=S("button"),x=H(ie),d=H(" tags"),N=L(),U=S("button"),fe=H(ce),ve=H(" comments"),be=L(),z.c(),this.h()},l(I){e=E(I,"DIV",{class:!0});var j=V(e);t=E(j,"DIV",{class:!0});var G=V(t);ne(l.$$.fragment,G),s=R(G),r=E(G,"SPAN",{class:!0,"data-svelte-h":!0}),ke(r)!=="svelte-7hh8jk"&&(r.textContent=a),o=R(G),ne(i.$$.fragment,G),h=R(G),u=E(G,"SPAN",{class:!0,"data-svelte-h":!0}),ke(u)!=="svelte-7hh8jk"&&(u.textContent=f),b=R(G),ne(w.$$.fragment,G),k=R(G),A=E(G,"SPAN",{class:!0,"data-svelte-h":!0}),ke(A)!=="svelte-7hh8jk"&&(A.textContent=m),y=R(G),ne(g.$$.fragment,G),B=R(G),P&&P.l(G),G.forEach(_),$=R(j),K=E(j,"DIV",{class:!0});var ue=V(K);F=E(ue,"BUTTON",{class:!0});var he=V(F);x=J(he,ie),d=J(he," tags"),he.forEach(_),N=R(ue),U=E(ue,"BUTTON",{class:!0});var _e=V(U);fe=J(_e,ce),ve=J(_e," comments"),_e.forEach(_),ue.forEach(_),be=R(j),z.l(j),j.forEach(_),this.h()},h(){c(r,"class","svelte-4c1qy8"),c(u,"class","svelte-4c1qy8"),c(A,"class","svelte-4c1qy8"),c(t,"class","summary svelte-4c1qy8"),c(F,"class","codicon codicon-tag svelte-4c1qy8"),W(F,"active",n[1]==="tags"),c(U,"class","codicon codicon-comment-discussion svelte-4c1qy8"),W(U,"active",n[1]==="comments"),c(K,"class","tabs svelte-4c1qy8"),c(e,"class","details svelte-4c1qy8")},m(I,j){T(I,e,j),p(e,t),le(l,t,null),p(t,s),p(t,r),p(t,o),le(i,t,null),p(t,h),p(t,u),p(t,b),le(w,t,null),p(t,k),p(t,A),p(t,y),le(g,t,null),p(t,B),P&&P.m(t,null),p(e,$),p(e,K),p(K,F),p(F,x),p(F,d),p(K,N),p(K,U),p(U,fe),p(U,ve),p(e,be),re[O].m(e,null),ee=!0,ye||(v=[q(F,"click",n[3]),q(U,"click",n[4])],ye=!0)},p(I,[j]){const G={};j&1&&(G.value=I[0].rating),l.$set(G);const ue={};j&1&&(ue.value=I[0].score),i.$set(ue);const he={};j&1&&(he.value=I[0].change),w.$set(he);const _e={};j&1&&(_e.url=I[0].file_url),g.$set(_e),I[0].source?P?(P.p(I,j),j&1&&D(P,1)):(P=xe(I),P.c(),D(P,1),P.m(t,null)):P&&(me(),M(P,1,1,()=>{P=null}),pe()),(!ee||j&1)&&ie!==(ie=I[0].tags.length+"")&&ae(x,ie),(!ee||j&2)&&W(F,"active",I[1]==="tags"),(!ee||j&1)&&ce!==(ce=(I[0].comment_count||"No")+"")&&ae(fe,ce),(!ee||j&2)&&W(U,"active",I[1]==="comments");let Pe=O;O=Re(I),O===Pe?re[O].p(I,j):(me(),M(re[Pe],1,1,()=>{re[Pe]=null}),pe(),z=re[O],z?z.p(I,j):(z=re[O]=Le[O](I),z.c()),D(z,1),z.m(e,null))},i(I){ee||(D(l.$$.fragment,I),D(i.$$.fragment,I),D(w.$$.fragment,I),D(g.$$.fragment,I),D(P),D(z),ee=!0)},o(I){M(l.$$.fragment,I),M(i.$$.fragment,I),M(w.$$.fragment,I),M(g.$$.fragment,I),M(P),M(z),ee=!1},d(I){I&&_(e),se(l),se(i),se(w),se(g),P&&P.d(),re[O].d(),ye=!1,Se(v)}}}function cn(n,e,t){let l;ut(n,Ve,u=>t(2,l=u));let{post:s}=e,r="tags";const a=()=>{t(1,r="tags")},o=()=>{t(1,r="comments")},i=(u,f)=>u?Ve.removeByName(f.name):Ve.addOrReplace({...f,modifier:"+"}),h=(u,f)=>f.name===u.name;return n.$$set=u=>{"post"in u&&t(0,s=u.post)},[s,r,l,a,o,i,h]}class En extends Z{constructor(e){super(),Y(this,e,cn,on,X,{post:0})}}export{En as D,Sn as G,yn as I,kn as V,wn as g,st as i};
