const Ne=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}};Ne();function C(){}function Pe(t){return t&&typeof t=="object"&&typeof t.then=="function"}function Te(t){return t()}function ae(){return Object.create(null)}function X(t){t.forEach(Te)}function Ie(t){return typeof t=="function"}function M(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ze(t){return Object.keys(t).length===0}function Be(t,...e){if(t==null)return C;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Le(t,e,n){t.$$.on_destroy.push(Be(e,n))}function _e(t){return t==null?"":t}function E(t,e){t.appendChild(e)}function k(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function re(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function B(t){return document.createTextNode(t)}function A(){return B(" ")}function le(){return B("")}function Y(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Me(t){return Array.from(t.childNodes)}function K(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ge(t,e){t.value=e==null?"":e}function qe(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function De(t,e,n){t.classList[n?"add":"remove"](e)}function Fe(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,r,e),l}let W;function F(t){W=t}function Oe(){if(!W)throw new Error("Function called outside component initialization");return W}function Q(){const t=Oe();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=Fe(e,n,{cancelable:r});return l.slice().forEach(c=>{c.call(t,o)}),!o.defaultPrevented}return!0}}const V=[],J=[],x=[],de=[],Re=Promise.resolve();let oe=!1;function He(){oe||(oe=!0,Re.then(ue))}function ce(t){x.push(t)}const ie=new Set;let Z=0;function ue(){const t=W;do{for(;Z<V.length;){const e=V[Z];Z++,F(e),Ke(e.$$)}for(F(null),V.length=0,Z=0;J.length;)J.pop()();for(let e=0;e<x.length;e+=1){const n=x[e];ie.has(n)||(ie.add(n),n())}x.length=0}while(V.length);for(;de.length;)de.pop()();oe=!1,ie.clear(),F(t)}function Ke(t){if(t.fragment!==null){t.update(),X(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ce)}}const ee=new Set;let U;function R(){U={r:0,c:[],p:U}}function H(){U.r||X(U.c),U=U.p}function p(t,e){t&&t.i&&(ee.delete(t),t.i(e))}function $(t,e,n,r){if(t&&t.o){if(ee.has(t))return;ee.add(t),U.c.push(()=>{ee.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function me(t,e){const n=e.token={};function r(l,o,c,s){if(e.token!==n)return;e.resolved=s;let i=e.ctx;c!==void 0&&(i=i.slice(),i[c]=s);const u=l&&(e.current=l)(i);let f=!1;e.block&&(e.blocks?e.blocks.forEach((h,a)=>{a!==o&&h&&(R(),$(h,1,1,()=>{e.blocks[a]===h&&(e.blocks[a]=null)}),H())}):e.block.d(1),u.c(),p(u,1),u.m(e.mount(),e.anchor),f=!0),e.block=u,e.blocks&&(e.blocks[o]=u),f&&ue()}if(Pe(t)){const l=Oe();if(t.then(o=>{F(l),r(e.then,1,e.value,o),F(null)},o=>{if(F(l),r(e.catch,2,e.error,o),F(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function Ue(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function j(t){t&&t.c()}function I(t,e,n,r){const{fragment:l,on_mount:o,on_destroy:c,after_update:s}=t.$$;l&&l.m(e,n),r||ce(()=>{const i=o.map(Te).filter(Ie);c?c.push(...i):X(i),t.$$.on_mount=[]}),s.forEach(ce)}function O(t,e){const n=t.$$;n.fragment!==null&&(X(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ye(t,e){t.$$.dirty[0]===-1&&(V.push(t),He(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(t,e,n,r,l,o,c,s=[-1]){const i=W;F(t);const u=t.$$={fragment:null,ctx:null,props:o,update:C,not_equal:l,bound:ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:ae(),dirty:s,skip_bound:!1,root:e.target||i.$$.root};c&&c(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(h,a,...m)=>{const g=m.length?m[0]:a;return u.ctx&&l(u.ctx[h],u.ctx[h]=g)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](g),f&&Ye(t,h)),a}):[],u.update(),f=!0,X(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const h=Me(e.target);u.fragment&&u.fragment.l(h),h.forEach(v)}else u.fragment&&u.fragment.c();e.intro&&p(t.$$.fragment),I(t,e.target,e.anchor,e.customElement),ue()}F(i)}class D{$destroy(){O(this,1),this.$destroy=C}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!ze(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Ge(t){let e,n,r,l;return{c(){e=y("i"),_(e,"title",t[0]),_(e,"class",n=`codicon codicon-${t[1]}`)},m(o,c){k(o,e,c),r||(l=Y(e,"click",t[3]),r=!0)},p(o,[c]){c&1&&_(e,"title",o[0]),c&2&&n!==(n=`codicon codicon-${o[1]}`)&&_(e,"class",n)},i:C,o:C,d(o){o&&v(e),r=!1,l()}}}function Je(t,e,n){let{title:r=void 0}=e,{icon:l}=e;const o=Q(),c=()=>o("click");return t.$$set=s=>{"title"in s&&n(0,r=s.title),"icon"in s&&n(1,l=s.icon)},[r,l,o,c]}class L extends D{constructor(e){super(),q(this,e,Je,Ge,M,{title:0,icon:1})}}const G=[];function Qe(t,e=C){let n;const r=new Set;function l(s){if(M(t,s)&&(t=s,n)){const i=!G.length;for(const u of r)u[1](),G.push(u,t);if(i){for(let u=0;u<G.length;u+=2)G[u][0](G[u+1]);G.length=0}}}function o(s){l(s(t))}function c(s,i=C){const u=[s,i];return r.add(u),r.size===1&&(n=e(l)||C),s(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:l,update:o,subscribe:c}}const je=Qe("search");function Ve(t){let e,n,r,l,o,c,s;return n=new L({props:{title:"Search",icon:"search"}}),n.$on("click",t[0]("search")),l=new L({props:{title:"Settings",icon:"settings-gear"}}),l.$on("click",t[0]("settings")),c=new L({props:{title:"Account",icon:"account"}}),c.$on("click",t[0]("account")),{c(){e=y("header"),j(n.$$.fragment),r=A(),j(l.$$.fragment),o=A(),j(c.$$.fragment),_(e,"role","navigation"),_(e,"class","svelte-2iet67")},m(i,u){k(i,e,u),I(n,e,null),E(e,r),I(l,e,null),E(e,o),I(c,e,null),s=!0},p:C,i(i){s||(p(n.$$.fragment,i),p(l.$$.fragment,i),p(c.$$.fragment,i),s=!0)},o(i){$(n.$$.fragment,i),$(l.$$.fragment,i),$(c.$$.fragment,i),s=!1},d(i){i&&v(e),O(n),O(l),O(c)}}}function We(t){return[n=>()=>{je.set(n)}]}class Xe extends D{constructor(e){super(),q(this,e,We,Ve,M,{})}}function Ze(t){let e,n,r,l,o,c;return{c(){e=y("img"),_(e,"loading","lazy"),_(e,"data-src",n=t[0].sample_url),_(e,"alt",r=t[0].id.toString()),_(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),_(e,"width",o=t[0].width),_(e,"height",c=t[0].height),_(e,"class","svelte-1xnjrgd")},m(s,i){k(s,e,i),t[7](e)},p(s,i){i&1&&n!==(n=s[0].sample_url)&&_(e,"data-src",n),i&1&&r!==(r=s[0].id.toString())&&_(e,"alt",r),i&1&&l!==(l=`aspect-ratio: ${s[0].width} / ${s[0].height}`)&&_(e,"style",l),i&1&&o!==(o=s[0].width)&&_(e,"width",o),i&1&&c!==(c=s[0].height)&&_(e,"height",c)},d(s){s&&v(e),t[7](null)}}}function xe(t){let e,n,r,l,o,c;return{c(){e=y("video"),_(e,"preload","metadata"),_(e,"loading","lazy"),_(e,"data-src",n=t[0].sample_url),_(e,"alt",r=t[0].id.toString()),_(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),_(e,"width",o=t[0].width),_(e,"height",c=t[0].height),e.controls=!0,_(e,"class","svelte-1xnjrgd")},m(s,i){k(s,e,i),t[6](e)},p(s,i){i&1&&n!==(n=s[0].sample_url)&&_(e,"data-src",n),i&1&&r!==(r=s[0].id.toString())&&_(e,"alt",r),i&1&&l!==(l=`aspect-ratio: ${s[0].width} / ${s[0].height}`)&&_(e,"style",l),i&1&&o!==(o=s[0].width)&&_(e,"width",o),i&1&&c!==(c=s[0].height)&&_(e,"height",c)},d(s){s&&v(e),t[6](null)}}}function et(t){let e,n,r,l,o,c;return{c(){e=y("img"),_(e,"loading","lazy"),_(e,"data-src",n=t[0].sample_url),_(e,"alt",r=t[0].id.toString()),_(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),_(e,"width",o=t[0].width),_(e,"height",c=t[0].height),_(e,"class","svelte-1xnjrgd")},m(s,i){k(s,e,i),t[5](e)},p(s,i){i&1&&n!==(n=s[0].sample_url)&&_(e,"data-src",n),i&1&&r!==(r=s[0].id.toString())&&_(e,"alt",r),i&1&&l!==(l=`aspect-ratio: ${s[0].width} / ${s[0].height}`)&&_(e,"style",l),i&1&&o!==(o=s[0].width)&&_(e,"width",o),i&1&&c!==(c=s[0].height)&&_(e,"height",c)},d(s){s&&v(e),t[5](null)}}}function he(t){let e,n,r=t[0].type+"",l;return{c(){e=y("div"),n=B("details "),l=B(r),_(e,"class","details")},m(o,c){k(o,e,c),E(e,n),E(e,l)},p(o,c){c&1&&r!==(r=o[0].type+"")&&K(l,r)},d(o){o&&v(e)}}}function tt(t){let e,n,r,l,o;function c(f,h){return f[0].type==="image"?et:f[0].type==="video"?xe:Ze}let s=c(t),i=s(t),u=t[2]&&he(t);return{c(){e=y("div"),n=y("div"),i.c(),r=A(),u&&u.c(),_(n,"class","content"),_(e,"class","post svelte-1xnjrgd")},m(f,h){k(f,e,h),E(e,n),i.m(n,null),E(e,r),u&&u.m(e,null),l||(o=Y(n,"click",t[3]),l=!0)},p(f,[h]){s===(s=c(f))&&i?i.p(f,h):(i.d(1),i=s(f),i&&(i.c(),i.m(n,null))),f[2]?u?u.p(f,h):(u=he(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:C,o:C,d(f){f&&v(e),i.d(),u&&u.d(),l=!1,o()}}}function nt(t,e,n){let{post:r}=e,{observer:l}=e,o=!1,c;function s(){n(2,o=!o)}function i(h){J[h?"unshift":"push"](()=>{c=h,n(1,c)})}function u(h){J[h?"unshift":"push"](()=>{c=h,n(1,c)})}function f(h){J[h?"unshift":"push"](()=>{c=h,n(1,c)})}return t.$$set=h=>{"post"in h&&n(0,r=h.post),"observer"in h&&n(4,l=h.observer)},t.$$.update=()=>{t.$$.dirty&18&&c&&l.observe(c)},[r,c,o,s,l,i,u,f]}class rt extends D{constructor(e){super(),q(this,e,nt,tt,M,{post:0,observer:4})}}function pe(t,e,n){const r=t.slice();return r[2]=e[n],r}function $e(t){let e,n;return e=new rt({props:{post:t[2],observer:t[1]}}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.post=r[2]),l&2&&(o.observer=r[1]),e.$set(o)},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function lt(t){let e,n,r=t[0],l=[];for(let c=0;c<r.length;c+=1)l[c]=$e(pe(t,r,c));const o=c=>$(l[c],1,1,()=>{l[c]=null});return{c(){e=y("ol");for(let c=0;c<l.length;c+=1)l[c].c();_(e,"class","page svelte-1kd0c69")},m(c,s){k(c,e,s);for(let i=0;i<l.length;i+=1)l[i].m(e,null);n=!0},p(c,[s]){if(s&3){r=c[0];let i;for(i=0;i<r.length;i+=1){const u=pe(c,r,i);l[i]?(l[i].p(u,s),p(l[i],1)):(l[i]=$e(u),l[i].c(),p(l[i],1),l[i].m(e,null))}for(R(),i=r.length;i<l.length;i+=1)o(i);H()}},i(c){if(!n){for(let s=0;s<r.length;s+=1)p(l[s]);n=!0}},o(c){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)$(l[s]);n=!1},d(c){c&&v(e),re(l,c)}}}function it(t,e,n){let{posts:r}=e,{observer:l}=e;return t.$$set=o=>{"posts"in o&&n(0,r=o.posts),"observer"in o&&n(1,l=o.observer)},[r,l]}class ot extends D{constructor(e){super(),q(this,e,it,lt,M,{posts:0,observer:1})}}function ct(t){let e,n,r,l,o,c,s;return n=new L({props:{icon:t[0]}}),{c(){e=y("button"),j(n.$$.fragment),r=A(),l=B(t[1]),_(e,"title",t[2]),_(e,"class","svelte-qb7qg6")},m(i,u){k(i,e,u),I(n,e,null),E(e,r),E(e,l),o=!0,c||(s=Y(e,"click",t[4]),c=!0)},p(i,[u]){const f={};u&1&&(f.icon=i[0]),n.$set(f),(!o||u&2)&&K(l,i[1]),(!o||u&4)&&_(e,"title",i[2])},i(i){o||(p(n.$$.fragment,i),o=!0)},o(i){$(n.$$.fragment,i),o=!1},d(i){i&&v(e),O(n),c=!1,s()}}}function st(t,e,n){let{icon:r}=e,{text:l}=e,{title:o}=e;const c=Q(),s=()=>c("click");return t.$$set=i=>{"icon"in i&&n(0,r=i.icon),"text"in i&&n(1,l=i.text),"title"in i&&n(2,o=i.title)},[r,l,o,c,s]}class ut extends D{constructor(e){super(),q(this,e,st,ct,M,{icon:0,text:1,title:2})}}const te=t=>t/1e6>=1?`${Math.trunc(t/1e6)}M`:t>=1e3?`${Math.trunc(t/1e3)}K`:t.toString();function ne(t){return t.replace(/_/g," ").replace(/source:/g,"").replace(/rating:/g,"")}function se(t){for(const e of t)if(e!=="ambiguous"&&e!=="general")return e;return null}function ft(t){let e,n,r,l;return{c(){e=y("i"),_(e,"title",t[0]),_(e,"class",n=_e(`codicon codicon-${t[1]} ${t[2]?"active":""}`)+" svelte-htt49j")},m(o,c){k(o,e,c),r||(l=Y(e,"click",t[4]),r=!0)},p(o,[c]){c&1&&_(e,"title",o[0]),c&6&&n!==(n=_e(`codicon codicon-${o[1]} ${o[2]?"active":""}`)+" svelte-htt49j")&&_(e,"class",n)},i:C,o:C,d(o){o&&v(e),r=!1,l()}}}function at(t,e,n){let{title:r=void 0}=e,{icon:l}=e,{active:o}=e;const c=Q(),s=()=>c("click");return t.$$set=i=>{"title"in i&&n(0,r=i.title),"icon"in i&&n(1,l=i.icon),"active"in i&&n(2,o=i.active)},[r,l,o,c,s]}class _t extends D{constructor(e){super(),q(this,e,at,ft,M,{title:0,icon:1,active:2})}}function gt(t){let e,n;return e=new L({props:{icon:"star-full"}}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function dt(t){let e,n;return e=new L({props:{icon:"link"}}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function mt(t){let e,n;return e=new L({props:{icon:"unverified"}}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function ht(t){let e,n;return e=new L({props:{icon:"info"}}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function pt(t){let e,n;return e=new L({props:{icon:"folder"}}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function $t(t){let e,n;return e=new L({props:{icon:"person"}}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function bt(t){let e,n;return e=new L({props:{icon:"edit"}}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function vt(t){let e,n,r,l;const o=[bt,$t,pt,ht,mt,dt,gt],c=[];function s(i,u){return i[0]==="artist"?0:i[0]==="character"?1:i[0]==="copyright"?2:i[0]==="metadata"?3:i[0]==="rating"?4:i[0]==="source"?5:i[0]==="supertag"?6:-1}return~(e=s(t))&&(n=c[e]=o[e](t)),{c(){n&&n.c(),r=le()},m(i,u){~e&&c[e].m(i,u),k(i,r,u),l=!0},p(i,[u]){let f=e;e=s(i),e!==f&&(n&&(R(),$(c[f],1,1,()=>{c[f]=null}),H()),~e?(n=c[e],n||(n=c[e]=o[e](i),n.c()),p(n,1),n.m(r.parentNode,r)):n=null)},i(i){l||(p(n),l=!0)},o(i){$(n),l=!1},d(i){~e&&c[e].d(i),i&&v(r)}}}function kt(t,e,n){let{type:r}=e;return t.$$set=l=>{"type"in l&&n(0,r=l.type)},[r]}class Ae extends D{constructor(e){super(),q(this,e,kt,vt,M,{type:0})}}function be(t,e,n){const r=t.slice();return r[15]=e[n],r}function wt(t){let e,n=t[18].message+"",r;return{c(){e=y("p"),r=B(n),qe(e,"color","red")},m(l,o){k(l,e,o),E(e,r)},p(l,o){o&4&&n!==(n=l[18].message+"")&&K(r,n)},i:C,o:C,d(l){l&&v(e)}}}function yt(t){let e,n,r=t[14]&&t[14].length&&ve(t);return{c(){r&&r.c(),e=le()},m(l,o){r&&r.m(l,o),k(l,e,o),n=!0},p(l,o){l[14]&&l[14].length?r?(r.p(l,o),o&4&&p(r,1)):(r=ve(l),r.c(),p(r,1),r.m(e.parentNode,e)):r&&(R(),$(r,1,1,()=>{r=null}),H())},i(l){n||(p(r),n=!0)},o(l){$(r),n=!1},d(l){r&&r.d(l),l&&v(e)}}}function ve(t){let e,n,r=t[14],l=[];for(let c=0;c<r.length;c+=1)l[c]=ke(be(t,r,c));const o=c=>$(l[c],1,1,()=>{l[c]=null});return{c(){for(let c=0;c<l.length;c+=1)l[c].c();e=le()},m(c,s){for(let i=0;i<l.length;i+=1)l[i].m(c,s);k(c,e,s),n=!0},p(c,s){if(s&21){r=c[14];let i;for(i=0;i<r.length;i+=1){const u=be(c,r,i);l[i]?(l[i].p(u,s),p(l[i],1)):(l[i]=ke(u),l[i].c(),p(l[i],1),l[i].m(e.parentNode,e))}for(R(),i=r.length;i<l.length;i+=1)o(i);H()}},i(c){if(!n){for(let s=0;s<r.length;s+=1)p(l[s]);n=!0}},o(c){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)$(l[s]);n=!1},d(c){re(l,c),c&&v(e)}}}function ke(t){let e,n,r,l,o=ne(t[15].name)+"",c,s,i,u,f=te(t[15].count)+"",h,a,m,g,T;n=new Ae({props:{type:se(t[15].types)}});function z(){return t[12](t[15])}return{c(){e=y("li"),j(n.$$.fragment),r=A(),l=y("span"),c=B(o),i=A(),u=y("span"),h=B(f),a=A(),_(l,"title",s=t[15].name),_(l,"class","tag-name svelte-17fwga4"),_(u,"class","tag-count"),_(e,"tabindex","0"),_(e,"class","svelte-17fwga4")},m(b,S){k(b,e,S),I(n,e,null),E(e,r),E(e,l),E(l,c),E(e,i),E(e,u),E(u,h),E(e,a),m=!0,g||(T=Y(e,"click",z),g=!0)},p(b,S){t=b;const d={};S&4&&(d.type=se(t[15].types)),n.$set(d),(!m||S&4)&&o!==(o=ne(t[15].name)+"")&&K(c,o),(!m||S&4&&s!==(s=t[15].name))&&_(l,"title",s),(!m||S&4)&&f!==(f=te(t[15].count)+"")&&K(h,f)},i(b){m||(p(n.$$.fragment,b),m=!0)},o(b){$(n.$$.fragment,b),m=!1},d(b){b&&v(e),O(n),g=!1,T()}}}function Et(t){let e;return{c(){e=y("p"),e.textContent="...waiting"},m(n,r){k(n,e,r)},p:C,i:C,o:C,d(n){n&&v(e)}}}function Ct(t){let e,n,r,l,o,c,s,i,u,f,h,a,m,g,T,z;n=new L({props:{icon:"search"}}),c=new L({props:{icon:t[5][t[3]],title:t[6][t[3]]}}),c.$on("click",t[10]),i=new _t({props:{icon:"whole-word",title:"Toggle exact search term matching",active:!t[1]}}),i.$on("click",t[11]);let b={ctx:t,current:null,token:null,hasCatch:!0,pending:Et,then:yt,catch:wt,value:14,error:18,blocks:[,,,]};return me(h=t[2],b),{c(){e=y("div"),j(n.$$.fragment),r=A(),l=y("input"),o=A(),j(c.$$.fragment),s=A(),j(i.$$.fragment),u=A(),f=y("ol"),b.block.c(),a=A(),m=y("p"),m.textContent="Learn more about tags",_(l,"type","text"),_(l,"class","svelte-17fwga4"),_(m,"class","hint svelte-17fwga4"),_(f,"class","svelte-17fwga4"),_(e,"class","searchbar svelte-17fwga4")},m(S,d){k(S,e,d),I(n,e,null),E(e,r),E(e,l),ge(l,t[0]),E(e,o),I(c,e,null),E(e,s),I(i,e,null),E(e,u),E(e,f),b.block.m(f,b.anchor=null),b.mount=()=>f,b.anchor=a,E(f,a),E(f,m),g=!0,T||(z=Y(l,"input",t[9]),T=!0)},p(S,[d]){t=S,d&1&&l.value!==t[0]&&ge(l,t[0]);const w={};d&8&&(w.icon=t[5][t[3]]),d&8&&(w.title=t[6][t[3]]),c.$set(w);const N={};d&2&&(N.active=!t[1]),i.$set(N),b.ctx=t,d&4&&h!==(h=t[2])&&me(h,b)||Ue(b,t,d)},i(S){g||(p(n.$$.fragment,S),p(c.$$.fragment,S),p(i.$$.fragment,S),p(b.block),g=!0)},o(S){$(n.$$.fragment,S),$(c.$$.fragment,S),$(i.$$.fragment,S);for(let d=0;d<3;d+=1){const w=b.blocks[d];$(w)}g=!1},d(S){S&&v(e),O(n),O(c),O(i),b.block.d(),b.token=null,b=null,T=!1,z()}}}function St(t,e,n){const r=Q(),l={"+":"plus","-":"circle-slash","~":"record"},o={"+":"Included. Tags will be included in the search.","-":"Blocked. Tags will be blocked.","~":"Optional. At least one of all optional tags will on each post."},c=Object.keys(l);let s,i,u="",f=!0,h="+";async function a(b,S){const d=b?`*${S}*`:S,w=await fetch(`https://r34-json.herokuapp.com/v2/tags?limit=20&sort=count&name=${d.replaceAll(" ","_")}`,{signal:s.signal}),N=await w.json();if(w.ok){if(Array.isArray(N))return N;throw N.message?N.message==="Refine your search"?new Error('Too many tags match your search. Be more specific or use "exact" searching.'):new Error(N.message):new Error("Unexpected tag suggestions received")}else throw new Error("Failed to get tag suggestions")}function m(){u=this.value,n(0,u)}const g=()=>{const b=(c.indexOf(h)+1)%c.length;n(3,h=c[b])},T=()=>{n(1,f=!f)},z=b=>{n(0,u=""),r("pick",b)};return t.$$.update=()=>{t.$$.dirty&259&&(s!==void 0&&s.abort("Newer search term entered"),u!==""&&(n(8,s=new AbortController),n(2,i=a(f,u))))},[u,f,i,h,r,l,o,c,s,m,g,T,z]}class Tt extends D{constructor(e){super(),q(this,e,St,Ct,M,{})}}function It(t){let e,n,r,l=ne(t[0].name)+"",o,c,s=te(t[0].count)+"",i,u,f,h,a;return n=new Ae({props:{type:t[2]}}),{c(){e=y("li"),j(n.$$.fragment),r=A(),o=B(l),c=B(`
  (`),i=B(s),u=B(")"),_(e,"tabindex","0"),_(e,"title","Click to remove tag"),_(e,"class","svelte-1qdvckt"),De(e,"no-icon",t[2]===null)},m(m,g){k(m,e,g),I(n,e,null),E(e,r),E(e,o),E(e,c),E(e,i),E(e,u),f=!0,h||(a=Y(e,"click",t[3]),h=!0)},p(m,[g]){(!f||g&1)&&l!==(l=ne(m[0].name)+"")&&K(o,l),(!f||g&1)&&s!==(s=te(m[0].count)+"")&&K(i,s)},i(m){f||(p(n.$$.fragment,m),f=!0)},o(m){$(n.$$.fragment,m),f=!1},d(m){m&&v(e),O(n),h=!1,a()}}}function Ot(t,e,n){let{tag:r}=e;const l=Q(),o=se(r.types),c=()=>l("click");return t.$$set=s=>{"tag"in s&&n(0,r=s.tag)},[r,l,o,c]}class jt extends D{constructor(e){super(),q(this,e,Ot,It,M,{tag:0})}}function At(t){let e;return{c(){e=y("div")},m(n,r){k(n,e,r),t[1](e)},p:C,i:C,o:C,d(n){n&&v(e),t[1](null)}}}function Nt(t,e,n){const r=Q(),l=new IntersectionObserver(s=>{s[0].isIntersecting&&(console.debug("Triggered infinite loading"),r("visible"))},{rootMargin:"1250px"});let o;function c(s){J[s?"unshift":"push"](()=>{o=s,n(0,o)})}return t.$$.update=()=>{t.$$.dirty&1&&(l.disconnect(),o&&l.observe(o))},[o,c]}class Pt extends D{constructor(e){super(),q(this,e,Nt,At,M,{})}}function we(t,e,n){const r=t.slice();return r[12]=e[n],r[14]=n,r}function ye(t,e,n){const r=t.slice();return r[15]=e[n],r}function Ee(t){let e,n;return e=new jt({props:{tag:t[15]}}),e.$on("click",function(){Ie(t[6](t[15]))&&t[6](t[15]).apply(this,arguments)}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},p(r,l){t=r;const o={};l&1&&(o.tag=t[15]),e.$set(o)},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function zt(t){let e;return{c(){e=y("p"),e.textContent="No results. Sorry."},m(n,r){k(n,e,r)},p:C,i:C,o:C,d(n){n&&v(e)}}}function Bt(t){let e,n,r,l,o,c,s,i,u=t[1],f=[];for(let a=0;a<u.length;a+=1)f[a]=Ce(we(t,u,a));const h=a=>$(f[a],1,1,()=>{f[a]=null});return s=new Pt({}),s.$on("visible",t[9]),{c(){e=y("p"),n=B(t[2]),r=B(" results"),l=A(),o=y("ol");for(let a=0;a<f.length;a+=1)f[a].c();c=A(),j(s.$$.fragment),_(e,"class","count svelte-18eo0nv"),_(o,"class","svelte-18eo0nv")},m(a,m){k(a,e,m),E(e,n),E(e,r),k(a,l,m),k(a,o,m);for(let g=0;g<f.length;g+=1)f[g].m(o,null);k(a,c,m),I(s,a,m),i=!0},p(a,m){if((!i||m&4)&&K(n,a[2]),m&18){u=a[1];let g;for(g=0;g<u.length;g+=1){const T=we(a,u,g);f[g]?(f[g].p(T,m),p(f[g],1)):(f[g]=Ce(T),f[g].c(),p(f[g],1),f[g].m(o,null))}for(R(),g=u.length;g<f.length;g+=1)h(g);H()}},i(a){if(!i){for(let m=0;m<u.length;m+=1)p(f[m]);p(s.$$.fragment,a),i=!0}},o(a){f=f.filter(Boolean);for(let m=0;m<f.length;m+=1)$(f[m]);$(s.$$.fragment,a),i=!1},d(a){a&&v(e),a&&v(l),a&&v(o),re(f,a),a&&v(c),O(s,a)}}}function Ce(t){let e,n;return e=new ot({props:{posts:t[12],observer:t[4]}}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},p(r,l){const o={};l&2&&(o.posts=r[12]),e.$set(o)},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Lt(t){let e,n,r,l,o,c,s,i,u,f,h,a;r=new Tt({}),r.$on("pick",t[5]);let m=t[0],g=[];for(let d=0;d<m.length;d+=1)g[d]=Ee(ye(t,m,d));const T=d=>$(g[d],1,1,()=>{g[d]=null});s=new ut({props:{title:"Click to search with active tags",icon:"search",text:"Search"}}),s.$on("click",t[7]);const z=[Bt,zt],b=[];function S(d,w){return d[2]?0:d[2]===0?1:-1}return~(u=S(t))&&(f=b[u]=z[u](t)),{c(){e=y("h1"),e.textContent="kurosearch",n=A(),j(r.$$.fragment),l=A(),o=y("ul");for(let d=0;d<g.length;d+=1)g[d].c();c=A(),j(s.$$.fragment),i=A(),f&&f.c(),h=le(),_(e,"class","svelte-18eo0nv"),_(o,"class","svelte-18eo0nv")},m(d,w){k(d,e,w),k(d,n,w),I(r,d,w),k(d,l,w),k(d,o,w);for(let N=0;N<g.length;N+=1)g[N].m(o,null);k(d,c,w),I(s,d,w),k(d,i,w),~u&&b[u].m(d,w),k(d,h,w),a=!0},p(d,[w]){if(w&65){m=d[0];let P;for(P=0;P<m.length;P+=1){const fe=ye(d,m,P);g[P]?(g[P].p(fe,w),p(g[P],1)):(g[P]=Ee(fe),g[P].c(),p(g[P],1),g[P].m(o,null))}for(R(),P=m.length;P<g.length;P+=1)T(P);H()}let N=u;u=S(d),u===N?~u&&b[u].p(d,w):(f&&(R(),$(b[N],1,1,()=>{b[N]=null}),H()),~u?(f=b[u],f?f.p(d,w):(f=b[u]=z[u](d),f.c()),p(f,1),f.m(h.parentNode,h)):f=null)},i(d){if(!a){p(r.$$.fragment,d);for(let w=0;w<m.length;w+=1)p(g[w]);p(s.$$.fragment,d),p(f),a=!0}},o(d){$(r.$$.fragment,d),g=g.filter(Boolean);for(let w=0;w<g.length;w+=1)$(g[w]);$(s.$$.fragment,d),$(f),a=!1},d(d){d&&v(e),d&&v(n),O(r,d),d&&v(l),d&&v(o),re(g,d),d&&v(c),O(s,d),d&&v(i),~u&&b[u].d(d),d&&v(h)}}}function Mt(t,e,n){const r=new IntersectionObserver(g=>{for(const T of g)T.isIntersecting?(console.debug(T.target.getAttribute("data-src")),T.target.src=T.target.getAttribute("data-src")):(console.debug("removing src from ",T.target),T.target.src="")},{rootMargin:"1250px"});let l=[];const o=g=>{n(0,l=[...l,g.detail])},c=g=>()=>{n(0,l=l.filter(T=>T.name!==g.name))};let s,i=[],u=null,f=0;function h(){s!==void 0&&s.abort("New search triggered"),n(3,f=0),s=new AbortController,a(n(3,f++,f))}async function a(g){const T=await fetch(`https://r34-json.herokuapp.com/v2/posts?limit=20&pid=${g}&tags=${l.map(b=>"+"+b.name).join()}`,{signal:s.signal}),z=await T.json();if(console.log(z),T.ok)return n(2,u=z.count),n(1,i=[...i,z.posts]),z;throw new Error("fuck")}return[l,i,u,f,r,o,c,h,a,()=>a(n(3,f++,f))]}class qt extends D{constructor(e){super(),q(this,e,Mt,Lt,M,{})}}function Dt(t){let e;return{c(){e=y("p"),e.textContent="You got lost..."},m(n,r){k(n,e,r)},i:C,o:C,d(n){n&&v(e)}}}function Ft(t){let e;return{c(){e=y("p"),e.textContent="settings"},m(n,r){k(n,e,r)},i:C,o:C,d(n){n&&v(e)}}}function Rt(t){let e;return{c(){e=y("p"),e.textContent="account"},m(n,r){k(n,e,r)},i:C,o:C,d(n){n&&v(e)}}}function Ht(t){let e,n;return e=new qt({}),{c(){j(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Kt(t){let e,n,r,l,o,c,s,i;e=new Xe({});const u=[Ht,Rt,Ft,Dt],f=[];function h(a,m){return a[0]==="search"?0:a[0]==="account"?1:a[0]==="settings"?2:3}return l=h(t),o=f[l]=u[l](t),{c(){j(e.$$.fragment),n=A(),r=y("main"),o.c(),c=A(),s=y("footer"),s.textContent="Copyright \xA9 2022 kurozenzen",_(r,"class","svelte-1r3fxng"),_(s,"class","svelte-1r3fxng")},m(a,m){I(e,a,m),k(a,n,m),k(a,r,m),f[l].m(r,null),k(a,c,m),k(a,s,m),i=!0},p(a,[m]){let g=l;l=h(a),l!==g&&(R(),$(f[g],1,1,()=>{f[g]=null}),H(),o=f[l],o||(o=f[l]=u[l](a),o.c()),p(o,1),o.m(r,null))},i(a){i||(p(e.$$.fragment,a),p(o),i=!0)},o(a){$(e.$$.fragment,a),$(o),i=!1},d(a){O(e,a),a&&v(n),a&&v(r),f[l].d(),a&&v(c),a&&v(s)}}}let Se="dark";function Ut(t,e,n){let r;Le(t,je,o=>n(0,r=o));const l=o=>o==="dark"?"light":"dark";return document.body.classList.replace(l(Se),Se),[r]}class Yt extends D{constructor(e){super(),q(this,e,Ut,Kt,M,{})}}new Yt({target:document.getElementById("app")});
