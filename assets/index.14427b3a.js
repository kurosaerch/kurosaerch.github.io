const xe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}};xe();function A(){}function et(t){return t&&typeof t=="object"&&typeof t.then=="function"}function Ve(t){return t()}function Ae(){return Object.create(null)}function ne(t){t.forEach(Ve)}function tt(t){return typeof t=="function"}function M(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ue;function Xe(t,e){return ue||(ue=document.createElement("a")),ue.href=e,t===ue.href}function nt(t){return Object.keys(t).length===0}function rt(t,...e){if(t==null)return A;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ge(t,e,n){t.$$.on_destroy.push(rt(e,n))}function Ee(t){return t==null?"":t}function k(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode.removeChild(t)}function oe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function F(t){return document.createTextNode(t)}function j(){return F(" ")}function se(){return F("")}function H(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function lt(t){return Array.from(t.childNodes)}function U(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ie(t,e){t.value=e==null?"":e}function it(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function de(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function Ze(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function ot(t,e,n){t.classList[n?"add":"remove"](e)}function st(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,r,e),l}let le;function G(t){le=t}function Je(){if(!le)throw new Error("Function called outside component initialization");return le}function J(){const t=Je();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=st(e,n,{cancelable:r});return l.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}const re=[],x=[],ae=[],Ne=[],ct=Promise.resolve();let $e=!1;function ut(){$e||($e=!0,ct.then(we))}function ie(t){ae.push(t)}const me=new Set;let fe=0;function we(){const t=le;do{for(;fe<re.length;){const e=re[fe];fe++,G(e),ft(e.$$)}for(G(null),re.length=0,fe=0;x.length;)x.pop()();for(let e=0;e<ae.length;e+=1){const n=ae[e];me.has(n)||(me.add(n),n())}ae.length=0}while(re.length);for(;Ne.length;)Ne.pop()();$e=!1,me.clear(),G(t)}function ft(t){if(t.fragment!==null){t.update(),ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ie)}}const _e=new Set;let Z;function Y(){Z={r:0,c:[],p:Z}}function K(){Z.r||ne(Z.c),Z=Z.p}function h(t,e){t&&t.i&&(_e.delete(t),t.i(e))}function $(t,e,n,r){if(t&&t.o){if(_e.has(t))return;_e.add(t),Z.c.push(()=>{_e.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function Oe(t,e){const n=e.token={};function r(l,o,i,c){if(e.token!==n)return;e.resolved=c;let s=e.ctx;i!==void 0&&(s=s.slice(),s[i]=c);const u=l&&(e.current=l)(s);let f=!1;e.block&&(e.blocks?e.blocks.forEach((d,a)=>{a!==o&&d&&(Y(),$(d,1,1,()=>{e.blocks[a]===d&&(e.blocks[a]=null)}),K())}):e.block.d(1),u.c(),h(u,1),u.m(e.mount(),e.anchor),f=!0),e.block=u,e.blocks&&(e.blocks[o]=u),f&&we()}if(et(t)){const l=Je();if(t.then(o=>{G(l),r(e.then,1,e.value,o),G(null)},o=>{if(G(l),r(e.catch,2,e.error,o),G(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function at(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function O(t){t&&t.c()}function I(t,e,n,r){const{fragment:l,on_mount:o,on_destroy:i,after_update:c}=t.$$;l&&l.m(e,n),r||ie(()=>{const s=o.map(Ve).filter(tt);i?i.push(...s):ne(s),t.$$.on_mount=[]}),c.forEach(ie)}function N(t,e){const n=t.$$;n.fragment!==null&&(ne(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function _t(t,e){t.$$.dirty[0]===-1&&(re.push(t),ut(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(t,e,n,r,l,o,i,c=[-1]){const s=le;G(t);const u=t.$$={fragment:null,ctx:null,props:o,update:A,not_equal:l,bound:Ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Ae(),dirty:c,skip_bound:!1,root:e.target||s.$$.root};i&&i(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(d,a,...g)=>{const p=g.length?g[0]:a;return u.ctx&&l(u.ctx[d],u.ctx[d]=p)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](p),f&&_t(t,d)),a}):[],u.update(),f=!0,ne(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const d=lt(e.target);u.fragment&&u.fragment.l(d),d.forEach(C)}else u.fragment&&u.fragment.c();e.intro&&h(t.$$.fragment),I(t,e.target,e.anchor,e.customElement),we()}G(s)}class L{$destroy(){N(this,1),this.$destroy=A}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!nt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function gt(t){let e,n,r,l;return{c(){e=v("i"),_(e,"title",t[0]),_(e,"class",n=`codicon codicon-${t[1]}`)},m(o,i){S(o,e,i),r||(l=H(e,"click",t[3]),r=!0)},p(o,[i]){i&1&&_(e,"title",o[0]),i&2&&n!==(n=`codicon codicon-${o[1]}`)&&_(e,"class",n)},i:A,o:A,d(o){o&&C(e),r=!1,l()}}}function dt(t,e,n){let{title:r=void 0}=e,{icon:l}=e;const o=J(),i=()=>o("click");return t.$$set=c=>{"title"in c&&n(0,r=c.title),"icon"in c&&n(1,l=c.icon)},[r,l,o,i]}class R extends L{constructor(e){super(),B(this,e,dt,gt,M,{title:0,icon:1})}}const Q=[];function ye(t,e=A){let n;const r=new Set;function l(c){if(M(t,c)&&(t=c,n)){const s=!Q.length;for(const u of r)u[1](),Q.push(u,t);if(s){for(let u=0;u<Q.length;u+=2)Q[u][0](Q[u+1]);Q.length=0}}}function o(c){l(c(t))}function i(c,s=A){const u=[c,s];return r.add(u),r.size===1&&(n=e(l)||A),c(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:l,update:o,subscribe:i}}const Qe=ye("search");function mt(t){let e,n,r,l,o,i,c,s,u,f,d,a;return r=new R({props:{icon:"search"}}),i=new R({props:{icon:"settings-gear"}}),u=new R({props:{icon:"account"}}),{c(){e=v("header"),n=v("button"),O(r.$$.fragment),l=j(),o=v("button"),O(i.$$.fragment),c=j(),s=v("button"),O(u.$$.fragment),_(n,"title","Search"),_(n,"class","svelte-1q7wbbg"),_(o,"title","Settings"),_(o,"class","svelte-1q7wbbg"),_(s,"title","Account"),_(s,"class","svelte-1q7wbbg"),_(e,"role","navigation"),_(e,"class","svelte-1q7wbbg")},m(g,p){S(g,e,p),k(e,n),I(r,n,null),k(e,l),k(e,o),I(i,o,null),k(e,c),k(e,s),I(u,s,null),f=!0,d||(a=[H(n,"click",t[0]("search")),H(o,"click",t[0]("settings")),H(s,"click",t[0]("account"))],d=!0)},p:A,i(g){f||(h(r.$$.fragment,g),h(i.$$.fragment,g),h(u.$$.fragment,g),f=!0)},o(g){$(r.$$.fragment,g),$(i.$$.fragment,g),$(u.$$.fragment,g),f=!1},d(g){g&&C(e),N(r),N(i),N(u),d=!1,ne(a)}}}function pt(t){return[n=>()=>{Qe.set(n)}]}class ht extends L{constructor(e){super(),B(this,e,pt,mt,M,{})}}function W(t,e){const n=t.toFixed();return`${n} ${e}${n==="1"?"":"s"} ago`}function je(t){const e=new Date(t),n=new Date,r=n.getFullYear()-e.getFullYear();if(r)return W(r,"year");const l=n.getMonth()-e.getMonth();if(l)return W(l,"month");const o=(n.getTime()-e.getTime())/6e4;if(o===0)return"just now";if(o<60)return W(o,"minute");const i=o/60;if(i<24)return W(i,"hour");const c=i/24;if(c<7)return W(c,"day");const s=c/7;return s<5?W(s,"week"):"rip"}function ee(t){return t.replace(/_/g," ").replace(/source:/g,"").replace(/rating:/g,"")}function be(t){for(const e of t)if(e!=="ambiguous"&&e!=="general")return e;return null}function $t(t){let e,n=ee(t[0])+"",r,l,o;return{c(){e=v("li"),r=F(n),_(e,"tabindex","0"),_(e,"title","Click to add tag"),_(e,"class","svelte-13935qr")},m(i,c){S(i,e,c),k(e,r),l||(o=H(e,"click",t[2]),l=!0)},p(i,[c]){c&1&&n!==(n=ee(i[0])+"")&&U(r,n)},i:A,o:A,d(i){i&&C(e),l=!1,o()}}}function bt(t,e,n){let{name:r}=e;const l=J(),o=()=>l("click");return t.$$set=i=>{"name"in i&&n(0,r=i.name)},[r,l,o]}class vt extends L{constructor(e){super(),B(this,e,bt,$t,M,{name:0})}}function Pe(t,e,n){const r=t.slice();return r[1]=e[n],r}function qe(t){let e,n;return e=new vt({props:{name:t[1]}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.name=r[1]),e.$set(o)},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function kt(t){let e,n,r,l=je(t[0].created_at)+"",o,i,c,s;n=new R({props:{title:"View on original site",icon:"link-external"}});let u=t[0].tags,f=[];for(let a=0;a<u.length;a+=1)f[a]=qe(Pe(t,u,a));const d=a=>$(f[a],1,1,()=>{f[a]=null});return{c(){e=v("div"),O(n.$$.fragment),r=j(),o=F(l),i=j(),c=v("ul");for(let a=0;a<f.length;a+=1)f[a].c();_(e,"class","summary svelte-opuqs8"),_(c,"class","svelte-opuqs8")},m(a,g){S(a,e,g),I(n,e,null),k(e,r),k(e,o),S(a,i,g),S(a,c,g);for(let p=0;p<f.length;p+=1)f[p].m(c,null);s=!0},p(a,[g]){if((!s||g&1)&&l!==(l=je(a[0].created_at)+"")&&U(o,l),g&1){u=a[0].tags;let p;for(p=0;p<u.length;p+=1){const E=Pe(a,u,p);f[p]?(f[p].p(E,g),h(f[p],1)):(f[p]=qe(E),f[p].c(),h(f[p],1),f[p].m(c,null))}for(Y(),p=u.length;p<f.length;p+=1)d(p);K()}},i(a){if(!s){h(n.$$.fragment,a);for(let g=0;g<u.length;g+=1)h(f[g]);s=!0}},o(a){$(n.$$.fragment,a),f=f.filter(Boolean);for(let g=0;g<f.length;g+=1)$(f[g]);s=!1},d(a){a&&C(e),N(n),a&&C(i),a&&C(c),oe(f,a)}}}function wt(t,e,n){let{post:r}=e;return t.$$set=l=>{"post"in l&&n(0,r=l.post)},[r]}class yt extends L{constructor(e){super(),B(this,e,wt,kt,M,{post:0})}}function Ct(t){let e,n,r,l,o,i;return{c(){e=v("img"),_(e,"loading","lazy"),_(e,"data-src",n=t[0].sample_url),_(e,"alt",r=t[0].id.toString()),_(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),_(e,"width",o=t[0].width),_(e,"height",i=t[0].height),_(e,"class","svelte-1xnjrgd")},m(c,s){S(c,e,s),t[7](e)},p(c,s){s&1&&n!==(n=c[0].sample_url)&&_(e,"data-src",n),s&1&&r!==(r=c[0].id.toString())&&_(e,"alt",r),s&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&_(e,"style",l),s&1&&o!==(o=c[0].width)&&_(e,"width",o),s&1&&i!==(i=c[0].height)&&_(e,"height",i)},d(c){c&&C(e),t[7](null)}}}function St(t){let e,n,r,l,o,i;return{c(){e=v("video"),_(e,"preload","metadata"),_(e,"loading","lazy"),_(e,"data-src",n=t[0].sample_url),_(e,"alt",r=t[0].id.toString()),_(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),_(e,"width",o=t[0].width),_(e,"height",i=t[0].height),e.controls=!0,_(e,"class","svelte-1xnjrgd")},m(c,s){S(c,e,s),t[6](e)},p(c,s){s&1&&n!==(n=c[0].sample_url)&&_(e,"data-src",n),s&1&&r!==(r=c[0].id.toString())&&_(e,"alt",r),s&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&_(e,"style",l),s&1&&o!==(o=c[0].width)&&_(e,"width",o),s&1&&i!==(i=c[0].height)&&_(e,"height",i)},d(c){c&&C(e),t[6](null)}}}function Tt(t){let e,n,r,l,o,i;return{c(){e=v("img"),_(e,"loading","lazy"),_(e,"data-src",n=t[0].sample_url),_(e,"alt",r=t[0].id.toString()),_(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),_(e,"width",o=t[0].width),_(e,"height",i=t[0].height),_(e,"class","svelte-1xnjrgd")},m(c,s){S(c,e,s),t[5](e)},p(c,s){s&1&&n!==(n=c[0].sample_url)&&_(e,"data-src",n),s&1&&r!==(r=c[0].id.toString())&&_(e,"alt",r),s&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&_(e,"style",l),s&1&&o!==(o=c[0].width)&&_(e,"width",o),s&1&&i!==(i=c[0].height)&&_(e,"height",i)},d(c){c&&C(e),t[5](null)}}}function ze(t){let e,n;return e=new yt({props:{post:t[0]}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.post=r[0]),e.$set(o)},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function At(t){let e,n,r,l,o,i;function c(d,a){return d[0].type==="image"?Tt:d[0].type==="video"?St:Ct}let s=c(t),u=s(t),f=t[2]&&ze(t);return{c(){e=v("div"),n=v("div"),u.c(),r=j(),f&&f.c(),_(n,"class","content"),_(e,"class","post svelte-1xnjrgd")},m(d,a){S(d,e,a),k(e,n),u.m(n,null),k(e,r),f&&f.m(e,null),l=!0,o||(i=H(n,"click",t[3]),o=!0)},p(d,[a]){s===(s=c(d))&&u?u.p(d,a):(u.d(1),u=s(d),u&&(u.c(),u.m(n,null))),d[2]?f?(f.p(d,a),a&4&&h(f,1)):(f=ze(d),f.c(),h(f,1),f.m(e,null)):f&&(Y(),$(f,1,1,()=>{f=null}),K())},i(d){l||(h(f),l=!0)},o(d){$(f),l=!1},d(d){d&&C(e),u.d(),f&&f.d(),o=!1,i()}}}function Et(t,e,n){let{post:r}=e,{observer:l}=e,o=!1,i;function c(){n(2,o=!o)}function s(d){x[d?"unshift":"push"](()=>{i=d,n(1,i)})}function u(d){x[d?"unshift":"push"](()=>{i=d,n(1,i)})}function f(d){x[d?"unshift":"push"](()=>{i=d,n(1,i)})}return t.$$set=d=>{"post"in d&&n(0,r=d.post),"observer"in d&&n(4,l=d.observer)},t.$$.update=()=>{t.$$.dirty&18&&i&&l.observe(i)},[r,i,o,c,l,s,u,f]}class It extends L{constructor(e){super(),B(this,e,Et,At,M,{post:0,observer:4})}}function Me(t,e,n){const r=t.slice();return r[2]=e[n],r}function Be(t){let e,n;return e=new It({props:{post:t[2],observer:t[1]}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.post=r[2]),l&2&&(o.observer=r[1]),e.$set(o)},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Nt(t){let e,n,r=t[0],l=[];for(let i=0;i<r.length;i+=1)l[i]=Be(Me(t,r,i));const o=i=>$(l[i],1,1,()=>{l[i]=null});return{c(){e=v("ol");for(let i=0;i<l.length;i+=1)l[i].c();_(e,"class","page svelte-5hdzo")},m(i,c){S(i,e,c);for(let s=0;s<l.length;s+=1)l[s].m(e,null);n=!0},p(i,[c]){if(c&3){r=i[0];let s;for(s=0;s<r.length;s+=1){const u=Me(i,r,s);l[s]?(l[s].p(u,c),h(l[s],1)):(l[s]=Be(u),l[s].c(),h(l[s],1),l[s].m(e,null))}for(Y(),s=r.length;s<l.length;s+=1)o(s);K()}},i(i){if(!n){for(let c=0;c<r.length;c+=1)h(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)$(l[c]);n=!1},d(i){i&&C(e),oe(l,i)}}}function Ot(t,e,n){let{posts:r}=e,{observer:l}=e;return t.$$set=o=>{"posts"in o&&n(0,r=o.posts),"observer"in o&&n(1,l=o.observer)},[r,l]}class jt extends L{constructor(e){super(),B(this,e,Ot,Nt,M,{posts:0,observer:1})}}function Pt(t){let e,n,r,l,o,i,c;return n=new R({props:{icon:t[0]}}),{c(){e=v("button"),O(n.$$.fragment),r=j(),l=F(t[1]),_(e,"title",t[2]),_(e,"class","svelte-11z6t3c")},m(s,u){S(s,e,u),I(n,e,null),k(e,r),k(e,l),o=!0,i||(c=H(e,"click",t[4]),i=!0)},p(s,[u]){const f={};u&1&&(f.icon=s[0]),n.$set(f),(!o||u&2)&&U(l,s[1]),(!o||u&4)&&_(e,"title",s[2])},i(s){o||(h(n.$$.fragment,s),o=!0)},o(s){$(n.$$.fragment,s),o=!1},d(s){s&&C(e),N(n),i=!1,c()}}}function qt(t,e,n){let{icon:r}=e,{text:l}=e,{title:o}=e;const i=J(),c=()=>i("click");return t.$$set=s=>{"icon"in s&&n(0,r=s.icon),"text"in s&&n(1,l=s.text),"title"in s&&n(2,o=s.title)},[r,l,o,i,c]}class zt extends L{constructor(e){super(),B(this,e,qt,Pt,M,{icon:0,text:1,title:2})}}const te=t=>t/1e6>=1?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString();function Mt(t){let e,n,r,l;return{c(){e=v("i"),_(e,"title",t[0]),_(e,"class",n=Ee(`codicon codicon-${t[1]} ${t[2]?"active":""}`)+" svelte-htt49j")},m(o,i){S(o,e,i),r||(l=H(e,"click",t[4]),r=!0)},p(o,[i]){i&1&&_(e,"title",o[0]),i&6&&n!==(n=Ee(`codicon codicon-${o[1]} ${o[2]?"active":""}`)+" svelte-htt49j")&&_(e,"class",n)},i:A,o:A,d(o){o&&C(e),r=!1,l()}}}function Bt(t,e,n){let{title:r=void 0}=e,{icon:l}=e,{active:o}=e;const i=J(),c=()=>i("click");return t.$$set=s=>{"title"in s&&n(0,r=s.title),"icon"in s&&n(1,l=s.icon),"active"in s&&n(2,o=s.active)},[r,l,o,i,c]}class Lt extends L{constructor(e){super(),B(this,e,Bt,Mt,M,{title:0,icon:1,active:2})}}function Dt(t){let e,n;return e=new R({props:{icon:"star-full"}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Ft(t){let e,n;return e=new R({props:{icon:"link"}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Rt(t){let e,n;return e=new R({props:{icon:"unverified"}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Ht(t){let e,n;return e=new R({props:{icon:"info"}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Yt(t){let e,n;return e=new R({props:{icon:"folder"}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Kt(t){let e,n;return e=new R({props:{icon:"person"}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Gt(t){let e,n;return e=new R({props:{icon:"edit"}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Ut(t){let e,n,r,l;const o=[Gt,Kt,Yt,Ht,Rt,Ft,Dt],i=[];function c(s,u){return s[0]==="artist"?0:s[0]==="character"?1:s[0]==="copyright"?2:s[0]==="metadata"?3:s[0]==="rating"?4:s[0]==="source"?5:s[0]==="supertag"?6:-1}return~(e=c(t))&&(n=i[e]=o[e](t)),{c(){n&&n.c(),r=se()},m(s,u){~e&&i[e].m(s,u),S(s,r,u),l=!0},p(s,[u]){let f=e;e=c(s),e!==f&&(n&&(Y(),$(i[f],1,1,()=>{i[f]=null}),K()),~e?(n=i[e],n||(n=i[e]=o[e](s),n.c()),h(n,1),n.m(r.parentNode,r)):n=null)},i(s){l||(h(n),l=!0)},o(s){$(n),l=!1},d(s){~e&&i[e].d(s),s&&C(r)}}}function Vt(t,e,n){let{type:r}=e;return t.$$set=l=>{"type"in l&&n(0,r=l.type)},[r]}class We extends L{constructor(e){super(),B(this,e,Vt,Ut,M,{type:0})}}const ve={"+":"plus","-":"circle-slash","~":"record"},Le={"+":"Included. Tags will be included in the search.","-":"Blocked. Tags will be blocked.","~":"Optional. At least one of all optional tags will on each post."},pe=Object.keys(ve);function De(t,e,n){const r=t.slice();return r[12]=e[n],r}function Xt(t){let e,n=t[15].message+"",r;return{c(){e=v("p"),r=F(n),it(e,"color","red")},m(l,o){S(l,e,o),k(e,r)},p(l,o){o&4&&n!==(n=l[15].message+"")&&U(r,n)},i:A,o:A,d(l){l&&C(e)}}}function Zt(t){let e,n,r=t[11]&&t[11].length&&Fe(t);return{c(){r&&r.c(),e=se()},m(l,o){r&&r.m(l,o),S(l,e,o),n=!0},p(l,o){l[11]&&l[11].length?r?(r.p(l,o),o&4&&h(r,1)):(r=Fe(l),r.c(),h(r,1),r.m(e.parentNode,e)):r&&(Y(),$(r,1,1,()=>{r=null}),K())},i(l){n||(h(r),n=!0)},o(l){$(r),n=!1},d(l){r&&r.d(l),l&&C(e)}}}function Fe(t){let e,n,r=t[11],l=[];for(let i=0;i<r.length;i+=1)l[i]=Re(De(t,r,i));const o=i=>$(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=se()},m(i,c){for(let s=0;s<l.length;s+=1)l[s].m(i,c);S(i,e,c),n=!0},p(i,c){if(c&21){r=i[11];let s;for(s=0;s<r.length;s+=1){const u=De(i,r,s);l[s]?(l[s].p(u,c),h(l[s],1)):(l[s]=Re(u),l[s].c(),h(l[s],1),l[s].m(e.parentNode,e))}for(Y(),s=r.length;s<l.length;s+=1)o(s);K()}},i(i){if(!n){for(let c=0;c<r.length;c+=1)h(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)$(l[c]);n=!1},d(i){oe(l,i),i&&C(e)}}}function Re(t){let e,n,r,l,o=ee(t[12].name)+"",i,c,s,u,f=te(t[12].count)+"",d,a,g,p,E;n=new We({props:{type:be(t[12].types)}});function z(){return t[9](t[12])}return{c(){e=v("li"),O(n.$$.fragment),r=j(),l=v("span"),i=F(o),s=j(),u=v("span"),d=F(f),a=j(),_(l,"title",c=t[12].name),_(l,"class","tag-name svelte-skr0g4"),_(u,"class","tag-count"),_(e,"tabindex","0"),_(e,"class","svelte-skr0g4")},m(y,m){S(y,e,m),I(n,e,null),k(e,r),k(e,l),k(l,i),k(e,s),k(e,u),k(u,d),k(e,a),g=!0,p||(E=H(e,"click",z),p=!0)},p(y,m){t=y;const T={};m&4&&(T.type=be(t[12].types)),n.$set(T),(!g||m&4)&&o!==(o=ee(t[12].name)+"")&&U(i,o),(!g||m&4&&c!==(c=t[12].name))&&_(l,"title",c),(!g||m&4)&&f!==(f=te(t[12].count)+"")&&U(d,f)},i(y){g||(h(n.$$.fragment,y),g=!0)},o(y){$(n.$$.fragment,y),g=!1},d(y){y&&C(e),N(n),p=!1,E()}}}function Jt(t){let e;return{c(){e=v("p"),e.textContent="...waiting"},m(n,r){S(n,e,r)},p:A,i:A,o:A,d(n){n&&C(e)}}}function Qt(t){let e,n,r,l,o,i,c,s,u,f,d,a,g,p,E,z;n=new R({props:{icon:"search"}}),i=new R({props:{icon:ve[t[3]],title:Le[t[3]]}}),i.$on("click",t[7]),s=new Lt({props:{icon:"whole-word",title:"Toggle exact search term matching",active:!t[1]}}),s.$on("click",t[8]);let y={ctx:t,current:null,token:null,hasCatch:!0,pending:Jt,then:Zt,catch:Xt,value:11,error:15,blocks:[,,,]};return Oe(d=t[2],y),{c(){e=v("div"),O(n.$$.fragment),r=j(),l=v("input"),o=j(),O(i.$$.fragment),c=j(),O(s.$$.fragment),u=j(),f=v("ol"),y.block.c(),a=j(),g=v("div"),g.innerHTML='<span class="hint svelte-skr0g4">Learn more about tags</span>',_(l,"type","text"),_(l,"class","svelte-skr0g4"),_(g,"class","hint-container svelte-skr0g4"),_(f,"class","svelte-skr0g4"),_(e,"class","searchbar svelte-skr0g4")},m(m,T){S(m,e,T),I(n,e,null),k(e,r),k(e,l),Ie(l,t[0]),k(e,o),I(i,e,null),k(e,c),I(s,e,null),k(e,u),k(e,f),y.block.m(f,y.anchor=null),y.mount=()=>f,y.anchor=a,k(f,a),k(f,g),p=!0,E||(z=H(l,"input",t[6]),E=!0)},p(m,[T]){t=m,T&1&&l.value!==t[0]&&Ie(l,t[0]);const P={};T&8&&(P.icon=ve[t[3]]),T&8&&(P.title=Le[t[3]]),i.$set(P);const w={};T&2&&(w.active=!t[1]),s.$set(w),y.ctx=t,T&4&&d!==(d=t[2])&&Oe(d,y)||at(y,t,T)},i(m){p||(h(n.$$.fragment,m),h(i.$$.fragment,m),h(s.$$.fragment,m),h(y.block),p=!0)},o(m){$(n.$$.fragment,m),$(i.$$.fragment,m),$(s.$$.fragment,m);for(let T=0;T<3;T+=1){const P=y.blocks[T];$(P)}p=!1},d(m){m&&C(e),N(n),N(i),N(s),y.block.d(),y.token=null,y=null,E=!1,z()}}}function Wt(t,e,n){const r=J();let l,o,i="",c=!0,s="+";async function u(p,E){const z=p?`*${E}*`:E,y=await fetch(`https://r34-json.herokuapp.com/v2/tags?limit=20&sort=count&name=${z.replaceAll(" ","_")}`,{signal:l.signal}),m=await y.json();if(y.ok){if(Array.isArray(m))return m;throw m.message?new Error(m.message):new Error("Cannot display tag suggestions")}else throw new Error("Failed to get tag suggestions")}function f(){i=this.value,n(0,i)}const d=()=>{const p=(pe.indexOf(s)+1)%pe.length;n(3,s=pe[p])},a=()=>{n(1,c=!c)},g=p=>{n(0,i=""),r("pick",p)};return t.$$.update=()=>{t.$$.dirty&35&&(l!==void 0&&l.abort("Newer search term entered"),i!==""&&(n(5,l=new AbortController),n(2,o=u(c,i))))},[i,c,o,s,r,l,f,d,a,g]}class xt extends L{constructor(e){super(),B(this,e,Wt,Qt,M,{})}}function en(t){let e,n,r,l=ee(t[0].name)+"",o,i,c=te(t[0].count)+"",s,u,f,d,a;return n=new We({props:{type:t[2]}}),{c(){e=v("li"),O(n.$$.fragment),r=j(),o=F(l),i=F(`
  (`),s=F(c),u=F(")"),_(e,"tabindex","0"),_(e,"title","Click to remove tag"),_(e,"class","svelte-zci81g"),ot(e,"no-icon",t[2]===null)},m(g,p){S(g,e,p),I(n,e,null),k(e,r),k(e,o),k(e,i),k(e,s),k(e,u),f=!0,d||(a=H(e,"click",t[3]),d=!0)},p(g,[p]){(!f||p&1)&&l!==(l=ee(g[0].name)+"")&&U(o,l),(!f||p&1)&&c!==(c=te(g[0].count)+"")&&U(s,c)},i(g){f||(h(n.$$.fragment,g),f=!0)},o(g){$(n.$$.fragment,g),f=!1},d(g){g&&C(e),N(n),d=!1,a()}}}function tn(t,e,n){let{tag:r}=e;const l=J(),o=be(r.types),i=()=>l("click");return t.$$set=c=>{"tag"in c&&n(0,r=c.tag)},[r,l,o,i]}class nn extends L{constructor(e){super(),B(this,e,tn,en,M,{tag:0})}}function rn(t){let e;return{c(){e=v("div")},m(n,r){S(n,e,r),t[1](e)},p:A,i:A,o:A,d(n){n&&C(e),t[1](null)}}}function ln(t,e,n){const r=J(),l=new IntersectionObserver(c=>{c[0].isIntersecting&&(console.debug("Triggered infinite loading"),r("visible"))},{rootMargin:"1250px"});let o;function i(c){x[c?"unshift":"push"](()=>{o=c,n(0,o)})}return t.$$.update=()=>{t.$$.dirty&1&&(l.disconnect(),o&&l.observe(o))},[o,i]}class on extends L{constructor(e){super(),B(this,e,ln,rn,M,{})}}function sn(){const t=[],{subscribe:e,update:n}=ye(t);return{subscribe:e,add:r=>n(l=>{const o=l.findIndex(i=>i.name==r.name);return o===-1?l.push(r):l[o]=r,l}),removeByIndex:r=>n(l=>(l.splice(r,1),l))}}var he=sn(),cn="/kurosearch/assets/shironeko-confused.4071d5b2.png";function un(t){let e,n,r,l,o;return{c(){e=v("div"),n=v("img"),l=j(),o=v("span"),o.textContent="No results found",Xe(n.src,r=cn)||_(n,"src",r),_(n,"alt","No results."),_(o,"class","svelte-10fem3h"),_(e,"class","svelte-10fem3h")},m(i,c){S(i,e,c),k(e,n),k(e,l),k(e,o)},p:A,i:A,o:A,d(i){i&&C(e)}}}class fn extends L{constructor(e){super(),B(this,e,null,un,M,{})}}var an="/kurosearch/assets/shironeko-x.c28cad00.png";function _n(t){let e,n,r,l,o;return{c(){e=v("div"),n=v("img"),l=j(),o=v("span"),o.textContent="You have reached the end",Xe(n.src,r=an)||_(n,"src",r),_(n,"alt","No results."),_(o,"class","svelte-1rtbqa7"),_(e,"class","svelte-1rtbqa7")},m(i,c){S(i,e,c),k(e,n),k(e,l),k(e,o)},p:A,i:A,o:A,d(i){i&&C(e)}}}class gn extends L{constructor(e){super(),B(this,e,null,_n,M,{})}}function He(t,e,n){const r=t.slice();return r[15]=e[n],r}function Ye(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function Ke(t){let e,n;function r(){return t[10](t[20])}return e=new nn({props:{tag:t[18]}}),e.$on("click",r),{c(){O(e.$$.fragment)},m(l,o){I(e,l,o),n=!0},p(l,o){t=l;const i={};o&32&&(i.tag=t[18]),e.$set(i)},i(l){n||(h(e.$$.fragment,l),n=!0)},o(l){$(e.$$.fragment,l),n=!1},d(l){N(e,l)}}}function dn(t){let e,n;return e=new fn({}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},p:A,i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function mn(t){let e,n=te(t[0])+"",r,l,o,i,c,s,u,f,d,a=t[1],g=[];for(let m=0;m<a.length;m+=1)g[m]=Ge(He(t,a,m));const p=m=>$(g[m],1,1,()=>{g[m]=null}),E=[hn,pn],z=[];function y(m,T){return m[1].length<m[4]?0:1}return s=y(t),u=z[s]=E[s](t),{c(){e=v("p"),r=F(n),l=F(" results"),o=j(),i=v("ol");for(let m=0;m<g.length;m+=1)g[m].c();c=j(),u.c(),f=se(),_(e,"class","count svelte-1rfrhrl"),_(i,"class","svelte-1rfrhrl")},m(m,T){S(m,e,T),k(e,r),k(e,l),S(m,o,T),S(m,i,T);for(let P=0;P<g.length;P+=1)g[P].m(i,null);S(m,c,T),z[s].m(m,T),S(m,f,T),d=!0},p(m,T){if((!d||T&1)&&n!==(n=te(m[0])+"")&&U(r,n),T&66){a=m[1];let w;for(w=0;w<a.length;w+=1){const ce=He(m,a,w);g[w]?(g[w].p(ce,T),h(g[w],1)):(g[w]=Ge(ce),g[w].c(),h(g[w],1),g[w].m(i,null))}for(Y(),w=a.length;w<g.length;w+=1)p(w);K()}let P=s;s=y(m),s===P?z[s].p(m,T):(Y(),$(z[P],1,1,()=>{z[P]=null}),K(),u=z[s],u?u.p(m,T):(u=z[s]=E[s](m),u.c()),h(u,1),u.m(f.parentNode,f))},i(m){if(!d){for(let T=0;T<a.length;T+=1)h(g[T]);h(u),d=!0}},o(m){g=g.filter(Boolean);for(let T=0;T<g.length;T+=1)$(g[T]);$(u),d=!1},d(m){m&&C(e),m&&C(o),m&&C(i),oe(g,m),m&&C(c),z[s].d(m),m&&C(f)}}}function Ge(t){let e,n;return e=new jt({props:{posts:t[15],observer:t[6]}}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},p(r,l){const o={};l&2&&(o.posts=r[15]),e.$set(o)},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function pn(t){let e,n;return e=new gn({}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},p:A,i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function hn(t){let e,n;return e=new on({}),e.$on("visible",t[12]),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},p:A,i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function $n(t){let e,n,r,l,o,i,c,s,u,f,d,a,g,p,E,z,y,m,T;r=new xt({}),r.$on("pick",t[9]);let P=[...t[5]],w=[];for(let b=0;b<P.length;b+=1)w[b]=Ke(Ye(t,P,b));const ce=b=>$(w[b],1,1,()=>{w[b]=null});a=new zt({props:{title:"Click to search with active tags",icon:"search",text:"Search"}}),a.$on("click",t[7]);const Ce=[mn,dn],V=[];function Se(b,q){return b[0]?0:b[0]===0?1:-1}return~(p=Se(t))&&(E=V[p]=Ce[p](t)),{c(){e=v("h1"),e.textContent="kurosearch",n=j(),O(r.$$.fragment),l=j(),o=v("ul");for(let b=0;b<w.length;b+=1)w[b].c();i=j(),c=v("div"),s=v("select"),u=v("option"),u.textContent="New",f=v("option"),f.textContent="Popular",d=j(),O(a.$$.fragment),g=j(),E&&E.c(),z=se(),_(e,"class","svelte-1rfrhrl"),_(o,"class","svelte-1rfrhrl"),u.__value="id",u.value=u.__value,f.__value="score",f.value=f.__value,_(s,"class","svelte-1rfrhrl"),t[2]===void 0&&ie(()=>t[11].call(s)),_(c,"class","sort-row svelte-1rfrhrl")},m(b,q){S(b,e,q),S(b,n,q),I(r,b,q),S(b,l,q),S(b,o,q);for(let X=0;X<w.length;X+=1)w[X].m(o,null);S(b,i,q),S(b,c,q),k(c,s),k(s,u),k(s,f),de(s,t[2]),k(c,d),I(a,c,null),S(b,g,q),~p&&V[p].m(b,q),S(b,z,q),y=!0,m||(T=H(s,"change",t[11]),m=!0)},p(b,[q]){if(q&32){P=[...b[5]];let D;for(D=0;D<P.length;D+=1){const Te=Ye(b,P,D);w[D]?(w[D].p(Te,q),h(w[D],1)):(w[D]=Ke(Te),w[D].c(),h(w[D],1),w[D].m(o,null))}for(Y(),D=P.length;D<w.length;D+=1)ce(D);K()}q&4&&de(s,b[2]);let X=p;p=Se(b),p===X?~p&&V[p].p(b,q):(E&&(Y(),$(V[X],1,1,()=>{V[X]=null}),K()),~p?(E=V[p],E?E.p(b,q):(E=V[p]=Ce[p](b),E.c()),h(E,1),E.m(z.parentNode,z)):E=null)},i(b){if(!y){h(r.$$.fragment,b);for(let q=0;q<P.length;q+=1)h(w[q]);h(a.$$.fragment,b),h(E),y=!0}},o(b){$(r.$$.fragment,b),w=w.filter(Boolean);for(let q=0;q<w.length;q+=1)$(w[q]);$(a.$$.fragment,b),$(E),y=!1},d(b){b&&C(e),b&&C(n),N(r,b),b&&C(l),b&&C(o),oe(w,b),b&&C(i),b&&C(c),N(a),b&&C(g),~p&&V[p].d(b),b&&C(z),m=!1,T()}}}const Ue=20;function bn(t,e,n){let r,l;ge(t,he,y=>n(5,l=y));const o=new IntersectionObserver(y=>{for(const m of y)m.target.src=m.isIntersecting?m.target.getAttribute("data-src"):""},{rootMargin:"1250px"});let i,c=[],s="id",u=null,f=0;function d(){n(1,c=[]),n(0,u=null),i!==void 0&&i.abort("New search triggered"),n(3,f=0),i=new AbortController,a(n(3,f++,f))}async function a(y){const m=[...l.map(w=>w.name),`sort:${s}:desc`].filter(w=>w!=null&&w!=="").map(encodeURIComponent).join("+"),T=await fetch(`https://r34-json.herokuapp.com/v2/posts?limit=${Ue}&pid=${y}&tags=${m}`,{signal:i.signal}),P=await T.json();if(T.ok)return n(0,u=P.count),n(1,c=[...c,P.posts]),P;throw new Error("fuck")}d();const g=y=>he.add(y.detail),p=y=>he.removeByIndex(y);function E(){s=Ze(this),n(2,s)}const z=()=>a(n(3,f++,f));return t.$$.update=()=>{t.$$.dirty&1&&n(4,r=u/Ue)},[u,c,s,f,r,l,o,d,a,g,p,E,z]}class vn extends L{constructor(e){super(),B(this,e,bn,$n,M,{})}}const ke=ye("dark");function kn(t){let e,n,r,l,o;return{c(){e=v("select"),n=v("option"),n.textContent="Dark",r=v("option"),r.textContent="Light",n.__value="dark",n.value=n.__value,r.__value="light",r.value=r.__value,t[0]===void 0&&ie(()=>t[1].call(e))},m(i,c){S(i,e,c),k(e,n),k(e,r),de(e,t[0]),l||(o=H(e,"change",t[1]),l=!0)},p(i,[c]){c&1&&de(e,i[0])},i:A,o:A,d(i){i&&C(e),l=!1,o()}}}function wn(t,e,n){let r;ge(t,ke,o=>n(0,r=o));function l(){r=Ze(this),ke.set(r)}return[r,l]}class yn extends L{constructor(e){super(),B(this,e,wn,kn,M,{})}}function Cn(t){let e;return{c(){e=v("p"),e.textContent="You got lost..."},m(n,r){S(n,e,r)},i:A,o:A,d(n){n&&C(e)}}}function Sn(t){let e,n;return e=new yn({}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Tn(t){let e;return{c(){e=v("p"),e.textContent="account"},m(n,r){S(n,e,r)},i:A,o:A,d(n){n&&C(e)}}}function An(t){let e,n;return e=new vn({}),{c(){O(e.$$.fragment)},m(r,l){I(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function En(t){let e,n,r,l,o,i,c,s;e=new ht({});const u=[An,Tn,Sn,Cn],f=[];function d(a,g){return a[0]==="search"?0:a[0]==="account"?1:a[0]==="settings"?2:3}return l=d(t),o=f[l]=u[l](t),{c(){O(e.$$.fragment),n=j(),r=v("main"),o.c(),i=j(),c=v("footer"),c.textContent="Copyright \xA9 2022 kurozenzen",_(r,"class","svelte-lakodq"),_(c,"class","svelte-lakodq")},m(a,g){I(e,a,g),S(a,n,g),S(a,r,g),f[l].m(r,null),S(a,i,g),S(a,c,g),s=!0},p(a,[g]){let p=l;l=d(a),l!==p&&(Y(),$(f[p],1,1,()=>{f[p]=null}),K(),o=f[l],o||(o=f[l]=u[l](a),o.c()),h(o,1),o.m(r,null))},i(a){s||(h(e.$$.fragment,a),h(o),s=!0)},o(a){$(e.$$.fragment,a),$(o),s=!1},d(a){N(e,a),a&&C(n),a&&C(r),f[l].d(),a&&C(i),a&&C(c)}}}function In(t,e,n){let r,l;ge(t,ke,i=>n(1,r=i)),ge(t,Qe,i=>n(0,l=i));const o=i=>i==="dark"?"light":"dark";return t.$$.update=()=>{t.$$.dirty&2&&document.body.classList.replace(o(r),r)},[l,r]}class Nn extends L{constructor(e){super(),B(this,e,In,En,M,{})}}new Nn({target:document.getElementById("app")});
