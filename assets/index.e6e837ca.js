const at=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}};at();function T(){}function ut(t){return t&&typeof t=="object"&&typeof t.then=="function"}function rt(t){return t()}function Me(){return Object.create(null)}function oe(t){t.forEach(rt)}function ft(t){return typeof t=="function"}function W(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let me;function lt(t,e){return me||(me=document.createElement("a")),me.href=e,t===me.href}function dt(t){return Object.keys(t).length===0}function gt(t,...e){if(t==null)return T;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ue(t,e,n){t.$$.on_destroy.push(gt(e,n))}function $e(t){return t==null?"":t}function p(t,e){t.appendChild(e)}function j(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode.removeChild(t)}function _e(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function ee(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function U(t){return document.createTextNode(t)}function N(){return U(" ")}function he(){return U("")}function Y(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _t(t){return Array.from(t.childNodes)}function Z(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Oe(t,e){t.value=e==null?"":e}function we(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function it(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function fe(t,e,n){t.classList[n?"add":"remove"](e)}function ht(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,r,e),l}let de;function J(t){de=t}function ot(){if(!de)throw new Error("Function called outside component initialization");return de}function se(){const t=ot();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=ht(e,n,{cancelable:r});return l.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}const ae=[],re=[],be=[],Re=[],mt=Promise.resolve();let Te=!1;function pt(){Te||(Te=!0,mt.then(Ie))}function ge(t){be.push(t)}const ye=new Set;let pe=0;function Ie(){const t=de;do{for(;pe<ae.length;){const e=ae[pe];pe++,J(e),vt(e.$$)}for(J(null),ae.length=0,pe=0;re.length;)re.pop()();for(let e=0;e<be.length;e+=1){const n=be[e];ye.has(n)||(ye.add(n),n())}be.length=0}while(ae.length);for(;Re.length;)Re.pop()();Te=!1,ye.clear(),J(t)}function vt(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ge)}}const ke=new Set;let Q;function G(){Q={r:0,c:[],p:Q}}function K(){Q.r||oe(Q.c),Q=Q.p}function S(t,e){t&&t.i&&(ke.delete(t),t.i(e))}function A(t,e,n,r){if(t&&t.o){if(ke.has(t))return;ke.add(t),Q.c.push(()=>{ke.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function ze(t,e){const n=e.token={};function r(l,o,i,c){if(e.token!==n)return;e.resolved=c;let s=e.ctx;i!==void 0&&(s=s.slice(),s[i]=c);const a=l&&(e.current=l)(s);let f=!1;e.block&&(e.blocks?e.blocks.forEach((d,h)=>{h!==o&&d&&(G(),A(d,1,1,()=>{e.blocks[h]===d&&(e.blocks[h]=null)}),K())}):e.block.d(1),a.c(),S(a,1),a.m(e.mount(),e.anchor),f=!0),e.block=a,e.blocks&&(e.blocks[o]=a),f&&Ie()}if(ut(t)){const l=ot();if(t.then(o=>{J(l),r(e.then,1,e.value,o),J(null)},o=>{if(J(l),r(e.catch,2,e.error,o),J(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function bt(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function D(t){t&&t.c()}function z(t,e,n,r){const{fragment:l,on_mount:o,on_destroy:i,after_update:c}=t.$$;l&&l.m(e,n),r||ge(()=>{const s=o.map(rt).filter(ft);i?i.push(...s):oe(s),t.$$.on_mount=[]}),c.forEach(ge)}function B(t,e){const n=t.$$;n.fragment!==null&&(oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kt(t,e){t.$$.dirty[0]===-1&&(ae.push(t),pt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(t,e,n,r,l,o,i,c=[-1]){const s=de;J(t);const a=t.$$={fragment:null,ctx:null,props:o,update:T,not_equal:l,bound:Me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Me(),dirty:c,skip_bound:!1,root:e.target||s.$$.root};i&&i(a.root);let f=!1;if(a.ctx=n?n(t,e.props||{},(d,h,...g)=>{const $=g.length?g[0]:h;return a.ctx&&l(a.ctx[d],a.ctx[d]=$)&&(!a.skip_bound&&a.bound[d]&&a.bound[d]($),f&&kt(t,d)),h}):[],a.update(),f=!0,oe(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const d=_t(e.target);a.fragment&&a.fragment.l(d),d.forEach(E)}else a.fragment&&a.fragment.c();e.intro&&S(t.$$.fragment),z(t,e.target,e.anchor,e.customElement),Ie()}J(s)}class H{$destroy(){B(this,1),this.$destroy=T}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!dt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const te=[];function Le(t,e=T){let n;const r=new Set;function l(c){if(W(t,c)&&(t=c,n)){const s=!te.length;for(const a of r)a[1](),te.push(a,t);if(s){for(let a=0;a<te.length;a+=2)te[a][0](te[a+1]);te.length=0}}}function o(c){l(c(t))}function i(c,s=T){const a=[c,s];return r.add(a),r.size===1&&(n=e(l)||T),c(t),()=>{r.delete(a),r.size===0&&(n(),n=null)}}return{set:l,update:o,subscribe:i}}const st=Le("search");function $t(t){let e,n,r,l,o,i;return{c(){e=ee("svg"),n=ee("g"),r=ee("path"),l=ee("defs"),o=ee("clipPath"),i=ee("path"),u(r,"d","M60.105 4.898A58.55 58.55 0 0045.653.415a.22.22 0 00-.233.11 40.784 40.784 0 00-1.8 3.697c-5.456-.817-10.886-.817-16.23 0-.485-1.164-1.201-2.587-1.828-3.697a.228.228 0 00-.233-.11 58.386 58.386 0 00-14.451 4.483.207.207 0 00-.095.082C1.578 18.73-.944 32.144.293 45.39a.244.244 0 00.093.167c6.073 4.46 11.955 7.167 17.729 8.962a.23.23 0 00.249-.082 42.08 42.08 0 003.627-5.9.225.225 0 00-.123-.312 38.772 38.772 0 01-5.539-2.64.228.228 0 01-.022-.378c.372-.279.744-.569 1.1-.862a.22.22 0 01.23-.03c11.619 5.304 24.198 5.304 35.68 0a.219.219 0 01.233.027c.356.293.728.586 1.103.865a.228.228 0 01-.02.378 36.384 36.384 0 01-5.54 2.637.227.227 0 00-.121.315 47.249 47.249 0 003.624 5.897.225.225 0 00.249.084c5.801-1.794 11.684-4.502 17.757-8.961a.228.228 0 00.092-.164c1.48-15.315-2.48-28.618-10.497-40.412a.18.18 0 00-.093-.084zm-36.38 32.427c-3.497 0-6.38-3.211-6.38-7.156 0-3.944 2.827-7.156 6.38-7.156 3.583 0 6.438 3.24 6.382 7.156 0 3.945-2.827 7.156-6.381 7.156zm23.593 0c-3.498 0-6.38-3.211-6.38-7.156 0-3.944 2.826-7.156 6.38-7.156 3.582 0 6.437 3.24 6.38 7.156 0 3.945-2.798 7.156-6.38 7.156z"),u(r,"fill","currentcolor"),u(n,"clip-path","url(#prefix__clip0)"),u(i,"fill","currentcolor"),u(i,"d","M0 0h71v55H0z"),u(o,"id","prefix__clip0"),u(e,"width","16"),u(e,"height","16"),u(e,"viewBox","0 0 71 55"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(c,s){j(c,e,s),p(e,n),p(n,r),p(e,l),p(l,o),p(o,i)},p:T,i:T,o:T,d(c){c&&E(e)}}}class wt extends H{constructor(e){super(),F(this,e,null,$t,W,{})}}function yt(t){let e,n,r,l,o,i,c,s,a,f,d,h,g,$,P,C,w,m;return s=new wt({}),{c(){e=b("header"),n=b("div"),r=b("a"),r.innerHTML='<i class="codicon codicon-github"></i>',l=N(),o=b("a"),o.innerHTML='<i class="codicon codicon-heart"></i>',i=N(),c=b("a"),D(s.$$.fragment),a=N(),f=b("nav"),d=b("button"),d.innerHTML='<i class="codicon codicon-search"></i>',h=N(),g=b("button"),g.innerHTML='<i class="codicon codicon-settings-gear"></i>',$=N(),P=b("button"),P.innerHTML='<i class="codicon codicon-account"></i>',u(r,"title","Source Code"),u(r,"href","https://github.com/kurozenzen/kurosearch"),u(r,"target","_newtab"),u(r,"class","svelte-sebnml"),u(o,"title","Sponsor"),u(o,"href","https://ko-fi.com/kurozenzen"),u(o,"target","_newtab"),u(o,"class","svelte-sebnml"),u(c,"title","Discord Server"),u(c,"href","https://discord.gg/yyJFG5PVBZ"),u(c,"target","_newtab"),u(c,"class","svelte-sebnml"),u(n,"class","svelte-sebnml"),u(d,"title","Search"),u(d,"class","svelte-sebnml"),u(g,"title","Settings"),u(g,"class","svelte-sebnml"),u(P,"title","Account"),u(P,"class","svelte-sebnml"),u(f,"class","svelte-sebnml"),u(e,"role","navigation"),u(e,"class","svelte-sebnml")},m(v,I){j(v,e,I),p(e,n),p(n,r),p(n,l),p(n,o),p(n,i),p(n,c),z(s,c,null),p(e,a),p(e,f),p(f,d),p(f,h),p(f,g),p(f,$),p(f,P),C=!0,w||(m=[Y(d,"click",t[0]("search")),Y(g,"click",t[0]("settings")),Y(P,"click",t[0]("account"))],w=!0)},p:T,i(v){C||(S(s.$$.fragment,v),C=!0)},o(v){A(s.$$.fragment,v),C=!1},d(v){v&&E(e),B(s),w=!1,oe(m)}}}function St(t){return[n=>()=>{st.set(n)}]}class Et extends H{constructor(e){super(),F(this,e,St,yt,W,{})}}const V=t=>t/1e6>=1?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString();function ne(t,e){const n=t.toFixed();return`${n} ${e}${n==="1"?"":"s"} ago`}function Be(t){const e=new Date(t),n=new Date,r=n.getFullYear()-e.getFullYear();if(r)return ne(r,"year");const l=n.getMonth()-e.getMonth();if(l)return ne(l,"month");const o=(n.getTime()-e.getTime())/6e4;if(o===0)return"just now";if(o<60)return ne(o,"minute");const i=o/60;if(i<24)return ne(i,"hour");const c=i/24;if(c<7)return ne(c,"day");const s=c/7;return s<5?ne(s,"week"):"rip"}function ie(t){return t.replace(/_/g," ").replace(/source:/g,"").replace(/rating:/g,"")}function Pe(t){for(const e of t)if(e!=="ambiguous"&&e!=="general")return e;return null}function jt(){const t=[],{subscribe:e,update:n}=Le(t);return{subscribe:e,add:r=>n(l=>{const o=l.findIndex(i=>i.name==r.name);return o===-1?l.push(r):l[o]=r,l}),addByName:r=>n(l=>(l.push({name:r,count:0,types:[]}),l)),removeByIndex:r=>n(l=>(l.splice(r,1),l))}}var le=jt();function Tt(t){let e,n=ie(t[0])+"",r,l,o;return{c(){e=b("li"),r=U(n),u(e,"tabindex","0"),u(e,"title","Click to add tag"),u(e,"class","svelte-1r7mf3i"),fe(e,"active",t[2])},m(i,c){j(i,e,c),p(e,r),l||(o=Y(e,"click",t[4]),l=!0)},p(i,[c]){c&1&&n!==(n=ie(i[0])+"")&&Z(r,n),c&4&&fe(e,"active",i[2])},i:T,o:T,d(i){i&&E(e),l=!1,o()}}}function Pt(t,e,n){let r,l,o;ue(t,le,s=>n(3,o=s));let{name:i}=e;const c=()=>l?le.removeByIndex(r):le.addByName(i);return t.$$set=s=>{"name"in s&&n(0,i=s.name)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=o.findIndex(s=>s.name===i)),t.$$.dirty&2&&n(2,l=r>=0)},[i,r,l,o,c]}class At extends H{constructor(e){super(),F(this,e,Pt,Tt,W,{name:0})}}function Ct(t){let e,n,r,l=t[0].hostname+"",o,i;return{c(){e=b("i"),n=N(),r=b("a"),o=U(l),u(e,"class","codicon codicon-link"),u(r,"href",i=t[0].toString()),u(r,"target","_newtab"),u(r,"class","svelte-1qmyyls")},m(c,s){j(c,e,s),j(c,n,s),j(c,r,s),p(r,o)},p:T,d(c){c&&E(e),c&&E(n),c&&E(r)}}}function It(t){let e,n=t[0]&&Ct(t);return{c(){n&&n.c(),e=he()},m(r,l){n&&n.m(r,l),j(r,e,l)},p(r,[l]){r[0]&&n.p(r,l)},i:T,o:T,d(r){n&&n.d(r),r&&E(e)}}}function Lt(t,e,n){let{source:r}=e,l=new URL(r);return t.$$set=o=>{"source"in o&&n(1,r=o.source)},[l,r]}class Nt extends H{constructor(e){super(),F(this,e,Lt,It,W,{source:1})}}function We(t,e,n){const r=t.slice();return r[1]=e[n],r}function De(t){let e,n,r;return n=new Nt({props:{source:t[0].source}}),{c(){e=b("div"),D(n.$$.fragment),u(e,"class","svelte-5x11c6")},m(l,o){j(l,e,o),z(n,e,null),r=!0},p(l,o){const i={};o&1&&(i.source=l[0].source),n.$set(i)},i(l){r||(S(n.$$.fragment,l),r=!0)},o(l){A(n.$$.fragment,l),r=!1},d(l){l&&E(e),B(n)}}}function Fe(t){let e,n;return e=new At({props:{name:t[1]}}),{c(){D(e.$$.fragment)},m(r,l){z(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.name=r[1]),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Mt(t){let e,n,r,l,o,i=Be(t[0].created_at)+"",c,s,a,f,d,h,g=V(t[0].score)+"",$,P,C,w,m,v=t[0].source&&De(t),I=t[0].tags,k=[];for(let L=0;L<I.length;L+=1)k[L]=Fe(We(t,I,L));const x=L=>A(k[L],1,1,()=>{k[L]=null});return{c(){e=b("div"),n=b("div"),r=b("i"),l=N(),o=b("span"),c=U(i),s=N(),a=b("div"),f=b("i"),d=N(),h=b("span"),$=U(g),P=N(),v&&v.c(),C=N(),w=b("ul");for(let L=0;L<k.length;L+=1)k[L].c();u(r,"class","codicon codicon-calendar"),u(o,"class","svelte-5x11c6"),u(n,"class","svelte-5x11c6"),u(f,"class","codicon codicon-heart"),u(h,"class","svelte-5x11c6"),u(a,"class","svelte-5x11c6"),u(e,"class","summary svelte-5x11c6"),u(w,"class","svelte-5x11c6")},m(L,M){j(L,e,M),p(e,n),p(n,r),p(n,l),p(n,o),p(o,c),p(e,s),p(e,a),p(a,f),p(a,d),p(a,h),p(h,$),p(e,P),v&&v.m(e,null),j(L,C,M),j(L,w,M);for(let R=0;R<k.length;R+=1)k[R].m(w,null);m=!0},p(L,[M]){if((!m||M&1)&&i!==(i=Be(L[0].created_at)+"")&&Z(c,i),(!m||M&1)&&g!==(g=V(L[0].score)+"")&&Z($,g),L[0].source?v?(v.p(L,M),M&1&&S(v,1)):(v=De(L),v.c(),S(v,1),v.m(e,null)):v&&(G(),A(v,1,1,()=>{v=null}),K()),M&1){I=L[0].tags;let R;for(R=0;R<I.length;R+=1){const y=We(L,I,R);k[R]?(k[R].p(y,M),S(k[R],1)):(k[R]=Fe(y),k[R].c(),S(k[R],1),k[R].m(w,null))}for(G(),R=I.length;R<k.length;R+=1)x(R);K()}},i(L){if(!m){S(v);for(let M=0;M<I.length;M+=1)S(k[M]);m=!0}},o(L){A(v),k=k.filter(Boolean);for(let M=0;M<k.length;M+=1)A(k[M]);m=!1},d(L){L&&E(e),v&&v.d(),L&&E(C),L&&E(w),_e(k,L)}}}function Ot(t,e,n){let{post:r}=e;return t.$$set=l=>{"post"in l&&n(0,r=l.post)},[r]}class Rt extends H{constructor(e){super(),F(this,e,Ot,Mt,W,{post:0})}}function zt(t){let e,n,r,l,o,i;return{c(){e=b("img"),u(e,"loading","lazy"),u(e,"data-src",n=t[0].sample_url),u(e,"alt",r=t[0].id.toString()),u(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),u(e,"width",o=t[0].width),u(e,"height",i=t[0].height),u(e,"class","svelte-1xnjrgd")},m(c,s){j(c,e,s),t[7](e)},p(c,s){s&1&&n!==(n=c[0].sample_url)&&u(e,"data-src",n),s&1&&r!==(r=c[0].id.toString())&&u(e,"alt",r),s&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&u(e,"style",l),s&1&&o!==(o=c[0].width)&&u(e,"width",o),s&1&&i!==(i=c[0].height)&&u(e,"height",i)},d(c){c&&E(e),t[7](null)}}}function Bt(t){let e,n,r,l,o,i;return{c(){e=b("video"),u(e,"preload","metadata"),u(e,"loading","lazy"),u(e,"data-src",n=t[0].sample_url),u(e,"alt",r=t[0].id.toString()),u(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),u(e,"width",o=t[0].width),u(e,"height",i=t[0].height),e.controls=!0,u(e,"class","svelte-1xnjrgd")},m(c,s){j(c,e,s),t[6](e)},p(c,s){s&1&&n!==(n=c[0].sample_url)&&u(e,"data-src",n),s&1&&r!==(r=c[0].id.toString())&&u(e,"alt",r),s&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&u(e,"style",l),s&1&&o!==(o=c[0].width)&&u(e,"width",o),s&1&&i!==(i=c[0].height)&&u(e,"height",i)},d(c){c&&E(e),t[6](null)}}}function Wt(t){let e,n,r,l,o,i;return{c(){e=b("img"),u(e,"loading","lazy"),u(e,"data-src",n=t[0].sample_url),u(e,"alt",r=t[0].id.toString()),u(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),u(e,"width",o=t[0].width),u(e,"height",i=t[0].height),u(e,"class","svelte-1xnjrgd")},m(c,s){j(c,e,s),t[5](e)},p(c,s){s&1&&n!==(n=c[0].sample_url)&&u(e,"data-src",n),s&1&&r!==(r=c[0].id.toString())&&u(e,"alt",r),s&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&u(e,"style",l),s&1&&o!==(o=c[0].width)&&u(e,"width",o),s&1&&i!==(i=c[0].height)&&u(e,"height",i)},d(c){c&&E(e),t[5](null)}}}function He(t){let e,n;return e=new Rt({props:{post:t[0]}}),{c(){D(e.$$.fragment)},m(r,l){z(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.post=r[0]),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Dt(t){let e,n,r,l,o,i;function c(d,h){return d[0].type==="image"?Wt:d[0].type==="video"?Bt:zt}let s=c(t),a=s(t),f=t[2]&&He(t);return{c(){e=b("div"),n=b("div"),a.c(),r=N(),f&&f.c(),u(n,"class","content"),u(e,"class","post svelte-1xnjrgd")},m(d,h){j(d,e,h),p(e,n),a.m(n,null),p(e,r),f&&f.m(e,null),l=!0,o||(i=Y(n,"click",t[3]),o=!0)},p(d,[h]){s===(s=c(d))&&a?a.p(d,h):(a.d(1),a=s(d),a&&(a.c(),a.m(n,null))),d[2]?f?(f.p(d,h),h&4&&S(f,1)):(f=He(d),f.c(),S(f,1),f.m(e,null)):f&&(G(),A(f,1,1,()=>{f=null}),K())},i(d){l||(S(f),l=!0)},o(d){A(f),l=!1},d(d){d&&E(e),a.d(),f&&f.d(),o=!1,i()}}}function Ft(t,e,n){let{post:r}=e,{observer:l}=e,o=!1,i;function c(){n(2,o=!o)}function s(d){re[d?"unshift":"push"](()=>{i=d,n(1,i)})}function a(d){re[d?"unshift":"push"](()=>{i=d,n(1,i)})}function f(d){re[d?"unshift":"push"](()=>{i=d,n(1,i)})}return t.$$set=d=>{"post"in d&&n(0,r=d.post),"observer"in d&&n(4,l=d.observer)},t.$$.update=()=>{t.$$.dirty&18&&i&&l.observe(i)},[r,i,o,c,l,s,a,f]}class Ht extends H{constructor(e){super(),F(this,e,Ft,Dt,W,{post:0,observer:4})}}function Ue(t,e,n){const r=t.slice();return r[2]=e[n],r}function qe(t){let e,n;return e=new Ht({props:{post:t[2],observer:t[1]}}),{c(){D(e.$$.fragment)},m(r,l){z(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.post=r[2]),l&2&&(o.observer=r[1]),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Ut(t){let e,n,r=t[0],l=[];for(let i=0;i<r.length;i+=1)l[i]=qe(Ue(t,r,i));const o=i=>A(l[i],1,1,()=>{l[i]=null});return{c(){e=b("ol");for(let i=0;i<l.length;i+=1)l[i].c();u(e,"class","page svelte-5hdzo")},m(i,c){j(i,e,c);for(let s=0;s<l.length;s+=1)l[s].m(e,null);n=!0},p(i,[c]){if(c&3){r=i[0];let s;for(s=0;s<r.length;s+=1){const a=Ue(i,r,s);l[s]?(l[s].p(a,c),S(l[s],1)):(l[s]=qe(a),l[s].c(),S(l[s],1),l[s].m(e,null))}for(G(),s=r.length;s<l.length;s+=1)o(s);K()}},i(i){if(!n){for(let c=0;c<r.length;c+=1)S(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)A(l[c]);n=!1},d(i){i&&E(e),_e(l,i)}}}function qt(t,e,n){let{posts:r}=e,{observer:l}=e;return t.$$set=o=>{"posts"in o&&n(0,r=o.posts),"observer"in o&&n(1,l=o.observer)},[r,l]}class Yt extends H{constructor(e){super(),F(this,e,qt,Ut,W,{posts:0,observer:1})}}function Gt(t){let e,n,r,l,o,i,c;return{c(){e=b("button"),n=b("i"),l=N(),o=U(t[1]),u(n,"class",r=`codicon codicon-${t[0]}`),u(e,"title",t[2]),u(e,"class","svelte-11z6t3c")},m(s,a){j(s,e,a),p(e,n),p(e,l),p(e,o),i||(c=Y(e,"click",t[4]),i=!0)},p(s,[a]){a&1&&r!==(r=`codicon codicon-${s[0]}`)&&u(n,"class",r),a&2&&Z(o,s[1]),a&4&&u(e,"title",s[2])},i:T,o:T,d(s){s&&E(e),i=!1,c()}}}function Kt(t,e,n){let{icon:r}=e,{text:l}=e,{title:o}=e;const i=se(),c=()=>i("click");return t.$$set=s=>{"icon"in s&&n(0,r=s.icon),"text"in s&&n(1,l=s.text),"title"in s&&n(2,o=s.title)},[r,l,o,i,c]}class Zt extends H{constructor(e){super(),F(this,e,Kt,Gt,W,{icon:0,text:1,title:2})}}function Jt(t){let e,n,r,l;return{c(){e=b("i"),u(e,"title",t[0]),u(e,"class",n=$e(`codicon codicon-${t[1]}`)+" svelte-htt49j"),u(e,"tabindex","0"),fe(e,"active",t[2])},m(o,i){j(o,e,i),r||(l=Y(e,"click",t[4]),r=!0)},p(o,[i]){i&1&&u(e,"title",o[0]),i&2&&n!==(n=$e(`codicon codicon-${o[1]}`)+" svelte-htt49j")&&u(e,"class",n),i&6&&fe(e,"active",o[2])},i:T,o:T,d(o){o&&E(e),r=!1,l()}}}function Vt(t,e,n){let{title:r=void 0}=e,{icon:l}=e,{active:o}=e;const i=se(),c=()=>i("click");return t.$$set=s=>{"title"in s&&n(0,r=s.title),"icon"in s&&n(1,l=s.icon),"active"in s&&n(2,o=s.active)},[r,l,o,i,c]}class Xt extends H{constructor(e){super(),F(this,e,Vt,Jt,W,{title:0,icon:1,active:2})}}function Qt(t){let e,n;return{c(){e=b("i"),u(e,"class",n=`codicon codicon-${t[1][t[0]]}`)},m(r,l){j(r,e,l)},p(r,[l]){l&1&&n!==(n=`codicon codicon-${r[1][r[0]]}`)&&u(e,"class",n)},i:T,o:T,d(r){r&&E(e)}}}function xt(t,e,n){let{type:r}=e;const l={artist:"edit",character:"person",copyright:"folder",metadata:"info",rating:"unverified",source:"link",supertag:"star-full"};return t.$$set=o=>{"type"in o&&n(0,r=o.type)},[r,l]}class ct extends H{constructor(e){super(),F(this,e,xt,Qt,W,{type:0})}}const Ae={"+":"plus","-":"circle-slash","~":"record"},Ye={"+":"Included. Tags will be included in the search.","-":"Blocked. Tags will be blocked.","~":"Optional. At least one of all optional tags will on each post."},Se=Object.keys(Ae);function en(t){let e,n,r,l,o;return{c(){e=b("i"),u(e,"class",n=$e(`codicon codicon-${Ae[t[0]]}`)+" svelte-htt49j"),u(e,"title",r=Ye[t[0]])},m(i,c){j(i,e,c),l||(o=Y(e,"click",t[2]),l=!0)},p(i,[c]){c&1&&n!==(n=$e(`codicon codicon-${Ae[i[0]]}`)+" svelte-htt49j")&&u(e,"class",n),c&1&&r!==(r=Ye[i[0]])&&u(e,"title",r)},i:T,o:T,d(i){i&&E(e),l=!1,o()}}}function tn(t,e,n){let r="+";const l=se();return[r,l,()=>{const i=(Se.indexOf(r)+1)%Se.length;n(0,r=Se[i]),l("change",r)}]}class nn extends H{constructor(e){super(),F(this,e,tn,en,W,{})}}function rn(t){let e;return{c(){e=b("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 20" enable-background="new 0 0 0 0" class="svelte-166gq1d"><circle fill="currentcolor" stroke="none" cx="6" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.1"></animate></circle><circle fill="currentcolor" stroke="none" cx="25" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.2"></animate></circle><circle fill="currentcolor" stroke="none" cx="44" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.3"></animate></circle></svg>'},m(n,r){j(n,e,r)},p:T,i:T,o:T,d(n){n&&E(e)}}}class ln extends H{constructor(e){super(),F(this,e,null,rn,W,{})}}function Ge(t,e,n){const r=t.slice();return r[12]=e[n],r}function on(t){let e,n,r=t[15].message+"",l;return{c(){e=b("div"),n=b("span"),l=U(r),u(e,"class","hint-container svelte-vtgj37")},m(o,i){j(o,e,i),p(e,n),p(n,l)},p(o,i){i&4&&r!==(r=o[15].message+"")&&Z(l,r)},i:T,o:T,d(o){o&&E(e)}}}function sn(t){let e,n,r=t[11]&&t[11].length&&Ke(t);return{c(){r&&r.c(),e=he()},m(l,o){r&&r.m(l,o),j(l,e,o),n=!0},p(l,o){l[11]&&l[11].length?r?(r.p(l,o),o&4&&S(r,1)):(r=Ke(l),r.c(),S(r,1),r.m(e.parentNode,e)):r&&(G(),A(r,1,1,()=>{r=null}),K())},i(l){n||(S(r),n=!0)},o(l){A(r),n=!1},d(l){r&&r.d(l),l&&E(e)}}}function Ke(t){let e,n,r=t[11],l=[];for(let i=0;i<r.length;i+=1)l[i]=Ze(Ge(t,r,i));const o=i=>A(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=he()},m(i,c){for(let s=0;s<l.length;s+=1)l[s].m(i,c);j(i,e,c),n=!0},p(i,c){if(c&21){r=i[11];let s;for(s=0;s<r.length;s+=1){const a=Ge(i,r,s);l[s]?(l[s].p(a,c),S(l[s],1)):(l[s]=Ze(a),l[s].c(),S(l[s],1),l[s].m(e.parentNode,e))}for(G(),s=r.length;s<l.length;s+=1)o(s);K()}},i(i){if(!n){for(let c=0;c<r.length;c+=1)S(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)A(l[c]);n=!1},d(i){_e(l,i),i&&E(e)}}}function Ze(t){let e,n,r,l,o=ie(t[12].name)+"",i,c,s,a,f=V(t[12].count)+"",d,h,g,$,P;n=new ct({props:{type:Pe(t[12].types)}});function C(){return t[9](t[12])}return{c(){e=b("li"),D(n.$$.fragment),r=N(),l=b("span"),i=U(o),s=N(),a=b("span"),d=U(f),h=N(),u(l,"title",c=t[12].name),u(l,"class","tag-name svelte-vtgj37"),u(a,"class","tag-count"),u(e,"tabindex","0"),u(e,"class","svelte-vtgj37")},m(w,m){j(w,e,m),z(n,e,null),p(e,r),p(e,l),p(l,i),p(e,s),p(e,a),p(a,d),p(e,h),g=!0,$||(P=Y(e,"click",C),$=!0)},p(w,m){t=w;const v={};m&4&&(v.type=Pe(t[12].types)),n.$set(v),(!g||m&4)&&o!==(o=ie(t[12].name)+"")&&Z(i,o),(!g||m&4&&c!==(c=t[12].name))&&u(l,"title",c),(!g||m&4)&&f!==(f=V(t[12].count)+"")&&Z(d,f)},i(w){g||(S(n.$$.fragment,w),g=!0)},o(w){A(n.$$.fragment,w),g=!1},d(w){w&&E(e),B(n),$=!1,P()}}}function cn(t){let e,n,r;return n=new ln({}),{c(){e=b("div"),D(n.$$.fragment),u(e,"class","hint-container svelte-vtgj37")},m(l,o){j(l,e,o),z(n,e,null),r=!0},p:T,i(l){r||(S(n.$$.fragment,l),r=!0)},o(l){A(n.$$.fragment,l),r=!1},d(l){l&&E(e),B(n)}}}function an(t){let e,n,r,l,o,i,c,s,a,f,d,h,g,$,P,C;i=new nn({}),i.$on("change",t[7]),s=new Xt({props:{icon:"whole-word",title:"Toggle exact search term matching",active:!t[1]}}),s.$on("click",t[8]);let w={ctx:t,current:null,token:null,hasCatch:!0,pending:cn,then:sn,catch:on,value:11,error:15,blocks:[,,,]};return ze(d=t[2],w),{c(){e=b("div"),n=b("i"),r=N(),l=b("input"),o=N(),D(i.$$.fragment),c=N(),D(s.$$.fragment),a=N(),f=b("ol"),w.block.c(),h=N(),g=b("div"),g.innerHTML='<span class="hint svelte-vtgj37">Learn more about tags</span>',u(n,"class","codicon codicon-search"),u(l,"type","text"),u(l,"aria-label","Search for tags."),u(l,"class","svelte-vtgj37"),u(g,"class","hint-container svelte-vtgj37"),u(f,"class","svelte-vtgj37"),u(e,"class","searchbar svelte-vtgj37")},m(m,v){j(m,e,v),p(e,n),p(e,r),p(e,l),Oe(l,t[0]),p(e,o),z(i,e,null),p(e,c),z(s,e,null),p(e,a),p(e,f),w.block.m(f,w.anchor=null),w.mount=()=>f,w.anchor=h,p(f,h),p(f,g),$=!0,P||(C=Y(l,"input",t[6]),P=!0)},p(m,[v]){t=m,v&1&&l.value!==t[0]&&Oe(l,t[0]);const I={};v&2&&(I.active=!t[1]),s.$set(I),w.ctx=t,v&4&&d!==(d=t[2])&&ze(d,w)||bt(w,t,v)},i(m){$||(S(i.$$.fragment,m),S(s.$$.fragment,m),S(w.block),$=!0)},o(m){A(i.$$.fragment,m),A(s.$$.fragment,m);for(let v=0;v<3;v+=1){const I=w.blocks[v];A(I)}$=!1},d(m){m&&E(e),B(i),B(s),w.block.d(),w.token=null,w=null,P=!1,C()}}}function un(t,e,n){const r=se();let l,o,i="",c=!0,s="+";async function a($,P){const C=$?`*${P}*`:P,w=await fetch(`https://r34-json.herokuapp.com/v2/tags?limit=20&sort=count&name=${C.replaceAll(" ","_")}`,{signal:l.signal}),m=await w.json();if(w.ok){if(Array.isArray(m))return m;throw m.message?new Error(m.message):new Error("Cannot display tag suggestions")}else throw new Error("Failed to get tag suggestions")}function f(){i=this.value,n(0,i)}const d=$=>{n(3,s=$.detail)},h=()=>{n(1,c=!c)},g=$=>{var P;n(0,i=""),r("pick",$),(P=document.activeElement)==null||P.blur()};return t.$$.update=()=>{t.$$.dirty&35&&(l!==void 0&&l.abort("Newer search term entered"),i!==""&&(n(5,l=new AbortController),n(2,o=a(c,i))))},[i,c,o,s,r,l,f,d,h,g]}class fn extends H{constructor(e){super(),F(this,e,un,an,W,{})}}function dn(t){let e,n,r,l=ie(t[0].name)+"",o,i,c=V(t[0].count)+"",s,a,f,d,h;return n=new ct({props:{type:t[2]}}),{c(){e=b("li"),D(n.$$.fragment),r=N(),o=U(l),i=U(`
  (`),s=U(c),a=U(")"),u(e,"tabindex","0"),u(e,"title","Click to remove tag"),u(e,"class","svelte-zci81g"),fe(e,"no-icon",t[2]===null)},m(g,$){j(g,e,$),z(n,e,null),p(e,r),p(e,o),p(e,i),p(e,s),p(e,a),f=!0,d||(h=Y(e,"click",t[3]),d=!0)},p(g,[$]){(!f||$&1)&&l!==(l=ie(g[0].name)+"")&&Z(o,l),(!f||$&1)&&c!==(c=V(g[0].count)+"")&&Z(s,c)},i(g){f||(S(n.$$.fragment,g),f=!0)},o(g){A(n.$$.fragment,g),f=!1},d(g){g&&E(e),B(n),d=!1,h()}}}function gn(t,e,n){let{tag:r}=e;const l=se(),o=Pe(r.types),i=()=>l("click");return t.$$set=c=>{"tag"in c&&n(0,r=c.tag)},[r,l,o,i]}class _n extends H{constructor(e){super(),F(this,e,gn,dn,W,{tag:0})}}function hn(t){let e;return{c(){e=b("div")},m(n,r){j(n,e,r),t[1](e)},p:T,i:T,o:T,d(n){n&&E(e),t[1](null)}}}function mn(t,e,n){const r=se(),l=new IntersectionObserver(c=>{c[0].isIntersecting&&(console.debug("Triggered infinite loading"),r("visible"))},{rootMargin:"1250px"});let o;function i(c){re[c?"unshift":"push"](()=>{o=c,n(0,o)})}return t.$$.update=()=>{t.$$.dirty&1&&(l.disconnect(),o&&l.observe(o))},[o,i]}class pn extends H{constructor(e){super(),F(this,e,mn,hn,W,{})}}var vn="/kurosearch/assets/shironeko-confused.4071d5b2.png";function bn(t){let e,n,r,l,o;return{c(){e=b("div"),n=b("img"),l=N(),o=b("span"),o.textContent="No results found",lt(n.src,r=vn)||u(n,"src",r),u(n,"alt","No results."),u(o,"class","svelte-10fem3h"),u(e,"class","svelte-10fem3h")},m(i,c){j(i,e,c),p(e,n),p(e,l),p(e,o)},p:T,i:T,o:T,d(i){i&&E(e)}}}class kn extends H{constructor(e){super(),F(this,e,null,bn,W,{})}}var $n="/kurosearch/assets/shironeko-x.c28cad00.png";function wn(t){let e,n,r,l,o;return{c(){e=b("div"),n=b("img"),l=N(),o=b("span"),o.textContent="You have reached the end",lt(n.src,r=$n)||u(n,"src",r),u(n,"alt","No results."),u(o,"class","svelte-1rtbqa7"),u(e,"class","svelte-1rtbqa7")},m(i,c){j(i,e,c),p(e,n),p(e,l),p(e,o)},p:T,i:T,o:T,d(i){i&&E(e)}}}class yn extends H{constructor(e){super(),F(this,e,null,wn,W,{})}}function Je(t,e,n){const r=t.slice();return r[15]=e[n],r}function Ve(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function Xe(t){let e,n;function r(){return t[10](t[20])}return e=new _n({props:{tag:t[18]}}),e.$on("click",r),{c(){D(e.$$.fragment)},m(l,o){z(e,l,o),n=!0},p(l,o){t=l;const i={};o&32&&(i.tag=t[18]),e.$set(i)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){A(e.$$.fragment,l),n=!1},d(l){B(e,l)}}}function Sn(t){let e,n;return e=new kn({}),{c(){D(e.$$.fragment)},m(r,l){z(e,r,l),n=!0},p:T,i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function En(t){let e,n=V(t[0])+"",r,l,o,i,c,s,a,f,d,h=t[1],g=[];for(let m=0;m<h.length;m+=1)g[m]=Qe(Je(t,h,m));const $=m=>A(g[m],1,1,()=>{g[m]=null}),P=[Tn,jn],C=[];function w(m,v){return m[1].length<m[4]?0:1}return s=w(t),a=C[s]=P[s](t),{c(){e=b("p"),r=U(n),l=U(" results"),o=N(),i=b("ol");for(let m=0;m<g.length;m+=1)g[m].c();c=N(),a.c(),f=he(),u(e,"class","count svelte-1822wy9"),u(i,"class","svelte-1822wy9")},m(m,v){j(m,e,v),p(e,r),p(e,l),j(m,o,v),j(m,i,v);for(let I=0;I<g.length;I+=1)g[I].m(i,null);j(m,c,v),C[s].m(m,v),j(m,f,v),d=!0},p(m,v){if((!d||v&1)&&n!==(n=V(m[0])+"")&&Z(r,n),v&66){h=m[1];let k;for(k=0;k<h.length;k+=1){const x=Je(m,h,k);g[k]?(g[k].p(x,v),S(g[k],1)):(g[k]=Qe(x),g[k].c(),S(g[k],1),g[k].m(i,null))}for(G(),k=h.length;k<g.length;k+=1)$(k);K()}let I=s;s=w(m),s===I?C[s].p(m,v):(G(),A(C[I],1,1,()=>{C[I]=null}),K(),a=C[s],a?a.p(m,v):(a=C[s]=P[s](m),a.c()),S(a,1),a.m(f.parentNode,f))},i(m){if(!d){for(let v=0;v<h.length;v+=1)S(g[v]);S(a),d=!0}},o(m){g=g.filter(Boolean);for(let v=0;v<g.length;v+=1)A(g[v]);A(a),d=!1},d(m){m&&E(e),m&&E(o),m&&E(i),_e(g,m),m&&E(c),C[s].d(m),m&&E(f)}}}function Qe(t){let e,n;return e=new Yt({props:{posts:t[15],observer:t[6]}}),{c(){D(e.$$.fragment)},m(r,l){z(e,r,l),n=!0},p(r,l){const o={};l&2&&(o.posts=r[15]),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function jn(t){let e,n;return e=new yn({}),{c(){D(e.$$.fragment)},m(r,l){z(e,r,l),n=!0},p:T,i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Tn(t){let e,n;return e=new pn({}),e.$on("visible",t[12]),{c(){D(e.$$.fragment)},m(r,l){z(e,r,l),n=!0},p:T,i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Pn(t){let e,n,r,l,o,i,c,s,a,f,d,h,g,$,P,C,w,m,v;r=new fn({}),r.$on("pick",t[9]);let I=[...t[5]],k=[];for(let y=0;y<I.length;y+=1)k[y]=Xe(Ve(t,I,y));const x=y=>A(k[y],1,1,()=>{k[y]=null});h=new Zt({props:{title:"Click to search with active tags",icon:"search",text:"Search"}}),h.$on("click",t[7]);const L=[En,Sn],M=[];function R(y,O){return y[0]?0:y[0]===0?1:-1}return~($=R(t))&&(P=M[$]=L[$](t)),{c(){e=b("h1"),e.textContent="kurosearch",n=N(),D(r.$$.fragment),l=N(),o=b("ul");for(let y=0;y<k.length;y+=1)k[y].c();i=N(),c=b("div"),s=b("select"),a=b("option"),a.textContent="New",f=b("option"),f.textContent="Popular",d=N(),D(h.$$.fragment),g=N(),P&&P.c(),C=he(),u(e,"class","svelte-1822wy9"),u(o,"class","svelte-1822wy9"),a.__value="id",a.value=a.__value,f.__value="score",f.value=f.__value,u(s,"class","svelte-1822wy9"),t[2]===void 0&&ge(()=>t[11].call(s)),u(c,"class","sort-row svelte-1822wy9")},m(y,O){j(y,e,O),j(y,n,O),z(r,y,O),j(y,l,O),j(y,o,O);for(let X=0;X<k.length;X+=1)k[X].m(o,null);j(y,i,O),j(y,c,O),p(c,s),p(s,a),p(s,f),we(s,t[2]),p(c,d),z(h,c,null),j(y,g,O),~$&&M[$].m(y,O),j(y,C,O),w=!0,m||(v=Y(s,"change",t[11]),m=!0)},p(y,[O]){if(O&32){I=[...y[5]];let q;for(q=0;q<I.length;q+=1){const Ne=Ve(y,I,q);k[q]?(k[q].p(Ne,O),S(k[q],1)):(k[q]=Xe(Ne),k[q].c(),S(k[q],1),k[q].m(o,null))}for(G(),q=I.length;q<k.length;q+=1)x(q);K()}O&4&&we(s,y[2]);let X=$;$=R(y),$===X?~$&&M[$].p(y,O):(P&&(G(),A(M[X],1,1,()=>{M[X]=null}),K()),~$?(P=M[$],P?P.p(y,O):(P=M[$]=L[$](y),P.c()),S(P,1),P.m(C.parentNode,C)):P=null)},i(y){if(!w){S(r.$$.fragment,y);for(let O=0;O<I.length;O+=1)S(k[O]);S(h.$$.fragment,y),S(P),w=!0}},o(y){A(r.$$.fragment,y),k=k.filter(Boolean);for(let O=0;O<k.length;O+=1)A(k[O]);A(h.$$.fragment,y),A(P),w=!1},d(y){y&&E(e),y&&E(n),B(r,y),y&&E(l),y&&E(o),_e(k,y),y&&E(i),y&&E(c),B(h),y&&E(g),~$&&M[$].d(y),y&&E(C),m=!1,v()}}}const xe=20;function An(t,e,n){let r,l;ue(t,le,w=>n(5,l=w));const o=new IntersectionObserver(w=>{for(const m of w)m.target.src=m.isIntersecting?m.target.getAttribute("data-src"):""},{rootMargin:"1250px"});let i,c=[],s="id",a=null,f=0;function d(){n(1,c=[]),n(0,a=null),i!==void 0&&i.abort("New search triggered"),n(3,f=0),i=new AbortController,h(n(3,f++,f))}async function h(w){const m=[...l.map(k=>k.name),`sort:${s}:desc`].filter(k=>k!=null&&k!=="").map(encodeURIComponent).join("+"),v=await fetch(`https://r34-json.herokuapp.com/v2/posts?limit=${xe}&pid=${w}&tags=${m}`,{signal:i.signal}),I=await v.json();if(v.ok)return n(0,a=I.count),n(1,c=[...c,I.posts]),I;throw new Error("fuck")}const g=w=>le.add(w.detail),$=w=>le.removeByIndex(w);function P(){s=it(this),n(2,s)}const C=()=>h(n(3,f++,f));return t.$$.update=()=>{t.$$.dirty&1&&n(4,r=a/xe)},[a,c,s,f,r,l,o,d,h,g,$,P,C]}class Cn extends H{constructor(e){super(),F(this,e,An,Pn,W,{})}}const Ce=Le("dark");function In(t){let e,n,r,l,o;return{c(){e=b("select"),n=b("option"),n.textContent="Dark",r=b("option"),r.textContent="Light",n.__value="dark",n.value=n.__value,r.__value="light",r.value=r.__value,t[0]===void 0&&ge(()=>t[1].call(e))},m(i,c){j(i,e,c),p(e,n),p(e,r),we(e,t[0]),l||(o=Y(e,"change",t[1]),l=!0)},p(i,[c]){c&1&&we(e,i[0])},i:T,o:T,d(i){i&&E(e),l=!1,o()}}}function Ln(t,e,n){let r;ue(t,Ce,o=>n(0,r=o));function l(){r=it(this),Ce.set(r)}return[r,l]}class Nn extends H{constructor(e){super(),F(this,e,Ln,In,W,{})}}function Mn(t){let e;return{c(){e=b("p"),e.textContent="You got lost..."},m(n,r){j(n,e,r)},i:T,o:T,d(n){n&&E(e)}}}function On(t){let e,n;return e=new Nn({}),{c(){D(e.$$.fragment)},m(r,l){z(e,r,l),n=!0},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Rn(t){let e;return{c(){e=b("p"),e.textContent="account"},m(n,r){j(n,e,r)},i:T,o:T,d(n){n&&E(e)}}}function zn(t){let e,n;return e=new Cn({}),{c(){D(e.$$.fragment)},m(r,l){z(e,r,l),n=!0},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Bn(t){let e,n,r,l,o,i;e=new Et({});const c=[zn,Rn,On,Mn],s=[];function a(f,d){return f[0]==="search"?0:f[0]==="account"?1:f[0]==="settings"?2:3}return l=a(t),o=s[l]=c[l](t),{c(){D(e.$$.fragment),n=N(),r=b("main"),o.c(),u(r,"class","svelte-a5xxz8")},m(f,d){z(e,f,d),j(f,n,d),j(f,r,d),s[l].m(r,null),i=!0},p(f,[d]){let h=l;l=a(f),l!==h&&(G(),A(s[h],1,1,()=>{s[h]=null}),K(),o=s[l],o||(o=s[l]=c[l](f),o.c()),S(o,1),o.m(r,null))},i(f){i||(S(e.$$.fragment,f),S(o),i=!0)},o(f){A(e.$$.fragment,f),A(o),i=!1},d(f){B(e,f),f&&E(n),f&&E(r),s[l].d()}}}function Wn(t,e,n){let r,l;ue(t,Ce,i=>n(1,r=i)),ue(t,st,i=>n(0,l=i));const o=i=>i==="dark"?"light":"dark";return t.$$.update=()=>{t.$$.dirty&2&&document.body.classList.replace(o(r),r)},[l,r]}class Dn extends H{constructor(e){super(),F(this,e,Wn,Bn,W,{})}}try{self["workbox:window:6.5.2"]&&_()}catch{}function et(t,e){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(l){n(l.data)},t.postMessage(e,[r.port2])})}function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hn(t,e){var n;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=function(l,o){if(l){if(typeof l=="string")return tt(l,o);var i=Object.prototype.toString.call(l).slice(8,-1);return i==="Object"&&l.constructor&&(i=l.constructor.name),i==="Map"||i==="Set"?Array.from(l):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?tt(l,o):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=t[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.2"]&&_()}catch{}var Ee=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function je(t,e){var n=location.href;return new URL(t,n).href===new URL(e,n).href}var ce=function(t,e){this.type=t,Object.assign(this,e)};function ve(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function Un(){}var qn={type:"SKIP_WAITING"};function nt(t,e){if(!e)return t&&t.then?t.then(Un):Promise.resolve()}var Yn=function(t){var e,n;function r(c,s){var a,f;return s===void 0&&(s={}),(a=t.call(this)||this).nn={},a.tn=0,a.rn=new Ee,a.en=new Ee,a.on=new Ee,a.un=0,a.an=new Set,a.cn=function(){var d=a.fn,h=d.installing;a.tn>0||!je(h.scriptURL,a.sn.toString())||performance.now()>a.un+6e4?(a.vn=h,d.removeEventListener("updatefound",a.cn)):(a.hn=h,a.an.add(h),a.rn.resolve(h)),++a.tn,h.addEventListener("statechange",a.ln)},a.ln=function(d){var h=a.fn,g=d.target,$=g.state,P=g===a.vn,C={sw:g,isExternal:P,originalEvent:d};!P&&a.mn&&(C.isUpdate=!0),a.dispatchEvent(new ce($,C)),$==="installed"?a.wn=self.setTimeout(function(){$==="installed"&&h.waiting===g&&a.dispatchEvent(new ce("waiting",C))},200):$==="activating"&&(clearTimeout(a.wn),P||a.en.resolve(g))},a.dn=function(d){var h=a.hn,g=h!==navigator.serviceWorker.controller;a.dispatchEvent(new ce("controlling",{isExternal:g,originalEvent:d,sw:h,isUpdate:a.mn})),g||a.on.resolve(h)},a.gn=(f=function(d){var h=d.data,g=d.ports,$=d.source;return ve(a.getSW(),function(){a.an.has($)&&a.dispatchEvent(new ce("message",{data:h,originalEvent:d,ports:g,sw:$}))})},function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];try{return Promise.resolve(f.apply(this,d))}catch(g){return Promise.reject(g)}}),a.sn=c,a.nn=s,navigator.serviceWorker.addEventListener("message",a.gn),a}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var l,o,i=r.prototype;return i.register=function(c){var s=(c===void 0?{}:c).immediate,a=s!==void 0&&s;try{var f=this;return function(d,h){var g=d();return g&&g.then?g.then(h):h(g)}(function(){if(!a&&document.readyState!=="complete")return nt(new Promise(function(d){return window.addEventListener("load",d)}))},function(){return f.mn=Boolean(navigator.serviceWorker.controller),f.yn=f.pn(),ve(f.bn(),function(d){f.fn=d,f.yn&&(f.hn=f.yn,f.en.resolve(f.yn),f.on.resolve(f.yn),f.yn.addEventListener("statechange",f.ln,{once:!0}));var h=f.fn.waiting;return h&&je(h.scriptURL,f.sn.toString())&&(f.hn=h,Promise.resolve().then(function(){f.dispatchEvent(new ce("waiting",{sw:h,wasWaitingBeforeRegister:!0}))}).then(function(){})),f.hn&&(f.rn.resolve(f.hn),f.an.add(f.hn)),f.fn.addEventListener("updatefound",f.cn),navigator.serviceWorker.addEventListener("controllerchange",f.dn),f.fn})})}catch(d){return Promise.reject(d)}},i.update=function(){try{return this.fn?nt(this.fn.update()):void 0}catch(c){return Promise.reject(c)}},i.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},i.messageSW=function(c){try{return ve(this.getSW(),function(s){return et(s,c)})}catch(s){return Promise.reject(s)}},i.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&et(this.fn.waiting,qn)},i.pn=function(){var c=navigator.serviceWorker.controller;return c&&je(c.scriptURL,this.sn.toString())?c:void 0},i.bn=function(){try{var c=this;return function(s,a){try{var f=s()}catch(d){return a(d)}return f&&f.then?f.then(void 0,a):f}(function(){return ve(navigator.serviceWorker.register(c.sn,c.nn),function(s){return c.un=performance.now(),s})},function(s){throw s})}catch(s){return Promise.reject(s)}},l=r,(o=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&Fn(l.prototype,o),r}(function(){function t(){this.Pn=new Map}var e=t.prototype;return e.addEventListener=function(n,r){this.Sn(n).add(r)},e.removeEventListener=function(n,r){this.Sn(n).delete(r)},e.dispatchEvent=function(n){n.target=this;for(var r,l=Hn(this.Sn(n.type));!(r=l()).done;)(0,r.value)(n)},e.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},t}());function Gn(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:l,onRegisterError:o}=t;let i;const c=async(s=!0)=>{};return"serviceWorker"in navigator&&(i=new Yn("/kurosearch/sw.js",{scope:"/kurosearch/",type:"classic"}),i.addEventListener("activated",s=>{s.isUpdate?window.location.reload():r==null||r()}),i.register({immediate:e}).then(s=>{l==null||l(s)}).catch(s=>{o==null||o(s)})),c}new Dn({target:document.getElementById("app")});Gn();
