const pt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}};pt();function y(){}function mt(t){return t&&typeof t=="object"&&typeof t.then=="function"}function ft(t){return t()}function qe(){return Object.create(null)}function V(t){t.forEach(ft)}function dt(t){return typeof t=="function"}function D(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ke;function gt(t,e){return ke||(ke=document.createElement("a")),ke.href=e,t===ke.href}function vt(t){return Object.keys(t).length===0}function bt(t,...e){if(t==null)return y;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function le(t,e,n){t.$$.on_destroy.push(bt(e,n))}function te(t){return t==null?"":t}function Oe(t,e,n){return t.set(n),e}function p(t,e){t.appendChild(e)}function T(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode.removeChild(t)}function be(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function ie(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t){return document.createTextNode(t)}function O(){return Y(" ")}function Te(){return Y("")}function q(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function kt(t){return Array.from(t.childNodes)}function Q(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Fe(t,e){t.value=e==null?"":e}function ce(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function Le(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function J(t,e,n){t.classList[n?"add":"remove"](e)}function wt(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,r,e),l}let ve;function X(t){ve=t}function _t(){if(!ve)throw new Error("Function called outside component initialization");return ve}function he(){const t=_t();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const s=wt(e,n,{cancelable:r});return l.slice().forEach(i=>{i.call(t,s)}),!s.defaultPrevented}return!0}}const me=[],ae=[],$e=[],He=[],yt=Promise.resolve();let ze=!1;function $t(){ze||(ze=!0,yt.then(Be))}function de(t){$e.push(t)}const Ie=new Set;let we=0;function Be(){const t=ve;do{for(;we<me.length;){const e=me[we];we++,X(e),St(e.$$)}for(X(null),me.length=0,we=0;ae.length;)ae.pop()();for(let e=0;e<$e.length;e+=1){const n=$e[e];Ie.has(n)||(Ie.add(n),n())}$e.length=0}while(me.length);for(;He.length;)He.pop()();ze=!1,Ie.clear(),X(t)}function St(t){if(t.fragment!==null){t.update(),V(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(de)}}const Se=new Set;let re;function K(){re={r:0,c:[],p:re}}function Z(){re.r||V(re.c),re=re.p}function w(t,e){t&&t.i&&(Se.delete(t),t.i(e))}function E(t,e,n,r){if(t&&t.o){if(Se.has(t))return;Se.add(t),re.c.push(()=>{Se.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function Ue(t,e){const n=e.token={};function r(l,s,i,c){if(e.token!==n)return;e.resolved=c;let o=e.ctx;i!==void 0&&(o=o.slice(),o[i]=c);const a=l&&(e.current=l)(o);let u=!1;e.block&&(e.blocks?e.blocks.forEach((d,g)=>{g!==s&&d&&(K(),E(d,1,1,()=>{e.blocks[g]===d&&(e.blocks[g]=null)}),Z())}):e.block.d(1),a.c(),w(a,1),a.m(e.mount(),e.anchor),u=!0),e.block=a,e.blocks&&(e.blocks[s]=a),u&&Be()}if(mt(t)){const l=_t();if(t.then(s=>{X(l),r(e.then,1,e.value,s),X(null)},s=>{if(X(l),r(e.catch,2,e.error,s),X(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function Et(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function F(t){t&&t.c()}function R(t,e,n,r){const{fragment:l,on_mount:s,on_destroy:i,after_update:c}=t.$$;l&&l.m(e,n),r||de(()=>{const o=s.map(ft).filter(dt);i?i.push(...o):V(o),t.$$.on_mount=[]}),c.forEach(de)}function B(t,e){const n=t.$$;n.fragment!==null&&(V(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Tt(t,e){t.$$.dirty[0]===-1&&(me.push(t),$t(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(t,e,n,r,l,s,i,c=[-1]){const o=ve;X(t);const a=t.$$={fragment:null,ctx:null,props:s,update:y,not_equal:l,bound:qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:qe(),dirty:c,skip_bound:!1,root:e.target||o.$$.root};i&&i(a.root);let u=!1;if(a.ctx=n?n(t,e.props||{},(d,g,...m)=>{const A=m.length?m[0]:g;return a.ctx&&l(a.ctx[d],a.ctx[d]=A)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](A),u&&Tt(t,d)),g}):[],a.update(),u=!0,V(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const d=kt(e.target);a.fragment&&a.fragment.l(d),d.forEach(S)}else a.fragment&&a.fragment.c();e.intro&&w(t.$$.fragment),R(t,e.target,e.anchor,e.customElement),Be()}X(o)}class U{$destroy(){B(this,1),this.$destroy=y}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!vt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const oe=[];function De(t,e=y){let n;const r=new Set;function l(c){if(D(t,c)&&(t=c,n)){const o=!oe.length;for(const a of r)a[1](),oe.push(a,t);if(o){for(let a=0;a<oe.length;a+=2)oe[a][0](oe[a+1]);oe.length=0}}}function s(c){l(c(t))}function i(c,o=y){const a=[c,o];return r.add(a),r.size===1&&(n=e(l)||y),c(t),()=>{r.delete(a),r.size===0&&(n(),n=null)}}return{set:l,update:s,subscribe:i}}const ue=De("search");function Ct(t){let e,n,r,l,s,i;return{c(){e=ie("svg"),n=ie("g"),r=ie("path"),l=ie("defs"),s=ie("clipPath"),i=ie("path"),f(r,"d","M60.105 4.898A58.55 58.55 0 0045.653.415a.22.22 0 00-.233.11 40.784 40.784 0 00-1.8 3.697c-5.456-.817-10.886-.817-16.23 0-.485-1.164-1.201-2.587-1.828-3.697a.228.228 0 00-.233-.11 58.386 58.386 0 00-14.451 4.483.207.207 0 00-.095.082C1.578 18.73-.944 32.144.293 45.39a.244.244 0 00.093.167c6.073 4.46 11.955 7.167 17.729 8.962a.23.23 0 00.249-.082 42.08 42.08 0 003.627-5.9.225.225 0 00-.123-.312 38.772 38.772 0 01-5.539-2.64.228.228 0 01-.022-.378c.372-.279.744-.569 1.1-.862a.22.22 0 01.23-.03c11.619 5.304 24.198 5.304 35.68 0a.219.219 0 01.233.027c.356.293.728.586 1.103.865a.228.228 0 01-.02.378 36.384 36.384 0 01-5.54 2.637.227.227 0 00-.121.315 47.249 47.249 0 003.624 5.897.225.225 0 00.249.084c5.801-1.794 11.684-4.502 17.757-8.961a.228.228 0 00.092-.164c1.48-15.315-2.48-28.618-10.497-40.412a.18.18 0 00-.093-.084zm-36.38 32.427c-3.497 0-6.38-3.211-6.38-7.156 0-3.944 2.827-7.156 6.38-7.156 3.583 0 6.438 3.24 6.382 7.156 0 3.945-2.827 7.156-6.381 7.156zm23.593 0c-3.498 0-6.38-3.211-6.38-7.156 0-3.944 2.826-7.156 6.38-7.156 3.582 0 6.437 3.24 6.38 7.156 0 3.945-2.798 7.156-6.38 7.156z"),f(r,"fill","currentcolor"),f(n,"clip-path","url(#prefix__clip0)"),f(i,"fill","currentcolor"),f(i,"d","M0 0h71v55H0z"),f(s,"id","prefix__clip0"),f(e,"width","16"),f(e,"height","16"),f(e,"viewBox","0 0 71 55"),f(e,"xmlns","http://www.w3.org/2000/svg")},m(c,o){T(c,e,o),p(e,n),p(n,r),p(e,l),p(l,s),p(s,i)},p:y,i:y,o:y,d(c){c&&S(e)}}}class It extends U{constructor(e){super(),H(this,e,null,Ct,D,{})}}function Pt(t){let e,n,r,l,s,i,c,o,a,u,d,g,m,A,C,P,$,h;return o=new It({}),{c(){e=b("header"),n=b("div"),r=b("a"),r.innerHTML='<i class="codicon codicon-github"></i>',l=O(),s=b("a"),s.innerHTML='<i class="codicon codicon-heart"></i>',i=O(),c=b("a"),F(o.$$.fragment),a=O(),u=b("nav"),d=b("button"),d.innerHTML='<i class="codicon codicon-search"></i>',g=O(),m=b("button"),m.innerHTML='<i class="codicon codicon-settings-gear"></i>',A=O(),C=b("button"),C.innerHTML='<i class="codicon codicon-account"></i>',f(r,"title","Source Code"),f(r,"href","https://github.com/kurozenzen/kurosearch"),f(r,"target","_newtab"),f(r,"class","svelte-sebnml"),f(s,"title","Sponsor"),f(s,"href","https://ko-fi.com/kurozenzen"),f(s,"target","_newtab"),f(s,"class","svelte-sebnml"),f(c,"title","Discord Server"),f(c,"href","https://discord.gg/yyJFG5PVBZ"),f(c,"target","_newtab"),f(c,"class","svelte-sebnml"),f(n,"class","svelte-sebnml"),f(d,"title","Search"),f(d,"class","svelte-sebnml"),f(m,"title","Settings"),f(m,"class","svelte-sebnml"),f(C,"title","Account"),f(C,"class","svelte-sebnml"),f(u,"class","svelte-sebnml"),f(e,"role","navigation"),f(e,"class","svelte-sebnml")},m(v,L){T(v,e,L),p(e,n),p(n,r),p(n,l),p(n,s),p(n,i),p(n,c),R(o,c,null),p(e,a),p(e,u),p(u,d),p(u,g),p(u,m),p(u,A),p(u,C),P=!0,$||(h=[q(d,"click",t[0]("search")),q(m,"click",t[0]("settings")),q(C,"click",t[0]("account"))],$=!0)},p:y,i(v){P||(w(o.$$.fragment,v),P=!0)},o(v){E(o.$$.fragment,v),P=!1},d(v){v&&S(e),B(o),$=!1,V(h)}}}function At(t,e,n){let r;return le(t,ue,s=>n(1,r=s)),[s=>()=>{Oe(ue,r=s,r)}]}class jt extends U{constructor(e){super(),H(this,e,At,Pt,D,{})}}const Ot=new IntersectionObserver(t=>{for(const e of t){if(e.target.src===void 0){console.warn("PostObserver is observing an invalid element",e.target);continue}e.target.src=e.isIntersecting?e.target.getAttribute("data-src"):""}},{rootMargin:"1250px"}),ge=t=>t/1e6>=1?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString();function se(t,e){const n=t.toFixed();return`${n} ${e}${n==="1"?"":"s"} ago`}function Ye(t){const e=new Date(t),n=new Date,r=n.getFullYear()-e.getFullYear();if(r)return se(r,"year");const l=n.getMonth()-e.getMonth();if(l)return se(l,"month");const s=(n.getTime()-e.getTime())/6e4;if(s===0)return"just now";if(s<60)return se(s,"minute");const i=s/60;if(i<24)return se(i,"hour");const c=i/24;if(c<7)return se(c,"day");const o=c/7;return o<5?se(o,"week"):"rip"}function _e(t){return t.replace(/_/g," ").replace(/source:/g,"").replace(/rating:/g,"")}function Me(t){for(const e of t)if(e!=="ambiguous"&&e!=="general")return e;return null}function Lt(){const t=[],{subscribe:e,update:n}=De(t);return{subscribe:e,add:r=>n(l=>{const s=l.findIndex(i=>i.tag.name===r.tag.name);return s===-1?l.push(r):l[s]=r,l}),addByName:r=>n(l=>(l.push({modifier:"+",tag:{name:r,count:0,types:[]}}),l)),removeByIndex:r=>n(l=>(l.splice(r,1),l))}}var fe=Lt();function zt(t){let e,n=_e(t[0])+"",r,l,s;return{c(){e=b("li"),r=Y(n),f(e,"tabindex","0"),f(e,"title","Click to add tag"),f(e,"class","svelte-1r7mf3i"),J(e,"active",t[2])},m(i,c){T(i,e,c),p(e,r),l||(s=q(e,"click",t[4]),l=!0)},p(i,[c]){c&1&&n!==(n=_e(i[0])+"")&&Q(r,n),c&4&&J(e,"active",i[2])},i:y,o:y,d(i){i&&S(e),l=!1,s()}}}function Mt(t,e,n){let r,l,s;le(t,fe,o=>n(3,s=o));let{name:i}=e;const c=()=>l?fe.removeByIndex(r):fe.addByName(i);return t.$$set=o=>{"name"in o&&n(0,i=o.name)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=s.findIndex(o=>o.tag.name===i)),t.$$.dirty&2&&n(2,l=r>=0)},[i,r,l,s,c]}class Nt extends U{constructor(e){super(),H(this,e,Mt,zt,D,{name:0})}}function Rt(t){let e,n,r,l=t[0].hostname+"",s,i;return{c(){e=b("i"),n=O(),r=b("a"),s=Y(l),f(e,"class","codicon codicon-link"),f(r,"href",i=t[0].toString()),f(r,"target","_newtab"),f(r,"class","svelte-1qmyyls")},m(c,o){T(c,e,o),T(c,n,o),T(c,r,o),p(r,s)},p:y,d(c){c&&S(e),c&&S(n),c&&S(r)}}}function Bt(t){let e,n=t[0]&&Rt(t);return{c(){n&&n.c(),e=Te()},m(r,l){n&&n.m(r,l),T(r,e,l)},p(r,[l]){r[0]&&n.p(r,l)},i:y,o:y,d(r){n&&n.d(r),r&&S(e)}}}function Dt(t,e,n){let{source:r}=e,l=new URL(r);return t.$$set=s=>{"source"in s&&n(1,r=s.source)},[l,r]}class Wt extends U{constructor(e){super(),H(this,e,Dt,Bt,D,{source:1})}}function Ge(t,e,n){const r=t.slice();return r[1]=e[n],r}function Ke(t){let e,n,r;return n=new Wt({props:{source:t[0].source}}),{c(){e=b("div"),F(n.$$.fragment),f(e,"class","svelte-5x11c6")},m(l,s){T(l,e,s),R(n,e,null),r=!0},p(l,s){const i={};s&1&&(i.source=l[0].source),n.$set(i)},i(l){r||(w(n.$$.fragment,l),r=!0)},o(l){E(n.$$.fragment,l),r=!1},d(l){l&&S(e),B(n)}}}function Ze(t){let e,n;return e=new Nt({props:{name:t[1]}}),{c(){F(e.$$.fragment)},m(r,l){R(e,r,l),n=!0},p(r,l){const s={};l&1&&(s.name=r[1]),e.$set(s)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function qt(t){let e,n,r,l,s,i=Ye(t[0].created_at)+"",c,o,a,u,d,g,m=ge(t[0].score)+"",A,C,P,$,h,v=t[0].source&&Ke(t),L=t[0].tags,k=[];for(let I=0;I<L.length;I+=1)k[I]=Ze(Ge(t,L,I));const N=I=>E(k[I],1,1,()=>{k[I]=null});return{c(){e=b("div"),n=b("div"),r=b("i"),l=O(),s=b("span"),c=Y(i),o=O(),a=b("div"),u=b("i"),d=O(),g=b("span"),A=Y(m),C=O(),v&&v.c(),P=O(),$=b("ul");for(let I=0;I<k.length;I+=1)k[I].c();f(r,"class","codicon codicon-calendar"),f(s,"class","svelte-5x11c6"),f(n,"class","svelte-5x11c6"),f(u,"class","codicon codicon-heart"),f(g,"class","svelte-5x11c6"),f(a,"class","svelte-5x11c6"),f(e,"class","summary svelte-5x11c6"),f($,"class","svelte-5x11c6")},m(I,j){T(I,e,j),p(e,n),p(n,r),p(n,l),p(n,s),p(s,c),p(e,o),p(e,a),p(a,u),p(a,d),p(a,g),p(g,A),p(e,C),v&&v.m(e,null),T(I,P,j),T(I,$,j);for(let M=0;M<k.length;M+=1)k[M].m($,null);h=!0},p(I,[j]){if((!h||j&1)&&i!==(i=Ye(I[0].created_at)+"")&&Q(c,i),(!h||j&1)&&m!==(m=ge(I[0].score)+"")&&Q(A,m),I[0].source?v?(v.p(I,j),j&1&&w(v,1)):(v=Ke(I),v.c(),w(v,1),v.m(e,null)):v&&(K(),E(v,1,1,()=>{v=null}),Z()),j&1){L=I[0].tags;let M;for(M=0;M<L.length;M+=1){const ne=Ge(I,L,M);k[M]?(k[M].p(ne,j),w(k[M],1)):(k[M]=Ze(ne),k[M].c(),w(k[M],1),k[M].m($,null))}for(K(),M=L.length;M<k.length;M+=1)N(M);Z()}},i(I){if(!h){w(v);for(let j=0;j<L.length;j+=1)w(k[j]);h=!0}},o(I){E(v),k=k.filter(Boolean);for(let j=0;j<k.length;j+=1)E(k[j]);h=!1},d(I){I&&S(e),v&&v.d(),I&&S(P),I&&S($),be(k,I)}}}function Ft(t,e,n){let{post:r}=e;return t.$$set=l=>{"post"in l&&n(0,r=l.post)},[r]}class Ht extends U{constructor(e){super(),H(this,e,Ft,qt,D,{post:0})}}function Ut(t){let e,n,r,l,s,i;return{c(){e=b("img"),f(e,"loading","lazy"),f(e,"data-src",n=t[0].sample_url),f(e,"alt",r=t[0].id.toString()),f(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),f(e,"width",s=t[0].width),f(e,"height",i=t[0].height),f(e,"class","svelte-1xnjrgd")},m(c,o){T(c,e,o),t[5](e)},p(c,o){o&1&&n!==(n=c[0].sample_url)&&f(e,"data-src",n),o&1&&r!==(r=c[0].id.toString())&&f(e,"alt",r),o&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&f(e,"style",l),o&1&&s!==(s=c[0].width)&&f(e,"width",s),o&1&&i!==(i=c[0].height)&&f(e,"height",i)},d(c){c&&S(e),t[5](null)}}}function Yt(t){let e,n,r,l,s,i;return{c(){e=b("video"),f(e,"preload","metadata"),f(e,"loading","lazy"),f(e,"data-src",n=t[0].sample_url),f(e,"alt",r=t[0].id.toString()),f(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),f(e,"width",s=t[0].width),f(e,"height",i=t[0].height),e.controls=!0,f(e,"class","svelte-1xnjrgd")},m(c,o){T(c,e,o),t[4](e)},p(c,o){o&1&&n!==(n=c[0].sample_url)&&f(e,"data-src",n),o&1&&r!==(r=c[0].id.toString())&&f(e,"alt",r),o&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&f(e,"style",l),o&1&&s!==(s=c[0].width)&&f(e,"width",s),o&1&&i!==(i=c[0].height)&&f(e,"height",i)},d(c){c&&S(e),t[4](null)}}}function Gt(t){let e,n,r,l,s,i;return{c(){e=b("img"),f(e,"loading","lazy"),f(e,"data-src",n=t[0].sample_url),f(e,"alt",r=t[0].id.toString()),f(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),f(e,"width",s=t[0].width),f(e,"height",i=t[0].height),f(e,"class","svelte-1xnjrgd")},m(c,o){T(c,e,o),t[3](e)},p(c,o){o&1&&n!==(n=c[0].sample_url)&&f(e,"data-src",n),o&1&&r!==(r=c[0].id.toString())&&f(e,"alt",r),o&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&f(e,"style",l),o&1&&s!==(s=c[0].width)&&f(e,"width",s),o&1&&i!==(i=c[0].height)&&f(e,"height",i)},d(c){c&&S(e),t[3](null)}}}function Je(t){let e,n;return e=new Ht({props:{post:t[0]}}),{c(){F(e.$$.fragment)},m(r,l){R(e,r,l),n=!0},p(r,l){const s={};l&1&&(s.post=r[0]),e.$set(s)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Kt(t){let e,n,r,l,s,i;function c(d,g){return d[0].type==="image"?Gt:d[0].type==="video"?Yt:Ut}let o=c(t),a=o(t),u=t[2]&&Je(t);return{c(){e=b("div"),n=b("div"),a.c(),r=O(),u&&u.c(),f(n,"class","content"),f(e,"class","post svelte-1xnjrgd"),f(e,"tabindex","0")},m(d,g){T(d,e,g),p(e,n),a.m(n,null),p(e,r),u&&u.m(e,null),l=!0,s||(i=q(n,"click",t[6]),s=!0)},p(d,[g]){o===(o=c(d))&&a?a.p(d,g):(a.d(1),a=o(d),a&&(a.c(),a.m(n,null))),d[2]?u?(u.p(d,g),g&4&&w(u,1)):(u=Je(d),u.c(),w(u,1),u.m(e,null)):u&&(K(),E(u,1,1,()=>{u=null}),Z())},i(d){l||(w(u),l=!0)},o(d){E(u),l=!1},d(d){d&&S(e),a.d(),u&&u.d(),s=!1,i()}}}function Zt(t,e,n){let{post:r}=e,l,s=!1;function i(u){ae[u?"unshift":"push"](()=>{l=u,n(1,l)})}function c(u){ae[u?"unshift":"push"](()=>{l=u,n(1,l)})}function o(u){ae[u?"unshift":"push"](()=>{l=u,n(1,l)})}const a=()=>{n(2,s=!s)};return t.$$set=u=>{"post"in u&&n(0,r=u.post)},t.$$.update=()=>{t.$$.dirty&2&&l&&Ot.observe(l)},[r,l,s,i,c,o,a]}class Jt extends U{constructor(e){super(),H(this,e,Zt,Kt,D,{post:0})}}function Ve(t,e,n){const r=t.slice();return r[1]=e[n],r}function Xe(t){let e,n;return e=new Jt({props:{post:t[1]}}),{c(){F(e.$$.fragment)},m(r,l){R(e,r,l),n=!0},p(r,l){const s={};l&1&&(s.post=r[1]),e.$set(s)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Vt(t){let e,n,r=t[0],l=[];for(let i=0;i<r.length;i+=1)l[i]=Xe(Ve(t,r,i));const s=i=>E(l[i],1,1,()=>{l[i]=null});return{c(){e=b("ol");for(let i=0;i<l.length;i+=1)l[i].c();f(e,"class","page svelte-5hdzo")},m(i,c){T(i,e,c);for(let o=0;o<l.length;o+=1)l[o].m(e,null);n=!0},p(i,[c]){if(c&1){r=i[0];let o;for(o=0;o<r.length;o+=1){const a=Ve(i,r,o);l[o]?(l[o].p(a,c),w(l[o],1)):(l[o]=Xe(a),l[o].c(),w(l[o],1),l[o].m(e,null))}for(K(),o=r.length;o<l.length;o+=1)s(o);Z()}},i(i){if(!n){for(let c=0;c<r.length;c+=1)w(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)E(l[c]);n=!1},d(i){i&&S(e),be(l,i)}}}function Xt(t,e,n){let{posts:r}=e;return t.$$set=l=>{"posts"in l&&n(0,r=l.posts)},[r]}class Qt extends U{constructor(e){super(),H(this,e,Xt,Vt,D,{posts:0})}}function xt(t){let e,n,r,l,s,i,c;return{c(){e=b("button"),n=b("i"),l=O(),s=Y(t[1]),f(n,"class",r=`codicon codicon-${t[0]}`),f(e,"title",t[2]),f(e,"class","svelte-11z6t3c")},m(o,a){T(o,e,a),p(e,n),p(e,l),p(e,s),i||(c=q(e,"click",t[4]),i=!0)},p(o,[a]){a&1&&r!==(r=`codicon codicon-${o[0]}`)&&f(n,"class",r),a&2&&Q(s,o[1]),a&4&&f(e,"title",o[2])},i:y,o:y,d(o){o&&S(e),i=!1,c()}}}function en(t,e,n){let{icon:r}=e,{text:l}=e,{title:s}=e;const i=he(),c=()=>i("click");return t.$$set=o=>{"icon"in o&&n(0,r=o.icon),"text"in o&&n(1,l=o.text),"title"in o&&n(2,s=o.title)},[r,l,s,i,c]}class tn extends U{constructor(e){super(),H(this,e,en,xt,D,{icon:0,text:1,title:2})}}function Ee(t){return e=>{(e.code==="Space"||e.code==="Enter")&&(e.preventDefault(),e.stopPropagation(),t())}}function nn(t){let e,n,r,l;return{c(){e=b("i"),f(e,"title",t[0]),f(e,"class",n=te(`codicon codicon-${t[1]}`)+" svelte-182enqy"),f(e,"tabindex","0"),J(e,"active",t[2])},m(s,i){T(s,e,i),r||(l=[q(e,"click",t[3]),q(e,"keydown",Ee(t[3]))],r=!0)},p(s,[i]){i&1&&f(e,"title",s[0]),i&2&&n!==(n=te(`codicon codicon-${s[1]}`)+" svelte-182enqy")&&f(e,"class",n),i&6&&J(e,"active",s[2])},i:y,o:y,d(s){s&&S(e),r=!1,V(l)}}}function rn(t,e,n){let{title:r=void 0}=e,{icon:l}=e,{active:s}=e;const i=he(),c=()=>i("click");return t.$$set=o=>{"title"in o&&n(0,r=o.title),"icon"in o&&n(1,l=o.icon),"active"in o&&n(2,s=o.active)},[r,l,s,c]}class ln extends U{constructor(e){super(),H(this,e,rn,nn,D,{title:0,icon:1,active:2})}}function on(t){let e,n;return{c(){e=b("i"),f(e,"class",n=`codicon codicon-${t[1][t[0]]}`)},m(r,l){T(r,e,l)},p(r,[l]){l&1&&n!==(n=`codicon codicon-${r[1][r[0]]}`)&&f(e,"class",n)},i:y,o:y,d(r){r&&S(e)}}}function sn(t,e,n){let{type:r}=e;const l={artist:"edit",character:"person",copyright:"folder",metadata:"info",rating:"unverified",source:"link",supertag:"star-full"};return t.$$set=s=>{"type"in s&&n(0,r=s.type)},[r,l]}class ht extends U{constructor(e){super(),H(this,e,sn,on,D,{type:0})}}const Ne=Object.freeze({"+":"plus","-":"circle-slash","~":"record"}),Qe=Object.freeze({"+":"Included. Tags will be included in the search.","-":"Blocked. Tags will be blocked.","~":"Optional. At least one of all optional tags will on each post."}),Pe=Object.freeze(Object.keys(Ne)),xe=Object.freeze({"+":"include","-":"exclude","~":"optional"});function cn(t){let e,n,r,l,s;return{c(){e=b("i"),f(e,"tabindex","0"),f(e,"class",n=te(`codicon codicon-${Ne[t[0]]}`)+" svelte-182enqy"),f(e,"title",r=Qe[t[0]])},m(i,c){T(i,e,c),l||(s=[q(e,"click",t[1]),q(e,"keydown",Ee(t[1]))],l=!0)},p(i,[c]){c&1&&n!==(n=te(`codicon codicon-${Ne[i[0]]}`)+" svelte-182enqy")&&f(e,"class",n),c&1&&r!==(r=Qe[i[0]])&&f(e,"title",r)},i:y,o:y,d(i){i&&S(e),l=!1,V(s)}}}function an(t,e,n){let r="+";const l=he();function s(){const i=(Pe.indexOf(r)+1)%Pe.length;n(0,r=Pe[i]),l("change",r)}return[r,s]}class un extends U{constructor(e){super(),H(this,e,an,cn,D,{})}}function fn(t){let e;return{c(){e=b("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 20" enable-background="new 0 0 0 0" class="svelte-166gq1d"><circle fill="currentcolor" stroke="none" cx="6" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.1"></animate></circle><circle fill="currentcolor" stroke="none" cx="25" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.2"></animate></circle><circle fill="currentcolor" stroke="none" cx="44" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.3"></animate></circle></svg>'},m(n,r){T(n,e,r)},p:y,i:y,o:y,d(n){n&&S(e)}}}class dn extends U{constructor(e){super(),H(this,e,null,fn,D,{})}}function et(t,e,n){const r=t.slice();return r[21]=e[n],r}function gn(t){var c;let e,n,r,l,s=((c=t[3])==null?void 0:c.message)+"",i;return{c(){e=b("div"),n=b("i"),r=O(),l=b("span"),i=Y(s),f(n,"class",te("codicon codicon-error")+" svelte-tfuh43"),f(e,"class","error-container svelte-tfuh43")},m(o,a){T(o,e,a),p(e,n),p(e,r),p(e,l),p(l,i)},p(o,a){var u;a&8&&s!==(s=((u=o[3])==null?void 0:u.message)+"")&&Q(i,s)},i:y,o:y,d(o){o&&S(e)}}}function _n(t){let e,n,r=t[4],l=[];for(let i=0;i<r.length;i+=1)l[i]=tt(et(t,r,i));const s=i=>E(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Te()},m(i,c){for(let o=0;o<l.length;o+=1)l[o].m(i,c);T(i,e,c),n=!0},p(i,c){if(c&605){r=i[4];let o;for(o=0;o<r.length;o+=1){const a=et(i,r,o);l[o]?(l[o].p(a,c),w(l[o],1)):(l[o]=tt(a),l[o].c(),w(l[o],1),l[o].m(e.parentNode,e))}for(K(),o=r.length;o<l.length;o+=1)s(o);Z()}},i(i){if(!n){for(let c=0;c<r.length;c+=1)w(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)E(l[c]);n=!1},d(i){be(l,i),i&&S(e)}}}function tt(t){let e,n,r,l,s=_e(t[21].name)+"",i,c,o,a,u=ge(t[21].count)+"",d,g,m,A,C;n=new ht({props:{type:Me(t[21].types)}});function P(){return t[18](t[21])}return{c(){e=b("li"),F(n.$$.fragment),r=O(),l=b("span"),i=Y(s),o=O(),a=b("span"),d=Y(u),g=O(),f(l,"title",c=t[21].name),f(l,"class","tag-name svelte-tfuh43"),f(a,"class","tag-count"),f(e,"tabindex","0"),f(e,"class","svelte-tfuh43")},m($,h){T($,e,h),R(n,e,null),p(e,r),p(e,l),p(l,i),p(e,o),p(e,a),p(a,d),p(e,g),m=!0,A||(C=q(e,"click",P),A=!0)},p($,h){t=$;const v={};h&16&&(v.type=Me(t[21].types)),n.$set(v),(!m||h&16)&&s!==(s=_e(t[21].name)+"")&&Q(i,s),(!m||h&16&&c!==(c=t[21].name))&&f(l,"title",c),(!m||h&16)&&u!==(u=ge(t[21].count)+"")&&Q(d,u)},i($){m||(w(n.$$.fragment,$),m=!0)},o($){E(n.$$.fragment,$),m=!1},d($){$&&S(e),B(n),A=!1,C()}}}function hn(t){let e,n,r;return n=new dn({}),{c(){e=b("div"),F(n.$$.fragment),f(e,"class","hint-container svelte-tfuh43")},m(l,s){T(l,e,s),R(n,e,null),r=!0},p:y,i(l){r||(w(n.$$.fragment,l),r=!0)},o(l){E(n.$$.fragment,l),r=!1},d(l){l&&S(e),B(n)}}}function pn(t){let e,n,r,l,s,i,c,o,a,u,d,g,m,A,C,P;i=new un({}),i.$on("change",t[14]),o=new ln({props:{icon:"whole-word",title:"Toggle exact search term matching",active:!t[1]}}),o.$on("click",t[15]);let $={ctx:t,current:null,token:null,hasCatch:!0,pending:hn,then:_n,catch:gn,blocks:[,,,]};return Ue(m=t[5],$),{c(){e=b("div"),n=b("i"),r=O(),l=b("input"),s=O(),F(i.$$.fragment),c=O(),F(o.$$.fragment),a=O(),u=b("i"),d=O(),g=b("ol"),$.block.c(),f(n,"class","codicon codicon-search"),f(l,"type","text"),f(l,"aria-label","Search for tags."),f(l,"class","svelte-tfuh43"),f(u,"tabindex","0"),f(u,"class",te("codicon codicon-question")+" svelte-tfuh43"),f(g,"class","svelte-tfuh43"),J(g,"open",t[7]),f(e,"class","searchbar svelte-tfuh43"),J(e,"open",t[7])},m(h,v){T(h,e,v),p(e,n),p(e,r),p(e,l),Fe(l,t[0]),p(e,s),R(i,e,null),p(e,c),R(o,e,null),p(e,a),p(e,u),p(e,d),p(e,g),$.block.m(g,$.anchor=null),$.mount=()=>g,$.anchor=null,A=!0,C||(P=[q(l,"input",t[11]),q(l,"blur",t[12]),q(l,"focus",t[13]),q(u,"click",t[16]),q(u,"keydown",function(){dt(Ee(t[17]))&&Ee(t[17]).apply(this,arguments)}),q(e,"blur",t[19])],C=!0)},p(h,[v]){t=h,v&1&&l.value!==t[0]&&Fe(l,t[0]);const L={};v&2&&(L.active=!t[1]),o.$set(L),$.ctx=t,v&32&&m!==(m=t[5])&&Ue(m,$)||Et($,t,v),v&128&&J(g,"open",t[7]),v&128&&J(e,"open",t[7])},i(h){A||(w(i.$$.fragment,h),w(o.$$.fragment,h),w($.block),A=!0)},o(h){E(i.$$.fragment,h),E(o.$$.fragment,h);for(let v=0;v<3;v+=1){const L=$.blocks[v];E(L)}A=!1},d(h){h&&S(e),B(i),B(o),$.block.d(),$.token=null,$=null,C=!1,V(P)}}}function mn(t,e,n){let r,l;le(t,ue,j=>n(8,l=j));const s=he();let i,c,o="",a=!0,u="+",d=!1,g,m=[];async function A(j,M){n(2,d=!0);const ne=j?`*${M}*`:M,W=await fetch(`https://r34-json.herokuapp.com/v2/tags?limit=20&sort=count&name=${ne.replaceAll(" ","_")}`,{signal:i.signal}),x=await W.json();if(W.ok?Array.isArray(x)?x.length==0?n(3,g=new Error("No tags found")):n(4,m=x):x.message?n(3,g=new Error(x.message)):n(3,g=new Error("Cannot display tag suggestions")):n(3,g=new Error("Failed to get tag suggestions")),g)throw g}function C(){o=this.value,n(0,o)}const P=j=>{(!j.relatedTarget||!j.target.parentNode.contains(j.relatedTarget))&&n(2,d=!1)},$=()=>{n(2,d=!0)},h=j=>{n(6,u=j.detail)},v=()=>{n(1,a=!a)},L=()=>{Oe(ue,l="help",l)},k=()=>{Oe(ue,l="help",l)},N=j=>{s("pick",{modifier:u,tag:j}),n(0,o=""),n(3,g=void 0),n(4,m=[]),n(2,d=!1)},I=()=>{n(2,d=!1)};return t.$$.update=()=>{t.$$.dirty&1027&&(n(3,g=void 0),n(4,m=[]),i!==void 0&&i.abort("Newer search term entered"),o!==""&&(n(10,i=new AbortController),n(5,c=A(a,o)))),t.$$.dirty&28&&n(7,r=d&&(g||m.length>0))},[o,a,d,g,m,c,u,r,l,s,i,C,P,$,h,v,L,k,N,I]}class vn extends U{constructor(e){super(),H(this,e,mn,pn,D,{})}}function bn(t){let e,n,r,l=_e(t[0].tag.name)+"",s,i,c,o,a;return n=new ht({props:{type:t[2]}}),{c(){e=b("li"),F(n.$$.fragment),r=O(),s=Y(l),f(e,"class",i=te(xe[t[0].modifier])+" svelte-1rbki9b"),f(e,"tabindex","0"),f(e,"title","Click to remove tag"),J(e,"no-icon",t[2]===null)},m(u,d){T(u,e,d),R(n,e,null),p(e,r),p(e,s),c=!0,o||(a=q(e,"click",t[3]),o=!0)},p(u,[d]){(!c||d&1)&&l!==(l=_e(u[0].tag.name)+"")&&Q(s,l),(!c||d&1&&i!==(i=te(xe[u[0].modifier])+" svelte-1rbki9b"))&&f(e,"class",i),d&5&&J(e,"no-icon",u[2]===null)},i(u){c||(w(n.$$.fragment,u),c=!0)},o(u){E(n.$$.fragment,u),c=!1},d(u){u&&S(e),B(n),o=!1,a()}}}function kn(t,e,n){let{modifiedTag:r}=e;const l=he(),s=Me(r.tag.types),i=()=>l("click");return t.$$set=c=>{"modifiedTag"in c&&n(0,r=c.modifiedTag)},[r,l,s,i]}class wn extends U{constructor(e){super(),H(this,e,kn,bn,D,{modifiedTag:0})}}function yn(t){let e;return{c(){e=b("div")},m(n,r){T(n,e,r),t[1](e)},p:y,i:y,o:y,d(n){n&&S(e),t[1](null)}}}function $n(t,e,n){const r=he(),l=new IntersectionObserver(c=>{c[0].isIntersecting&&(console.debug("Triggered infinite loading"),r("visible"))},{rootMargin:"1250px"});let s;function i(c){ae[c?"unshift":"push"](()=>{s=c,n(0,s)})}return t.$$.update=()=>{t.$$.dirty&1&&(l.disconnect(),s&&l.observe(s))},[s,i]}class Sn extends U{constructor(e){super(),H(this,e,$n,yn,D,{})}}var En="/kurosearch/assets/shironeko-confused.4071d5b2.png";function Tn(t){let e,n,r,l,s;return{c(){e=b("div"),n=b("img"),l=O(),s=b("span"),s.textContent="No results found",gt(n.src,r=En)||f(n,"src",r),f(n,"alt","No results."),f(s,"class","svelte-10fem3h"),f(e,"class","svelte-10fem3h")},m(i,c){T(i,e,c),p(e,n),p(e,l),p(e,s)},p:y,i:y,o:y,d(i){i&&S(e)}}}class Cn extends U{constructor(e){super(),H(this,e,null,Tn,D,{})}}var In="/kurosearch/assets/shironeko-x.c28cad00.png";function Pn(t){let e,n,r,l,s;return{c(){e=b("div"),n=b("img"),l=O(),s=b("span"),s.textContent="You have reached the end",gt(n.src,r=In)||f(n,"src",r),f(n,"alt","No results."),f(s,"class","svelte-1rtbqa7"),f(e,"class","svelte-1rtbqa7")},m(i,c){T(i,e,c),p(e,n),p(e,l),p(e,s)},p:y,i:y,o:y,d(i){i&&S(e)}}}class An extends U{constructor(e){super(),H(this,e,null,Pn,D,{})}}const jn=Object.freeze({"+":"","-":"-","~":""}),On=t=>`${jn[t.modifier]}${t.tag.name}`;function nt(t,e,n){const r=t.slice();return r[16]=e[n],r}function rt(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function lt(t){let e,n,r=[...t[6]],l=[];for(let i=0;i<r.length;i+=1)l[i]=it(rt(t,r,i));const s=i=>E(l[i],1,1,()=>{l[i]=null});return{c(){e=b("ul");for(let i=0;i<l.length;i+=1)l[i].c();f(e,"class","svelte-1vz5vln")},m(i,c){T(i,e,c);for(let o=0;o<l.length;o+=1)l[o].m(e,null);n=!0},p(i,c){if(c&64){r=[...i[6]];let o;for(o=0;o<r.length;o+=1){const a=rt(i,r,o);l[o]?(l[o].p(a,c),w(l[o],1)):(l[o]=it(a),l[o].c(),w(l[o],1),l[o].m(e,null))}for(K(),o=r.length;o<l.length;o+=1)s(o);Z()}},i(i){if(!n){for(let c=0;c<r.length;c+=1)w(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)E(l[c]);n=!1},d(i){i&&S(e),be(l,i)}}}function it(t){let e,n;function r(){return t[10](t[21])}return e=new wn({props:{modifiedTag:t[19]}}),e.$on("click",r),{c(){F(e.$$.fragment)},m(l,s){R(e,l,s),n=!0},p(l,s){t=l;const i={};s&64&&(i.modifiedTag=t[19]),e.$set(i)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){E(e.$$.fragment,l),n=!1},d(l){B(e,l)}}}function Ln(t){let e,n;return e=new Cn({}),{c(){F(e.$$.fragment)},m(r,l){R(e,r,l),n=!0},p:y,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function zn(t){let e,n=ge(t[0])+"",r,l,s,i,c,o,a,u,d,g=t[1],m=[];for(let h=0;h<g.length;h+=1)m[h]=ot(nt(t,g,h));const A=h=>E(m[h],1,1,()=>{m[h]=null}),C=[Nn,Mn],P=[];function $(h,v){return h[1].length<h[5]?0:1}return o=$(t),a=P[o]=C[o](t),{c(){e=b("p"),r=Y(n),l=Y(" results"),s=O(),i=b("ol");for(let h=0;h<m.length;h+=1)m[h].c();c=O(),a.c(),u=Te(),f(e,"class","count svelte-1vz5vln"),f(i,"class","svelte-1vz5vln")},m(h,v){T(h,e,v),p(e,r),p(e,l),T(h,s,v),T(h,i,v);for(let L=0;L<m.length;L+=1)m[L].m(i,null);T(h,c,v),P[o].m(h,v),T(h,u,v),d=!0},p(h,v){if((!d||v&1)&&n!==(n=ge(h[0])+"")&&Q(r,n),v&2){g=h[1];let k;for(k=0;k<g.length;k+=1){const N=nt(h,g,k);m[k]?(m[k].p(N,v),w(m[k],1)):(m[k]=ot(N),m[k].c(),w(m[k],1),m[k].m(i,null))}for(K(),k=g.length;k<m.length;k+=1)A(k);Z()}let L=o;o=$(h),o===L?P[o].p(h,v):(K(),E(P[L],1,1,()=>{P[L]=null}),Z(),a=P[o],a?a.p(h,v):(a=P[o]=C[o](h),a.c()),w(a,1),a.m(u.parentNode,u))},i(h){if(!d){for(let v=0;v<g.length;v+=1)w(m[v]);w(a),d=!0}},o(h){m=m.filter(Boolean);for(let v=0;v<m.length;v+=1)E(m[v]);E(a),d=!1},d(h){h&&S(e),h&&S(s),h&&S(i),be(m,h),h&&S(c),P[o].d(h),h&&S(u)}}}function ot(t){let e,n;return e=new Qt({props:{posts:t[16]}}),{c(){F(e.$$.fragment)},m(r,l){R(e,r,l),n=!0},p(r,l){const s={};l&2&&(s.posts=r[16]),e.$set(s)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Mn(t){let e,n;return e=new An({}),{c(){F(e.$$.fragment)},m(r,l){R(e,r,l),n=!0},p:y,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Nn(t){let e,n;return e=new Sn({}),e.$on("visible",t[13]),{c(){F(e.$$.fragment)},m(r,l){R(e,r,l),n=!0},p:y,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Rn(t){let e,n,r,l,s,i,c,o,a,u,d,g,m,A,C,P,$,h,v,L,k,N,I,j,M,ne;l=new vn({}),l.$on("pick",t[9]);let W=t[6].length&&lt(t);o=new tn({props:{title:"Click to search with active tags",icon:"search",text:"Search"}}),o.$on("click",t[7]);const x=[zn,Ln],ee=[];function We(z,G){return z[0]?0:z[0]===0?1:-1}return~(k=We(t))&&(N=ee[k]=x[k](t)),{c(){e=b("div"),n=b("h1"),n.textContent="kurosearch",r=O(),F(l.$$.fragment),s=O(),W&&W.c(),i=O(),c=b("div"),F(o.$$.fragment),a=O(),u=b("div"),d=b("select"),g=b("option"),g.textContent="New posts",m=b("option"),m.textContent="Popular posts",A=O(),C=b("select"),P=b("option"),P.textContent="No minimum score",$=b("option"),$.textContent="Min 10 likes",h=b("option"),h.textContent="Min 100 likes",v=b("option"),v.textContent="Min 1000 likes",L=O(),N&&N.c(),I=Te(),f(n,"class","svelte-1vz5vln"),f(c,"class","sort-row svelte-1vz5vln"),g.__value="id",g.value=g.__value,m.__value="score",m.value=m.__value,f(d,"class","svelte-1vz5vln"),t[2]===void 0&&de(()=>t[11].call(d)),P.__value="0",P.value=P.__value,$.__value="10",$.value=$.__value,h.__value="100",h.value=h.__value,v.__value="1000",v.value=v.__value,f(C,"class","svelte-1vz5vln"),t[3]===void 0&&de(()=>t[12].call(C)),f(u,"class","sort-row svelte-1vz5vln"),f(e,"class","search-config svelte-1vz5vln")},m(z,G){T(z,e,G),p(e,n),p(e,r),R(l,e,null),p(e,s),W&&W.m(e,null),p(e,i),p(e,c),R(o,c,null),p(e,a),p(e,u),p(u,d),p(d,g),p(d,m),ce(d,t[2]),p(u,A),p(u,C),p(C,P),p(C,$),p(C,h),p(C,v),ce(C,t[3]),T(z,L,G),~k&&ee[k].m(z,G),T(z,I,G),j=!0,M||(ne=[q(d,"change",t[11]),q(C,"change",t[12])],M=!0)},p(z,[G]){z[6].length?W?(W.p(z,G),G&64&&w(W,1)):(W=lt(z),W.c(),w(W,1),W.m(e,i)):W&&(K(),E(W,1,1,()=>{W=null}),Z()),G&4&&ce(d,z[2]),G&8&&ce(C,z[3]);let Ce=k;k=We(z),k===Ce?~k&&ee[k].p(z,G):(N&&(K(),E(ee[Ce],1,1,()=>{ee[Ce]=null}),Z()),~k?(N=ee[k],N?N.p(z,G):(N=ee[k]=x[k](z),N.c()),w(N,1),N.m(I.parentNode,I)):N=null)},i(z){j||(w(l.$$.fragment,z),w(W),w(o.$$.fragment,z),w(N),j=!0)},o(z){E(l.$$.fragment,z),E(W),E(o.$$.fragment,z),E(N),j=!1},d(z){z&&S(e),B(l),W&&W.d(),B(o),z&&S(L),~k&&ee[k].d(z),z&&S(I),M=!1,V(ne)}}}const st=20;function Bn(t,e,n){let r,l;le(t,fe,h=>n(6,l=h));let s,i=[],c="id",o="0",a=null,u=0;function d(){n(1,i=[]),n(0,a=null),s!==void 0&&s.abort("New search triggered"),n(4,u=0),s=new AbortController,g(n(4,u++,u))}async function g(h){const v=[...l.map(On),`sort:${c}:desc`,`score:>=${o}`].filter(N=>N!=null&&N!=="").map(encodeURIComponent).join("+"),L=await fetch(`https://r34-json.herokuapp.com/v2/posts?limit=${st}&pid=${h}&tags=${v}`,{signal:s.signal}),k=await L.json();if(L.ok)return n(0,a=k.count),n(1,i=[...i,k.posts]),k;throw new Error("fuck")}const m=h=>fe.add(h.detail),A=h=>fe.removeByIndex(h);function C(){c=Le(this),n(2,c)}function P(){o=Le(this),n(3,o)}const $=()=>g(n(4,u++,u));return t.$$.update=()=>{t.$$.dirty&1&&n(5,r=a/st)},[a,i,c,o,u,r,l,d,g,m,A,C,P,$]}class Dn extends U{constructor(e){super(),H(this,e,Bn,Rn,D,{})}}const Re=De("dark");function Wn(t){let e,n,r,l,s;return{c(){e=b("select"),n=b("option"),n.textContent="Dark",r=b("option"),r.textContent="Light",n.__value="dark",n.value=n.__value,r.__value="light",r.value=r.__value,t[0]===void 0&&de(()=>t[1].call(e))},m(i,c){T(i,e,c),p(e,n),p(e,r),ce(e,t[0]),l||(s=q(e,"change",t[1]),l=!0)},p(i,[c]){c&1&&ce(e,i[0])},i:y,o:y,d(i){i&&S(e),l=!1,s()}}}function qn(t,e,n){let r;le(t,Re,s=>n(0,r=s));function l(){r=Le(this),Re.set(r)}return[r,l]}class Fn extends U{constructor(e){super(),H(this,e,qn,Wn,D,{})}}function Hn(t){let e;return{c(){e=b("section"),e.innerHTML=`<h2>Tags</h2> 

  <p>All search functionality in this app is based on tags.</p> 

  <p>TODO: add more explanation here...</p>`,f(e,"id","tags")},m(n,r){T(n,e,r)},p:y,i:y,o:y,d(n){n&&S(e)}}}class Un extends U{constructor(e){super(),H(this,e,null,Hn,D,{})}}function Yn(t){let e;return{c(){e=b("p"),e.textContent="You got lost..."},m(n,r){T(n,e,r)},i:y,o:y,d(n){n&&S(e)}}}function Gn(t){let e,n;return e=new Un({}),{c(){F(e.$$.fragment)},m(r,l){R(e,r,l),n=!0},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Kn(t){let e,n;return e=new Fn({}),{c(){F(e.$$.fragment)},m(r,l){R(e,r,l),n=!0},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Zn(t){let e;return{c(){e=b("p"),e.textContent="account"},m(n,r){T(n,e,r)},i:y,o:y,d(n){n&&S(e)}}}function Jn(t){let e,n;return e=new Dn({}),{c(){F(e.$$.fragment)},m(r,l){R(e,r,l),n=!0},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Vn(t){let e,n,r,l,s,i;e=new jt({});const c=[Jn,Zn,Kn,Gn,Yn],o=[];function a(u,d){return u[0]==="search"?0:u[0]==="account"?1:u[0]==="settings"?2:u[0]==="help"?3:4}return l=a(t),s=o[l]=c[l](t),{c(){F(e.$$.fragment),n=O(),r=b("main"),s.c(),f(r,"class","svelte-a5xxz8")},m(u,d){R(e,u,d),T(u,n,d),T(u,r,d),o[l].m(r,null),i=!0},p(u,[d]){let g=l;l=a(u),l!==g&&(K(),E(o[g],1,1,()=>{o[g]=null}),Z(),s=o[l],s||(s=o[l]=c[l](u),s.c()),w(s,1),s.m(r,null))},i(u){i||(w(e.$$.fragment,u),w(s),i=!0)},o(u){E(e.$$.fragment,u),E(s),i=!1},d(u){B(e,u),u&&S(n),u&&S(r),o[l].d()}}}function Xn(t,e,n){let r,l;le(t,Re,i=>n(1,r=i)),le(t,ue,i=>n(0,l=i));const s=i=>i==="dark"?"light":"dark";return t.$$.update=()=>{t.$$.dirty&2&&document.body.classList.replace(s(r),r)},[l,r]}class Qn extends U{constructor(e){super(),H(this,e,Xn,Vn,D,{})}}try{self["workbox:window:6.5.2"]&&_()}catch{}function ct(t,e){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(l){n(l.data)},t.postMessage(e,[r.port2])})}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function er(t,e){var n;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=function(l,s){if(l){if(typeof l=="string")return at(l,s);var i=Object.prototype.toString.call(l).slice(8,-1);return i==="Object"&&l.constructor&&(i=l.constructor.name),i==="Map"||i==="Set"?Array.from(l):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?at(l,s):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=t[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.2"]&&_()}catch{}var Ae=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function je(t,e){var n=location.href;return new URL(t,n).href===new URL(e,n).href}var pe=function(t,e){this.type=t,Object.assign(this,e)};function ye(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function tr(){}var nr={type:"SKIP_WAITING"};function ut(t,e){if(!e)return t&&t.then?t.then(tr):Promise.resolve()}var rr=function(t){var e,n;function r(c,o){var a,u;return o===void 0&&(o={}),(a=t.call(this)||this).nn={},a.tn=0,a.rn=new Ae,a.en=new Ae,a.on=new Ae,a.un=0,a.an=new Set,a.cn=function(){var d=a.fn,g=d.installing;a.tn>0||!je(g.scriptURL,a.sn.toString())||performance.now()>a.un+6e4?(a.vn=g,d.removeEventListener("updatefound",a.cn)):(a.hn=g,a.an.add(g),a.rn.resolve(g)),++a.tn,g.addEventListener("statechange",a.ln)},a.ln=function(d){var g=a.fn,m=d.target,A=m.state,C=m===a.vn,P={sw:m,isExternal:C,originalEvent:d};!C&&a.mn&&(P.isUpdate=!0),a.dispatchEvent(new pe(A,P)),A==="installed"?a.wn=self.setTimeout(function(){A==="installed"&&g.waiting===m&&a.dispatchEvent(new pe("waiting",P))},200):A==="activating"&&(clearTimeout(a.wn),C||a.en.resolve(m))},a.dn=function(d){var g=a.hn,m=g!==navigator.serviceWorker.controller;a.dispatchEvent(new pe("controlling",{isExternal:m,originalEvent:d,sw:g,isUpdate:a.mn})),m||a.on.resolve(g)},a.gn=(u=function(d){var g=d.data,m=d.ports,A=d.source;return ye(a.getSW(),function(){a.an.has(A)&&a.dispatchEvent(new pe("message",{data:g,originalEvent:d,ports:m,sw:A}))})},function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];try{return Promise.resolve(u.apply(this,d))}catch(m){return Promise.reject(m)}}),a.sn=c,a.nn=o,navigator.serviceWorker.addEventListener("message",a.gn),a}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var l,s,i=r.prototype;return i.register=function(c){var o=(c===void 0?{}:c).immediate,a=o!==void 0&&o;try{var u=this;return function(d,g){var m=d();return m&&m.then?m.then(g):g(m)}(function(){if(!a&&document.readyState!=="complete")return ut(new Promise(function(d){return window.addEventListener("load",d)}))},function(){return u.mn=Boolean(navigator.serviceWorker.controller),u.yn=u.pn(),ye(u.bn(),function(d){u.fn=d,u.yn&&(u.hn=u.yn,u.en.resolve(u.yn),u.on.resolve(u.yn),u.yn.addEventListener("statechange",u.ln,{once:!0}));var g=u.fn.waiting;return g&&je(g.scriptURL,u.sn.toString())&&(u.hn=g,Promise.resolve().then(function(){u.dispatchEvent(new pe("waiting",{sw:g,wasWaitingBeforeRegister:!0}))}).then(function(){})),u.hn&&(u.rn.resolve(u.hn),u.an.add(u.hn)),u.fn.addEventListener("updatefound",u.cn),navigator.serviceWorker.addEventListener("controllerchange",u.dn),u.fn})})}catch(d){return Promise.reject(d)}},i.update=function(){try{return this.fn?ut(this.fn.update()):void 0}catch(c){return Promise.reject(c)}},i.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},i.messageSW=function(c){try{return ye(this.getSW(),function(o){return ct(o,c)})}catch(o){return Promise.reject(o)}},i.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&ct(this.fn.waiting,nr)},i.pn=function(){var c=navigator.serviceWorker.controller;return c&&je(c.scriptURL,this.sn.toString())?c:void 0},i.bn=function(){try{var c=this;return function(o,a){try{var u=o()}catch(d){return a(d)}return u&&u.then?u.then(void 0,a):u}(function(){return ye(navigator.serviceWorker.register(c.sn,c.nn),function(o){return c.un=performance.now(),o})},function(o){throw o})}catch(o){return Promise.reject(o)}},l=r,(s=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&xn(l.prototype,s),r}(function(){function t(){this.Pn=new Map}var e=t.prototype;return e.addEventListener=function(n,r){this.Sn(n).add(r)},e.removeEventListener=function(n,r){this.Sn(n).delete(r)},e.dispatchEvent=function(n){n.target=this;for(var r,l=er(this.Sn(n.type));!(r=l()).done;)(0,r.value)(n)},e.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},t}());function lr(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:l,onRegisterError:s}=t;let i;const c=async(o=!0)=>{};return"serviceWorker"in navigator&&(i=new rr("/kurosearch/sw.js",{scope:"/kurosearch/",type:"classic"}),i.addEventListener("activated",o=>{o.isUpdate?window.location.reload():r==null||r()}),i.register({immediate:e}).then(o=>{l==null||l(o)}).catch(o=>{s==null||s(o)})),c}new Qn({target:document.getElementById("app")});lr();
