const Ue=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}};Ue();function S(){}function Ye(t){return t&&typeof t=="object"&&typeof t.then=="function"}function Le(t){return t()}function ve(){return Object.create(null)}function ne(t){t.forEach(Le)}function Xe(t){return typeof t=="function"}function L(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ie;function Re(t,e){return ie||(ie=document.createElement("a")),ie.href=e,t===ie.href}function Ge(t){return Object.keys(t).length===0}function Je(t,...e){if(t==null)return S;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function qe(t,e,n){t.$$.on_destroy.push(Je(e,n))}function ke(t){return t==null?"":t}function C(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function ae(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function I(t){return document.createElement(t)}function R(t){return document.createTextNode(t)}function z(){return R(" ")}function re(){return R("")}function G(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Qe(t){return Array.from(t.childNodes)}function X(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function we(t,e){t.value=e==null?"":e}function Ve(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function ye(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function We(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function Ze(t,e,n){t.classList[n?"add":"remove"](e)}function xe(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,r,e),l}let te;function U(t){te=t}function De(){if(!te)throw new Error("Function called outside component initialization");return te}function x(){const t=De();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const c=xe(e,n,{cancelable:r});return l.slice().forEach(o=>{o.call(t,c)}),!c.defaultPrevented}return!0}}const ee=[],W=[],ce=[],Ce=[],et=Promise.resolve();let ge=!1;function tt(){ge||(ge=!0,et.then(pe))}function ue(t){ce.push(t)}const _e=new Set;let oe=0;function pe(){const t=te;do{for(;oe<ee.length;){const e=ee[oe];oe++,U(e),nt(e.$$)}for(U(null),ee.length=0,oe=0;W.length;)W.pop()();for(let e=0;e<ce.length;e+=1){const n=ce[e];_e.has(n)||(_e.add(n),n())}ce.length=0}while(ee.length);for(;Ce.length;)Ce.pop()();ge=!1,_e.clear(),U(t)}function nt(t){if(t.fragment!==null){t.update(),ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ue)}}const se=new Set;let Q;function H(){Q={r:0,c:[],p:Q}}function K(){Q.r||ne(Q.c),Q=Q.p}function h(t,e){t&&t.i&&(se.delete(t),t.i(e))}function v(t,e,n,r){if(t&&t.o){if(se.has(t))return;se.add(t),Q.c.push(()=>{se.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function Ee(t,e){const n=e.token={};function r(l,c,o,s){if(e.token!==n)return;e.resolved=s;let i=e.ctx;o!==void 0&&(i=i.slice(),i[o]=s);const u=l&&(e.current=l)(i);let a=!1;e.block&&(e.blocks?e.blocks.forEach((d,m)=>{m!==c&&d&&(H(),v(d,1,1,()=>{e.blocks[m]===d&&(e.blocks[m]=null)}),K())}):e.block.d(1),u.c(),h(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[c]=u),a&&pe()}if(Ye(t)){const l=De();if(t.then(c=>{U(l),r(e.then,1,e.value,c),U(null)},c=>{if(U(l),r(e.catch,2,e.error,c),U(null),!e.hasCatch)throw c}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function rt(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function A(t){t&&t.c()}function O(t,e,n,r){const{fragment:l,on_mount:c,on_destroy:o,after_update:s}=t.$$;l&&l.m(e,n),r||ue(()=>{const i=c.map(Le).filter(Xe);o?o.push(...i):ne(i),t.$$.on_mount=[]}),s.forEach(ue)}function j(t,e){const n=t.$$;n.fragment!==null&&(ne(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e){t.$$.dirty[0]===-1&&(ee.push(t),tt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(t,e,n,r,l,c,o,s=[-1]){const i=te;U(t);const u=t.$$={fragment:null,ctx:null,props:c,update:S,not_equal:l,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:ve(),dirty:s,skip_bound:!1,root:e.target||i.$$.root};o&&o(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(d,m,...g)=>{const w=g.length?g[0]:m;return u.ctx&&l(u.ctx[d],u.ctx[d]=w)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](w),a&&lt(t,d)),m}):[],u.update(),a=!0,ne(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const d=Qe(e.target);u.fragment&&u.fragment.l(d),d.forEach(y)}else u.fragment&&u.fragment.c();e.intro&&h(t.$$.fragment),O(t,e.target,e.anchor,e.customElement),pe()}U(i)}class D{$destroy(){j(this,1),this.$destroy=S}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!Ge(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function it(t){let e,n,r,l;return{c(){e=I("i"),f(e,"title",t[0]),f(e,"class",n=`codicon codicon-${t[1]}`)},m(c,o){E(c,e,o),r||(l=G(e,"click",t[3]),r=!0)},p(c,[o]){o&1&&f(e,"title",c[0]),o&2&&n!==(n=`codicon codicon-${c[1]}`)&&f(e,"class",n)},i:S,o:S,d(c){c&&y(e),r=!1,l()}}}function ot(t,e,n){let{title:r=void 0}=e,{icon:l}=e;const c=x(),o=()=>c("click");return t.$$set=s=>{"title"in s&&n(0,r=s.title),"icon"in s&&n(1,l=s.icon)},[r,l,c,o]}class F extends D{constructor(e){super(),q(this,e,ot,it,L,{title:0,icon:1})}}const V=[];function Fe(t,e=S){let n;const r=new Set;function l(s){if(L(t,s)&&(t=s,n)){const i=!V.length;for(const u of r)u[1](),V.push(u,t);if(i){for(let u=0;u<V.length;u+=2)V[u][0](V[u+1]);V.length=0}}}function c(s){l(s(t))}function o(s,i=S){const u=[s,i];return r.add(u),r.size===1&&(n=e(l)||S),s(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:l,update:c,subscribe:o}}const He=Fe("search");function ct(t){let e,n,r,l,c,o,s;return n=new F({props:{title:"Search",icon:"search"}}),n.$on("click",t[0]("search")),l=new F({props:{title:"Settings",icon:"settings-gear"}}),l.$on("click",t[0]("settings")),o=new F({props:{title:"Account",icon:"account"}}),o.$on("click",t[0]("account")),{c(){e=I("header"),A(n.$$.fragment),r=z(),A(l.$$.fragment),c=z(),A(o.$$.fragment),f(e,"role","navigation"),f(e,"class","svelte-2iet67")},m(i,u){E(i,e,u),O(n,e,null),C(e,r),O(l,e,null),C(e,c),O(o,e,null),s=!0},p:S,i(i){s||(h(n.$$.fragment,i),h(l.$$.fragment,i),h(o.$$.fragment,i),s=!0)},o(i){v(n.$$.fragment,i),v(l.$$.fragment,i),v(o.$$.fragment,i),s=!1},d(i){i&&y(e),j(n),j(l),j(o)}}}function st(t){return[n=>()=>{He.set(n)}]}class ut extends D{constructor(e){super(),q(this,e,st,ct,L,{})}}function ft(t){let e,n,r,l,c,o;return{c(){e=I("img"),f(e,"loading","lazy"),f(e,"data-src",n=t[0].sample_url),f(e,"alt",r=t[0].id.toString()),f(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),f(e,"width",c=t[0].width),f(e,"height",o=t[0].height),f(e,"class","svelte-1xnjrgd")},m(s,i){E(s,e,i),t[7](e)},p(s,i){i&1&&n!==(n=s[0].sample_url)&&f(e,"data-src",n),i&1&&r!==(r=s[0].id.toString())&&f(e,"alt",r),i&1&&l!==(l=`aspect-ratio: ${s[0].width} / ${s[0].height}`)&&f(e,"style",l),i&1&&c!==(c=s[0].width)&&f(e,"width",c),i&1&&o!==(o=s[0].height)&&f(e,"height",o)},d(s){s&&y(e),t[7](null)}}}function at(t){let e,n,r,l,c,o;return{c(){e=I("video"),f(e,"preload","metadata"),f(e,"loading","lazy"),f(e,"data-src",n=t[0].sample_url),f(e,"alt",r=t[0].id.toString()),f(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),f(e,"width",c=t[0].width),f(e,"height",o=t[0].height),e.controls=!0,f(e,"class","svelte-1xnjrgd")},m(s,i){E(s,e,i),t[6](e)},p(s,i){i&1&&n!==(n=s[0].sample_url)&&f(e,"data-src",n),i&1&&r!==(r=s[0].id.toString())&&f(e,"alt",r),i&1&&l!==(l=`aspect-ratio: ${s[0].width} / ${s[0].height}`)&&f(e,"style",l),i&1&&c!==(c=s[0].width)&&f(e,"width",c),i&1&&o!==(o=s[0].height)&&f(e,"height",o)},d(s){s&&y(e),t[6](null)}}}function _t(t){let e,n,r,l,c,o;return{c(){e=I("img"),f(e,"loading","lazy"),f(e,"data-src",n=t[0].sample_url),f(e,"alt",r=t[0].id.toString()),f(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),f(e,"width",c=t[0].width),f(e,"height",o=t[0].height),f(e,"class","svelte-1xnjrgd")},m(s,i){E(s,e,i),t[5](e)},p(s,i){i&1&&n!==(n=s[0].sample_url)&&f(e,"data-src",n),i&1&&r!==(r=s[0].id.toString())&&f(e,"alt",r),i&1&&l!==(l=`aspect-ratio: ${s[0].width} / ${s[0].height}`)&&f(e,"style",l),i&1&&c!==(c=s[0].width)&&f(e,"width",c),i&1&&o!==(o=s[0].height)&&f(e,"height",o)},d(s){s&&y(e),t[5](null)}}}function Ie(t){let e,n,r=t[0].type+"",l;return{c(){e=I("div"),n=R("details "),l=R(r),f(e,"class","details")},m(c,o){E(c,e,o),C(e,n),C(e,l)},p(c,o){o&1&&r!==(r=c[0].type+"")&&X(l,r)},d(c){c&&y(e)}}}function dt(t){let e,n,r,l,c;function o(a,d){return a[0].type==="image"?_t:a[0].type==="video"?at:ft}let s=o(t),i=s(t),u=t[2]&&Ie(t);return{c(){e=I("div"),n=I("div"),i.c(),r=z(),u&&u.c(),f(n,"class","content"),f(e,"class","post svelte-1xnjrgd")},m(a,d){E(a,e,d),C(e,n),i.m(n,null),C(e,r),u&&u.m(e,null),l||(c=G(n,"click",t[3]),l=!0)},p(a,[d]){s===(s=o(a))&&i?i.p(a,d):(i.d(1),i=s(a),i&&(i.c(),i.m(n,null))),a[2]?u?u.p(a,d):(u=Ie(a),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:S,o:S,d(a){a&&y(e),i.d(),u&&u.d(),l=!1,c()}}}function gt(t,e,n){let{post:r}=e,{observer:l}=e,c=!1,o;function s(){n(2,c=!c)}function i(d){W[d?"unshift":"push"](()=>{o=d,n(1,o)})}function u(d){W[d?"unshift":"push"](()=>{o=d,n(1,o)})}function a(d){W[d?"unshift":"push"](()=>{o=d,n(1,o)})}return t.$$set=d=>{"post"in d&&n(0,r=d.post),"observer"in d&&n(4,l=d.observer)},t.$$.update=()=>{t.$$.dirty&18&&o&&l.observe(o)},[r,o,c,s,l,i,u,a]}class mt extends D{constructor(e){super(),q(this,e,gt,dt,L,{post:0,observer:4})}}function Se(t,e,n){const r=t.slice();return r[2]=e[n],r}function Te(t){let e,n;return e=new mt({props:{post:t[2],observer:t[1]}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,l){const c={};l&1&&(c.post=r[2]),l&2&&(c.observer=r[1]),e.$set(c)},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function pt(t){let e,n,r=t[0],l=[];for(let o=0;o<r.length;o+=1)l[o]=Te(Se(t,r,o));const c=o=>v(l[o],1,1,()=>{l[o]=null});return{c(){e=I("ol");for(let o=0;o<l.length;o+=1)l[o].c();f(e,"class","page svelte-5hdzo")},m(o,s){E(o,e,s);for(let i=0;i<l.length;i+=1)l[i].m(e,null);n=!0},p(o,[s]){if(s&3){r=o[0];let i;for(i=0;i<r.length;i+=1){const u=Se(o,r,i);l[i]?(l[i].p(u,s),h(l[i],1)):(l[i]=Te(u),l[i].c(),h(l[i],1),l[i].m(e,null))}for(H(),i=r.length;i<l.length;i+=1)c(i);K()}},i(o){if(!n){for(let s=0;s<r.length;s+=1)h(l[s]);n=!0}},o(o){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)v(l[s]);n=!1},d(o){o&&y(e),ae(l,o)}}}function ht(t,e,n){let{posts:r}=e,{observer:l}=e;return t.$$set=c=>{"posts"in c&&n(0,r=c.posts),"observer"in c&&n(1,l=c.observer)},[r,l]}class bt extends D{constructor(e){super(),q(this,e,ht,pt,L,{posts:0,observer:1})}}function $t(t){let e,n,r,l,c,o,s;return n=new F({props:{icon:t[0]}}),{c(){e=I("button"),A(n.$$.fragment),r=z(),l=R(t[1]),f(e,"title",t[2]),f(e,"class","svelte-11z6t3c")},m(i,u){E(i,e,u),O(n,e,null),C(e,r),C(e,l),c=!0,o||(s=G(e,"click",t[4]),o=!0)},p(i,[u]){const a={};u&1&&(a.icon=i[0]),n.$set(a),(!c||u&2)&&X(l,i[1]),(!c||u&4)&&f(e,"title",i[2])},i(i){c||(h(n.$$.fragment,i),c=!0)},o(i){v(n.$$.fragment,i),c=!1},d(i){i&&y(e),j(n),o=!1,s()}}}function vt(t,e,n){let{icon:r}=e,{text:l}=e,{title:c}=e;const o=x(),s=()=>o("click");return t.$$set=i=>{"icon"in i&&n(0,r=i.icon),"text"in i&&n(1,l=i.text),"title"in i&&n(2,c=i.title)},[r,l,c,o,s]}class kt extends D{constructor(e){super(),q(this,e,vt,$t,L,{icon:0,text:1,title:2})}}const Z=t=>t/1e6>=1?`${Math.trunc(t/1e6)}M`:t>=1e3?`${Math.trunc(t/1e3)}K`:t.toString();function fe(t){return t.replace(/_/g," ").replace(/source:/g,"").replace(/rating:/g,"")}function me(t){for(const e of t)if(e!=="ambiguous"&&e!=="general")return e;return null}function wt(t){let e,n,r,l;return{c(){e=I("i"),f(e,"title",t[0]),f(e,"class",n=ke(`codicon codicon-${t[1]} ${t[2]?"active":""}`)+" svelte-htt49j")},m(c,o){E(c,e,o),r||(l=G(e,"click",t[4]),r=!0)},p(c,[o]){o&1&&f(e,"title",c[0]),o&6&&n!==(n=ke(`codicon codicon-${c[1]} ${c[2]?"active":""}`)+" svelte-htt49j")&&f(e,"class",n)},i:S,o:S,d(c){c&&y(e),r=!1,l()}}}function yt(t,e,n){let{title:r=void 0}=e,{icon:l}=e,{active:c}=e;const o=x(),s=()=>o("click");return t.$$set=i=>{"title"in i&&n(0,r=i.title),"icon"in i&&n(1,l=i.icon),"active"in i&&n(2,c=i.active)},[r,l,c,o,s]}class Ct extends D{constructor(e){super(),q(this,e,yt,wt,L,{title:0,icon:1,active:2})}}function Et(t){let e,n;return e=new F({props:{icon:"star-full"}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function It(t){let e,n;return e=new F({props:{icon:"link"}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function St(t){let e,n;return e=new F({props:{icon:"unverified"}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Tt(t){let e,n;return e=new F({props:{icon:"info"}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Nt(t){let e,n;return e=new F({props:{icon:"folder"}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Ot(t){let e,n;return e=new F({props:{icon:"person"}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function jt(t){let e,n;return e=new F({props:{icon:"edit"}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function At(t){let e,n,r,l;const c=[jt,Ot,Nt,Tt,St,It,Et],o=[];function s(i,u){return i[0]==="artist"?0:i[0]==="character"?1:i[0]==="copyright"?2:i[0]==="metadata"?3:i[0]==="rating"?4:i[0]==="source"?5:i[0]==="supertag"?6:-1}return~(e=s(t))&&(n=o[e]=c[e](t)),{c(){n&&n.c(),r=re()},m(i,u){~e&&o[e].m(i,u),E(i,r,u),l=!0},p(i,[u]){let a=e;e=s(i),e!==a&&(n&&(H(),v(o[a],1,1,()=>{o[a]=null}),K()),~e?(n=o[e],n||(n=o[e]=c[e](i),n.c()),h(n,1),n.m(r.parentNode,r)):n=null)},i(i){l||(h(n),l=!0)},o(i){v(n),l=!1},d(i){~e&&o[e].d(i),i&&y(r)}}}function Pt(t,e,n){let{type:r}=e;return t.$$set=l=>{"type"in l&&n(0,r=l.type)},[r]}class Ke extends D{constructor(e){super(),q(this,e,Pt,At,L,{type:0})}}function Ne(t,e,n){const r=t.slice();return r[15]=e[n],r}function zt(t){let e,n=t[18].message+"",r;return{c(){e=I("p"),r=R(n),Ve(e,"color","red")},m(l,c){E(l,e,c),C(e,r)},p(l,c){c&4&&n!==(n=l[18].message+"")&&X(r,n)},i:S,o:S,d(l){l&&y(e)}}}function Mt(t){let e,n,r=t[14]&&t[14].length&&Oe(t);return{c(){r&&r.c(),e=re()},m(l,c){r&&r.m(l,c),E(l,e,c),n=!0},p(l,c){l[14]&&l[14].length?r?(r.p(l,c),c&4&&h(r,1)):(r=Oe(l),r.c(),h(r,1),r.m(e.parentNode,e)):r&&(H(),v(r,1,1,()=>{r=null}),K())},i(l){n||(h(r),n=!0)},o(l){v(r),n=!1},d(l){r&&r.d(l),l&&y(e)}}}function Oe(t){let e,n,r=t[14],l=[];for(let o=0;o<r.length;o+=1)l[o]=je(Ne(t,r,o));const c=o=>v(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=re()},m(o,s){for(let i=0;i<l.length;i+=1)l[i].m(o,s);E(o,e,s),n=!0},p(o,s){if(s&21){r=o[14];let i;for(i=0;i<r.length;i+=1){const u=Ne(o,r,i);l[i]?(l[i].p(u,s),h(l[i],1)):(l[i]=je(u),l[i].c(),h(l[i],1),l[i].m(e.parentNode,e))}for(H(),i=r.length;i<l.length;i+=1)c(i);K()}},i(o){if(!n){for(let s=0;s<r.length;s+=1)h(l[s]);n=!0}},o(o){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)v(l[s]);n=!1},d(o){ae(l,o),o&&y(e)}}}function je(t){let e,n,r,l,c=fe(t[15].name)+"",o,s,i,u,a=Z(t[15].count)+"",d,m,g,w,N;n=new Ke({props:{type:me(t[15].types)}});function M(){return t[12](t[15])}return{c(){e=I("li"),A(n.$$.fragment),r=z(),l=I("span"),o=R(c),i=z(),u=I("span"),d=R(a),m=z(),f(l,"title",s=t[15].name),f(l,"class","tag-name svelte-1kgwgmf"),f(u,"class","tag-count"),f(e,"tabindex","0"),f(e,"class","svelte-1kgwgmf")},m($,_){E($,e,_),O(n,e,null),C(e,r),C(e,l),C(l,o),C(e,i),C(e,u),C(u,d),C(e,m),g=!0,w||(N=G(e,"click",M),w=!0)},p($,_){t=$;const k={};_&4&&(k.type=me(t[15].types)),n.$set(k),(!g||_&4)&&c!==(c=fe(t[15].name)+"")&&X(o,c),(!g||_&4&&s!==(s=t[15].name))&&f(l,"title",s),(!g||_&4)&&a!==(a=Z(t[15].count)+"")&&X(d,a)},i($){g||(h(n.$$.fragment,$),g=!0)},o($){v(n.$$.fragment,$),g=!1},d($){$&&y(e),j(n),w=!1,N()}}}function Bt(t){let e;return{c(){e=I("p"),e.textContent="...waiting"},m(n,r){E(n,e,r)},p:S,i:S,o:S,d(n){n&&y(e)}}}function Lt(t){let e,n,r,l,c,o,s,i,u,a,d,m,g,w,N,M;n=new F({props:{icon:"search"}}),o=new F({props:{icon:t[5][t[3]],title:t[6][t[3]]}}),o.$on("click",t[10]),i=new Ct({props:{icon:"whole-word",title:"Toggle exact search term matching",active:!t[1]}}),i.$on("click",t[11]);let $={ctx:t,current:null,token:null,hasCatch:!0,pending:Bt,then:Mt,catch:zt,value:14,error:18,blocks:[,,,]};return Ee(d=t[2],$),{c(){e=I("div"),A(n.$$.fragment),r=z(),l=I("input"),c=z(),A(o.$$.fragment),s=z(),A(i.$$.fragment),u=z(),a=I("ol"),$.block.c(),m=z(),g=I("div"),g.innerHTML='<span class="hint svelte-1kgwgmf">Learn more about tags</span>',f(l,"type","text"),f(l,"class","svelte-1kgwgmf"),f(g,"class","hint-container svelte-1kgwgmf"),f(a,"class","svelte-1kgwgmf"),f(e,"class","searchbar svelte-1kgwgmf")},m(_,k){E(_,e,k),O(n,e,null),C(e,r),C(e,l),we(l,t[0]),C(e,c),O(o,e,null),C(e,s),O(i,e,null),C(e,u),C(e,a),$.block.m(a,$.anchor=null),$.mount=()=>a,$.anchor=m,C(a,m),C(a,g),w=!0,N||(M=G(l,"input",t[9]),N=!0)},p(_,[k]){t=_,k&1&&l.value!==t[0]&&we(l,t[0]);const T={};k&8&&(T.icon=t[5][t[3]]),k&8&&(T.title=t[6][t[3]]),o.$set(T);const p={};k&2&&(p.active=!t[1]),i.$set(p),$.ctx=t,k&4&&d!==(d=t[2])&&Ee(d,$)||rt($,t,k)},i(_){w||(h(n.$$.fragment,_),h(o.$$.fragment,_),h(i.$$.fragment,_),h($.block),w=!0)},o(_){v(n.$$.fragment,_),v(o.$$.fragment,_),v(i.$$.fragment,_);for(let k=0;k<3;k+=1){const T=$.blocks[k];v(T)}w=!1},d(_){_&&y(e),j(n),j(o),j(i),$.block.d(),$.token=null,$=null,N=!1,M()}}}function Rt(t,e,n){const r=x(),l={"+":"plus","-":"circle-slash","~":"record"},c={"+":"Included. Tags will be included in the search.","-":"Blocked. Tags will be blocked.","~":"Optional. At least one of all optional tags will on each post."},o=Object.keys(l);let s,i,u="",a=!0,d="+";async function m($,_){const k=$?`*${_}*`:_,T=await fetch(`https://r34-json.herokuapp.com/v2/tags?limit=20&sort=count&name=${k.replaceAll(" ","_")}`,{signal:s.signal}),p=await T.json();if(T.ok){if(Array.isArray(p))return p;throw p.message?p.message==="Refine your search"?new Error('Too many tags match your search. Be more specific or use "exact" searching.'):new Error(p.message):new Error("Unexpected tag suggestions received")}else throw new Error("Failed to get tag suggestions")}function g(){u=this.value,n(0,u)}const w=()=>{const $=(o.indexOf(d)+1)%o.length;n(3,d=o[$])},N=()=>{n(1,a=!a)},M=$=>{n(0,u=""),r("pick",$)};return t.$$.update=()=>{t.$$.dirty&259&&(s!==void 0&&s.abort("Newer search term entered"),u!==""&&(n(8,s=new AbortController),n(2,i=m(a,u))))},[u,a,i,d,r,l,c,o,s,g,w,N,M]}class qt extends D{constructor(e){super(),q(this,e,Rt,Lt,L,{})}}function Dt(t){let e,n,r,l=fe(t[0].name)+"",c,o,s=Z(t[0].count)+"",i,u,a,d,m;return n=new Ke({props:{type:t[2]}}),{c(){e=I("li"),A(n.$$.fragment),r=z(),c=R(l),o=R(`
  (`),i=R(s),u=R(")"),f(e,"tabindex","0"),f(e,"title","Click to remove tag"),f(e,"class","svelte-zci81g"),Ze(e,"no-icon",t[2]===null)},m(g,w){E(g,e,w),O(n,e,null),C(e,r),C(e,c),C(e,o),C(e,i),C(e,u),a=!0,d||(m=G(e,"click",t[3]),d=!0)},p(g,[w]){(!a||w&1)&&l!==(l=fe(g[0].name)+"")&&X(c,l),(!a||w&1)&&s!==(s=Z(g[0].count)+"")&&X(i,s)},i(g){a||(h(n.$$.fragment,g),a=!0)},o(g){v(n.$$.fragment,g),a=!1},d(g){g&&y(e),j(n),d=!1,m()}}}function Ft(t,e,n){let{tag:r}=e;const l=x(),c=me(r.types),o=()=>l("click");return t.$$set=s=>{"tag"in s&&n(0,r=s.tag)},[r,l,c,o]}class Ht extends D{constructor(e){super(),q(this,e,Ft,Dt,L,{tag:0})}}function Kt(t){let e;return{c(){e=I("div")},m(n,r){E(n,e,r),t[1](e)},p:S,i:S,o:S,d(n){n&&y(e),t[1](null)}}}function Ut(t,e,n){const r=x(),l=new IntersectionObserver(s=>{s[0].isIntersecting&&(console.debug("Triggered infinite loading"),r("visible"))},{rootMargin:"1250px"});let c;function o(s){W[s?"unshift":"push"](()=>{c=s,n(0,c)})}return t.$$.update=()=>{t.$$.dirty&1&&(l.disconnect(),c&&l.observe(c))},[c,o]}class Yt extends D{constructor(e){super(),q(this,e,Ut,Kt,L,{})}}function Xt(){const t=[],{subscribe:e,update:n}=Fe(t);return{subscribe:e,add:r=>n(l=>{const c=l.findIndex(o=>o.name==r.name);return c===-1?l.push(r):l[c]=r,l}),removeByIndex:r=>n(l=>(l.splice(r,1),l))}}var de=Xt(),Gt="/kurosearch/assets/shironeko-confused.4071d5b2.png";function Jt(t){let e,n,r,l,c;return{c(){e=I("div"),n=I("img"),l=z(),c=I("span"),c.textContent="No results found",Re(n.src,r=Gt)||f(n,"src",r),f(n,"alt","No results."),f(c,"class","svelte-10fem3h"),f(e,"class","svelte-10fem3h")},m(o,s){E(o,e,s),C(e,n),C(e,l),C(e,c)},p:S,i:S,o:S,d(o){o&&y(e)}}}class Qt extends D{constructor(e){super(),q(this,e,null,Jt,L,{})}}var Vt="/kurosearch/assets/shironeko-x.c28cad00.png";function Wt(t){let e,n,r,l,c;return{c(){e=I("div"),n=I("img"),l=z(),c=I("span"),c.textContent="You have reached the end",Re(n.src,r=Vt)||f(n,"src",r),f(n,"alt","No results."),f(c,"class","svelte-1rtbqa7"),f(e,"class","svelte-1rtbqa7")},m(o,s){E(o,e,s),C(e,n),C(e,l),C(e,c)},p:S,i:S,o:S,d(o){o&&y(e)}}}class Zt extends D{constructor(e){super(),q(this,e,null,Wt,L,{})}}function Ae(t,e,n){const r=t.slice();return r[15]=e[n],r}function Pe(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function ze(t){let e,n;function r(){return t[10](t[20])}return e=new Ht({props:{tag:t[18]}}),e.$on("click",r),{c(){A(e.$$.fragment)},m(l,c){O(e,l,c),n=!0},p(l,c){t=l;const o={};c&32&&(o.tag=t[18]),e.$set(o)},i(l){n||(h(e.$$.fragment,l),n=!0)},o(l){v(e.$$.fragment,l),n=!1},d(l){j(e,l)}}}function xt(t){let e,n;return e=new Qt({}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:S,i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function en(t){let e,n=Z(t[0])+"",r,l,c,o,s,i,u,a,d,m=t[1],g=[];for(let _=0;_<m.length;_+=1)g[_]=Me(Ae(t,m,_));const w=_=>v(g[_],1,1,()=>{g[_]=null}),N=[nn,tn],M=[];function $(_,k){return _[1].length<_[4]?0:1}return i=$(t),u=M[i]=N[i](t),{c(){e=I("p"),r=R(n),l=R(" results"),c=z(),o=I("ol");for(let _=0;_<g.length;_+=1)g[_].c();s=z(),u.c(),a=re(),f(e,"class","count svelte-ubc87v"),f(o,"class","svelte-ubc87v")},m(_,k){E(_,e,k),C(e,r),C(e,l),E(_,c,k),E(_,o,k);for(let T=0;T<g.length;T+=1)g[T].m(o,null);E(_,s,k),M[i].m(_,k),E(_,a,k),d=!0},p(_,k){if((!d||k&1)&&n!==(n=Z(_[0])+"")&&X(r,n),k&66){m=_[1];let p;for(p=0;p<m.length;p+=1){const le=Ae(_,m,p);g[p]?(g[p].p(le,k),h(g[p],1)):(g[p]=Me(le),g[p].c(),h(g[p],1),g[p].m(o,null))}for(H(),p=m.length;p<g.length;p+=1)w(p);K()}let T=i;i=$(_),i===T?M[i].p(_,k):(H(),v(M[T],1,1,()=>{M[T]=null}),K(),u=M[i],u?u.p(_,k):(u=M[i]=N[i](_),u.c()),h(u,1),u.m(a.parentNode,a))},i(_){if(!d){for(let k=0;k<m.length;k+=1)h(g[k]);h(u),d=!0}},o(_){g=g.filter(Boolean);for(let k=0;k<g.length;k+=1)v(g[k]);v(u),d=!1},d(_){_&&y(e),_&&y(c),_&&y(o),ae(g,_),_&&y(s),M[i].d(_),_&&y(a)}}}function Me(t){let e,n;return e=new bt({props:{posts:t[15],observer:t[6]}}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,l){const c={};l&2&&(c.posts=r[15]),e.$set(c)},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function tn(t){let e,n;return e=new Zt({}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:S,i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function nn(t){let e,n;return e=new Yt({}),e.$on("visible",t[12]),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:S,i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function rn(t){let e,n,r,l,c,o,s,i,u,a,d,m,g,w,N,M,$,_,k;r=new qt({}),r.$on("pick",t[9]);let T=[...t[5]],p=[];for(let b=0;b<T.length;b+=1)p[b]=ze(Pe(t,T,b));const le=b=>v(p[b],1,1,()=>{p[b]=null});m=new kt({props:{title:"Click to search with active tags",icon:"search",text:"Search"}}),m.$on("click",t[7]);const he=[en,xt],Y=[];function be(b,P){return b[0]?0:b[0]===0?1:-1}return~(w=be(t))&&(N=Y[w]=he[w](t)),{c(){e=I("h1"),e.textContent="kurosearch",n=z(),A(r.$$.fragment),l=z(),c=I("ul");for(let b=0;b<p.length;b+=1)p[b].c();o=z(),s=I("div"),i=I("select"),u=I("option"),u.textContent="New",a=I("option"),a.textContent="Popular",d=z(),A(m.$$.fragment),g=z(),N&&N.c(),M=re(),f(e,"class","svelte-ubc87v"),f(c,"class","svelte-ubc87v"),u.__value="updated",u.value=u.__value,a.__value="score",a.value=a.__value,f(i,"class","svelte-ubc87v"),t[2]===void 0&&ue(()=>t[11].call(i)),f(s,"class","sort-row svelte-ubc87v")},m(b,P){E(b,e,P),E(b,n,P),O(r,b,P),E(b,l,P),E(b,c,P);for(let J=0;J<p.length;J+=1)p[J].m(c,null);E(b,o,P),E(b,s,P),C(s,i),C(i,u),C(i,a),ye(i,t[2]),C(s,d),O(m,s,null),E(b,g,P),~w&&Y[w].m(b,P),E(b,M,P),$=!0,_||(k=G(i,"change",t[11]),_=!0)},p(b,[P]){if(P&32){T=[...b[5]];let B;for(B=0;B<T.length;B+=1){const $e=Pe(b,T,B);p[B]?(p[B].p($e,P),h(p[B],1)):(p[B]=ze($e),p[B].c(),h(p[B],1),p[B].m(c,null))}for(H(),B=T.length;B<p.length;B+=1)le(B);K()}P&4&&ye(i,b[2]);let J=w;w=be(b),w===J?~w&&Y[w].p(b,P):(N&&(H(),v(Y[J],1,1,()=>{Y[J]=null}),K()),~w?(N=Y[w],N?N.p(b,P):(N=Y[w]=he[w](b),N.c()),h(N,1),N.m(M.parentNode,M)):N=null)},i(b){if(!$){h(r.$$.fragment,b);for(let P=0;P<T.length;P+=1)h(p[P]);h(m.$$.fragment,b),h(N),$=!0}},o(b){v(r.$$.fragment,b),p=p.filter(Boolean);for(let P=0;P<p.length;P+=1)v(p[P]);v(m.$$.fragment,b),v(N),$=!1},d(b){b&&y(e),b&&y(n),j(r,b),b&&y(l),b&&y(c),ae(p,b),b&&y(o),b&&y(s),j(m),b&&y(g),~w&&Y[w].d(b),b&&y(M),_=!1,k()}}}function ln(t,e,n){let r,l;qe(t,de,$=>n(5,l=$));const c=new IntersectionObserver($=>{for(const _ of $)_.target.src=_.isIntersecting?_.target.getAttribute("data-src"):""},{rootMargin:"1250px"});let o,s=[],i="updated",u=null,a=0;function d(){n(1,s=[]),n(0,u=null),o!==void 0&&o.abort("New search triggered"),n(3,a=0),o=new AbortController,m(n(3,a++,a))}async function m($){const _=[...l.map(p=>p.name),`sort:${i}:desc`].filter(p=>p!=null&&p!=="").map(p=>encodeURIComponent(p)).join("+"),k=await fetch(`https://r34-json.herokuapp.com/v2/posts?limit=20&pid=${$}&tags=${_}`,{signal:o.signal}),T=await k.json();if(console.log(T),k.ok)return n(0,u=T.count),n(1,s=[...s,T.posts]),T;throw new Error("fuck")}d();const g=$=>de.add($.detail),w=$=>de.removeByIndex($);function N(){i=We(this),n(2,i)}const M=()=>m(n(3,a++,a));return t.$$.update=()=>{t.$$.dirty&1&&n(4,r=u/20)},[u,s,i,a,r,l,c,d,m,g,w,N,M]}class on extends D{constructor(e){super(),q(this,e,ln,rn,L,{})}}function cn(t){let e;return{c(){e=I("p"),e.textContent="You got lost..."},m(n,r){E(n,e,r)},i:S,o:S,d(n){n&&y(e)}}}function sn(t){let e;return{c(){e=I("p"),e.textContent="settings"},m(n,r){E(n,e,r)},i:S,o:S,d(n){n&&y(e)}}}function un(t){let e;return{c(){e=I("p"),e.textContent="account"},m(n,r){E(n,e,r)},i:S,o:S,d(n){n&&y(e)}}}function fn(t){let e,n;return e=new on({}),{c(){A(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function an(t){let e,n,r,l,c,o,s,i;e=new ut({});const u=[fn,un,sn,cn],a=[];function d(m,g){return m[0]==="search"?0:m[0]==="account"?1:m[0]==="settings"?2:3}return l=d(t),c=a[l]=u[l](t),{c(){A(e.$$.fragment),n=z(),r=I("main"),c.c(),o=z(),s=I("footer"),s.textContent="Copyright \xA9 2022 kurozenzen",f(r,"class","svelte-1rrepu9"),f(s,"class","svelte-1rrepu9")},m(m,g){O(e,m,g),E(m,n,g),E(m,r,g),a[l].m(r,null),E(m,o,g),E(m,s,g),i=!0},p(m,[g]){let w=l;l=d(m),l!==w&&(H(),v(a[w],1,1,()=>{a[w]=null}),K(),c=a[l],c||(c=a[l]=u[l](m),c.c()),h(c,1),c.m(r,null))},i(m){i||(h(e.$$.fragment,m),h(c),i=!0)},o(m){v(e.$$.fragment,m),v(c),i=!1},d(m){j(e,m),m&&y(n),m&&y(r),a[l].d(),m&&y(o),m&&y(s)}}}let Be="dark";function _n(t,e,n){let r;qe(t,He,c=>n(0,r=c));const l=c=>c==="dark"?"light":"dark";return document.body.classList.replace(l(Be),Be),[r]}class dn extends D{constructor(e){super(),q(this,e,_n,an,L,{})}}new dn({target:document.getElementById("app")});
