const vt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}};vt();function E(){}function bt(t){return t&&typeof t=="object"&&typeof t.then=="function"}function dt(t){return t()}function Ue(){return Object.create(null)}function Q(t){t.forEach(dt)}function _t(t){return typeof t=="function"}function D(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ye;function gt(t,e){return ye||(ye=document.createElement("a")),ye.href=e,t===ye.href}function kt(t){return Object.keys(t).length===0}function wt(t,...e){if(t==null)return E;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function oe(t,e,n){t.$$.on_destroy.push(wt(e,n))}function ge(t){return t==null?"":t}function Ne(t,e,n){return t.set(n),e}function m(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function we(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function se(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function G(t){return document.createTextNode(t)}function M(){return G(" ")}function Pe(){return G("")}function F(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function yt(t){return Array.from(t.childNodes)}function X(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ye(t,e){t.value=e==null?"":e}function ue(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function Me(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function x(t,e,n){t.classList[n?"add":"remove"](e)}function $t(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,r,e),l}let ke;function ee(t){ke=t}function ht(){if(!ke)throw new Error("Function called outside component initialization");return ke}function me(){const t=ht();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=$t(e,n,{cancelable:r});return l.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}const be=[],fe=[],Ee=[],Ge=[],St=Promise.resolve();let Oe=!1;function Et(){Oe||(Oe=!0,St.then(We))}function he(t){Ee.push(t)}const Ae=new Set;let $e=0;function We(){const t=ke;do{for(;$e<be.length;){const e=be[$e];$e++,ee(e),Tt(e.$$)}for(ee(null),be.length=0,$e=0;fe.length;)fe.pop()();for(let e=0;e<Ee.length;e+=1){const n=Ee[e];Ae.has(n)||(Ae.add(n),n())}Ee.length=0}while(be.length);for(;Ge.length;)Ge.pop()();Oe=!1,Ae.clear(),ee(t)}function Tt(t){if(t.fragment!==null){t.update(),Q(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(he)}}const Te=new Set;let ie;function Z(){ie={r:0,c:[],p:ie}}function J(){ie.r||Q(ie.c),ie=ie.p}function S(t,e){t&&t.i&&(Te.delete(t),t.i(e))}function P(t,e,n,r){if(t&&t.o){if(Te.has(t))return;Te.add(t),ie.c.push(()=>{Te.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function Ke(t,e){const n=e.token={};function r(l,o,i,c){if(e.token!==n)return;e.resolved=c;let s=e.ctx;i!==void 0&&(s=s.slice(),s[i]=c);const a=l&&(e.current=l)(s);let f=!1;e.block&&(e.blocks?e.blocks.forEach((d,g)=>{g!==o&&d&&(Z(),P(d,1,1,()=>{e.blocks[g]===d&&(e.blocks[g]=null)}),J())}):e.block.d(1),a.c(),S(a,1),a.m(e.mount(),e.anchor),f=!0),e.block=a,e.blocks&&(e.blocks[o]=a),f&&We()}if(bt(t)){const l=ht();if(t.then(o=>{ee(l),r(e.then,1,e.value,o),ee(null)},o=>{if(ee(l),r(e.catch,2,e.error,o),ee(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function Ct(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function H(t){t&&t.c()}function W(t,e,n,r){const{fragment:l,on_mount:o,on_destroy:i,after_update:c}=t.$$;l&&l.m(e,n),r||he(()=>{const s=o.map(dt).filter(_t);i?i.push(...s):Q(s),t.$$.on_mount=[]}),c.forEach(he)}function q(t,e){const n=t.$$;n.fragment!==null&&(Q(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Pt(t,e){t.$$.dirty[0]===-1&&(be.push(t),Et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,r,l,o,i,c=[-1]){const s=ke;ee(t);const a=t.$$={fragment:null,ctx:null,props:o,update:E,not_equal:l,bound:Ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Ue(),dirty:c,skip_bound:!1,root:e.target||s.$$.root};i&&i(a.root);let f=!1;if(a.ctx=n?n(t,e.props||{},(d,g,...h)=>{const A=h.length?h[0]:g;return a.ctx&&l(a.ctx[d],a.ctx[d]=A)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](A),f&&Pt(t,d)),g}):[],a.update(),f=!0,Q(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const d=yt(e.target);a.fragment&&a.fragment.l(d),d.forEach(y)}else a.fragment&&a.fragment.c();e.intro&&S(t.$$.fragment),W(t,e.target,e.anchor,e.customElement),We()}ee(s)}class Y{$destroy(){q(this,1),this.$destroy=E}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ce=[];function qe(t,e=E){let n;const r=new Set;function l(c){if(D(t,c)&&(t=c,n)){const s=!ce.length;for(const a of r)a[1](),ce.push(a,t);if(s){for(let a=0;a<ce.length;a+=2)ce[a][0](ce[a+1]);ce.length=0}}}function o(c){l(c(t))}function i(c,s=E){const a=[c,s];return r.add(a),r.size===1&&(n=e(l)||E),c(t),()=>{r.delete(a),r.size===0&&(n(),n=null)}}return{set:l,update:o,subscribe:i}}const de=qe("search");function At(t){let e,n,r,l,o,i;return{c(){e=se("svg"),n=se("g"),r=se("path"),l=se("defs"),o=se("clipPath"),i=se("path"),u(r,"d","M60.105 4.898A58.55 58.55 0 0045.653.415a.22.22 0 00-.233.11 40.784 40.784 0 00-1.8 3.697c-5.456-.817-10.886-.817-16.23 0-.485-1.164-1.201-2.587-1.828-3.697a.228.228 0 00-.233-.11 58.386 58.386 0 00-14.451 4.483.207.207 0 00-.095.082C1.578 18.73-.944 32.144.293 45.39a.244.244 0 00.093.167c6.073 4.46 11.955 7.167 17.729 8.962a.23.23 0 00.249-.082 42.08 42.08 0 003.627-5.9.225.225 0 00-.123-.312 38.772 38.772 0 01-5.539-2.64.228.228 0 01-.022-.378c.372-.279.744-.569 1.1-.862a.22.22 0 01.23-.03c11.619 5.304 24.198 5.304 35.68 0a.219.219 0 01.233.027c.356.293.728.586 1.103.865a.228.228 0 01-.02.378 36.384 36.384 0 01-5.54 2.637.227.227 0 00-.121.315 47.249 47.249 0 003.624 5.897.225.225 0 00.249.084c5.801-1.794 11.684-4.502 17.757-8.961a.228.228 0 00.092-.164c1.48-15.315-2.48-28.618-10.497-40.412a.18.18 0 00-.093-.084zm-36.38 32.427c-3.497 0-6.38-3.211-6.38-7.156 0-3.944 2.827-7.156 6.38-7.156 3.583 0 6.438 3.24 6.382 7.156 0 3.945-2.827 7.156-6.381 7.156zm23.593 0c-3.498 0-6.38-3.211-6.38-7.156 0-3.944 2.826-7.156 6.38-7.156 3.582 0 6.437 3.24 6.38 7.156 0 3.945-2.798 7.156-6.38 7.156z"),u(r,"fill","currentcolor"),u(n,"clip-path","url(#prefix__clip0)"),u(i,"fill","currentcolor"),u(i,"d","M0 0h71v55H0z"),u(o,"id","prefix__clip0"),u(e,"width","16"),u(e,"height","16"),u(e,"viewBox","0 0 71 55"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(c,s){$(c,e,s),m(e,n),m(n,r),m(e,l),m(l,o),m(o,i)},p:E,i:E,o:E,d(c){c&&y(e)}}}class It extends Y{constructor(e){super(),U(this,e,null,At,D,{})}}function Lt(t){let e,n,r,l,o,i,c,s,a,f,d,g,h,A,I,L,T,v;return s=new It({}),{c(){e=b("header"),n=b("div"),r=b("a"),r.innerHTML='<i class="codicon codicon-github"></i>',l=M(),o=b("a"),o.innerHTML='<i class="codicon codicon-heart"></i>',i=M(),c=b("a"),H(s.$$.fragment),a=M(),f=b("nav"),d=b("button"),d.innerHTML='<i class="codicon codicon-search"></i>',g=M(),h=b("button"),h.innerHTML='<i class="codicon codicon-settings-gear"></i>',A=M(),I=b("button"),I.innerHTML='<i class="codicon codicon-account"></i>',u(r,"title","Source Code"),u(r,"href","https://github.com/kurozenzen/kurosearch"),u(r,"target","_newtab"),u(r,"class","svelte-sebnml"),u(o,"title","Sponsor"),u(o,"href","https://ko-fi.com/kurozenzen"),u(o,"target","_newtab"),u(o,"class","svelte-sebnml"),u(c,"title","Discord Server"),u(c,"href","https://discord.gg/yyJFG5PVBZ"),u(c,"target","_newtab"),u(c,"class","svelte-sebnml"),u(n,"class","svelte-sebnml"),u(d,"title","Search"),u(d,"class","svelte-sebnml"),u(h,"title","Settings"),u(h,"class","svelte-sebnml"),u(I,"title","Account"),u(I,"class","svelte-sebnml"),u(f,"class","svelte-sebnml"),u(e,"role","navigation"),u(e,"class","svelte-sebnml")},m(p,N){$(p,e,N),m(e,n),m(n,r),m(n,l),m(n,o),m(n,i),m(n,c),W(s,c,null),m(e,a),m(e,f),m(f,d),m(f,g),m(f,h),m(f,A),m(f,I),L=!0,T||(v=[F(d,"click",t[0]("search")),F(h,"click",t[0]("settings")),F(I,"click",t[0]("account"))],T=!0)},p:E,i(p){L||(S(s.$$.fragment,p),L=!0)},o(p){P(s.$$.fragment,p),L=!1},d(p){p&&y(e),q(s),T=!1,Q(v)}}}function jt(t,e,n){let r;return oe(t,de,o=>n(1,r=o)),[o=>()=>{Ne(de,r=o,r)}]}class Nt extends Y{constructor(e){super(),U(this,e,jt,Lt,D,{})}}const ne=t=>t/1e6>=1?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString();function ae(t,e){const n=t.toFixed();return`${n} ${e}${n==="1"?"":"s"} ago`}function Ze(t){const e=new Date(t),n=new Date,r=n.getFullYear()-e.getFullYear();if(r)return ae(r,"year");const l=n.getMonth()-e.getMonth();if(l)return ae(l,"month");const o=(n.getTime()-e.getTime())/6e4;if(o===0)return"just now";if(o<60)return ae(o,"minute");const i=o/60;if(i<24)return ae(i,"hour");const c=i/24;if(c<7)return ae(c,"day");const s=c/7;return s<5?ae(s,"week"):"rip"}function pe(t){return t.replace(/_/g," ").replace(/source:/g,"").replace(/rating:/g,"")}function Re(t){for(const e of t)if(e!=="ambiguous"&&e!=="general")return e;return null}function Mt(){const t=[],{subscribe:e,update:n}=qe(t);return{subscribe:e,add:r=>n(l=>{const o=l.findIndex(i=>i.name==r.name);return o===-1?l.push(r):l[o]=r,l}),addByName:r=>n(l=>(l.push({name:r,count:0,types:[]}),l)),removeByIndex:r=>n(l=>(l.splice(r,1),l))}}var _e=Mt();function Ot(t){let e,n=pe(t[0])+"",r,l,o;return{c(){e=b("li"),r=G(n),u(e,"tabindex","0"),u(e,"title","Click to add tag"),u(e,"class","svelte-1r7mf3i"),x(e,"active",t[2])},m(i,c){$(i,e,c),m(e,r),l||(o=F(e,"click",t[4]),l=!0)},p(i,[c]){c&1&&n!==(n=pe(i[0])+"")&&X(r,n),c&4&&x(e,"active",i[2])},i:E,o:E,d(i){i&&y(e),l=!1,o()}}}function Rt(t,e,n){let r,l,o;oe(t,_e,s=>n(3,o=s));let{name:i}=e;const c=()=>l?_e.removeByIndex(r):_e.addByName(i);return t.$$set=s=>{"name"in s&&n(0,i=s.name)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=o.findIndex(s=>s.name===i)),t.$$.dirty&2&&n(2,l=r>=0)},[i,r,l,o,c]}class Bt extends Y{constructor(e){super(),U(this,e,Rt,Ot,D,{name:0})}}function zt(t){let e,n,r,l=t[0].hostname+"",o,i;return{c(){e=b("i"),n=M(),r=b("a"),o=G(l),u(e,"class","codicon codicon-link"),u(r,"href",i=t[0].toString()),u(r,"target","_newtab"),u(r,"class","svelte-1qmyyls")},m(c,s){$(c,e,s),$(c,n,s),$(c,r,s),m(r,o)},p:E,d(c){c&&y(e),c&&y(n),c&&y(r)}}}function Wt(t){let e,n=t[0]&&zt(t);return{c(){n&&n.c(),e=Pe()},m(r,l){n&&n.m(r,l),$(r,e,l)},p(r,[l]){r[0]&&n.p(r,l)},i:E,o:E,d(r){n&&n.d(r),r&&y(e)}}}function qt(t,e,n){let{source:r}=e,l=new URL(r);return t.$$set=o=>{"source"in o&&n(1,r=o.source)},[l,r]}class Dt extends Y{constructor(e){super(),U(this,e,qt,Wt,D,{source:1})}}function Je(t,e,n){const r=t.slice();return r[1]=e[n],r}function Ve(t){let e,n,r;return n=new Dt({props:{source:t[0].source}}),{c(){e=b("div"),H(n.$$.fragment),u(e,"class","svelte-5x11c6")},m(l,o){$(l,e,o),W(n,e,null),r=!0},p(l,o){const i={};o&1&&(i.source=l[0].source),n.$set(i)},i(l){r||(S(n.$$.fragment,l),r=!0)},o(l){P(n.$$.fragment,l),r=!1},d(l){l&&y(e),q(n)}}}function Xe(t){let e,n;return e=new Bt({props:{name:t[1]}}),{c(){H(e.$$.fragment)},m(r,l){W(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.name=r[1]),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Ft(t){let e,n,r,l,o,i=Ze(t[0].created_at)+"",c,s,a,f,d,g,h=ne(t[0].score)+"",A,I,L,T,v,p=t[0].source&&Ve(t),N=t[0].tags,k=[];for(let C=0;C<N.length;C+=1)k[C]=Xe(Je(t,N,C));const z=C=>P(k[C],1,1,()=>{k[C]=null});return{c(){e=b("div"),n=b("div"),r=b("i"),l=M(),o=b("span"),c=G(i),s=M(),a=b("div"),f=b("i"),d=M(),g=b("span"),A=G(h),I=M(),p&&p.c(),L=M(),T=b("ul");for(let C=0;C<k.length;C+=1)k[C].c();u(r,"class","codicon codicon-calendar"),u(o,"class","svelte-5x11c6"),u(n,"class","svelte-5x11c6"),u(f,"class","codicon codicon-heart"),u(g,"class","svelte-5x11c6"),u(a,"class","svelte-5x11c6"),u(e,"class","summary svelte-5x11c6"),u(T,"class","svelte-5x11c6")},m(C,j){$(C,e,j),m(e,n),m(n,r),m(n,l),m(n,o),m(o,c),m(e,s),m(e,a),m(a,f),m(a,d),m(a,g),m(g,A),m(e,I),p&&p.m(e,null),$(C,L,j),$(C,T,j);for(let B=0;B<k.length;B+=1)k[B].m(T,null);v=!0},p(C,[j]){if((!v||j&1)&&i!==(i=Ze(C[0].created_at)+"")&&X(c,i),(!v||j&1)&&h!==(h=ne(C[0].score)+"")&&X(A,h),C[0].source?p?(p.p(C,j),j&1&&S(p,1)):(p=Ve(C),p.c(),S(p,1),p.m(e,null)):p&&(Z(),P(p,1,1,()=>{p=null}),J()),j&1){N=C[0].tags;let B;for(B=0;B<N.length;B+=1){const re=Je(C,N,B);k[B]?(k[B].p(re,j),S(k[B],1)):(k[B]=Xe(re),k[B].c(),S(k[B],1),k[B].m(T,null))}for(Z(),B=N.length;B<k.length;B+=1)z(B);J()}},i(C){if(!v){S(p);for(let j=0;j<N.length;j+=1)S(k[j]);v=!0}},o(C){P(p),k=k.filter(Boolean);for(let j=0;j<k.length;j+=1)P(k[j]);v=!1},d(C){C&&y(e),p&&p.d(),C&&y(L),C&&y(T),we(k,C)}}}function Ht(t,e,n){let{post:r}=e;return t.$$set=l=>{"post"in l&&n(0,r=l.post)},[r]}class Ut extends Y{constructor(e){super(),U(this,e,Ht,Ft,D,{post:0})}}function Yt(t){let e,n,r,l,o,i;return{c(){e=b("img"),u(e,"loading","lazy"),u(e,"data-src",n=t[0].sample_url),u(e,"alt",r=t[0].id.toString()),u(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),u(e,"width",o=t[0].width),u(e,"height",i=t[0].height),u(e,"class","svelte-1xnjrgd")},m(c,s){$(c,e,s),t[7](e)},p(c,s){s&1&&n!==(n=c[0].sample_url)&&u(e,"data-src",n),s&1&&r!==(r=c[0].id.toString())&&u(e,"alt",r),s&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&u(e,"style",l),s&1&&o!==(o=c[0].width)&&u(e,"width",o),s&1&&i!==(i=c[0].height)&&u(e,"height",i)},d(c){c&&y(e),t[7](null)}}}function Gt(t){let e,n,r,l,o,i;return{c(){e=b("video"),u(e,"preload","metadata"),u(e,"loading","lazy"),u(e,"data-src",n=t[0].sample_url),u(e,"alt",r=t[0].id.toString()),u(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),u(e,"width",o=t[0].width),u(e,"height",i=t[0].height),e.controls=!0,u(e,"class","svelte-1xnjrgd")},m(c,s){$(c,e,s),t[6](e)},p(c,s){s&1&&n!==(n=c[0].sample_url)&&u(e,"data-src",n),s&1&&r!==(r=c[0].id.toString())&&u(e,"alt",r),s&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&u(e,"style",l),s&1&&o!==(o=c[0].width)&&u(e,"width",o),s&1&&i!==(i=c[0].height)&&u(e,"height",i)},d(c){c&&y(e),t[6](null)}}}function Kt(t){let e,n,r,l,o,i;return{c(){e=b("img"),u(e,"loading","lazy"),u(e,"data-src",n=t[0].sample_url),u(e,"alt",r=t[0].id.toString()),u(e,"style",l=`aspect-ratio: ${t[0].width} / ${t[0].height}`),u(e,"width",o=t[0].width),u(e,"height",i=t[0].height),u(e,"class","svelte-1xnjrgd")},m(c,s){$(c,e,s),t[5](e)},p(c,s){s&1&&n!==(n=c[0].sample_url)&&u(e,"data-src",n),s&1&&r!==(r=c[0].id.toString())&&u(e,"alt",r),s&1&&l!==(l=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&u(e,"style",l),s&1&&o!==(o=c[0].width)&&u(e,"width",o),s&1&&i!==(i=c[0].height)&&u(e,"height",i)},d(c){c&&y(e),t[5](null)}}}function Qe(t){let e,n;return e=new Ut({props:{post:t[0]}}),{c(){H(e.$$.fragment)},m(r,l){W(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.post=r[0]),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Zt(t){let e,n,r,l,o,i;function c(d,g){return d[0].type==="image"?Kt:d[0].type==="video"?Gt:Yt}let s=c(t),a=s(t),f=t[2]&&Qe(t);return{c(){e=b("div"),n=b("div"),a.c(),r=M(),f&&f.c(),u(n,"class","content"),u(e,"class","post svelte-1xnjrgd"),u(e,"tabindex","0")},m(d,g){$(d,e,g),m(e,n),a.m(n,null),m(e,r),f&&f.m(e,null),l=!0,o||(i=F(n,"click",t[3]),o=!0)},p(d,[g]){s===(s=c(d))&&a?a.p(d,g):(a.d(1),a=s(d),a&&(a.c(),a.m(n,null))),d[2]?f?(f.p(d,g),g&4&&S(f,1)):(f=Qe(d),f.c(),S(f,1),f.m(e,null)):f&&(Z(),P(f,1,1,()=>{f=null}),J())},i(d){l||(S(f),l=!0)},o(d){P(f),l=!1},d(d){d&&y(e),a.d(),f&&f.d(),o=!1,i()}}}function Jt(t,e,n){let{post:r}=e,{observer:l}=e,o=!1,i;function c(){n(2,o=!o)}function s(d){fe[d?"unshift":"push"](()=>{i=d,n(1,i)})}function a(d){fe[d?"unshift":"push"](()=>{i=d,n(1,i)})}function f(d){fe[d?"unshift":"push"](()=>{i=d,n(1,i)})}return t.$$set=d=>{"post"in d&&n(0,r=d.post),"observer"in d&&n(4,l=d.observer)},t.$$.update=()=>{t.$$.dirty&18&&i&&l.observe(i)},[r,i,o,c,l,s,a,f]}class Vt extends Y{constructor(e){super(),U(this,e,Jt,Zt,D,{post:0,observer:4})}}function xe(t,e,n){const r=t.slice();return r[2]=e[n],r}function et(t){let e,n;return e=new Vt({props:{post:t[2],observer:t[1]}}),{c(){H(e.$$.fragment)},m(r,l){W(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.post=r[2]),l&2&&(o.observer=r[1]),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Xt(t){let e,n,r=t[0],l=[];for(let i=0;i<r.length;i+=1)l[i]=et(xe(t,r,i));const o=i=>P(l[i],1,1,()=>{l[i]=null});return{c(){e=b("ol");for(let i=0;i<l.length;i+=1)l[i].c();u(e,"class","page svelte-5hdzo")},m(i,c){$(i,e,c);for(let s=0;s<l.length;s+=1)l[s].m(e,null);n=!0},p(i,[c]){if(c&3){r=i[0];let s;for(s=0;s<r.length;s+=1){const a=xe(i,r,s);l[s]?(l[s].p(a,c),S(l[s],1)):(l[s]=et(a),l[s].c(),S(l[s],1),l[s].m(e,null))}for(Z(),s=r.length;s<l.length;s+=1)o(s);J()}},i(i){if(!n){for(let c=0;c<r.length;c+=1)S(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)P(l[c]);n=!1},d(i){i&&y(e),we(l,i)}}}function Qt(t,e,n){let{posts:r}=e,{observer:l}=e;return t.$$set=o=>{"posts"in o&&n(0,r=o.posts),"observer"in o&&n(1,l=o.observer)},[r,l]}class xt extends Y{constructor(e){super(),U(this,e,Qt,Xt,D,{posts:0,observer:1})}}function en(t){let e,n,r,l,o,i,c;return{c(){e=b("button"),n=b("i"),l=M(),o=G(t[1]),u(n,"class",r=`codicon codicon-${t[0]}`),u(e,"title",t[2]),u(e,"class","svelte-11z6t3c")},m(s,a){$(s,e,a),m(e,n),m(e,l),m(e,o),i||(c=F(e,"click",t[4]),i=!0)},p(s,[a]){a&1&&r!==(r=`codicon codicon-${s[0]}`)&&u(n,"class",r),a&2&&X(o,s[1]),a&4&&u(e,"title",s[2])},i:E,o:E,d(s){s&&y(e),i=!1,c()}}}function tn(t,e,n){let{icon:r}=e,{text:l}=e,{title:o}=e;const i=me(),c=()=>i("click");return t.$$set=s=>{"icon"in s&&n(0,r=s.icon),"text"in s&&n(1,l=s.text),"title"in s&&n(2,o=s.title)},[r,l,o,i,c]}class nn extends Y{constructor(e){super(),U(this,e,tn,en,D,{icon:0,text:1,title:2})}}function Ce(t){return e=>{(e.code==="Space"||e.code==="Enter")&&(e.preventDefault(),e.stopPropagation(),t())}}function rn(t){let e,n,r,l;return{c(){e=b("i"),u(e,"title",t[0]),u(e,"class",n=ge(`codicon codicon-${t[1]}`)+" svelte-182enqy"),u(e,"tabindex","0"),x(e,"active",t[2])},m(o,i){$(o,e,i),r||(l=[F(e,"click",t[3]),F(e,"keydown",Ce(t[3]))],r=!0)},p(o,[i]){i&1&&u(e,"title",o[0]),i&2&&n!==(n=ge(`codicon codicon-${o[1]}`)+" svelte-182enqy")&&u(e,"class",n),i&6&&x(e,"active",o[2])},i:E,o:E,d(o){o&&y(e),r=!1,Q(l)}}}function ln(t,e,n){let{title:r=void 0}=e,{icon:l}=e,{active:o}=e;const i=me(),c=()=>i("click");return t.$$set=s=>{"title"in s&&n(0,r=s.title),"icon"in s&&n(1,l=s.icon),"active"in s&&n(2,o=s.active)},[r,l,o,c]}class on extends Y{constructor(e){super(),U(this,e,ln,rn,D,{title:0,icon:1,active:2})}}function sn(t){let e,n;return{c(){e=b("i"),u(e,"class",n=`codicon codicon-${t[1][t[0]]}`)},m(r,l){$(r,e,l)},p(r,[l]){l&1&&n!==(n=`codicon codicon-${r[1][r[0]]}`)&&u(e,"class",n)},i:E,o:E,d(r){r&&y(e)}}}function cn(t,e,n){let{type:r}=e;const l={artist:"edit",character:"person",copyright:"folder",metadata:"info",rating:"unverified",source:"link",supertag:"star-full"};return t.$$set=o=>{"type"in o&&n(0,r=o.type)},[r,l]}class pt extends Y{constructor(e){super(),U(this,e,cn,sn,D,{type:0})}}const Be={"+":"plus","-":"circle-slash","~":"record"},tt={"+":"Included. Tags will be included in the search.","-":"Blocked. Tags will be blocked.","~":"Optional. At least one of all optional tags will on each post."},Ie=Object.keys(Be);function an(t){let e,n,r,l,o;return{c(){e=b("i"),u(e,"tabindex","0"),u(e,"class",n=ge(`codicon codicon-${Be[t[0]]}`)+" svelte-182enqy"),u(e,"title",r=tt[t[0]])},m(i,c){$(i,e,c),l||(o=[F(e,"click",t[1]),F(e,"keydown",Ce(t[1]))],l=!0)},p(i,[c]){c&1&&n!==(n=ge(`codicon codicon-${Be[i[0]]}`)+" svelte-182enqy")&&u(e,"class",n),c&1&&r!==(r=tt[i[0]])&&u(e,"title",r)},i:E,o:E,d(i){i&&y(e),l=!1,Q(o)}}}function un(t,e,n){let r="+";const l=me();function o(){const i=(Ie.indexOf(r)+1)%Ie.length;n(0,r=Ie[i]),l("change",r)}return[r,o]}class fn extends Y{constructor(e){super(),U(this,e,un,an,D,{})}}function dn(t){let e;return{c(){e=b("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 20" enable-background="new 0 0 0 0" class="svelte-166gq1d"><circle fill="currentcolor" stroke="none" cx="6" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.1"></animate></circle><circle fill="currentcolor" stroke="none" cx="25" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.2"></animate></circle><circle fill="currentcolor" stroke="none" cx="44" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.3"></animate></circle></svg>'},m(n,r){$(n,e,r)},p:E,i:E,o:E,d(n){n&&y(e)}}}class _n extends Y{constructor(e){super(),U(this,e,null,dn,D,{})}}function nt(t,e,n){const r=t.slice();return r[21]=e[n],r}function gn(t){var c;let e,n,r,l,o=((c=t[3])==null?void 0:c.message)+"",i;return{c(){e=b("div"),n=b("i"),r=M(),l=b("span"),i=G(o),u(n,"class",ge("codicon codicon-error")+" svelte-9be82"),u(e,"class","error-container svelte-9be82")},m(s,a){$(s,e,a),m(e,n),m(e,r),m(e,l),m(l,i)},p(s,a){var f;a&8&&o!==(o=((f=s[3])==null?void 0:f.message)+"")&&X(i,o)},i:E,o:E,d(s){s&&y(e)}}}function hn(t){let e,n,r=t[4],l=[];for(let i=0;i<r.length;i+=1)l[i]=rt(nt(t,r,i));const o=i=>P(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Pe()},m(i,c){for(let s=0;s<l.length;s+=1)l[s].m(i,c);$(i,e,c),n=!0},p(i,c){if(c&541){r=i[4];let s;for(s=0;s<r.length;s+=1){const a=nt(i,r,s);l[s]?(l[s].p(a,c),S(l[s],1)):(l[s]=rt(a),l[s].c(),S(l[s],1),l[s].m(e.parentNode,e))}for(Z(),s=r.length;s<l.length;s+=1)o(s);J()}},i(i){if(!n){for(let c=0;c<r.length;c+=1)S(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)P(l[c]);n=!1},d(i){we(l,i),i&&y(e)}}}function rt(t){let e,n,r,l,o=pe(t[21].name)+"",i,c,s,a,f=ne(t[21].count)+"",d,g,h,A,I;n=new pt({props:{type:Re(t[21].types)}});function L(){return t[18](t[21])}return{c(){e=b("li"),H(n.$$.fragment),r=M(),l=b("span"),i=G(o),s=M(),a=b("span"),d=G(f),g=M(),u(l,"title",c=t[21].name),u(l,"class","tag-name svelte-9be82"),u(a,"class","tag-count"),u(e,"tabindex","0"),u(e,"class","svelte-9be82")},m(T,v){$(T,e,v),W(n,e,null),m(e,r),m(e,l),m(l,i),m(e,s),m(e,a),m(a,d),m(e,g),h=!0,A||(I=F(e,"click",L),A=!0)},p(T,v){t=T;const p={};v&16&&(p.type=Re(t[21].types)),n.$set(p),(!h||v&16)&&o!==(o=pe(t[21].name)+"")&&X(i,o),(!h||v&16&&c!==(c=t[21].name))&&u(l,"title",c),(!h||v&16)&&f!==(f=ne(t[21].count)+"")&&X(d,f)},i(T){h||(S(n.$$.fragment,T),h=!0)},o(T){P(n.$$.fragment,T),h=!1},d(T){T&&y(e),q(n),A=!1,I()}}}function pn(t){let e,n,r;return n=new _n({}),{c(){e=b("div"),H(n.$$.fragment),u(e,"class","hint-container svelte-9be82")},m(l,o){$(l,e,o),W(n,e,null),r=!0},p:E,i(l){r||(S(n.$$.fragment,l),r=!0)},o(l){P(n.$$.fragment,l),r=!1},d(l){l&&y(e),q(n)}}}function mn(t){let e,n,r,l,o,i,c,s,a,f,d,g,h,A,I,L;i=new fn({}),i.$on("change",t[14]),s=new on({props:{icon:"whole-word",title:"Toggle exact search term matching",active:!t[1]}}),s.$on("click",t[15]);let T={ctx:t,current:null,token:null,hasCatch:!0,pending:pn,then:hn,catch:gn,blocks:[,,,]};return Ke(h=t[5],T),{c(){e=b("div"),n=b("i"),r=M(),l=b("input"),o=M(),H(i.$$.fragment),c=M(),H(s.$$.fragment),a=M(),f=b("i"),d=M(),g=b("ol"),T.block.c(),u(n,"class","codicon codicon-search"),u(l,"type","text"),u(l,"aria-label","Search for tags."),u(l,"class","svelte-9be82"),u(f,"tabindex","0"),u(f,"class",ge("codicon codicon-question")+" svelte-9be82"),u(g,"class","svelte-9be82"),x(g,"open",t[7]),u(e,"class","searchbar svelte-9be82"),x(e,"open",t[7])},m(v,p){$(v,e,p),m(e,n),m(e,r),m(e,l),Ye(l,t[0]),m(e,o),W(i,e,null),m(e,c),W(s,e,null),m(e,a),m(e,f),m(e,d),m(e,g),T.block.m(g,T.anchor=null),T.mount=()=>g,T.anchor=null,A=!0,I||(L=[F(l,"input",t[11]),F(l,"blur",t[12]),F(l,"focus",t[13]),F(f,"click",t[16]),F(f,"keydown",function(){_t(Ce(t[17]))&&Ce(t[17]).apply(this,arguments)}),F(e,"blur",t[19])],I=!0)},p(v,[p]){t=v,p&1&&l.value!==t[0]&&Ye(l,t[0]);const N={};p&2&&(N.active=!t[1]),s.$set(N),T.ctx=t,p&32&&h!==(h=t[5])&&Ke(h,T)||Ct(T,t,p),p&128&&x(g,"open",t[7]),p&128&&x(e,"open",t[7])},i(v){A||(S(i.$$.fragment,v),S(s.$$.fragment,v),S(T.block),A=!0)},o(v){P(i.$$.fragment,v),P(s.$$.fragment,v);for(let p=0;p<3;p+=1){const N=T.blocks[p];P(N)}A=!1},d(v){v&&y(e),q(i),q(s),T.block.d(),T.token=null,T=null,I=!1,Q(L)}}}function vn(t,e,n){let r,l;oe(t,de,j=>n(8,l=j));const o=me();let i,c,s="",a=!0,f="+",d=!1,g,h=[];async function A(j,B){n(2,d=!0);const re=j?`*${B}*`:B,V=await fetch(`https://r34-json.herokuapp.com/v2/tags?limit=20&sort=count&name=${re.replaceAll(" ","_")}`,{signal:i.signal}),R=await V.json();if(V.ok?Array.isArray(R)?R.length==0?n(3,g=new Error("No tags found")):n(4,h=R):R.message?n(3,g=new Error(R.message)):n(3,g=new Error("Cannot display tag suggestions")):n(3,g=new Error("Failed to get tag suggestions")),g)throw g}function I(){s=this.value,n(0,s)}const L=j=>{(!j.relatedTarget||!j.target.parentNode.contains(j.relatedTarget))&&n(2,d=!1)},T=()=>{n(2,d=!0)},v=j=>{n(6,f=j.detail)},p=()=>{n(1,a=!a)},N=()=>{Ne(de,l="help",l)},k=()=>{Ne(de,l="help",l)},z=j=>{o("pick",j),n(0,s=""),n(3,g=void 0),n(4,h=[]),n(2,d=!1)},C=()=>{n(2,d=!1)};return t.$$.update=()=>{t.$$.dirty&1027&&(n(3,g=void 0),n(4,h=[]),i!==void 0&&i.abort("Newer search term entered"),s!==""&&(n(10,i=new AbortController),n(5,c=A(a,s)))),t.$$.dirty&28&&n(7,r=d&&(g||h.length>0))},[s,a,d,g,h,c,f,r,l,o,i,I,L,T,v,p,N,k,z,C]}class bn extends Y{constructor(e){super(),U(this,e,vn,mn,D,{})}}function kn(t){let e,n,r,l=pe(t[0].name)+"",o,i,c=ne(t[0].count)+"",s,a,f,d,g;return n=new pt({props:{type:t[2]}}),{c(){e=b("li"),H(n.$$.fragment),r=M(),o=G(l),i=G(`
  (`),s=G(c),a=G(")"),u(e,"tabindex","0"),u(e,"title","Click to remove tag"),u(e,"class","svelte-1roatda"),x(e,"no-icon",t[2]===null)},m(h,A){$(h,e,A),W(n,e,null),m(e,r),m(e,o),m(e,i),m(e,s),m(e,a),f=!0,d||(g=F(e,"click",t[3]),d=!0)},p(h,[A]){(!f||A&1)&&l!==(l=pe(h[0].name)+"")&&X(o,l),(!f||A&1)&&c!==(c=ne(h[0].count)+"")&&X(s,c)},i(h){f||(S(n.$$.fragment,h),f=!0)},o(h){P(n.$$.fragment,h),f=!1},d(h){h&&y(e),q(n),d=!1,g()}}}function wn(t,e,n){let{tag:r}=e;const l=me(),o=Re(r.types),i=()=>l("click");return t.$$set=c=>{"tag"in c&&n(0,r=c.tag)},[r,l,o,i]}class yn extends Y{constructor(e){super(),U(this,e,wn,kn,D,{tag:0})}}function $n(t){let e;return{c(){e=b("div")},m(n,r){$(n,e,r),t[1](e)},p:E,i:E,o:E,d(n){n&&y(e),t[1](null)}}}function Sn(t,e,n){const r=me(),l=new IntersectionObserver(c=>{c[0].isIntersecting&&(console.debug("Triggered infinite loading"),r("visible"))},{rootMargin:"1250px"});let o;function i(c){fe[c?"unshift":"push"](()=>{o=c,n(0,o)})}return t.$$.update=()=>{t.$$.dirty&1&&(l.disconnect(),o&&l.observe(o))},[o,i]}class En extends Y{constructor(e){super(),U(this,e,Sn,$n,D,{})}}var Tn="/kurosearch/assets/shironeko-confused.4071d5b2.png";function Cn(t){let e,n,r,l,o;return{c(){e=b("div"),n=b("img"),l=M(),o=b("span"),o.textContent="No results found",gt(n.src,r=Tn)||u(n,"src",r),u(n,"alt","No results."),u(o,"class","svelte-10fem3h"),u(e,"class","svelte-10fem3h")},m(i,c){$(i,e,c),m(e,n),m(e,l),m(e,o)},p:E,i:E,o:E,d(i){i&&y(e)}}}class Pn extends Y{constructor(e){super(),U(this,e,null,Cn,D,{})}}var An="/kurosearch/assets/shironeko-x.c28cad00.png";function In(t){let e,n,r,l,o;return{c(){e=b("div"),n=b("img"),l=M(),o=b("span"),o.textContent="You have reached the end",gt(n.src,r=An)||u(n,"src",r),u(n,"alt","No results."),u(o,"class","svelte-1rtbqa7"),u(e,"class","svelte-1rtbqa7")},m(i,c){$(i,e,c),m(e,n),m(e,l),m(e,o)},p:E,i:E,o:E,d(i){i&&y(e)}}}class Ln extends Y{constructor(e){super(),U(this,e,null,In,D,{})}}function lt(t,e,n){const r=t.slice();return r[17]=e[n],r}function it(t,e,n){const r=t.slice();return r[20]=e[n],r[22]=n,r}function ot(t){let e,n;function r(){return t[11](t[22])}return e=new yn({props:{tag:t[20]}}),e.$on("click",r),{c(){H(e.$$.fragment)},m(l,o){W(e,l,o),n=!0},p(l,o){t=l;const i={};o&64&&(i.tag=t[20]),e.$set(i)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){P(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function jn(t){let e,n;return e=new Pn({}),{c(){H(e.$$.fragment)},m(r,l){W(e,r,l),n=!0},p:E,i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Nn(t){let e,n=ne(t[0])+"",r,l,o,i,c,s,a,f,d,g=t[1],h=[];for(let v=0;v<g.length;v+=1)h[v]=st(lt(t,g,v));const A=v=>P(h[v],1,1,()=>{h[v]=null}),I=[On,Mn],L=[];function T(v,p){return v[1].length<v[5]?0:1}return s=T(t),a=L[s]=I[s](t),{c(){e=b("p"),r=G(n),l=G(" results"),o=M(),i=b("ol");for(let v=0;v<h.length;v+=1)h[v].c();c=M(),a.c(),f=Pe(),u(e,"class","count svelte-1c8tnn7"),u(i,"class","svelte-1c8tnn7")},m(v,p){$(v,e,p),m(e,r),m(e,l),$(v,o,p),$(v,i,p);for(let N=0;N<h.length;N+=1)h[N].m(i,null);$(v,c,p),L[s].m(v,p),$(v,f,p),d=!0},p(v,p){if((!d||p&1)&&n!==(n=ne(v[0])+"")&&X(r,n),p&130){g=v[1];let k;for(k=0;k<g.length;k+=1){const z=lt(v,g,k);h[k]?(h[k].p(z,p),S(h[k],1)):(h[k]=st(z),h[k].c(),S(h[k],1),h[k].m(i,null))}for(Z(),k=g.length;k<h.length;k+=1)A(k);J()}let N=s;s=T(v),s===N?L[s].p(v,p):(Z(),P(L[N],1,1,()=>{L[N]=null}),J(),a=L[s],a?a.p(v,p):(a=L[s]=I[s](v),a.c()),S(a,1),a.m(f.parentNode,f))},i(v){if(!d){for(let p=0;p<g.length;p+=1)S(h[p]);S(a),d=!0}},o(v){h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)P(h[p]);P(a),d=!1},d(v){v&&y(e),v&&y(o),v&&y(i),we(h,v),v&&y(c),L[s].d(v),v&&y(f)}}}function st(t){let e,n;return e=new xt({props:{posts:t[17],observer:t[7]}}),{c(){H(e.$$.fragment)},m(r,l){W(e,r,l),n=!0},p(r,l){const o={};l&2&&(o.posts=r[17]),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Mn(t){let e,n;return e=new Ln({}),{c(){H(e.$$.fragment)},m(r,l){W(e,r,l),n=!0},p:E,i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function On(t){let e,n;return e=new En({}),e.$on("visible",t[14]),{c(){H(e.$$.fragment)},m(r,l){W(e,r,l),n=!0},p:E,i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Rn(t){let e,n,r,l,o,i,c,s,a,f,d,g,h,A,I,L,T,v,p,N,k,z,C,j,B,re;r=new bn({}),r.$on("pick",t[10]);let V=[...t[6]],R=[];for(let w=0;w<V.length;w+=1)R[w]=ot(it(t,V,w));const mt=w=>P(R[w],1,1,()=>{R[w]=null});s=new nn({props:{title:"Click to search with active tags",icon:"search",text:"Search"}}),s.$on("click",t[8]);const De=[Nn,jn],te=[];function Fe(w,O){return w[0]?0:w[0]===0?1:-1}return~(k=Fe(t))&&(z=te[k]=De[k](t)),{c(){e=b("h1"),e.textContent="kurosearch",n=M(),H(r.$$.fragment),l=M(),o=b("ul");for(let w=0;w<R.length;w+=1)R[w].c();i=M(),c=b("div"),H(s.$$.fragment),a=M(),f=b("div"),d=b("select"),g=b("option"),g.textContent="New posts",h=b("option"),h.textContent="Popular posts",A=M(),I=b("select"),L=b("option"),L.textContent="No minimum score",T=b("option"),T.textContent="Min 10 likes",v=b("option"),v.textContent="Min 100 likes",p=b("option"),p.textContent="Min 1000 likes",N=M(),z&&z.c(),C=Pe(),u(e,"class","svelte-1c8tnn7"),u(o,"class","svelte-1c8tnn7"),u(c,"class","sort-row svelte-1c8tnn7"),g.__value="id",g.value=g.__value,h.__value="score",h.value=h.__value,u(d,"class","svelte-1c8tnn7"),t[2]===void 0&&he(()=>t[12].call(d)),L.__value="0",L.value=L.__value,T.__value="10",T.value=T.__value,v.__value="100",v.value=v.__value,p.__value="1000",p.value=p.__value,u(I,"class","svelte-1c8tnn7"),t[3]===void 0&&he(()=>t[13].call(I)),u(f,"class","sort-row svelte-1c8tnn7")},m(w,O){$(w,e,O),$(w,n,O),W(r,w,O),$(w,l,O),$(w,o,O);for(let le=0;le<R.length;le+=1)R[le].m(o,null);$(w,i,O),$(w,c,O),W(s,c,null),$(w,a,O),$(w,f,O),m(f,d),m(d,g),m(d,h),ue(d,t[2]),m(f,A),m(f,I),m(I,L),m(I,T),m(I,v),m(I,p),ue(I,t[3]),$(w,N,O),~k&&te[k].m(w,O),$(w,C,O),j=!0,B||(re=[F(d,"change",t[12]),F(I,"change",t[13])],B=!0)},p(w,[O]){if(O&64){V=[...w[6]];let K;for(K=0;K<V.length;K+=1){const He=it(w,V,K);R[K]?(R[K].p(He,O),S(R[K],1)):(R[K]=ot(He),R[K].c(),S(R[K],1),R[K].m(o,null))}for(Z(),K=V.length;K<R.length;K+=1)mt(K);J()}O&4&&ue(d,w[2]),O&8&&ue(I,w[3]);let le=k;k=Fe(w),k===le?~k&&te[k].p(w,O):(z&&(Z(),P(te[le],1,1,()=>{te[le]=null}),J()),~k?(z=te[k],z?z.p(w,O):(z=te[k]=De[k](w),z.c()),S(z,1),z.m(C.parentNode,C)):z=null)},i(w){if(!j){S(r.$$.fragment,w);for(let O=0;O<V.length;O+=1)S(R[O]);S(s.$$.fragment,w),S(z),j=!0}},o(w){P(r.$$.fragment,w),R=R.filter(Boolean);for(let O=0;O<R.length;O+=1)P(R[O]);P(s.$$.fragment,w),P(z),j=!1},d(w){w&&y(e),w&&y(n),q(r,w),w&&y(l),w&&y(o),we(R,w),w&&y(i),w&&y(c),q(s),w&&y(a),w&&y(f),w&&y(N),~k&&te[k].d(w),w&&y(C),B=!1,Q(re)}}}const ct=20;function Bn(t,e,n){let r,l;oe(t,_e,p=>n(6,l=p));const o=new IntersectionObserver(p=>{for(const N of p)N.target.src=N.isIntersecting?N.target.getAttribute("data-src"):""},{rootMargin:"1250px"});let i,c=[],s="id",a="0",f=null,d=0;function g(){n(1,c=[]),n(0,f=null),i!==void 0&&i.abort("New search triggered"),n(4,d=0),i=new AbortController,h(n(4,d++,d))}async function h(p){const N=[...l.map(C=>C.name),`sort:${s}:desc`,`score:>=${a}`].filter(C=>C!=null&&C!=="").map(encodeURIComponent).join("+"),k=await fetch(`https://r34-json.herokuapp.com/v2/posts?limit=${ct}&pid=${p}&tags=${N}`,{signal:i.signal}),z=await k.json();if(k.ok)return n(0,f=z.count),n(1,c=[...c,z.posts]),z;throw new Error("fuck")}const A=p=>_e.add(p.detail),I=p=>_e.removeByIndex(p);function L(){s=Me(this),n(2,s)}function T(){a=Me(this),n(3,a)}const v=()=>h(n(4,d++,d));return t.$$.update=()=>{t.$$.dirty&1&&n(5,r=f/ct)},[f,c,s,a,d,r,l,o,g,h,A,I,L,T,v]}class zn extends Y{constructor(e){super(),U(this,e,Bn,Rn,D,{})}}const ze=qe("dark");function Wn(t){let e,n,r,l,o;return{c(){e=b("select"),n=b("option"),n.textContent="Dark",r=b("option"),r.textContent="Light",n.__value="dark",n.value=n.__value,r.__value="light",r.value=r.__value,t[0]===void 0&&he(()=>t[1].call(e))},m(i,c){$(i,e,c),m(e,n),m(e,r),ue(e,t[0]),l||(o=F(e,"change",t[1]),l=!0)},p(i,[c]){c&1&&ue(e,i[0])},i:E,o:E,d(i){i&&y(e),l=!1,o()}}}function qn(t,e,n){let r;oe(t,ze,o=>n(0,r=o));function l(){r=Me(this),ze.set(r)}return[r,l]}class Dn extends Y{constructor(e){super(),U(this,e,qn,Wn,D,{})}}function Fn(t){let e;return{c(){e=b("section"),e.innerHTML=`<h2>Tags</h2> 

  <p>All search functionality in this app is based on tags.</p>`,u(e,"id","tags")},m(n,r){$(n,e,r)},p:E,i:E,o:E,d(n){n&&y(e)}}}class Hn extends Y{constructor(e){super(),U(this,e,null,Fn,D,{})}}function Un(t){let e;return{c(){e=b("p"),e.textContent="You got lost..."},m(n,r){$(n,e,r)},i:E,o:E,d(n){n&&y(e)}}}function Yn(t){let e,n;return e=new Hn({}),{c(){H(e.$$.fragment)},m(r,l){W(e,r,l),n=!0},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Gn(t){let e,n;return e=new Dn({}),{c(){H(e.$$.fragment)},m(r,l){W(e,r,l),n=!0},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Kn(t){let e;return{c(){e=b("p"),e.textContent="account"},m(n,r){$(n,e,r)},i:E,o:E,d(n){n&&y(e)}}}function Zn(t){let e,n;return e=new zn({}),{c(){H(e.$$.fragment)},m(r,l){W(e,r,l),n=!0},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Jn(t){let e,n,r,l,o,i;e=new Nt({});const c=[Zn,Kn,Gn,Yn,Un],s=[];function a(f,d){return f[0]==="search"?0:f[0]==="account"?1:f[0]==="settings"?2:f[0]==="help"?3:4}return l=a(t),o=s[l]=c[l](t),{c(){H(e.$$.fragment),n=M(),r=b("main"),o.c(),u(r,"class","svelte-a5xxz8")},m(f,d){W(e,f,d),$(f,n,d),$(f,r,d),s[l].m(r,null),i=!0},p(f,[d]){let g=l;l=a(f),l!==g&&(Z(),P(s[g],1,1,()=>{s[g]=null}),J(),o=s[l],o||(o=s[l]=c[l](f),o.c()),S(o,1),o.m(r,null))},i(f){i||(S(e.$$.fragment,f),S(o),i=!0)},o(f){P(e.$$.fragment,f),P(o),i=!1},d(f){q(e,f),f&&y(n),f&&y(r),s[l].d()}}}function Vn(t,e,n){let r,l;oe(t,ze,i=>n(1,r=i)),oe(t,de,i=>n(0,l=i));const o=i=>i==="dark"?"light":"dark";return t.$$.update=()=>{t.$$.dirty&2&&document.body.classList.replace(o(r),r)},[l,r]}class Xn extends Y{constructor(e){super(),U(this,e,Vn,Jn,D,{})}}try{self["workbox:window:6.5.2"]&&_()}catch{}function at(t,e){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(l){n(l.data)},t.postMessage(e,[r.port2])})}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ut(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xn(t,e){var n;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=function(l,o){if(l){if(typeof l=="string")return ut(l,o);var i=Object.prototype.toString.call(l).slice(8,-1);return i==="Object"&&l.constructor&&(i=l.constructor.name),i==="Map"||i==="Set"?Array.from(l):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ut(l,o):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=t[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.2"]&&_()}catch{}var Le=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function je(t,e){var n=location.href;return new URL(t,n).href===new URL(e,n).href}var ve=function(t,e){this.type=t,Object.assign(this,e)};function Se(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function er(){}var tr={type:"SKIP_WAITING"};function ft(t,e){if(!e)return t&&t.then?t.then(er):Promise.resolve()}var nr=function(t){var e,n;function r(c,s){var a,f;return s===void 0&&(s={}),(a=t.call(this)||this).nn={},a.tn=0,a.rn=new Le,a.en=new Le,a.on=new Le,a.un=0,a.an=new Set,a.cn=function(){var d=a.fn,g=d.installing;a.tn>0||!je(g.scriptURL,a.sn.toString())||performance.now()>a.un+6e4?(a.vn=g,d.removeEventListener("updatefound",a.cn)):(a.hn=g,a.an.add(g),a.rn.resolve(g)),++a.tn,g.addEventListener("statechange",a.ln)},a.ln=function(d){var g=a.fn,h=d.target,A=h.state,I=h===a.vn,L={sw:h,isExternal:I,originalEvent:d};!I&&a.mn&&(L.isUpdate=!0),a.dispatchEvent(new ve(A,L)),A==="installed"?a.wn=self.setTimeout(function(){A==="installed"&&g.waiting===h&&a.dispatchEvent(new ve("waiting",L))},200):A==="activating"&&(clearTimeout(a.wn),I||a.en.resolve(h))},a.dn=function(d){var g=a.hn,h=g!==navigator.serviceWorker.controller;a.dispatchEvent(new ve("controlling",{isExternal:h,originalEvent:d,sw:g,isUpdate:a.mn})),h||a.on.resolve(g)},a.gn=(f=function(d){var g=d.data,h=d.ports,A=d.source;return Se(a.getSW(),function(){a.an.has(A)&&a.dispatchEvent(new ve("message",{data:g,originalEvent:d,ports:h,sw:A}))})},function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];try{return Promise.resolve(f.apply(this,d))}catch(h){return Promise.reject(h)}}),a.sn=c,a.nn=s,navigator.serviceWorker.addEventListener("message",a.gn),a}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var l,o,i=r.prototype;return i.register=function(c){var s=(c===void 0?{}:c).immediate,a=s!==void 0&&s;try{var f=this;return function(d,g){var h=d();return h&&h.then?h.then(g):g(h)}(function(){if(!a&&document.readyState!=="complete")return ft(new Promise(function(d){return window.addEventListener("load",d)}))},function(){return f.mn=Boolean(navigator.serviceWorker.controller),f.yn=f.pn(),Se(f.bn(),function(d){f.fn=d,f.yn&&(f.hn=f.yn,f.en.resolve(f.yn),f.on.resolve(f.yn),f.yn.addEventListener("statechange",f.ln,{once:!0}));var g=f.fn.waiting;return g&&je(g.scriptURL,f.sn.toString())&&(f.hn=g,Promise.resolve().then(function(){f.dispatchEvent(new ve("waiting",{sw:g,wasWaitingBeforeRegister:!0}))}).then(function(){})),f.hn&&(f.rn.resolve(f.hn),f.an.add(f.hn)),f.fn.addEventListener("updatefound",f.cn),navigator.serviceWorker.addEventListener("controllerchange",f.dn),f.fn})})}catch(d){return Promise.reject(d)}},i.update=function(){try{return this.fn?ft(this.fn.update()):void 0}catch(c){return Promise.reject(c)}},i.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},i.messageSW=function(c){try{return Se(this.getSW(),function(s){return at(s,c)})}catch(s){return Promise.reject(s)}},i.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&at(this.fn.waiting,tr)},i.pn=function(){var c=navigator.serviceWorker.controller;return c&&je(c.scriptURL,this.sn.toString())?c:void 0},i.bn=function(){try{var c=this;return function(s,a){try{var f=s()}catch(d){return a(d)}return f&&f.then?f.then(void 0,a):f}(function(){return Se(navigator.serviceWorker.register(c.sn,c.nn),function(s){return c.un=performance.now(),s})},function(s){throw s})}catch(s){return Promise.reject(s)}},l=r,(o=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&Qn(l.prototype,o),r}(function(){function t(){this.Pn=new Map}var e=t.prototype;return e.addEventListener=function(n,r){this.Sn(n).add(r)},e.removeEventListener=function(n,r){this.Sn(n).delete(r)},e.dispatchEvent=function(n){n.target=this;for(var r,l=xn(this.Sn(n.type));!(r=l()).done;)(0,r.value)(n)},e.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},t}());function rr(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:l,onRegisterError:o}=t;let i;const c=async(s=!0)=>{};return"serviceWorker"in navigator&&(i=new nr("/kurosearch/sw.js",{scope:"/kurosearch/",type:"classic"}),i.addEventListener("activated",s=>{s.isUpdate?window.location.reload():r==null||r()}),i.register({immediate:e}).then(s=>{l==null||l(s)}).catch(s=>{o==null||o(s)})),c}new Xn({target:document.getElementById("app")});rr();
