const st=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};st();function j(){}function ct(t){return t&&typeof t=="object"&&typeof t.then=="function"}function tt(t){return t()}function Le(){return Object.create(null)}function re(t){t.forEach(tt)}function ut(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let fe;function nt(t,e){return fe||(fe=document.createElement("a")),fe.href=e,t===fe.href}function at(t){return Object.keys(t).length===0}function ft(t,...e){if(t==null)return j;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function me(t,e,n){t.$$.on_destroy.push(ft(e,n))}function Oe(t){return t==null?"":t}function w(t,e){t.appendChild(e)}function P(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode.removeChild(t)}function ce(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function D(t){return document.createTextNode(t)}function N(){return D(" ")}function ue(){return D("")}function U(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function dt(t){return Array.from(t.childNodes)}function G(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ne(t,e){t.value=e==null?"":e}function gt(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function pe(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function rt(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function _t(t,e,n){t.classList[n?"add":"remove"](e)}function ht(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}let oe;function K(t){oe=t}function it(){if(!oe)throw new Error("Function called outside component initialization");return oe}function J(){const t=it();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=ht(e,n,{cancelable:r});return i.slice().forEach(l=>{l.call(t,s)}),!s.defaultPrevented}return!0}}const le=[],ee=[],_e=[],ze=[],mt=Promise.resolve();let ye=!1;function pt(){ye||(ye=!0,mt.then(Ce))}function se(t){_e.push(t)}const ve=new Set;let de=0;function Ce(){const t=oe;do{for(;de<le.length;){const e=le[de];de++,K(e),vt(e.$$)}for(K(null),le.length=0,de=0;ee.length;)ee.pop()();for(let e=0;e<_e.length;e+=1){const n=_e[e];ve.has(n)||(ve.add(n),n())}_e.length=0}while(le.length);for(;ze.length;)ze.pop()();ye=!1,ve.clear(),K(t)}function vt(t){if(t.fragment!==null){t.update(),re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(se)}}const he=new Set;let Z;function H(){Z={r:0,c:[],p:Z}}function Y(){Z.r||re(Z.c),Z=Z.p}function v(t,e){t&&t.i&&(he.delete(t),t.i(e))}function b(t,e,n,r){if(t&&t.o){if(he.has(t))return;he.add(t),Z.c.push(()=>{he.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function Re(t,e){const n=e.token={};function r(i,s,l,c){if(e.token!==n)return;e.resolved=c;let o=e.ctx;l!==void 0&&(o=o.slice(),o[l]=c);const u=i&&(e.current=i)(o);let a=!1;e.block&&(e.blocks?e.blocks.forEach((g,f)=>{f!==s&&g&&(H(),b(g,1,1,()=>{e.blocks[f]===g&&(e.blocks[f]=null)}),Y())}):e.block.d(1),u.c(),v(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[s]=u),a&&Ce()}if(ct(t)){const i=it();if(t.then(s=>{K(i),r(e.then,1,e.value,s),K(null)},s=>{if(K(i),r(e.catch,2,e.error,s),K(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function bt(t,e,n){const r=e.slice(),{resolved:i}=t;t.current===t.then&&(r[t.value]=i),t.current===t.catch&&(r[t.error]=i),t.block.p(r,n)}function L(t){t&&t.c()}function I(t,e,n,r){const{fragment:i,on_mount:s,on_destroy:l,after_update:c}=t.$$;i&&i.m(e,n),r||se(()=>{const o=s.map(tt).filter(ut);l?l.push(...o):re(o),t.$$.on_mount=[]}),c.forEach(se)}function T(t,e){const n=t.$$;n.fragment!==null&&(re(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function $t(t,e){t.$$.dirty[0]===-1&&(le.push(t),pt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function M(t,e,n,r,i,s,l,c=[-1]){const o=oe;K(t);const u=t.$$={fragment:null,ctx:null,props:s,update:j,not_equal:i,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Le(),dirty:c,skip_bound:!1,root:e.target||o.$$.root};l&&l(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(g,f,...d)=>{const m=d.length?d[0]:f;return u.ctx&&i(u.ctx[g],u.ctx[g]=m)&&(!u.skip_bound&&u.bound[g]&&u.bound[g](m),a&&$t(t,g)),f}):[],u.update(),a=!0,re(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const g=dt(e.target);u.fragment&&u.fragment.l(g),g.forEach(E)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),I(t,e.target,e.anchor,e.customElement),Ce()}K(o)}class W{$destroy(){T(this,1),this.$destroy=j}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!at(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function kt(t){let e,n,r,i;return{c(){e=k("i"),h(e,"title",t[0]),h(e,"class",n=`codicon codicon-${t[1]}`),h(e,"tabindex","0")},m(s,l){P(s,e,l),r||(i=U(e,"click",t[3]),r=!0)},p(s,[l]){l&1&&h(e,"title",s[0]),l&2&&n!==(n=`codicon codicon-${s[1]}`)&&h(e,"class",n)},i:j,o:j,d(s){s&&E(e),r=!1,i()}}}function wt(t,e,n){let{title:r=void 0}=e,{icon:i}=e;const s=J(),l=()=>s("click");return t.$$set=c=>{"title"in c&&n(0,r=c.title),"icon"in c&&n(1,i=c.icon)},[r,i,s,l]}class F extends W{constructor(e){super(),M(this,e,wt,kt,q,{title:0,icon:1})}}const Q=[];function Ae(t,e=j){let n;const r=new Set;function i(c){if(q(t,c)&&(t=c,n)){const o=!Q.length;for(const u of r)u[1](),Q.push(u,t);if(o){for(let u=0;u<Q.length;u+=2)Q[u][0](Q[u+1]);Q.length=0}}}function s(c){i(c(t))}function l(c,o=j){const u=[c,o];return r.add(u),r.size===1&&(n=e(i)||j),c(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:i,update:s,subscribe:l}}const lt=Ae("search");function yt(t){let e,n,r,i,s,l,c,o,u,a,g,f;return r=new F({props:{icon:"search"}}),l=new F({props:{icon:"settings-gear"}}),u=new F({props:{icon:"account"}}),{c(){e=k("header"),n=k("button"),L(r.$$.fragment),i=N(),s=k("button"),L(l.$$.fragment),c=N(),o=k("button"),L(u.$$.fragment),h(n,"title","Search"),h(n,"class","svelte-1q7wbbg"),h(s,"title","Settings"),h(s,"class","svelte-1q7wbbg"),h(o,"title","Account"),h(o,"class","svelte-1q7wbbg"),h(e,"role","navigation"),h(e,"class","svelte-1q7wbbg")},m(d,m){P(d,e,m),w(e,n),I(r,n,null),w(e,i),w(e,s),I(l,s,null),w(e,c),w(e,o),I(u,o,null),a=!0,g||(f=[U(n,"click",t[0]("search")),U(s,"click",t[0]("settings")),U(o,"click",t[0]("account"))],g=!0)},p:j,i(d){a||(v(r.$$.fragment,d),v(l.$$.fragment,d),v(u.$$.fragment,d),a=!0)},o(d){b(r.$$.fragment,d),b(l.$$.fragment,d),b(u.$$.fragment,d),a=!1},d(d){d&&E(e),T(r),T(l),T(u),g=!1,re(f)}}}function St(t){return[n=>()=>{lt.set(n)}]}class Et extends W{constructor(e){super(),M(this,e,St,yt,q,{})}}function x(t,e){const n=t.toFixed();return`${n} ${e}${n==="1"?"":"s"} ago`}function qe(t){const e=new Date(t),n=new Date,r=n.getFullYear()-e.getFullYear();if(r)return x(r,"year");const i=n.getMonth()-e.getMonth();if(i)return x(i,"month");const s=(n.getTime()-e.getTime())/6e4;if(s===0)return"just now";if(s<60)return x(s,"minute");const l=s/60;if(l<24)return x(l,"hour");const c=l/24;if(c<7)return x(c,"day");const o=c/7;return o<5?x(o,"week"):"rip"}function te(t){return t.replace(/_/g," ").replace(/source:/g,"").replace(/rating:/g,"")}function Se(t){for(const e of t)if(e!=="ambiguous"&&e!=="general")return e;return null}function Pt(t){let e,n=te(t[0])+"",r,i,s;return{c(){e=k("li"),r=D(n),h(e,"tabindex","0"),h(e,"title","Click to add tag"),h(e,"class","svelte-13935qr")},m(l,c){P(l,e,c),w(e,r),i||(s=U(e,"click",t[2]),i=!0)},p(l,[c]){c&1&&n!==(n=te(l[0])+"")&&G(r,n)},i:j,o:j,d(l){l&&E(e),i=!1,s()}}}function Ct(t,e,n){let{name:r}=e;const i=J(),s=()=>i("click");return t.$$set=l=>{"name"in l&&n(0,r=l.name)},[r,i,s]}class At extends W{constructor(e){super(),M(this,e,Ct,Pt,q,{name:0})}}function Me(t,e,n){const r=t.slice();return r[1]=e[n],r}function We(t){let e,n;return e=new At({props:{name:t[1]}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.name=r[1]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function jt(t){let e,n,r,i=qe(t[0].created_at)+"",s,l,c,o;n=new F({props:{title:"View on original site",icon:"link-external"}});let u=t[0].tags,a=[];for(let f=0;f<u.length;f+=1)a[f]=We(Me(t,u,f));const g=f=>b(a[f],1,1,()=>{a[f]=null});return{c(){e=k("div"),L(n.$$.fragment),r=N(),s=D(i),l=N(),c=k("ul");for(let f=0;f<a.length;f+=1)a[f].c();h(e,"class","summary svelte-opuqs8"),h(c,"class","svelte-opuqs8")},m(f,d){P(f,e,d),I(n,e,null),w(e,r),w(e,s),P(f,l,d),P(f,c,d);for(let m=0;m<a.length;m+=1)a[m].m(c,null);o=!0},p(f,[d]){if((!o||d&1)&&i!==(i=qe(f[0].created_at)+"")&&G(s,i),d&1){u=f[0].tags;let m;for(m=0;m<u.length;m+=1){const A=Me(f,u,m);a[m]?(a[m].p(A,d),v(a[m],1)):(a[m]=We(A),a[m].c(),v(a[m],1),a[m].m(c,null))}for(H(),m=u.length;m<a.length;m+=1)g(m);Y()}},i(f){if(!o){v(n.$$.fragment,f);for(let d=0;d<u.length;d+=1)v(a[d]);o=!0}},o(f){b(n.$$.fragment,f),a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)b(a[d]);o=!1},d(f){f&&E(e),T(n),f&&E(l),f&&E(c),ce(a,f)}}}function It(t,e,n){let{post:r}=e;return t.$$set=i=>{"post"in i&&n(0,r=i.post)},[r]}class Tt extends W{constructor(e){super(),M(this,e,It,jt,q,{post:0})}}function Lt(t){let e,n,r,i,s,l;return{c(){e=k("img"),h(e,"loading","lazy"),h(e,"data-src",n=t[0].sample_url),h(e,"alt",r=t[0].id.toString()),h(e,"style",i=`aspect-ratio: ${t[0].width} / ${t[0].height}`),h(e,"width",s=t[0].width),h(e,"height",l=t[0].height),h(e,"class","svelte-1xnjrgd")},m(c,o){P(c,e,o),t[7](e)},p(c,o){o&1&&n!==(n=c[0].sample_url)&&h(e,"data-src",n),o&1&&r!==(r=c[0].id.toString())&&h(e,"alt",r),o&1&&i!==(i=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&h(e,"style",i),o&1&&s!==(s=c[0].width)&&h(e,"width",s),o&1&&l!==(l=c[0].height)&&h(e,"height",l)},d(c){c&&E(e),t[7](null)}}}function Ot(t){let e,n,r,i,s,l;return{c(){e=k("video"),h(e,"preload","metadata"),h(e,"loading","lazy"),h(e,"data-src",n=t[0].sample_url),h(e,"alt",r=t[0].id.toString()),h(e,"style",i=`aspect-ratio: ${t[0].width} / ${t[0].height}`),h(e,"width",s=t[0].width),h(e,"height",l=t[0].height),e.controls=!0,h(e,"class","svelte-1xnjrgd")},m(c,o){P(c,e,o),t[6](e)},p(c,o){o&1&&n!==(n=c[0].sample_url)&&h(e,"data-src",n),o&1&&r!==(r=c[0].id.toString())&&h(e,"alt",r),o&1&&i!==(i=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&h(e,"style",i),o&1&&s!==(s=c[0].width)&&h(e,"width",s),o&1&&l!==(l=c[0].height)&&h(e,"height",l)},d(c){c&&E(e),t[6](null)}}}function Nt(t){let e,n,r,i,s,l;return{c(){e=k("img"),h(e,"loading","lazy"),h(e,"data-src",n=t[0].sample_url),h(e,"alt",r=t[0].id.toString()),h(e,"style",i=`aspect-ratio: ${t[0].width} / ${t[0].height}`),h(e,"width",s=t[0].width),h(e,"height",l=t[0].height),h(e,"class","svelte-1xnjrgd")},m(c,o){P(c,e,o),t[5](e)},p(c,o){o&1&&n!==(n=c[0].sample_url)&&h(e,"data-src",n),o&1&&r!==(r=c[0].id.toString())&&h(e,"alt",r),o&1&&i!==(i=`aspect-ratio: ${c[0].width} / ${c[0].height}`)&&h(e,"style",i),o&1&&s!==(s=c[0].width)&&h(e,"width",s),o&1&&l!==(l=c[0].height)&&h(e,"height",l)},d(c){c&&E(e),t[5](null)}}}function Be(t){let e,n;return e=new Tt({props:{post:t[0]}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.post=r[0]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function zt(t){let e,n,r,i,s,l;function c(g,f){return g[0].type==="image"?Nt:g[0].type==="video"?Ot:Lt}let o=c(t),u=o(t),a=t[2]&&Be(t);return{c(){e=k("div"),n=k("div"),u.c(),r=N(),a&&a.c(),h(n,"class","content"),h(e,"class","post svelte-1xnjrgd")},m(g,f){P(g,e,f),w(e,n),u.m(n,null),w(e,r),a&&a.m(e,null),i=!0,s||(l=U(n,"click",t[3]),s=!0)},p(g,[f]){o===(o=c(g))&&u?u.p(g,f):(u.d(1),u=o(g),u&&(u.c(),u.m(n,null))),g[2]?a?(a.p(g,f),f&4&&v(a,1)):(a=Be(g),a.c(),v(a,1),a.m(e,null)):a&&(H(),b(a,1,1,()=>{a=null}),Y())},i(g){i||(v(a),i=!0)},o(g){b(a),i=!1},d(g){g&&E(e),u.d(),a&&a.d(),s=!1,l()}}}function Rt(t,e,n){let{post:r}=e,{observer:i}=e,s=!1,l;function c(){n(2,s=!s)}function o(g){ee[g?"unshift":"push"](()=>{l=g,n(1,l)})}function u(g){ee[g?"unshift":"push"](()=>{l=g,n(1,l)})}function a(g){ee[g?"unshift":"push"](()=>{l=g,n(1,l)})}return t.$$set=g=>{"post"in g&&n(0,r=g.post),"observer"in g&&n(4,i=g.observer)},t.$$.update=()=>{t.$$.dirty&18&&l&&i.observe(l)},[r,l,s,c,i,o,u,a]}class qt extends W{constructor(e){super(),M(this,e,Rt,zt,q,{post:0,observer:4})}}function De(t,e,n){const r=t.slice();return r[2]=e[n],r}function Fe(t){let e,n;return e=new qt({props:{post:t[2],observer:t[1]}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.post=r[2]),i&2&&(s.observer=r[1]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Mt(t){let e,n,r=t[0],i=[];for(let l=0;l<r.length;l+=1)i[l]=Fe(De(t,r,l));const s=l=>b(i[l],1,1,()=>{i[l]=null});return{c(){e=k("ol");for(let l=0;l<i.length;l+=1)i[l].c();h(e,"class","page svelte-5hdzo")},m(l,c){P(l,e,c);for(let o=0;o<i.length;o+=1)i[o].m(e,null);n=!0},p(l,[c]){if(c&3){r=l[0];let o;for(o=0;o<r.length;o+=1){const u=De(l,r,o);i[o]?(i[o].p(u,c),v(i[o],1)):(i[o]=Fe(u),i[o].c(),v(i[o],1),i[o].m(e,null))}for(H(),o=r.length;o<i.length;o+=1)s(o);Y()}},i(l){if(!n){for(let c=0;c<r.length;c+=1)v(i[c]);n=!0}},o(l){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)b(i[c]);n=!1},d(l){l&&E(e),ce(i,l)}}}function Wt(t,e,n){let{posts:r}=e,{observer:i}=e;return t.$$set=s=>{"posts"in s&&n(0,r=s.posts),"observer"in s&&n(1,i=s.observer)},[r,i]}class Bt extends W{constructor(e){super(),M(this,e,Wt,Mt,q,{posts:0,observer:1})}}function Dt(t){let e,n,r,i,s,l,c;return n=new F({props:{icon:t[0]}}),{c(){e=k("button"),L(n.$$.fragment),r=N(),i=D(t[1]),h(e,"title",t[2]),h(e,"class","svelte-11z6t3c")},m(o,u){P(o,e,u),I(n,e,null),w(e,r),w(e,i),s=!0,l||(c=U(e,"click",t[4]),l=!0)},p(o,[u]){const a={};u&1&&(a.icon=o[0]),n.$set(a),(!s||u&2)&&G(i,o[1]),(!s||u&4)&&h(e,"title",o[2])},i(o){s||(v(n.$$.fragment,o),s=!0)},o(o){b(n.$$.fragment,o),s=!1},d(o){o&&E(e),T(n),l=!1,c()}}}function Ft(t,e,n){let{icon:r}=e,{text:i}=e,{title:s}=e;const l=J(),c=()=>l("click");return t.$$set=o=>{"icon"in o&&n(0,r=o.icon),"text"in o&&n(1,i=o.text),"title"in o&&n(2,s=o.title)},[r,i,s,l,c]}class Ut extends W{constructor(e){super(),M(this,e,Ft,Dt,q,{icon:0,text:1,title:2})}}const ne=t=>t/1e6>=1?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString();function Ht(t){let e,n,r,i;return{c(){e=k("i"),h(e,"title",t[0]),h(e,"class",n=Oe(`codicon codicon-${t[1]} ${t[2]?"active":""}`)+" svelte-htt49j"),h(e,"tabindex","0")},m(s,l){P(s,e,l),r||(i=U(e,"click",t[4]),r=!0)},p(s,[l]){l&1&&h(e,"title",s[0]),l&6&&n!==(n=Oe(`codicon codicon-${s[1]} ${s[2]?"active":""}`)+" svelte-htt49j")&&h(e,"class",n)},i:j,o:j,d(s){s&&E(e),r=!1,i()}}}function Yt(t,e,n){let{title:r=void 0}=e,{icon:i}=e,{active:s}=e;const l=J(),c=()=>l("click");return t.$$set=o=>{"title"in o&&n(0,r=o.title),"icon"in o&&n(1,i=o.icon),"active"in o&&n(2,s=o.active)},[r,i,s,l,c]}class Kt extends W{constructor(e){super(),M(this,e,Yt,Ht,q,{title:0,icon:1,active:2})}}function Gt(t){let e,n;return e=new F({props:{icon:"star-full"}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Vt(t){let e,n;return e=new F({props:{icon:"link"}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Xt(t){let e,n;return e=new F({props:{icon:"unverified"}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Zt(t){let e,n;return e=new F({props:{icon:"info"}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Jt(t){let e,n;return e=new F({props:{icon:"folder"}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Qt(t){let e,n;return e=new F({props:{icon:"person"}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function xt(t){let e,n;return e=new F({props:{icon:"edit"}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function en(t){let e,n,r,i;const s=[xt,Qt,Jt,Zt,Xt,Vt,Gt],l=[];function c(o,u){return o[0]==="artist"?0:o[0]==="character"?1:o[0]==="copyright"?2:o[0]==="metadata"?3:o[0]==="rating"?4:o[0]==="source"?5:o[0]==="supertag"?6:-1}return~(e=c(t))&&(n=l[e]=s[e](t)),{c(){n&&n.c(),r=ue()},m(o,u){~e&&l[e].m(o,u),P(o,r,u),i=!0},p(o,[u]){let a=e;e=c(o),e!==a&&(n&&(H(),b(l[a],1,1,()=>{l[a]=null}),Y()),~e?(n=l[e],n||(n=l[e]=s[e](o),n.c()),v(n,1),n.m(r.parentNode,r)):n=null)},i(o){i||(v(n),i=!0)},o(o){b(n),i=!1},d(o){~e&&l[e].d(o),o&&E(r)}}}function tn(t,e,n){let{type:r}=e;return t.$$set=i=>{"type"in i&&n(0,r=i.type)},[r]}class ot extends W{constructor(e){super(),M(this,e,tn,en,q,{type:0})}}const Ee={"+":"plus","-":"circle-slash","~":"record"},Ue={"+":"Included. Tags will be included in the search.","-":"Blocked. Tags will be blocked.","~":"Optional. At least one of all optional tags will on each post."},be=Object.keys(Ee);function He(t,e,n){const r=t.slice();return r[12]=e[n],r}function nn(t){let e,n=t[15].message+"",r;return{c(){e=k("p"),r=D(n),gt(e,"color","red")},m(i,s){P(i,e,s),w(e,r)},p(i,s){s&4&&n!==(n=i[15].message+"")&&G(r,n)},i:j,o:j,d(i){i&&E(e)}}}function rn(t){let e,n,r=t[11]&&t[11].length&&Ye(t);return{c(){r&&r.c(),e=ue()},m(i,s){r&&r.m(i,s),P(i,e,s),n=!0},p(i,s){i[11]&&i[11].length?r?(r.p(i,s),s&4&&v(r,1)):(r=Ye(i),r.c(),v(r,1),r.m(e.parentNode,e)):r&&(H(),b(r,1,1,()=>{r=null}),Y())},i(i){n||(v(r),n=!0)},o(i){b(r),n=!1},d(i){r&&r.d(i),i&&E(e)}}}function Ye(t){let e,n,r=t[11],i=[];for(let l=0;l<r.length;l+=1)i[l]=Ke(He(t,r,l));const s=l=>b(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=ue()},m(l,c){for(let o=0;o<i.length;o+=1)i[o].m(l,c);P(l,e,c),n=!0},p(l,c){if(c&21){r=l[11];let o;for(o=0;o<r.length;o+=1){const u=He(l,r,o);i[o]?(i[o].p(u,c),v(i[o],1)):(i[o]=Ke(u),i[o].c(),v(i[o],1),i[o].m(e.parentNode,e))}for(H(),o=r.length;o<i.length;o+=1)s(o);Y()}},i(l){if(!n){for(let c=0;c<r.length;c+=1)v(i[c]);n=!0}},o(l){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)b(i[c]);n=!1},d(l){ce(i,l),l&&E(e)}}}function Ke(t){let e,n,r,i,s=te(t[12].name)+"",l,c,o,u,a=ne(t[12].count)+"",g,f,d,m,A;n=new ot({props:{type:Se(t[12].types)}});function O(){return t[9](t[12])}return{c(){e=k("li"),L(n.$$.fragment),r=N(),i=k("span"),l=D(s),o=N(),u=k("span"),g=D(a),f=N(),h(i,"title",c=t[12].name),h(i,"class","tag-name svelte-cazi4d"),h(u,"class","tag-count"),h(e,"tabindex","0"),h(e,"class","svelte-cazi4d")},m(S,p){P(S,e,p),I(n,e,null),w(e,r),w(e,i),w(i,l),w(e,o),w(e,u),w(u,g),w(e,f),d=!0,m||(A=U(e,"click",O),m=!0)},p(S,p){t=S;const C={};p&4&&(C.type=Se(t[12].types)),n.$set(C),(!d||p&4)&&s!==(s=te(t[12].name)+"")&&G(l,s),(!d||p&4&&c!==(c=t[12].name))&&h(i,"title",c),(!d||p&4)&&a!==(a=ne(t[12].count)+"")&&G(g,a)},i(S){d||(v(n.$$.fragment,S),d=!0)},o(S){b(n.$$.fragment,S),d=!1},d(S){S&&E(e),T(n),m=!1,A()}}}function ln(t){let e;return{c(){e=k("p"),e.textContent="...waiting"},m(n,r){P(n,e,r)},p:j,i:j,o:j,d(n){n&&E(e)}}}function on(t){let e,n,r,i,s,l,c,o,u,a,g,f,d,m,A,O;n=new F({props:{icon:"search"}}),l=new F({props:{icon:Ee[t[3]],title:Ue[t[3]]}}),l.$on("click",t[7]),o=new Kt({props:{icon:"whole-word",title:"Toggle exact search term matching",active:!t[1]}}),o.$on("click",t[8]);let S={ctx:t,current:null,token:null,hasCatch:!0,pending:ln,then:rn,catch:nn,value:11,error:15,blocks:[,,,]};return Re(g=t[2],S),{c(){e=k("div"),L(n.$$.fragment),r=N(),i=k("input"),s=N(),L(l.$$.fragment),c=N(),L(o.$$.fragment),u=N(),a=k("ol"),S.block.c(),f=N(),d=k("div"),d.innerHTML='<span class="hint svelte-cazi4d">Learn more about tags</span>',h(i,"type","text"),h(i,"class","svelte-cazi4d"),h(d,"class","hint-container svelte-cazi4d"),h(a,"class","svelte-cazi4d"),h(e,"class","searchbar svelte-cazi4d")},m(p,C){P(p,e,C),I(n,e,null),w(e,r),w(e,i),Ne(i,t[0]),w(e,s),I(l,e,null),w(e,c),I(o,e,null),w(e,u),w(e,a),S.block.m(a,S.anchor=null),S.mount=()=>a,S.anchor=f,w(a,f),w(a,d),m=!0,A||(O=U(i,"input",t[6]),A=!0)},p(p,[C]){t=p,C&1&&i.value!==t[0]&&Ne(i,t[0]);const z={};C&8&&(z.icon=Ee[t[3]]),C&8&&(z.title=Ue[t[3]]),l.$set(z);const y={};C&2&&(y.active=!t[1]),o.$set(y),S.ctx=t,C&4&&g!==(g=t[2])&&Re(g,S)||bt(S,t,C)},i(p){m||(v(n.$$.fragment,p),v(l.$$.fragment,p),v(o.$$.fragment,p),v(S.block),m=!0)},o(p){b(n.$$.fragment,p),b(l.$$.fragment,p),b(o.$$.fragment,p);for(let C=0;C<3;C+=1){const z=S.blocks[C];b(z)}m=!1},d(p){p&&E(e),T(n),T(l),T(o),S.block.d(),S.token=null,S=null,A=!1,O()}}}function sn(t,e,n){const r=J();let i,s,l="",c=!0,o="+";async function u(m,A){const O=m?`*${A}*`:A,S=await fetch(`https://r34-json.herokuapp.com/v2/tags?limit=20&sort=count&name=${O.replaceAll(" ","_")}`,{signal:i.signal}),p=await S.json();if(S.ok){if(Array.isArray(p))return p;throw p.message?new Error(p.message):new Error("Cannot display tag suggestions")}else throw new Error("Failed to get tag suggestions")}function a(){l=this.value,n(0,l)}const g=()=>{const m=(be.indexOf(o)+1)%be.length;n(3,o=be[m])},f=()=>{n(1,c=!c)},d=m=>{var A;n(0,l=""),r("pick",m),(A=document.activeElement)==null||A.blur()};return t.$$.update=()=>{t.$$.dirty&35&&(i!==void 0&&i.abort("Newer search term entered"),l!==""&&(n(5,i=new AbortController),n(2,s=u(c,l))))},[l,c,s,o,r,i,a,g,f,d]}class cn extends W{constructor(e){super(),M(this,e,sn,on,q,{})}}function un(t){let e,n,r,i=te(t[0].name)+"",s,l,c=ne(t[0].count)+"",o,u,a,g,f;return n=new ot({props:{type:t[2]}}),{c(){e=k("li"),L(n.$$.fragment),r=N(),s=D(i),l=D(`
  (`),o=D(c),u=D(")"),h(e,"tabindex","0"),h(e,"title","Click to remove tag"),h(e,"class","svelte-zci81g"),_t(e,"no-icon",t[2]===null)},m(d,m){P(d,e,m),I(n,e,null),w(e,r),w(e,s),w(e,l),w(e,o),w(e,u),a=!0,g||(f=U(e,"click",t[3]),g=!0)},p(d,[m]){(!a||m&1)&&i!==(i=te(d[0].name)+"")&&G(s,i),(!a||m&1)&&c!==(c=ne(d[0].count)+"")&&G(o,c)},i(d){a||(v(n.$$.fragment,d),a=!0)},o(d){b(n.$$.fragment,d),a=!1},d(d){d&&E(e),T(n),g=!1,f()}}}function an(t,e,n){let{tag:r}=e;const i=J(),s=Se(r.types),l=()=>i("click");return t.$$set=c=>{"tag"in c&&n(0,r=c.tag)},[r,i,s,l]}class fn extends W{constructor(e){super(),M(this,e,an,un,q,{tag:0})}}function dn(t){let e;return{c(){e=k("div")},m(n,r){P(n,e,r),t[1](e)},p:j,i:j,o:j,d(n){n&&E(e),t[1](null)}}}function gn(t,e,n){const r=J(),i=new IntersectionObserver(c=>{c[0].isIntersecting&&(console.debug("Triggered infinite loading"),r("visible"))},{rootMargin:"1250px"});let s;function l(c){ee[c?"unshift":"push"](()=>{s=c,n(0,s)})}return t.$$.update=()=>{t.$$.dirty&1&&(i.disconnect(),s&&i.observe(s))},[s,l]}class _n extends W{constructor(e){super(),M(this,e,gn,dn,q,{})}}function hn(){const t=[],{subscribe:e,update:n}=Ae(t);return{subscribe:e,add:r=>n(i=>{const s=i.findIndex(l=>l.name==r.name);return s===-1?i.push(r):i[s]=r,i}),removeByIndex:r=>n(i=>(i.splice(r,1),i))}}var $e=hn(),mn="/kurosearch/assets/shironeko-confused.4071d5b2.png";function pn(t){let e,n,r,i,s;return{c(){e=k("div"),n=k("img"),i=N(),s=k("span"),s.textContent="No results found",nt(n.src,r=mn)||h(n,"src",r),h(n,"alt","No results."),h(s,"class","svelte-10fem3h"),h(e,"class","svelte-10fem3h")},m(l,c){P(l,e,c),w(e,n),w(e,i),w(e,s)},p:j,i:j,o:j,d(l){l&&E(e)}}}class vn extends W{constructor(e){super(),M(this,e,null,pn,q,{})}}var bn="/kurosearch/assets/shironeko-x.c28cad00.png";function $n(t){let e,n,r,i,s;return{c(){e=k("div"),n=k("img"),i=N(),s=k("span"),s.textContent="You have reached the end",nt(n.src,r=bn)||h(n,"src",r),h(n,"alt","No results."),h(s,"class","svelte-1rtbqa7"),h(e,"class","svelte-1rtbqa7")},m(l,c){P(l,e,c),w(e,n),w(e,i),w(e,s)},p:j,i:j,o:j,d(l){l&&E(e)}}}class kn extends W{constructor(e){super(),M(this,e,null,$n,q,{})}}function Ge(t,e,n){const r=t.slice();return r[15]=e[n],r}function Ve(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function Xe(t){let e,n;function r(){return t[10](t[20])}return e=new fn({props:{tag:t[18]}}),e.$on("click",r),{c(){L(e.$$.fragment)},m(i,s){I(e,i,s),n=!0},p(i,s){t=i;const l={};s&32&&(l.tag=t[18]),e.$set(l)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){T(e,i)}}}function wn(t){let e,n;return e=new vn({}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},p:j,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function yn(t){let e,n=ne(t[0])+"",r,i,s,l,c,o,u,a,g,f=t[1],d=[];for(let p=0;p<f.length;p+=1)d[p]=Ze(Ge(t,f,p));const m=p=>b(d[p],1,1,()=>{d[p]=null}),A=[En,Sn],O=[];function S(p,C){return p[1].length<p[4]?0:1}return o=S(t),u=O[o]=A[o](t),{c(){e=k("p"),r=D(n),i=D(" results"),s=N(),l=k("ol");for(let p=0;p<d.length;p+=1)d[p].c();c=N(),u.c(),a=ue(),h(e,"class","count svelte-1abri6u"),h(l,"class","svelte-1abri6u")},m(p,C){P(p,e,C),w(e,r),w(e,i),P(p,s,C),P(p,l,C);for(let z=0;z<d.length;z+=1)d[z].m(l,null);P(p,c,C),O[o].m(p,C),P(p,a,C),g=!0},p(p,C){if((!g||C&1)&&n!==(n=ne(p[0])+"")&&G(r,n),C&66){f=p[1];let y;for(y=0;y<f.length;y+=1){const ae=Ge(p,f,y);d[y]?(d[y].p(ae,C),v(d[y],1)):(d[y]=Ze(ae),d[y].c(),v(d[y],1),d[y].m(l,null))}for(H(),y=f.length;y<d.length;y+=1)m(y);Y()}let z=o;o=S(p),o===z?O[o].p(p,C):(H(),b(O[z],1,1,()=>{O[z]=null}),Y(),u=O[o],u?u.p(p,C):(u=O[o]=A[o](p),u.c()),v(u,1),u.m(a.parentNode,a))},i(p){if(!g){for(let C=0;C<f.length;C+=1)v(d[C]);v(u),g=!0}},o(p){d=d.filter(Boolean);for(let C=0;C<d.length;C+=1)b(d[C]);b(u),g=!1},d(p){p&&E(e),p&&E(s),p&&E(l),ce(d,p),p&&E(c),O[o].d(p),p&&E(a)}}}function Ze(t){let e,n;return e=new Bt({props:{posts:t[15],observer:t[6]}}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},p(r,i){const s={};i&2&&(s.posts=r[15]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Sn(t){let e,n;return e=new kn({}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},p:j,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function En(t){let e,n;return e=new _n({}),e.$on("visible",t[12]),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},p:j,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Pn(t){let e,n,r,i,s,l,c,o,u,a,g,f,d,m,A,O,S,p,C;r=new cn({}),r.$on("pick",t[9]);let z=[...t[5]],y=[];for(let $=0;$<z.length;$+=1)y[$]=Xe(Ve(t,z,$));const ae=$=>b(y[$],1,1,()=>{y[$]=null});f=new Ut({props:{title:"Click to search with active tags",icon:"search",text:"Search"}}),f.$on("click",t[7]);const je=[yn,wn],V=[];function Ie($,R){return $[0]?0:$[0]===0?1:-1}return~(m=Ie(t))&&(A=V[m]=je[m](t)),{c(){e=k("h1"),e.textContent="kurosearch",n=N(),L(r.$$.fragment),i=N(),s=k("ul");for(let $=0;$<y.length;$+=1)y[$].c();l=N(),c=k("div"),o=k("select"),u=k("option"),u.textContent="New",a=k("option"),a.textContent="Popular",g=N(),L(f.$$.fragment),d=N(),A&&A.c(),O=ue(),h(e,"class","svelte-1abri6u"),h(s,"class","svelte-1abri6u"),u.__value="id",u.value=u.__value,a.__value="score",a.value=a.__value,h(o,"class","svelte-1abri6u"),t[2]===void 0&&se(()=>t[11].call(o)),h(c,"class","sort-row svelte-1abri6u")},m($,R){P($,e,R),P($,n,R),I(r,$,R),P($,i,R),P($,s,R);for(let X=0;X<y.length;X+=1)y[X].m(s,null);P($,l,R),P($,c,R),w(c,o),w(o,u),w(o,a),pe(o,t[2]),w(c,g),I(f,c,null),P($,d,R),~m&&V[m].m($,R),P($,O,R),S=!0,p||(C=U(o,"change",t[11]),p=!0)},p($,[R]){if(R&32){z=[...$[5]];let B;for(B=0;B<z.length;B+=1){const Te=Ve($,z,B);y[B]?(y[B].p(Te,R),v(y[B],1)):(y[B]=Xe(Te),y[B].c(),v(y[B],1),y[B].m(s,null))}for(H(),B=z.length;B<y.length;B+=1)ae(B);Y()}R&4&&pe(o,$[2]);let X=m;m=Ie($),m===X?~m&&V[m].p($,R):(A&&(H(),b(V[X],1,1,()=>{V[X]=null}),Y()),~m?(A=V[m],A?A.p($,R):(A=V[m]=je[m]($),A.c()),v(A,1),A.m(O.parentNode,O)):A=null)},i($){if(!S){v(r.$$.fragment,$);for(let R=0;R<z.length;R+=1)v(y[R]);v(f.$$.fragment,$),v(A),S=!0}},o($){b(r.$$.fragment,$),y=y.filter(Boolean);for(let R=0;R<y.length;R+=1)b(y[R]);b(f.$$.fragment,$),b(A),S=!1},d($){$&&E(e),$&&E(n),T(r,$),$&&E(i),$&&E(s),ce(y,$),$&&E(l),$&&E(c),T(f),$&&E(d),~m&&V[m].d($),$&&E(O),p=!1,C()}}}const Je=20;function Cn(t,e,n){let r,i;me(t,$e,S=>n(5,i=S));const s=new IntersectionObserver(S=>{for(const p of S)p.target.src=p.isIntersecting?p.target.getAttribute("data-src"):""},{rootMargin:"1250px"});let l,c=[],o="id",u=null,a=0;function g(){n(1,c=[]),n(0,u=null),l!==void 0&&l.abort("New search triggered"),n(3,a=0),l=new AbortController,f(n(3,a++,a))}async function f(S){const p=[...i.map(y=>y.name),`sort:${o}:desc`].filter(y=>y!=null&&y!=="").map(encodeURIComponent).join("+"),C=await fetch(`https://r34-json.herokuapp.com/v2/posts?limit=${Je}&pid=${S}&tags=${p}`,{signal:l.signal}),z=await C.json();if(C.ok)return n(0,u=z.count),n(1,c=[...c,z.posts]),z;throw new Error("fuck")}const d=S=>$e.add(S.detail),m=S=>$e.removeByIndex(S);function A(){o=rt(this),n(2,o)}const O=()=>f(n(3,a++,a));return t.$$.update=()=>{t.$$.dirty&1&&n(4,r=u/Je)},[u,c,o,a,r,i,s,g,f,d,m,A,O]}class An extends W{constructor(e){super(),M(this,e,Cn,Pn,q,{})}}const Pe=Ae("dark");function jn(t){let e,n,r,i,s;return{c(){e=k("select"),n=k("option"),n.textContent="Dark",r=k("option"),r.textContent="Light",n.__value="dark",n.value=n.__value,r.__value="light",r.value=r.__value,t[0]===void 0&&se(()=>t[1].call(e))},m(l,c){P(l,e,c),w(e,n),w(e,r),pe(e,t[0]),i||(s=U(e,"change",t[1]),i=!0)},p(l,[c]){c&1&&pe(e,l[0])},i:j,o:j,d(l){l&&E(e),i=!1,s()}}}function In(t,e,n){let r;me(t,Pe,s=>n(0,r=s));function i(){r=rt(this),Pe.set(r)}return[r,i]}class Tn extends W{constructor(e){super(),M(this,e,In,jn,q,{})}}function Ln(t){let e;return{c(){e=k("p"),e.textContent="You got lost..."},m(n,r){P(n,e,r)},i:j,o:j,d(n){n&&E(e)}}}function On(t){let e,n;return e=new Tn({}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Nn(t){let e;return{c(){e=k("p"),e.textContent="account"},m(n,r){P(n,e,r)},i:j,o:j,d(n){n&&E(e)}}}function zn(t){let e,n;return e=new An({}),{c(){L(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){T(e,r)}}}function Rn(t){let e,n,r,i,s,l,c,o;e=new Et({});const u=[zn,Nn,On,Ln],a=[];function g(f,d){return f[0]==="search"?0:f[0]==="account"?1:f[0]==="settings"?2:3}return i=g(t),s=a[i]=u[i](t),{c(){L(e.$$.fragment),n=N(),r=k("main"),s.c(),l=N(),c=k("footer"),c.textContent="Copyright \xA9 2022 kurozenzen",h(r,"class","svelte-lakodq"),h(c,"class","svelte-lakodq")},m(f,d){I(e,f,d),P(f,n,d),P(f,r,d),a[i].m(r,null),P(f,l,d),P(f,c,d),o=!0},p(f,[d]){let m=i;i=g(f),i!==m&&(H(),b(a[m],1,1,()=>{a[m]=null}),Y(),s=a[i],s||(s=a[i]=u[i](f),s.c()),v(s,1),s.m(r,null))},i(f){o||(v(e.$$.fragment,f),v(s),o=!0)},o(f){b(e.$$.fragment,f),b(s),o=!1},d(f){T(e,f),f&&E(n),f&&E(r),a[i].d(),f&&E(l),f&&E(c)}}}function qn(t,e,n){let r,i;me(t,Pe,l=>n(1,r=l)),me(t,lt,l=>n(0,i=l));const s=l=>l==="dark"?"light":"dark";return t.$$.update=()=>{t.$$.dirty&2&&document.body.classList.replace(s(r),r)},[i,r]}class Mn extends W{constructor(e){super(),M(this,e,qn,Rn,q,{})}}try{self["workbox:window:6.5.2"]&&_()}catch{}function Qe(t,e){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(i){n(i.data)},t.postMessage(e,[r.port2])})}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xe(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bn(t,e){var n;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=function(i,s){if(i){if(typeof i=="string")return xe(i,s);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?xe(i,s):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=t[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.2"]&&_()}catch{}var ke=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function we(t,e){var n=location.href;return new URL(t,n).href===new URL(e,n).href}var ie=function(t,e){this.type=t,Object.assign(this,e)};function ge(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function Dn(){}var Fn={type:"SKIP_WAITING"};function et(t,e){if(!e)return t&&t.then?t.then(Dn):Promise.resolve()}var Un=function(t){var e,n;function r(c,o){var u,a;return o===void 0&&(o={}),(u=t.call(this)||this).nn={},u.tn=0,u.rn=new ke,u.en=new ke,u.on=new ke,u.un=0,u.an=new Set,u.cn=function(){var g=u.fn,f=g.installing;u.tn>0||!we(f.scriptURL,u.sn.toString())||performance.now()>u.un+6e4?(u.vn=f,g.removeEventListener("updatefound",u.cn)):(u.hn=f,u.an.add(f),u.rn.resolve(f)),++u.tn,f.addEventListener("statechange",u.ln)},u.ln=function(g){var f=u.fn,d=g.target,m=d.state,A=d===u.vn,O={sw:d,isExternal:A,originalEvent:g};!A&&u.mn&&(O.isUpdate=!0),u.dispatchEvent(new ie(m,O)),m==="installed"?u.wn=self.setTimeout(function(){m==="installed"&&f.waiting===d&&u.dispatchEvent(new ie("waiting",O))},200):m==="activating"&&(clearTimeout(u.wn),A||u.en.resolve(d))},u.dn=function(g){var f=u.hn,d=f!==navigator.serviceWorker.controller;u.dispatchEvent(new ie("controlling",{isExternal:d,originalEvent:g,sw:f,isUpdate:u.mn})),d||u.on.resolve(f)},u.gn=(a=function(g){var f=g.data,d=g.ports,m=g.source;return ge(u.getSW(),function(){u.an.has(m)&&u.dispatchEvent(new ie("message",{data:f,originalEvent:g,ports:d,sw:m}))})},function(){for(var g=[],f=0;f<arguments.length;f++)g[f]=arguments[f];try{return Promise.resolve(a.apply(this,g))}catch(d){return Promise.reject(d)}}),u.sn=c,u.nn=o,navigator.serviceWorker.addEventListener("message",u.gn),u}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,s,l=r.prototype;return l.register=function(c){var o=(c===void 0?{}:c).immediate,u=o!==void 0&&o;try{var a=this;return function(g,f){var d=g();return d&&d.then?d.then(f):f(d)}(function(){if(!u&&document.readyState!=="complete")return et(new Promise(function(g){return window.addEventListener("load",g)}))},function(){return a.mn=Boolean(navigator.serviceWorker.controller),a.yn=a.pn(),ge(a.bn(),function(g){a.fn=g,a.yn&&(a.hn=a.yn,a.en.resolve(a.yn),a.on.resolve(a.yn),a.yn.addEventListener("statechange",a.ln,{once:!0}));var f=a.fn.waiting;return f&&we(f.scriptURL,a.sn.toString())&&(a.hn=f,Promise.resolve().then(function(){a.dispatchEvent(new ie("waiting",{sw:f,wasWaitingBeforeRegister:!0}))}).then(function(){})),a.hn&&(a.rn.resolve(a.hn),a.an.add(a.hn)),a.fn.addEventListener("updatefound",a.cn),navigator.serviceWorker.addEventListener("controllerchange",a.dn),a.fn})})}catch(g){return Promise.reject(g)}},l.update=function(){try{return this.fn?et(this.fn.update()):void 0}catch(c){return Promise.reject(c)}},l.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},l.messageSW=function(c){try{return ge(this.getSW(),function(o){return Qe(o,c)})}catch(o){return Promise.reject(o)}},l.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Qe(this.fn.waiting,Fn)},l.pn=function(){var c=navigator.serviceWorker.controller;return c&&we(c.scriptURL,this.sn.toString())?c:void 0},l.bn=function(){try{var c=this;return function(o,u){try{var a=o()}catch(g){return u(g)}return a&&a.then?a.then(void 0,u):a}(function(){return ge(navigator.serviceWorker.register(c.sn,c.nn),function(o){return c.un=performance.now(),o})},function(o){throw o})}catch(o){return Promise.reject(o)}},i=r,(s=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&Wn(i.prototype,s),r}(function(){function t(){this.Pn=new Map}var e=t.prototype;return e.addEventListener=function(n,r){this.Sn(n).add(r)},e.removeEventListener=function(n,r){this.Sn(n).delete(r)},e.dispatchEvent=function(n){n.target=this;for(var r,i=Bn(this.Sn(n.type));!(r=i()).done;)(0,r.value)(n)},e.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},t}());function Hn(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisterError:s}=t;let l;const c=async(o=!0)=>{};return"serviceWorker"in navigator&&(l=new Un("/kurosearch/sw.js",{scope:"/kurosearch/",type:"classic"}),l.addEventListener("activated",o=>{o.isUpdate?window.location.reload():r==null||r()}),l.register({immediate:e}).then(o=>{i==null||i(o)}).catch(o=>{s==null||s(o)})),c}new Mn({target:document.getElementById("app")});Hn();
